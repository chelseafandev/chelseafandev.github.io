
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta name="google-site-verification" content="Ojz5tvI9WuN6pn2n6i1E_mOkMyRiSSOp4KXuYSyaUjs">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="ì²¼ì‹œíŒ¬ ê°œë°œì ì‘ì—… ê³µê°„">
    <title>boost strandë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ  - ì²¼ì‹œíŒ¬ ê°œë°œì ì‘ì—… ê³µê°„</title>
    <meta name="author" content="ì²¼ì‹œíŒ¬ê°œë°œì">
    
    
        <link rel="icon" href="https://chelseafandev.github.io/assets/images/chelsea_favicon.png">
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ì²¼ì‹œíŒ¬ê°œë°œì","sameAs":[],"image":"profile_github.jpeg"},"articleBody":"ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” boostì—ì„œ ì œê³µí•˜ëŠ” strandì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\n\nstrandì— ëŒ€í•œ ì„¤ëª…ì€ How strands work and why you should use them ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë‹ˆ ì°¸ê³ ë¶€íƒë“œë¦¬ë©°, ê¸€ í•˜ë‹¨ì—ëŠ” strand ë™ì‘ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ ì˜ˆì œ ì½”ë“œë¥¼ ì²¨ë¶€í•˜ì˜€ìœ¼ë‹ˆ ì§ì ‘ í…ŒìŠ¤íŠ¸ í•´ë³´ì‹œë©° strandì˜ ì‚¬ìš©ë²•ê³¼ í•„ìš”ì„±ì— ëŒ€í•´ ë‹¤ì‹œ í•œë²ˆ ì •ë¦¬í•˜ëŠ” ì‹œê°„ì„ ê°–ìœ¼ë©´ ì¢‹ì„ê²ƒê°™ë„¤ìš”ğŸ˜\n\n\n\n\n\n\nHow strands work and why you should use themë§Œì•½ ì—¬ëŸ¬ë¶„ì´ Boost Asioë¥¼ ì‚¬ìš©í•´ë³¸ì ì´ ìˆë‹¤ë©´, í‹€ë¦¼ì—†ì´ strands ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•´ë´¤ê±°ë‚˜ ìµœì†Œí•œ ë§ˆì£¼ì¹˜ê¸°ë¼ë„ í•´ë´¤ì„ ê²ƒì…ë‹ˆë‹¤.\n\nIf you ever used Boost Asio, certainly you used or at least looked at strands.\n\nstrands ì‚¬ìš©ì„ í†µí•´ ì–»ì„ ìˆ˜ ìˆëŠ” ì£¼ìš”í•œ ì´ì ì€ ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë‹¨ìˆœí™”í•´ì¤€ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ìˆœí™”ëŠ” strandë¥¼ í†µí•´ ì‹¤í–‰ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ëŒ€í•´ì„œëŠ” ëª…ì‹œì ì¸ ë™ê¸°í™”ê°€ í•„ìš”í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— ê°€ëŠ¥í•©ë‹ˆë‹¤. strandëŠ” 2ê°œì˜ í•¸ë“¤ëŸ¬ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ì§€ì•ŠìŒì„ ë³´ì¥í•©ë‹ˆë‹¤.\n\nThe main benefit of using strands is to simplify your code, since handlers that go through a strand donâ€™t need explicit synchronization. A strand guarantees that no two handlers execute concurrently.\n\në§Œì•½ ì—¬ëŸ¬ë¶„ì´ ë‹¨ì§€ í•˜ë‚˜ì˜ I/O ì“°ë ˆë“œ(boost ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸¡ë©´ì—ì„œ ì„¤ëª…í•˜ìë©´ io_context::run()ì„ í˜¸ì¶œí•˜ëŠ” ì“°ë ˆë“œê°€ ì˜¤ì§ í•˜ë‚˜ì¸ ê²½ìš°ë¥¼ ì˜ë¯¸í•¨)ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ë™ê¸°í™”ë¥¼ ê±±ì •í•  í•„ìš”ê°€ ì „í˜€ ì—†ìŠµë‹ˆë‹¤. ê·¸ê²ƒì´ ì´ë¯¸ ì•”ë¬µì ì¸ strandì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ëŸ¬ë¶„ì´ ë” ë§ì€ I/O ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ìˆœê°„ì´ ì˜¨ë‹¤ë©´ I/O ì“°ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ëŒ€í•´ ëª…ì‹œì ì¸ ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•˜ê±°ë‚˜ strandsë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.\n\nIf you use just one I/O thread (or in Boost terms, just one thread calling io_context::run), then you donâ€™t need synchronization anyway. That is already an implicit strand. But the moment you want to ramp up and have more I/O threads, you need to either deal with explicit synchronization for your handlers, or use strands.\n\nì—¬ëŸ¬ë¶„ì´ ì •ì˜í•œ í•¸ë“¤ëŸ¬ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë™ê¸°í™”í•˜ëŠ” ê²ƒì€ ëª…ë°±íˆ ê°€ëŠ¥í•œ ì¼ì´ì§€ë§Œ ì´ê²ƒì€ ë¶ˆí•„ìš”í•˜ê²Œ ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œì— ë³µì¡ì„±ì„ ë¶€ì—¬í•˜ì—¬ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì˜ ëª…ì‹œì  ë™ê¸°í™”ê°€ ê°–ëŠ” ë˜ ë‹¤ë¥¸ ì˜í–¥ë„ ì¤‘ í•˜ë‚˜ëŠ” ì—¬ëŸ¬ë¶„ì´ ì •ë§ ì‹ ì¤‘í•˜ê²Œ ê³ ë ¤í•˜ì§€ ì•ŠëŠ” ì´ìƒ ë¶ˆí•„ìš”í•œ ë¸”ë¡ êµ¬ê°„ì˜ ë°œìƒì´ ë¶ˆê°€í”¼í•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.\n\nExplicitly synchronizing your handlers is certainly possible, but you will be unnecessarily introducing complexity to your code which will certainly lead to bugs. One other effect of explicit handler synchronization is that unless you think really hard, youâ€™ll very likely introduce unnecessary blocking.\n\nstrandsëŠ” ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œì™€ í•¸ë“¤ëŸ¬ì˜ ì‹¤í–‰ ì‚¬ì´ì— ë˜ ë‹¤ë¥¸ ê³„ì¸µì„ í•˜ë‚˜ ë‘ ìœ¼ë¡œì¨ ë™ì‘í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ í•¸ë“¤ëŸ¬ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” worker ì“°ë ˆë“œë“¤ì„ ê°–ëŠ” ëŒ€ì‹ ì—, ì´ëŸ¬í•œ í•¸ë“¤ëŸ¬ë“¤ì´ strand ë‚´ì˜ íì— ì €ì¥ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ strandëŠ” ëª¨ë“  ì¡°ê±´ì´ ì¶©ì¡±ë˜ì—ˆì„ ë•Œì—ë§Œ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ì œì–´ ê¶Œí•œì„ ê°–ê²Œë©ë‹ˆë‹¤.\n\nStrands work by introducing another layer between your application code and the handler execution. Instead of having the worker threads directly execute your handlers, those handlers are queued in a strand. The strand then has control over when executing the handlers so that all guarantees can be met.\n\nì´ê²ƒì— ëŒ€í•´ ìƒê°í•´ë³¼ ìˆ˜ ìˆëŠ” í•œê°€ì§€ ë°©ë²•ì€ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ìŠµë‹ˆë‹¤.\n\nOne way you can think about is like this:\n\n\n\nPossible scenarioI/O ì“°ë ˆë“œì™€ í•¸ë“¤ëŸ¬ì— ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ Remotryë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.\n\nTo visually demonstrate what happens with the I/O threads and handlers, Iâ€™ve used Remotery.\n\nì‚¬ìš©ë˜ëŠ” ì½”ë“œëŠ” 4ê°œì˜ worker ì“°ë ˆë“œì™€ 8ê°œì˜ connectionì„ ì—ë®¬ë ˆì´íŠ¸í•©ë‹ˆë‹¤. 5ms ~ 15ms ì‚¬ì´ì˜ ì„ì˜ì˜ ì‘ì—…ëŸ‰ì„ ê°–ëŠ” í•¸ë“¤ëŸ¬(ì¼ì¢…ì˜ ì‘ì—… í•­ëª©)ëŠ” worker íì— ë†“ì´ê²Œë©ë‹ˆë‹¤. ì‹¤ì œë¡œ ì—¬ëŸ¬ë¶„ì´ ì´ëŸ¬í•œ ì»¤ë„¥ì…˜ë³„ ì“°ë ˆë“œë¹„ìœ¨ ë˜ëŠ” í•¸ë“¤ëŸ¬ ì‘ì—…ëŸ‰ì„ ê°–ì§€ì•Šë”ë¼ë„ í•´ë‹¹ ìˆ˜ì¹˜ë“¤ì€ ë¬¸ì œë¥¼ ë³´ì—¬ì£¼ê¸°ì— ìš©ì´í•©ë‹ˆë‹¤. ë˜í•œ ì €ëŠ” Boost Asio ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ê³ , í•´ë‹¹ ê¸€ì˜ ì£¼ì œë¥¼ ë…¼ì˜í•´ë‚˜ê°€ê¸° ìœ„í•´ ìì²´ì ìœ¼ë¡œ strandë¥¼ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\n\nThe code used emulates 4 worker threads, and 8 connections. Handlers (aka work items) with a random workload of [5ms,15ms] for a random connection are placed in the worker queue. In practice, you would not have this threads/connections ratio or handler workload, but it makes it easier to demonstrate the problem. Also, Iâ€™m not using Boost Asio at all. Itâ€™s a custom strand implementation to explore the topic.\n\nì•„ë˜ ê·¸ë¦¼ì€ worker ì“°ë ˆë“œë“¤ì˜ ìƒíƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤:\n\nSo, a view into the worker threads:\n\n\n\nConn Nì€ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤(ë˜ëŠ” worker ì“°ë ˆë“œ ìƒì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì–´ë– í•œ ê°ì²´). ê°ê°ì˜ ì»¤ë„¥ì…˜ ê°ì²´ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìƒ‰ìƒì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤. ë³´ì‹œë‹¤ì‹œí”¼ ê²‰ë³´ê¸°ì—ëŠ” ê´œì°®ì•„ ë³´ì…ë‹ˆë‹¤. ì´ì œ ê°ê°ì˜ Conn ê°ì²´ì˜ ì‹¤ì§ì ì¸ ìƒíƒœë¥¼ ì‹œë¶„í•  ë‹¨ìœ„ë¡œ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\nConn N are our connection objects (or any object doing work in our worker threads for that matter). Each has a distinct colour. All good on the surface as you can see. Now lets look at what each Conn object is actually doing with its time slice.\n\n\n\nworker íì™€ ì“°ë ˆë“œëŠ” í•¸ë“¤ëŸ¬ê°€ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì„ ì¸ì§€í•˜ì§€ ëª»í•˜ê¸°ë•Œë¬¸ì—ì„œ worker ì“°ë ˆë“œëŠ” ì²˜ë¦¬í•  ì»¤ë„¥ì…˜ ê°ì²´ê°€ ë“¤ì–´ì˜¤ëŠ” ìˆœê°„ ê¸°êº¼ì´ íì—ì„œ êº¼ë‚´ë ¤ í•  ê²ƒì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ ì“°ë ˆë“œì—ì„œ ë˜ ë‹¤ë¥¸ worker ì“°ë ˆë“œì—ì„œ ì´ë¯¸ ì‚¬ìš©ë˜ê³  ìˆëŠ” ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ì‹¤í–‰í•˜ë ¤ê³  í•  ë•Œ, ê·¸ê²ƒì€ block ìƒíƒœì— ë†“ì´ê²Œë  ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ì˜ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ì „ì²´ ì‹œê°„ì˜ ì•½ 19% ì •ë„ê°€ block ìƒíƒœ ë˜ëŠ” ë˜ ë‹¤ë¥¸ ì˜¤ë²„ í—¤ë“œë¡œ ì¸í•´ ë‚­ë¹„ë˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ì‹¤ì§ˆì ìœ¼ë¡œ worker ì“°ë ˆë“œê°€ ì‘ì—…ì— í• ë‹¹í•˜ëŠ” ì‹œê°„ì´ ì „ì²´ì˜ ì•½ 81% ë¿ì´ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤:\n\nWhat is happening is the worker queue and worker threads are oblivious to what its handlers do (as expected), so the worker threads will happily dequeue work as it comes. One thread tries to execute work for a given Conn object which is already being used in another worker thread, so it has to block. In this scenario, ~19% of total time is wasted with blocking or other overhead. In other words, only ~81% of the worker threadâ€™s time is spent doing actual work:\n\n\n\nì˜¤ë²„ í—¤ë“œëŠ” worker ì“°ë ˆë“œ ì „ì²´ ì‹œê°„ì—ì„œ ì‹¤ì œ ì‘ì—… ì‹œê°„ì„ ëº€ ê°’ìœ¼ë¡œ ì¸¡ì •ë©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— í•¸ë“¤ëŸ¬ ë‚´ì˜ ëª…ì‹œì ì¸ ë™ê¸°í™” ê·¸ë¦¬ê³  worker í/ì“°ë ˆë“œ ë‚´ë¶€ì ìœ¼ë¡œ ìˆ˜í–‰ëœ ëª¨ë“  ë™ê¸°í™” ì‘ì—…ë“¤ì´ ì´ ì˜¤ë²„ í—¤ë“œì— í¬í•¨ë©ë‹ˆë‹¤.\n\nNOTE: The overhead was measured by subtracting actual work time from the total worker threadâ€™s time. So it accounts for explicit synchronization in the handlers and any work/synchronization done internally by the worker queue/threads.\n\nì´ì œ ì»¤ë„¥ì…˜ ê°ì²´ì˜ ì‘ì—…ì„ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ strandsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì˜ ìƒíƒœ ê°’ì„ ì‚´í´ë´…ì‹œë‹¤.\n\nLets see how it looks like if we use strands to serialize work for our Conn objects:\n\n\n\n\n\në‚´ë¶€ ì‘ì—… ë˜ëŠ” ë™ê¸°í™”ì— ë‚­ë¹„ë˜ëŠ” ì‹œê°„ì´ ë§¤ìš° ì‘ë‹¤ëŠ”ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nVery little time is wasted with internal work or synchronization.\n\n\n\nCache localitystrandsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì–»ì„ ìˆ˜ ìˆëŠ” ë˜ í•˜ë‚˜ì˜ ì‘ì€ ì´ì ì€ ë” ë‚˜ì€ CPU ìºì‹œ í™œìš©ì…ë‹ˆë‹¤. worker ì“°ë ˆë“œëŠ” ë˜ ë‹¤ë¥¸ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ê°€ì§€ê³  ì˜¤ê¸° ì „ì— í˜„ì¬ ì£¼ì–´ì§„ ì»¤ë„¥ì…˜ ê°ì²´ì˜ í•¸ë“¤ëŸ¬ë¥¼ ë” ë§ì´ ì‹¤í–‰í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.\n\nAnother possible small benefit with this scenario is better CPU cache utilization. Worker threads will tend to execute a few handlers for a given Conn object before grabbing another Conn object.\n\nZoomed out, without strands\n\n\nZoomed out, with strands(ê°ê°ì˜ ì“°ë ˆë“œì— ë”°ë¼ ë™ì¼í•œ ë²ˆí˜¸ì˜ ì»¤ë„¥ì…˜ ê°ì²´ì˜ ì‘ì—… ìˆ˜í–‰ì´ ë°€ì§‘ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ)\n\n\n\n\nì˜ˆì œ ì½”ë“œì‹¤ì œ ì˜ˆì œ ì½”ë“œë¥¼ í†µí•´ì„œ strandì˜ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì œëŠ” Nê°œ(1, 2, 4, 8, 16)ì˜ ì“°ë ˆë“œì—ì„œ ê°ê° ì „ì—­ ë³€ìˆ˜ì¸ sumì— 2ì”© ë”í•˜ëŠ” ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë©°, sumì˜ ëˆ„ì  í•©ì´ 1ì–µì´ ì¶œë ¥ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³ ì í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.ì“°ë ˆë“œê°€ 1ê°œ(N=1)ì¸ ìƒí™©ì—ì„œ sumì´ 1ì–µì´ ë˜ê¸°ìœ„í•´ì„œëŠ” 2ì”© ë”í•˜ëŠ” ì—°ì‚°ì´ ì´ 50000000ë²ˆ ë°˜ë³µë¼ì•¼í•˜ë©° ì“°ë ˆë“œë¥¼ 16ê°œ(N=16)ê¹Œì§€ ëŠ˜ë¦°ë‹¤ë©´ í•´ë‹¹ ì—°ì‚°ì€ 3125000ë²ˆ ë°˜ë³µë˜ë©´ ë©ë‹ˆë‹¤.\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485#include &lt;iostream&gt;#include &lt;boost/asio.hpp&gt;#include &lt;boost/thread.hpp&gt;#include &lt;boost/thread/detail/thread_group.hpp&gt;int sum = 0;class thread_func&#123;public:    thread_func(int idx, boost::asio::io_context&amp; ctx) : idx_(idx), ctx_(ctx)    &#123;    &#125;    void operator()()    &#123;        std::ostringstream oss;        oss &lt;&lt; std::this_thread::get_id();        printf(&quot;io_context::run #%d thread [%s]\\n&quot;, idx_, oss.str().c_str());        ctx_.run();    &#125;private:    int idx_;    boost::asio::io_context&amp; ctx_;&#125;;void make_sum_to_100_million_without_strand(int thread_count)&#123;    boost::asio::io_context ctx;    int loop_count = 0;    switch (thread_count)    &#123;    case 1:        loop_count = 50000000;        break;    case 2:        loop_count = 25000000;        break;    case 4:        loop_count = 12500000;        break;    case 8:        loop_count = 6250000;        break;    case 16:        loop_count = 3125000;        break;    default:        break;    &#125;    // no strand    for (int i = 0; i &lt; thread_count; i++)    &#123;        boost::asio::post(ctx, [&amp;]()&#123;            std::ostringstream oss;            oss &lt;&lt; std::this_thread::get_id();            printf(&quot;hello boost::asio::post in io_context [%s]\\n&quot;, oss.str().c_str());            for (int i = 0; i &lt; loop_count; i++)            &#123;                sum += 2;            &#125;        &#125;);    &#125;        boost::thread_group tg;    for (int i = 0; i &lt; thread_count; i++)    &#123;        tg.create_thread(thread_func(i+1, ctx));    &#125;    tg.join_all();    printf(&quot;[make_sum_to_100_million_without_strand, %d thread] sum : %d\\n&quot;, thread_count, sum);&#125;int main()&#123;    int thread_count = 2;    make_sum_to_100_million_without_strand(thread_count)    return 0;&#125;\n\nì‹¤í–‰ê²°ê³¼\n1[make_sum_to_100_million_without_strand, 2 thread] sum : 50614948\n(ìœ„ ì˜ˆì‹œì˜ ê²½ìš°ì—ëŠ” 2ê°œì˜ ì“°ë ˆë“œì—ì„œ)í•¸ë“¤ëŸ¬ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” 1ì–µì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ì§€ ì•ŠìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ì ‘ê·¼í•˜ëŠ” ë³€ìˆ˜ì— ëŒ€í•œ ëª…ì‹œì ì¸ ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë‹¹ì—°í•œ ê²°ê³¼ì…ë‹ˆë‹¤.\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586#include &lt;iostream&gt;#include &lt;boost/asio.hpp&gt;#include &lt;boost/thread.hpp&gt;#include &lt;boost/thread/detail/thread_group.hpp&gt;int sum = 0;class thread_func&#123;public:    thread_func(int idx, boost::asio::io_context&amp; ctx) : idx_(idx), ctx_(ctx)    &#123;    &#125;    void operator()()    &#123;        std::ostringstream oss;        oss &lt;&lt; std::this_thread::get_id();        printf(&quot;io_context::run #%d thread [%s]\\n&quot;, idx_, oss.str().c_str());        ctx_.run();    &#125;private:    int idx_;    boost::asio::io_context&amp; ctx_;&#125;;void make_sum_to_100_million_with_strand(int thread_count)&#123;    boost::asio::io_context ctx;    boost::asio::io_context::strand strand(ctx);    int loop_count = 0;    switch (thread_count)    &#123;    case 1:        loop_count = 50000000;        break;    case 2:        loop_count = 25000000;        break;    case 4:        loop_count = 12500000;        break;    case 8:        loop_count = 6250000;        break;    case 16:        loop_count = 3125000;        break;    default:        break;    &#125;    // strand    for (int i = 0; i &lt; thread_count; i++)    &#123;        boost::asio::post(strand.wrap([&amp;]()&#123;            std::ostringstream oss;            oss &lt;&lt; std::this_thread::get_id();            printf(&quot;hello boost::asio::post in io_context [%s]\\n&quot;, oss.str().c_str());            for (int i = 0; i &lt; loop_count; i++)            &#123;                sum += 2;            &#125;        &#125;));    &#125;        boost::thread_group tg;    for (int i = 0; i &lt; thread_count; i++)    &#123;        tg.create_thread(thread_func(i+1, ctx));    &#125;    tg.join_all();    printf(&quot;[make_sum_to_100_million_with_strand, %d thread] sum : %d\\n&quot;, thread_count, sum);&#125;int main()&#123;    int thread_count = 16;    make_sum_to_100_million_with_strand(thread_count);    return 0;&#125;\n\nì‹¤í–‰ê²°ê³¼\n1[make_sum_to_100_million_with_strand, 16 thread] sum : 100000000\n(ìœ„ ì˜ˆì‹œì˜ ê²½ìš°ì—ëŠ” 16ê°œì˜ ì“°ë ˆë“œì—ì„œ) boost strandë¥¼ ì‚¬ìš©í•˜ì—¬ í•¸ë“¤ëŸ¬ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰(ì „ì—­ ë³€ìˆ˜ì¸ sumì— ì ‘ê·¼í•˜ëŠ” í•¸ë“¤ëŸ¬ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ì§€ ì•ŠìŒì„ ë³´ì¥)í•˜ì˜€ê¸°ë•Œë¬¸ì— 1ì–µì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\në§ˆì¹˜ë©°\nI/O threadê°€ 1ê°œì¸ ê²½ìš°(ì¦‰, io_context::run() í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì“°ë ˆë“œê°€ 1ê°œì¸ ê²½ìš°)ì—ëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ ì“°ë ˆë“œì—ì„œë§Œ í•¸ë“¤ëŸ¬ê°€ í˜¸ì¶œë˜ë¯€ë¡œ ë™ê¸°í™”ë¼ëŠ”ê²Œ í•„ìš”ì—†ìŒ.\n2ê°œ ì´ìƒì˜ I/O thread(ì¦‰, io_context::run() í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì“°ë ˆë“œê°€ 2ê°œ ì´ìƒì¸ ê²½ìš°)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” í•¸ë“¤ëŸ¬ë¥¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ ëª…ì‹œì ì¸ Lockì´ í•„ìš”í•¨.\nì´ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ê²Œ boost::asio::strand! í•¸ë“¤ëŸ¬ ë‚´ë¶€ì—ì„œ ë™ê¸°í™”ë¥¼ ìœ„í•œ ì‘ì—…ì„ ë”°ë¡œ í•´ì¤„í•„ìš”ê°€ ì—†ë‹¤!\n\n\n\n\ní•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤ğŸ˜\n\nReference\n\nhttps://www.crazygaze.com/blog/2016/03/17/how-strands-work-and-why-you-should-use-them/\n\n","dateCreated":"2023-09-12T17:03:48+09:00","dateModified":"2024-07-23T14:27:59+09:00","datePublished":"2023-09-12T17:03:48+09:00","description":"ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” boostì—ì„œ ì œê³µí•˜ëŠ” strandì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.","headline":"boost strandë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://chelseafandev.github.io/2023/09/12/what-is-strand/"},"publisher":{"@type":"Organization","name":"ì²¼ì‹œíŒ¬ê°œë°œì","sameAs":[],"image":"profile_github.jpeg","logo":{"@type":"ImageObject","url":"profile_github.jpeg"}},"url":"https://chelseafandev.github.io/2023/09/12/what-is-strand/","keywords":"strands, boost strand, synchronization, handler sync"}</script>
    <meta name="description" content="ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” boostì—ì„œ ì œê³µí•˜ëŠ” strandì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.">
<meta property="og:type" content="blog">
<meta property="og:title" content="boost strandë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ">
<meta property="og:url" content="https://chelseafandev.github.io/2023/09/12/what-is-strand/index.html">
<meta property="og:site_name" content="ì²¼ì‹œíŒ¬ ê°œë°œì ì‘ì—… ê³µê°„">
<meta property="og:description" content="ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” boostì—ì„œ ì œê³µí•˜ëŠ” strandì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-1.png">
<meta property="og:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-2.png">
<meta property="og:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-3.png">
<meta property="og:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-4.png">
<meta property="og:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-5.png">
<meta property="og:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-6.png">
<meta property="og:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-7.png">
<meta property="og:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-8.png">
<meta property="article:published_time" content="2023-09-12T08:03:48.000Z">
<meta property="article:modified_time" content="2024-07-23T05:27:59.266Z">
<meta property="article:author" content="ì²¼ì‹œíŒ¬ê°œë°œì">
<meta property="article:tag" content="strands">
<meta property="article:tag" content="boost strand">
<meta property="article:tag" content="synchronization">
<meta property="article:tag" content="handler sync">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chelseafandev.github.io/assets/images/what-is-strand-figure-1.png">
    
    
        
    
    
        <meta property="og:image" content="https://chelseafandev.github.io/assets/images/profile_github.jpeg">
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
    
    <link rel="canonical" href="https://chelseafandev.github.io/2023/09/12/what-is-strand/">
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/" aria-label>
            ì²¼ì‹œíŒ¬ ê°œë°œì ì‘ì—… ê³µê°„
        </a>
    </div>
    
        
            <a class="header-right-picture " href="#about" aria-label="ë§í¬ ì—´ê¸°: /#about">
        
        
            <img class="header-picture" src="/assets/images/profile_github.jpeg" alt="ì €ì ì´ë¯¸ì§€">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4" style="border-top-width: 100px;padding-top: 150px;">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about" aria-label="ì €ìì— ëŒ€í•´ ë” ì•Œì•„ë³´ê¸°">
                    <img class="sidebar-profile-picture" src="/assets/images/profile_github.jpeg" alt="ì €ì ì´ë¯¸ì§€">
                </a>
                <h4 class="sidebar-profile-name">ì²¼ì‹œíŒ¬ê°œë°œì</h4>
                
                    <h5 class="sidebar-profile-bio"><p>ì¡°ê¸ˆ ë”ë””ë”ë¼ë„ ê¾¸ì¤€íˆ</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/" rel="noopener" title="ì „ì²´ê¸€">
                        <i class="sidebar-button-icon fas fa-list-ul" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">ì „ì²´ê¸€</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" rel="noopener" title="ì¹´í…Œê³ ë¦¬">
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">ì¹´í…Œê³ ë¦¬</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" rel="noopener" title="íƒœê·¸">
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">íƒœê·¸</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" rel="noopener" title="ì•„ì¹´ì´ë¸Œ">
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">ì•„ì¹´ì´ë¸Œ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/chelseafandev" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/rss2.xml" rel="noopener" title="RSS">
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4" class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            boost strandë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2023-09-12T17:03:48+09:00">
	
		    2023/09/12 17:03:48
    	
    </time>
    
        <span>ì¹´í…Œê³ ë¦¬ </span>
        
    <a class="category-link" href="/categories/C/">C++</a>


    
    
        -
        <span class="reading-time">â±</span>
        
            ì½ëŠ”ë° 11 ë¶„ ì •ë„ ì†Œìš” ì˜ˆìƒ
        
        
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” boostì—ì„œ ì œê³µí•˜ëŠ” strandì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<p>strandì— ëŒ€í•œ ì„¤ëª…ì€ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.crazygaze.com/blog/2016/03/17/how-strands-work-and-why-you-should-use-them/">How strands work and why you should use them</a> ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë‹ˆ ì°¸ê³ ë¶€íƒë“œë¦¬ë©°, ê¸€ í•˜ë‹¨ì—ëŠ” strand ë™ì‘ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ ì˜ˆì œ ì½”ë“œë¥¼ ì²¨ë¶€í•˜ì˜€ìœ¼ë‹ˆ ì§ì ‘ í…ŒìŠ¤íŠ¸ í•´ë³´ì‹œë©° strandì˜ ì‚¬ìš©ë²•ê³¼ í•„ìš”ì„±ì— ëŒ€í•´ ë‹¤ì‹œ í•œë²ˆ ì •ë¦¬í•˜ëŠ” ì‹œê°„ì„ ê°–ìœ¼ë©´ ì¢‹ì„ê²ƒê°™ë„¤ìš”ğŸ˜</p>
<br>

<h1 id="table-of-contents">ëª©ì°¨</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-strands-work-and-why-you-should-use-them"><span class="toc-number">1.</span> <span class="toc-text">How strands work and why you should use them</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Possible-scenario"><span class="toc-number">1.1.</span> <span class="toc-text">Possible scenario</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cache-locality"><span class="toc-number">1.2.</span> <span class="toc-text">Cache locality</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%98%88%EC%A0%9C-%EC%BD%94%EB%93%9C"><span class="toc-number">2.</span> <span class="toc-text">ì˜ˆì œ ì½”ë“œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EB%A7%88%EC%B9%98%EB%A9%B0"><span class="toc-number">3.</span> <span class="toc-text">ë§ˆì¹˜ë©°</span></a></li></ol>

<br>

<h2 id="How-strands-work-and-why-you-should-use-them"><a href="#How-strands-work-and-why-you-should-use-them" class="headerlink" title="How strands work and why you should use them"></a>How strands work and why you should use them</h2><p>ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ Boost Asioë¥¼ ì‚¬ìš©í•´ë³¸ì ì´ ìˆë‹¤ë©´, í‹€ë¦¼ì—†ì´ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.boost.org/doc/libs/1_83_0/doc/html/boost_asio/overview/core/strands.html">strands</a> ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•´ë´¤ê±°ë‚˜ ìµœì†Œí•œ ë§ˆì£¼ì¹˜ê¸°ë¼ë„ í•´ë´¤ì„ ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>If you ever used Boost Asio, certainly you used or at least looked at <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.boost.org/doc/libs/1_83_0/doc/html/boost_asio/overview/core/strands.html">strands</a>.</p>
</blockquote>
<p>strands ì‚¬ìš©ì„ í†µí•´ ì–»ì„ ìˆ˜ ìˆëŠ” ì£¼ìš”í•œ ì´ì ì€ ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë‹¨ìˆœí™”í•´ì¤€ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ìˆœí™”ëŠ” strandë¥¼ í†µí•´ ì‹¤í–‰ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ëŒ€í•´ì„œëŠ” ëª…ì‹œì ì¸ ë™ê¸°í™”ê°€ í•„ìš”í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— ê°€ëŠ¥í•©ë‹ˆë‹¤. strandëŠ” 2ê°œì˜ í•¸ë“¤ëŸ¬ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ì§€ì•ŠìŒì„ ë³´ì¥í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The main benefit of using strands is to simplify your code, since handlers that go through a strand donâ€™t need explicit synchronization. A strand guarantees that no two handlers execute concurrently.</p>
</blockquote>
<p>ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ ë‹¨ì§€ í•˜ë‚˜ì˜ I/O ì“°ë ˆë“œ(boost ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸¡ë©´ì—ì„œ ì„¤ëª…í•˜ìë©´ io_context::run()ì„ í˜¸ì¶œí•˜ëŠ” ì“°ë ˆë“œê°€ ì˜¤ì§ í•˜ë‚˜ì¸ ê²½ìš°ë¥¼ ì˜ë¯¸í•¨)ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ë™ê¸°í™”ë¥¼ ê±±ì •í•  í•„ìš”ê°€ ì „í˜€ ì—†ìŠµë‹ˆë‹¤. ê·¸ê²ƒì´ ì´ë¯¸ ì•”ë¬µì ì¸ strandì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ëŸ¬ë¶„ì´ ë” ë§ì€ I/O ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ìˆœê°„ì´ ì˜¨ë‹¤ë©´ I/O ì“°ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ëŒ€í•´ ëª…ì‹œì ì¸ ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•˜ê±°ë‚˜ strandsë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>If you use just one I/O thread (or in Boost terms, just one thread calling io_context::run), then you donâ€™t need synchronization anyway. That is already an implicit strand. But the moment you want to ramp up and have more I/O threads, you need to either deal with explicit synchronization for your handlers, or use strands.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì´ ì •ì˜í•œ í•¸ë“¤ëŸ¬ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë™ê¸°í™”í•˜ëŠ” ê²ƒì€ ëª…ë°±íˆ ê°€ëŠ¥í•œ ì¼ì´ì§€ë§Œ ì´ê²ƒì€ ë¶ˆí•„ìš”í•˜ê²Œ ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œì— ë³µì¡ì„±ì„ ë¶€ì—¬í•˜ì—¬ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì˜ ëª…ì‹œì  ë™ê¸°í™”ê°€ ê°–ëŠ” ë˜ ë‹¤ë¥¸ ì˜í–¥ë„ ì¤‘ í•˜ë‚˜ëŠ” ì—¬ëŸ¬ë¶„ì´ ì •ë§ ì‹ ì¤‘í•˜ê²Œ ê³ ë ¤í•˜ì§€ ì•ŠëŠ” ì´ìƒ ë¶ˆí•„ìš”í•œ ë¸”ë¡ êµ¬ê°„ì˜ ë°œìƒì´ ë¶ˆê°€í”¼í•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Explicitly synchronizing your handlers is certainly possible, but you will be unnecessarily introducing complexity to your code which will certainly lead to bugs. One other effect of explicit handler synchronization is that unless you think really hard, youâ€™ll very likely introduce unnecessary blocking.</p>
</blockquote>
<p>strandsëŠ” ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œì™€ í•¸ë“¤ëŸ¬ì˜ ì‹¤í–‰ ì‚¬ì´ì— ë˜ ë‹¤ë¥¸ ê³„ì¸µì„ í•˜ë‚˜ ë‘ ìœ¼ë¡œì¨ ë™ì‘í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ í•¸ë“¤ëŸ¬ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” worker ì“°ë ˆë“œë“¤ì„ ê°–ëŠ” ëŒ€ì‹ ì—, ì´ëŸ¬í•œ í•¸ë“¤ëŸ¬ë“¤ì´ strand ë‚´ì˜ íì— ì €ì¥ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ strandëŠ” ëª¨ë“  ì¡°ê±´ì´ ì¶©ì¡±ë˜ì—ˆì„ ë•Œì—ë§Œ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ì œì–´ ê¶Œí•œì„ ê°–ê²Œë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Strands work by introducing another layer between your application code and the handler execution. Instead of having the worker threads directly execute your handlers, those handlers are queued in a strand. The strand then has control over when executing the handlers so that all guarantees can be met.</p>
</blockquote>
<p>ì´ê²ƒì— ëŒ€í•´ ìƒê°í•´ë³¼ ìˆ˜ ìˆëŠ” í•œê°€ì§€ ë°©ë²•ì€ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>One way you can think about is like this:</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-1.png" alt></div>

<h3 id="Possible-scenario"><a href="#Possible-scenario" class="headerlink" title="Possible scenario"></a>Possible scenario</h3><p>I/O ì“°ë ˆë“œì™€ í•¸ë“¤ëŸ¬ì— ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/Celtoys/Remotery">Remotry</a>ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>To visually demonstrate what happens with the I/O threads and handlers, Iâ€™ve used <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/Celtoys/Remotery">Remotery</a>.</p>
</blockquote>
<p>ì‚¬ìš©ë˜ëŠ” ì½”ë“œëŠ” 4ê°œì˜ worker ì“°ë ˆë“œì™€ 8ê°œì˜ connectionì„ ì—ë®¬ë ˆì´íŠ¸í•©ë‹ˆë‹¤. 5ms ~ 15ms ì‚¬ì´ì˜ ì„ì˜ì˜ ì‘ì—…ëŸ‰ì„ ê°–ëŠ” í•¸ë“¤ëŸ¬(ì¼ì¢…ì˜ ì‘ì—… í•­ëª©)ëŠ” worker íì— ë†“ì´ê²Œë©ë‹ˆë‹¤. ì‹¤ì œë¡œ ì—¬ëŸ¬ë¶„ì´ ì´ëŸ¬í•œ ì»¤ë„¥ì…˜ë³„ ì“°ë ˆë“œë¹„ìœ¨ ë˜ëŠ” í•¸ë“¤ëŸ¬ ì‘ì—…ëŸ‰ì„ ê°–ì§€ì•Šë”ë¼ë„ í•´ë‹¹ ìˆ˜ì¹˜ë“¤ì€ ë¬¸ì œë¥¼ ë³´ì—¬ì£¼ê¸°ì— ìš©ì´í•©ë‹ˆë‹¤. ë˜í•œ ì €ëŠ” Boost Asio ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ê³ , í•´ë‹¹ ê¸€ì˜ ì£¼ì œë¥¼ ë…¼ì˜í•´ë‚˜ê°€ê¸° ìœ„í•´ ìì²´ì ìœ¼ë¡œ strandë¥¼ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The code used emulates 4 worker threads, and 8 connections. Handlers (aka work items) with a random workload of [5ms,15ms] for a random connection are placed in the worker queue. In practice, you would not have this threads/connections ratio or handler workload, but it makes it easier to demonstrate the problem. Also, Iâ€™m not using Boost Asio at all. Itâ€™s a custom strand implementation to explore the topic.</p>
</blockquote>
<p>ì•„ë˜ ê·¸ë¦¼ì€ worker ì“°ë ˆë“œë“¤ì˜ ìƒíƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤:</p>
<blockquote>
<p>So, a view into the worker threads:</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-2.png" alt></div>

<p><code>Conn N</code>ì€ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤(ë˜ëŠ” worker ì“°ë ˆë“œ ìƒì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì–´ë– í•œ ê°ì²´). ê°ê°ì˜ ì»¤ë„¥ì…˜ ê°ì²´ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìƒ‰ìƒì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤. ë³´ì‹œë‹¤ì‹œí”¼ ê²‰ë³´ê¸°ì—ëŠ” ê´œì°®ì•„ ë³´ì…ë‹ˆë‹¤. ì´ì œ ê°ê°ì˜ Conn ê°ì²´ì˜ ì‹¤ì§ì ì¸ ìƒíƒœë¥¼ ì‹œë¶„í•  ë‹¨ìœ„ë¡œ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Conn N are our connection objects (or any object doing work in our worker threads for that matter). Each has a distinct colour. All good on the surface as you can see. Now lets look at what each Conn object is actually doing with its time slice.</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-3.png" alt></div>

<p>worker íì™€ ì“°ë ˆë“œëŠ” í•¸ë“¤ëŸ¬ê°€ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì„ ì¸ì§€í•˜ì§€ ëª»í•˜ê¸°ë•Œë¬¸ì—ì„œ worker ì“°ë ˆë“œëŠ” ì²˜ë¦¬í•  ì»¤ë„¥ì…˜ ê°ì²´ê°€ ë“¤ì–´ì˜¤ëŠ” ìˆœê°„ ê¸°êº¼ì´ íì—ì„œ êº¼ë‚´ë ¤ í•  ê²ƒì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ ì“°ë ˆë“œì—ì„œ ë˜ ë‹¤ë¥¸ worker ì“°ë ˆë“œì—ì„œ ì´ë¯¸ ì‚¬ìš©ë˜ê³  ìˆëŠ” ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ì‹¤í–‰í•˜ë ¤ê³  í•  ë•Œ, ê·¸ê²ƒì€ block ìƒíƒœì— ë†“ì´ê²Œë  ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ì˜ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ì „ì²´ ì‹œê°„ì˜ ì•½ 19% ì •ë„ê°€ block ìƒíƒœ ë˜ëŠ” ë˜ ë‹¤ë¥¸ ì˜¤ë²„ í—¤ë“œë¡œ ì¸í•´ ë‚­ë¹„ë˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ì‹¤ì§ˆì ìœ¼ë¡œ worker ì“°ë ˆë“œê°€ ì‘ì—…ì— í• ë‹¹í•˜ëŠ” ì‹œê°„ì´ ì „ì²´ì˜ ì•½ 81% ë¿ì´ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤:</p>
<blockquote>
<p>What is happening is the worker queue and worker threads are oblivious to what its handlers do (as expected), so the worker threads will happily dequeue work as it comes. One thread tries to execute work for a given Conn object which is already being used in another worker thread, so it has to block. In this scenario, ~19% of total time is wasted with blocking or other overhead. In other words, only ~81% of the worker threadâ€™s time is spent doing actual work:</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-4.png" alt></div>

<p>ì˜¤ë²„ í—¤ë“œëŠ” worker ì“°ë ˆë“œ ì „ì²´ ì‹œê°„ì—ì„œ ì‹¤ì œ ì‘ì—… ì‹œê°„ì„ ëº€ ê°’ìœ¼ë¡œ ì¸¡ì •ë©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— í•¸ë“¤ëŸ¬ ë‚´ì˜ ëª…ì‹œì ì¸ ë™ê¸°í™” ê·¸ë¦¬ê³  worker í/ì“°ë ˆë“œ ë‚´ë¶€ì ìœ¼ë¡œ ìˆ˜í–‰ëœ ëª¨ë“  ë™ê¸°í™” ì‘ì—…ë“¤ì´ ì´ ì˜¤ë²„ í—¤ë“œì— í¬í•¨ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>NOTE: The overhead was measured by subtracting actual work time from the total worker threadâ€™s time. So it accounts for explicit synchronization in the handlers and any work/synchronization done internally by the worker queue/threads.</p>
</blockquote>
<p>ì´ì œ ì»¤ë„¥ì…˜ ê°ì²´ì˜ ì‘ì—…ì„ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ strandsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì˜ ìƒíƒœ ê°’ì„ ì‚´í´ë´…ì‹œë‹¤.</p>
<blockquote>
<p>Lets see how it looks like if we use strands to serialize work for our Conn objects:</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-5.png" alt></div>

<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-6.png" alt></div>

<p>ë‚´ë¶€ ì‘ì—… ë˜ëŠ” ë™ê¸°í™”ì— ë‚­ë¹„ë˜ëŠ” ì‹œê°„ì´ ë§¤ìš° ì‘ë‹¤ëŠ”ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Very little time is wasted with internal work or synchronization.</p>
</blockquote>
<br>

<h3 id="Cache-locality"><a href="#Cache-locality" class="headerlink" title="Cache locality"></a>Cache locality</h3><p>strandsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì–»ì„ ìˆ˜ ìˆëŠ” ë˜ í•˜ë‚˜ì˜ ì‘ì€ ì´ì ì€ ë” ë‚˜ì€ CPU ìºì‹œ í™œìš©ì…ë‹ˆë‹¤. worker ì“°ë ˆë“œëŠ” ë˜ ë‹¤ë¥¸ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ê°€ì§€ê³  ì˜¤ê¸° ì „ì— í˜„ì¬ ì£¼ì–´ì§„ ì»¤ë„¥ì…˜ ê°ì²´ì˜ í•¸ë“¤ëŸ¬ë¥¼ ë” ë§ì´ ì‹¤í–‰í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Another possible small benefit with this scenario is better CPU cache utilization. Worker threads will tend to execute a few handlers for a given Conn object before grabbing another Conn object.</p>
</blockquote>
<p>Zoomed out, without strands</p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-7.png" alt></div>

<p>Zoomed out, with strands<br>(ê°ê°ì˜ ì“°ë ˆë“œì— ë”°ë¼ ë™ì¼í•œ ë²ˆí˜¸ì˜ ì»¤ë„¥ì…˜ ê°ì²´ì˜ ì‘ì—… ìˆ˜í–‰ì´ ë°€ì§‘ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ)</p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-8.png" alt></div>

<br>

<h2 id="ì˜ˆì œ-ì½”ë“œ"><a href="#ì˜ˆì œ-ì½”ë“œ" class="headerlink" title="ì˜ˆì œ ì½”ë“œ"></a>ì˜ˆì œ ì½”ë“œ</h2><p>ì‹¤ì œ ì˜ˆì œ ì½”ë“œë¥¼ í†µí•´ì„œ strandì˜ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì œëŠ” Nê°œ(1, 2, 4, 8, 16)ì˜ ì“°ë ˆë“œì—ì„œ ê°ê° ì „ì—­ ë³€ìˆ˜ì¸ sumì— 2ì”© ë”í•˜ëŠ” ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë©°, sumì˜ ëˆ„ì  í•©ì´ 1ì–µì´ ì¶œë ¥ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³ ì í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.<br>ì“°ë ˆë“œê°€ 1ê°œ(N=1)ì¸ ìƒí™©ì—ì„œ sumì´ 1ì–µì´ ë˜ê¸°ìœ„í•´ì„œëŠ” 2ì”© ë”í•˜ëŠ” ì—°ì‚°ì´ ì´ 50000000ë²ˆ ë°˜ë³µë¼ì•¼í•˜ë©° ì“°ë ˆë“œë¥¼ 16ê°œ(N=16)ê¹Œì§€ ëŠ˜ë¦°ë‹¤ë©´ í•´ë‹¹ ì—°ì‚°ì€ 3125000ë²ˆ ë°˜ë³µë˜ë©´ ë©ë‹ˆë‹¤.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread/detail/thread_group.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">thread_func</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">thread_func</span>(<span class="keyword">int</span> idx, boost::asio::io_context&amp; ctx) : <span class="built_in">idx_</span>(idx), <span class="built_in">ctx_</span>(ctx)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        std::ostringstream oss;</span><br><span class="line">        oss &lt;&lt; std::this_thread::<span class="built_in">get_id</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;io_context::run #%d thread [%s]\n&quot;</span>, idx_, oss.<span class="built_in">str</span>().<span class="built_in">c_str</span>());</span><br><span class="line">        ctx_.<span class="built_in">run</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> idx_;</span><br><span class="line">    boost::asio::io_context&amp; ctx_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_sum_to_100_million_without_strand</span><span class="params">(<span class="keyword">int</span> thread_count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    boost::asio::io_context ctx;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> loop_count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (thread_count)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        loop_count = <span class="number">50000000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        loop_count = <span class="number">25000000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        loop_count = <span class="number">12500000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">        loop_count = <span class="number">6250000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">        loop_count = <span class="number">3125000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// no strand</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; thread_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        boost::asio::<span class="built_in">post</span>(ctx, [&amp;]()&#123;</span><br><span class="line">            std::ostringstream oss;</span><br><span class="line">            oss &lt;&lt; std::this_thread::<span class="built_in">get_id</span>();</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;hello boost::asio::post in io_context [%s]\n&quot;</span>, oss.<span class="built_in">str</span>().<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; loop_count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    boost::thread_group tg;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; thread_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        tg.<span class="built_in">create_thread</span>(<span class="built_in">thread_func</span>(i+<span class="number">1</span>, ctx));</span><br><span class="line">    &#125;</span><br><span class="line">    tg.<span class="built_in">join_all</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[make_sum_to_100_million_without_strand, %d thread] sum : %d\n&quot;</span>, thread_count, sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> thread_count = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">make_sum_to_100_million_without_strand</span>(thread_count)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ì‹¤í–‰ê²°ê³¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[make_sum_to_100_million_without_strand, 2 thread] sum : 50614948</span><br></pre></td></tr></table></figure>
<p>(ìœ„ ì˜ˆì‹œì˜ ê²½ìš°ì—ëŠ” 2ê°œì˜ ì“°ë ˆë“œì—ì„œ)í•¸ë“¤ëŸ¬ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” 1ì–µì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ì§€ ì•ŠìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ì ‘ê·¼í•˜ëŠ” ë³€ìˆ˜ì— ëŒ€í•œ ëª…ì‹œì ì¸ ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë‹¹ì—°í•œ ê²°ê³¼ì…ë‹ˆë‹¤.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread/detail/thread_group.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">thread_func</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">thread_func</span>(<span class="keyword">int</span> idx, boost::asio::io_context&amp; ctx) : <span class="built_in">idx_</span>(idx), <span class="built_in">ctx_</span>(ctx)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        std::ostringstream oss;</span><br><span class="line">        oss &lt;&lt; std::this_thread::<span class="built_in">get_id</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;io_context::run #%d thread [%s]\n&quot;</span>, idx_, oss.<span class="built_in">str</span>().<span class="built_in">c_str</span>());</span><br><span class="line">        ctx_.<span class="built_in">run</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> idx_;</span><br><span class="line">    boost::asio::io_context&amp; ctx_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_sum_to_100_million_with_strand</span><span class="params">(<span class="keyword">int</span> thread_count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    boost::asio::io_context ctx;</span><br><span class="line">    boost::asio::<span class="function">io_context::strand <span class="title">strand</span><span class="params">(ctx)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> loop_count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (thread_count)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        loop_count = <span class="number">50000000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        loop_count = <span class="number">25000000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        loop_count = <span class="number">12500000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">        loop_count = <span class="number">6250000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">        loop_count = <span class="number">3125000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// strand</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; thread_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        boost::asio::<span class="built_in">post</span>(strand.<span class="built_in">wrap</span>([&amp;]()&#123;</span><br><span class="line">            std::ostringstream oss;</span><br><span class="line">            oss &lt;&lt; std::this_thread::<span class="built_in">get_id</span>();</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;hello boost::asio::post in io_context [%s]\n&quot;</span>, oss.<span class="built_in">str</span>().<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; loop_count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    boost::thread_group tg;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; thread_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        tg.<span class="built_in">create_thread</span>(<span class="built_in">thread_func</span>(i+<span class="number">1</span>, ctx));</span><br><span class="line">    &#125;</span><br><span class="line">    tg.<span class="built_in">join_all</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[make_sum_to_100_million_with_strand, %d thread] sum : %d\n&quot;</span>, thread_count, sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> thread_count = <span class="number">16</span>;</span><br><span class="line">    <span class="built_in">make_sum_to_100_million_with_strand</span>(thread_count);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ì‹¤í–‰ê²°ê³¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[make_sum_to_100_million_with_strand, 16 thread] sum : 100000000</span><br></pre></td></tr></table></figure>
<p>(ìœ„ ì˜ˆì‹œì˜ ê²½ìš°ì—ëŠ” 16ê°œì˜ ì“°ë ˆë“œì—ì„œ) boost strandë¥¼ ì‚¬ìš©í•˜ì—¬ í•¸ë“¤ëŸ¬ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰(ì „ì—­ ë³€ìˆ˜ì¸ sumì— ì ‘ê·¼í•˜ëŠ” í•¸ë“¤ëŸ¬ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ì§€ ì•ŠìŒì„ ë³´ì¥)í•˜ì˜€ê¸°ë•Œë¬¸ì— 1ì–µì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<br>

<h2 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h2><ul>
<li>I/O threadê°€ 1ê°œì¸ ê²½ìš°(ì¦‰, io_context::run() í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì“°ë ˆë“œê°€ 1ê°œì¸ ê²½ìš°)ì—ëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ ì“°ë ˆë“œì—ì„œë§Œ í•¸ë“¤ëŸ¬ê°€ í˜¸ì¶œë˜ë¯€ë¡œ ë™ê¸°í™”ë¼ëŠ”ê²Œ í•„ìš”ì—†ìŒ.</li>
<li>2ê°œ ì´ìƒì˜ I/O thread(ì¦‰, io_context::run() í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì“°ë ˆë“œê°€ 2ê°œ ì´ìƒì¸ ê²½ìš°)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” í•¸ë“¤ëŸ¬ë¥¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ ëª…ì‹œì ì¸ Lockì´ í•„ìš”í•¨.</li>
<li>ì´ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ê²Œ boost::asio::strand! í•¸ë“¤ëŸ¬ ë‚´ë¶€ì—ì„œ ë™ê¸°í™”ë¥¼ ìœ„í•œ ì‘ì—…ì„ ë”°ë¡œ í•´ì¤„í•„ìš”ê°€ ì—†ë‹¤!</li>
</ul>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.crazygaze.com/blog/2016/03/17/how-strands-work-and-why-you-should-use-them/">https://www.crazygaze.com/blog/2016/03/17/how-strands-work-and-why-you-should-use-them/</a></li>
</ul>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">íƒœê·¸</span><br>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/boost-strand/" rel="tag">boost strand</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/handler-sync/" rel="tag">handler sync</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/strands/" rel="tag">strands</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/synchronization/" rel="tag">synchronization</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2024/07/28/my-golang-layout/" data-tooltip="ê¸°ë³¸ì ì¸ Go í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒ" aria-label="ì´ì „: ê¸°ë³¸ì ì¸ Go í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒ">
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ì´ì „</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2023/05/19/multithreaded-execution/" data-tooltip="boost::io_context ì‹¤í–‰ ëª¨ë¸ì— ëŒ€í•´ ì•Œì•„ë³´ì" aria-label="ë‹¤ìŒ: boost::io_context ì‹¤í–‰ ëª¨ë¸ì— ëŒ€í•´ ì•Œì•„ë³´ì">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ë‹¤ìŒ</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="ì´ í¬ìŠ¤íŠ¸ ê³µìœ í•˜ê¸°">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://chelseafandev.github.io/2023/09/12/what-is-strand/" title="Facebookì— ê³µìœ í•˜ê¸°" aria-label="Facebookì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://chelseafandev.github.io/2023/09/12/what-is-strand/" title="Twitterì— ê³µìœ í•˜ê¸°" aria-label="Twitterì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://plus.google.com/share?url=https://chelseafandev.github.io/2023/09/12/what-is-strand/" title="Google+ì— ê³µìœ í•˜ê¸°" aria-label="Google+ì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ëª©ì°¨">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



<!-- Comment -->
<!--  utteranc comment -->

<script src="https://utteranc.es/client.js" repo="chelseafandev/blog-comment" issue-term="title" label="Comment" theme="github-light" crossorigin="anonymous" async>
</script>

                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2024 ì²¼ì‹œíŒ¬ê°œë°œì. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2024/07/28/my-golang-layout/" data-tooltip="ê¸°ë³¸ì ì¸ Go í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒ" aria-label="ì´ì „: ê¸°ë³¸ì ì¸ Go í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒ">
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ì´ì „</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2023/05/19/multithreaded-execution/" data-tooltip="boost::io_context ì‹¤í–‰ ëª¨ë¸ì— ëŒ€í•´ ì•Œì•„ë³´ì" aria-label="ë‹¤ìŒ: boost::io_context ì‹¤í–‰ ëª¨ë¸ì— ëŒ€í•´ ì•Œì•„ë³´ì">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ë‹¤ìŒ</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="ì´ í¬ìŠ¤íŠ¸ ê³µìœ í•˜ê¸°">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://chelseafandev.github.io/2023/09/12/what-is-strand/" title="Facebookì— ê³µìœ í•˜ê¸°" aria-label="Facebookì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://chelseafandev.github.io/2023/09/12/what-is-strand/" title="Twitterì— ê³µìœ í•˜ê¸°" aria-label="Twitterì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://plus.google.com/share?url=https://chelseafandev.github.io/2023/09/12/what-is-strand/" title="Google+ì— ê³µìœ í•˜ê¸°" aria-label="Google+ì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ëª©ì°¨">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://chelseafandev.github.io/2023/09/12/what-is-strand/" aria-label="Facebookì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebookì— ê³µìœ í•˜ê¸°</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://twitter.com/intent/tweet?text=https://chelseafandev.github.io/2023/09/12/what-is-strand/" aria-label="Twitterì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitterì— ê³µìœ í•˜ê¸°</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://plus.google.com/share?url=https://chelseafandev.github.io/2023/09/12/what-is-strand/" aria-label="Google+ì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+ì— ê³µìœ í•˜ê¸°</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile_github.jpeg" alt="ì €ì ì´ë¯¸ì§€">
        
            <h4 id="about-card-name">ì²¼ì‹œíŒ¬ê°œë°œì</h4>
        
            <div id="about-card-bio"><p>ì¡°ê¸ˆ ë”ë””ë”ë¼ë„ ê¾¸ì¤€íˆ</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>ê°œë°œì</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                ì„œìš¸, ëŒ€í•œë¯¼êµ­
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="external nofollow noopener noreferrer" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="/assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search" class="form-control input--large search-input" placeholder="Search ">
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">í¬ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
            <div class="results">
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/07/08/hello-hexo/" aria-label=": Hexo Tranquilpeak í…Œë§ˆì˜ Markdown syntax">
                            <h3 class="media-heading">Hexo Tranquilpeak í…Œë§ˆì˜ Markdown syntax</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 7ì›” 8ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>Hexo í…Œë§ˆ ì¤‘ í•˜ë‚˜ì¸ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak/blob/master/DOCUMENTATION.md">Tranquilpeakì˜ ê³µì‹ ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì—¬ Postì‹œì— í™œìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ Markdown syntaxë“¤ì„ ì‚¬ìš©í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!-- 
                    <div class="media-left">
                        <a
                            class="link-unstyled"
                            href="https://chelseafandev.github.io/2021/07/10/tr-ruud-gullit/"
                            aria-label=": (BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œ ë£¨ë“œ êµ´ë¦¬íŠ¸ 25ë…„ì´ ì§€ë‚œ ì§€ê¸ˆ ê·¸ì˜ í”„ë¦¬ë¯¸ì–´ê·¸ë¦¬ ì§„ì¶œì„ ì• ì •ì–´ë¦° ì‹œì„ ìœ¼ë¡œ ë˜ëŒì•„ ë³´ë‹¤"
                        >
                            <img class="media-image" src="https://chelseafandev.github.io/2021/07/10/tr-ruud-gullit/tr_ruud_gullit_picture_1.png" width="90" height="90"/>
                        </a>
                    </div>
                     -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/07/10/tr-ruud-gullit/" aria-label=": (BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œ ë£¨ë“œ êµ´ë¦¬íŠ¸ 25ë…„ì´ ì§€ë‚œ ì§€ê¸ˆ ê·¸ì˜ í”„ë¦¬ë¯¸ì–´ê·¸ë¦¬ ì§„ì¶œì„ ì• ì •ì–´ë¦° ì‹œì„ ìœ¼ë¡œ ë˜ëŒì•„ ë³´ë‹¤">
                            <h3 class="media-heading">(BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œ ë£¨ë“œ êµ´ë¦¬íŠ¸ 25ë…„ì´ ì§€ë‚œ ì§€ê¸ˆ ê·¸ì˜ í”„ë¦¬ë¯¸ì–´ê·¸ë¦¬ ì§„ì¶œì„ ì• ì •ì–´ë¦° ì‹œì„ ìœ¼ë¡œ ë˜ëŒì•„ ë³´ë‹¤</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 7ì›” 10ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>í”¼íŒŒ ì¢€ í•œë‹¤ëŠ” ì‚¬ëŒì´ë¼ë©´ ëª¨ë‘ê°€ ë‹¤ ì•Œë§Œí•œ ê·¸ ë¶„, Xì‚¬ê¸°ìº êµ´ë¦¬íŠ¸ğŸ˜¬<br>ì»¤ë¦¬ì–´ ë§‰ë°”ì§€ì— ì²¼ì‹œì—ì„œë„ ì ê¹ í™œì•½í–ˆì—ˆë„¤ìš”.<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.bbc.com/sport/football/52904670">BBC Sportì— êµ´ë¦¬íŠ¸ê°€ ì§ì ‘ ê¸°ê³ í•œ íšŒê³ ë¡ ëŠë‚Œì˜ ê¸€</a>ì„ í•œë²ˆ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/07/13/os-io-system/" aria-label=": I/OëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ?">
                            <h3 class="media-heading">I/OëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ?</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 7ì›” 13ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ìš´ì˜ ì²´ì œì˜ ë°”ì´ë¸” <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.wiley.com/en-us/Operating+System+Concepts%2C+10th+Edition-p-9781119320913">Operating System Concepts</a>(í”íˆ ê³µë£¡ì±…ğŸ¦•ì´ë¼ê³ ë“¤ í•˜ì£ )ì„ ë°”íƒ•ìœ¼ë¡œ I/O ì‹œìŠ¤í…œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/07/22/tip-how-to-use-tmux-md/" aria-label=": ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œ tmuxë¥¼ í™œìš©í•´ë³´ì">
                            <h3 class="media-heading">ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œ tmuxë¥¼ í™œìš©í•´ë³´ì</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 7ì›” 22ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì´ë²ˆì—” ìµìˆ™í•´ì§€ë©´ ì •ë§ ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œì¸ tmuxì— ëŒ€í•´ ì†Œê°œí•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/08/02/os-sync-async-block-nonblock/" aria-label=": Blocking, Nonblocking, Sync, Async">
                            <h3 class="media-heading">Blocking, Nonblocking, Sync, Async</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 8ì›” 2ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì˜¤ëŠ˜ì€ ê³µë£¡ì±…ğŸ¦•ì— ì–¸ê¸‰ëœ Blockingê³¼ Nonblocking, Synchronousì™€ Asynchronousì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤. Synchronousì™€ Asynchronousì˜ ê°œë…ì€ <strong>ì“°ë ˆë“œ</strong>ì™€ <strong>I/O</strong>ì—ì„œ ë“±ì¥í•˜ê²Œ ë˜ëŠ”ë°ìš”, ê°ê°ì´ ì–´ë– í•œ ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ë„ êµ¬ë¶„í•´ì„œ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!-- 
                    <div class="media-left">
                        <a
                            class="link-unstyled"
                            href="https://chelseafandev.github.io/2021/08/05/tr-lukaku-want-to-chelsea/"
                            aria-label=": (BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œì˜ ë¬¼ë§ì— ì˜¤ë¥¸ ë£¨ì¹´ì¿  ì ì ˆí•œ ì˜¤í¼ê°€ ì˜¨ë‹¤ë©´ ì¸í„° ë°€ë€ì„ ë– ë‚˜ê¸° ì›í•´"
                        >
                            <img class="media-image" src="https://chelseafandev.github.io/2021/08/05/tr-lukaku-want-to-chelsea/tr-lukaku-want-to-chelsea.jpg" width="90" height="90"/>
                        </a>
                    </div>
                     -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/08/05/tr-lukaku-want-to-chelsea/" aria-label=": (BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œì˜ ë¬¼ë§ì— ì˜¤ë¥¸ ë£¨ì¹´ì¿  ì ì ˆí•œ ì˜¤í¼ê°€ ì˜¨ë‹¤ë©´ ì¸í„° ë°€ë€ì„ ë– ë‚˜ê¸° ì›í•´">
                            <h3 class="media-heading">(BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œì˜ ë¬¼ë§ì— ì˜¤ë¥¸ ë£¨ì¹´ì¿  ì ì ˆí•œ ì˜¤í¼ê°€ ì˜¨ë‹¤ë©´ ì¸í„° ë°€ë€ì„ ë– ë‚˜ê¸° ì›í•´</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 8ì›” 5ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì˜¤ëŠ˜ì€ ì²¼ì‹œ ì´ì ì„¤ì´ ê°€ê¹Œì›Œì ¸ê°€ê³  ìˆëŠ” ë£¨ì¹´ì¿  ê´€ë ¨ ê¸°ì‚¬ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ë² ë¥´ë„ˆì˜ ê²°ì •ë ¥ì´ ë„ˆë¬´ë‚˜ë„ ì•„ì‰¬ì› ë˜ ì§€ë‚œ ì‹œì¦Œ ì²¼ì‹œë¥¼ ìƒê°í•˜ë©´ ê¼­ í•„ìš”í•œ ì˜ì…ì´ë¼ê³  ìƒê°ë˜ë„¤ìš”ğŸ˜</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!-- 
                    <div class="media-left">
                        <a
                            class="link-unstyled"
                            href="https://chelseafandev.github.io/2021/08/12/tr-son-new-contract/"
                            aria-label=": (BBC ìŠ¤í¬ì¸ ) í† íŠ¸ë„˜ ê³µê²©ìˆ˜ ì†í¥ë¯¼ 4ë…„ ì¬ê³„ì•½ ì„±ì‚¬"
                        >
                            <img class="media-image" src="https://chelseafandev.github.io/2021/08/12/tr-son-new-contract/tr-son-new-contract-figure1.jpg" width="90" height="90"/>
                        </a>
                    </div>
                     -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/08/12/tr-son-new-contract/" aria-label=": (BBC ìŠ¤í¬ì¸ ) í† íŠ¸ë„˜ ê³µê²©ìˆ˜ ì†í¥ë¯¼ 4ë…„ ì¬ê³„ì•½ ì„±ì‚¬">
                            <h3 class="media-heading">(BBC ìŠ¤í¬ì¸ ) í† íŠ¸ë„˜ ê³µê²©ìˆ˜ ì†í¥ë¯¼ 4ë…„ ì¬ê³„ì•½ ì„±ì‚¬</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 8ì›” 12ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì˜¤ëŠ˜ì€ í˜„ì¬ í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ í† íŠ¸ë„˜ í•«ìŠ¤í¼ì—ì„œ í™œì•½ ì¤‘ì¸ ì†í¥ë¯¼ ì„ ìˆ˜ì˜ ì¬ê³„ì•½ ê´€ë ¨ ê¸°ì‚¬ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ë‹¤ìŒ ì‹œì¦Œ ëˆ„ëˆ„ê°ë…ì´ ì´ëŒê²Œ ë˜ëŠ” í† íŠ¸ë„˜, ìŒ‰ì›”í´ğŸ‘ ì†í¥ë¯¼ì„ ìˆ˜ì™€ í•¨ê»˜ ì¢‹ì€ ì„±ì  ê±°ë’€ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/09/24/hyperscan-phase1/" aria-label=": ì¸í…” Hyperscan ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ ë²ˆì—­">
                            <h3 class="media-heading">ì¸í…” Hyperscan ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ ë²ˆì—­</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 9ì›” 24ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì¸í…” Hyperscanì˜ <a target="_blank" rel="external nofollow noopener noreferrer" href="http://intel.github.io/hyperscan/dev-reference/index.html">ê³µì‹ ë¬¸ì„œ</a>ë¥¼ í†µí•´ ì»´íŒŒì¼(compile)ì´ë‚˜ ìŠ¤ìº”(scan)ê³¼ ê°™ì€ Hyperscanì˜ ê¸°ë³¸ì ì¸ ê°œë…ë“¤ì— ëŒ€í•´ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì¶”í›„ì—ëŠ” Hyperscan APIë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ì •ê·œ í‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­ì„ ìˆ˜í–‰í•˜ëŠ” ìƒ˜í”Œ ì½”ë“œë„ ì—…ë¡œë“œí•  ì˜ˆì •ì…ë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/10/12/hyperscan-phase2/" aria-label=": ì¸í…” Hyperscan API í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±">
                            <h3 class="media-heading">ì¸í…” Hyperscan API í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 10ì›” 12ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” <a href="https://chelseafandev.github.io/2021/09/24/hyperscan-phase1/">ì¸í…” Hyperscan ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ ë²ˆì—­</a>ì— ì´ì–´ì„œ Hyperscan APIë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ì •ê·œ í‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­ì„ ìˆ˜í–‰í•˜ëŠ” ìƒ˜í”Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  í…ŒìŠ¤íŠ¸ í•´ë³´ëŠ” ì‹œê°„ì„ ê°–ê² ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/11/09/gdb-chapter4-program-crash/" aria-label=": Seg FaultëŠ” ì™œ ë°œìƒí•˜ëŠ”ê°€?">
                            <h3 class="media-heading">Seg FaultëŠ” ì™œ ë°œìƒí•˜ëŠ”ê°€?</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 11ì›” 9ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” <a target="_blank" rel="external nofollow noopener noreferrer" href="https://nostarch.com/debugging.htm">The Art of Debugging with GDB, DDD and Eclipse</a>ì˜ <strong>Chatper 4 WHEN A PROGRAM CRASHES</strong> ë‚´ìš©ì„ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤. í•´ë‹¹ ì±•í„°ì˜ ì•ë¶€ë¶„ì—ì„œëŠ” ê°€ìƒ ì£¼ì†Œ ê³µê°„ì—ì„œì˜ í˜ì´ì§€(page)ì— ëŒ€í•œ ê°œë…ì„ ì†Œê°œí•˜ê³  seg faultê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì„ í˜ì´ì§€(page)ì™€ ì—°ê´€ì§€ì–´ ì˜ ì„¤ëª…í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium" data-message-zero="í¬ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤." data-message-one="1 ê°œì˜ í¬ìŠ¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤." data-message-other="{n} ê°œì˜ í¬ìŠ¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤.">
                27 ê°œì˜ í¬ìŠ¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤.
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/chelsea_cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    



    
<script src="/assets/js/moment-with-locales.js"></script>

    
<script src="/assets/js/algoliasearch.js"></script>

    <script>
      var algoliaClient = algoliasearch('FDTOJ7KLS8', '935491408ac4c43d728c68858e4ea147');
      var algoliaIndex = algoliaClient.initIndex('chelseafandev');
    </script>


    </body>
</html>


<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta name="google-site-verification" content="Ojz5tvI9WuN6pn2n6i1E_mOkMyRiSSOp4KXuYSyaUjs">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="ì²¼ì‹œíŒ¬ ê°œë°œì ì‘ì—… ê³µê°„">
    <title>ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ Go ì½”ë“œë¥¼ êµ¬ì¡°í™”í•´ì•¼ í•˜ëŠ”ê°€? - ì²¼ì‹œíŒ¬ ê°œë°œì ì‘ì—… ê³µê°„</title>
    <meta name="author" content="ì²¼ì‹œíŒ¬ê°œë°œì">
    
    
        <link rel="icon" href="https://chelseafandev.github.io/assets/images/chelsea_favicon.png">
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ì²¼ì‹œíŒ¬ê°œë°œì","sameAs":[],"image":"profile_github.jpeg"},"articleBody":"ìµœê·¼ íšŒì‚¬ì—ì„œ Go ì–¸ì–´ë¥¼ í™œìš©í•˜ì—¬ ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ê¸°íšŒê°€ ìƒê²¼ëŠ”ë° ì¶”í›„ ì½”ë“œì˜ ìœ ì§€ ê´€ë¦¬ë¥¼ ê³ ë ¤í•´ë³¼ ë•Œ Go ì–¸ì–´ì˜ ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°ë¥¼ ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ì•¼ í•˜ëŠ”ê°€ì— ëŒ€í•´ ê³ ë¯¼ì´ ìƒê²¼ìŠµë‹ˆë‹¤.\n\n\nêµ¬ê¸€ë§ ì¤‘ì— Go ì–¸ì–´ì˜ ì½”ë“œ êµ¬ì¡°í™”ì— ê´€í•œ ì¢‹ì€ ê¸€ì„ ë°œê²¬í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ì—ë„ ë°˜ì˜í•´ë³¼ ê²¸ í•´ì„œ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì—­ì‹œë‚˜ ì €ì™€ ê°™ì€ ê³ ë¯¼ì„ ì•ì„œ í•´ì£¼ì‹  ì„ êµ¬ìë‹˜ë“¤ì´ ê³„ì‹œë”ë¼ê³ ìš”ğŸ˜.\nì›ë¬¸ì˜ ì¼ë¶€ ë‚´ìš©ì€ ë²ˆì—­ì—ì„œ ì œì™¸í–ˆìœ¼ë‹ˆ ì›ë¬¸ì„ ì°¸ê³ í•˜ì‹¤ ë¶„ë“¤ì€ í•´ë‹¹ ë§í¬ë¥¼ í™•ì¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.\n\n\n\n\n\n\ní‘œì¤€ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒVendoring. Generics. ì´ê²ƒë“¤ì€ Go ì»¤ë®¤ë‹ˆí‹° ë‚´ì—ì„œ í° ì´ìŠˆë“¤ë¡œ ë³´ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì¢€ ì²˜ëŸ¼ ì–¸ê¸‰ë˜ì§€ ì•ŠëŠ” ë˜ ë‹¤ë¥¸ ì´ìŠˆê°€ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤ - ë°”ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ ì…ë‹ˆë‹¤.\n\nVendoring. Generics. These are seen as big issues in the Go community but thereâ€™s another issue thatâ€™s rarely mentioned â€” application package layout.\n\nì œê°€ ì§€ê¸ˆê¹Œì§€ ì‘ì—…í•´ì™”ë˜ ëª¨ë“  Go ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ â€œë‚´ ì½”ë“œë¥¼ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ êµ¬ì¡°í™”í•´ì•¼í•˜ëŠ”ê°€?â€ë¼ëŠ” ì§ˆë¬¸ì— ëŒ€í•œ ê°ê¸° ë‹¤ë¥¸ ëŒ€ë‹µì„ ê°€ì§€ê³  ìˆëŠ”ê²ƒ ì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤. ëª‡ëª‡ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ì— ëª¨ë“  ê²ƒì„ ë°€ì–´ ë„£ê¸°ë„í•˜ê³  ë˜ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ íƒ€ì…ì´ë‚˜ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ê·¸ë£¹í™”í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ íŒ€ ì „ë°˜ì— ê±¸ì³ ì ìš©í•  ë§Œí•œ ì¢‹ì€ ì „ëµì´ ì—†ë‹¤ë©´, ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ì–‘í•œ íŒ¨í‚¤ì§€ë“¤ì— ê³³ê³³ì— ì½”ë“œê°€ í©ë¿Œë ¤ì§€ê²Œ ë˜ëŠ” ê²ƒì„ ë³´ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” Go ì–´í”Œë¦¬ì¼€ì´ì…˜ ë””ìì¸ì— ì ìš©í•  ìˆ˜ ìˆëŠ” ë”ë‚˜ì€ í‘œì¤€ì´ í•„ìš”í•©ë‹ˆë‹¤.\n\nEvery Go application Iâ€™ve ever worked on appears to have a different answer to the question, how should I organize my code? Some applications push everything into one package while others group by type or module. Without a good strategy applied across your team, youâ€™ll find code scattered across various packages of your application. We need a better standard for Go application design.\n\nì €ëŠ” ë” ë‚˜ì€ ì ‘ê·¼ ë°©ì‹ì„ ì œì•ˆí•˜ê³ ì í•©ë‹ˆë‹¤. ëª‡ê°€ì§€ ë‹¨ìˆœí•œ ê·œì¹™ë“¤ì„ ë”°ë¦„ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ì½”ë“œë¥¼ ë¶„ë¦¬ì‹œí‚¤ê³  í…ŒìŠ¤íŠ¸ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“¤ë©° í”„ë¡œì íŠ¸ì— ì¼ê´€ëœ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.\n\nI suggest a better approach. By following a few simple rules we can decouple our code, make it easier to test, and bring a consistent structure to our project.\n\n\n\n#1. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ ìœ„í•œ íŒ¨í‚¤ì§€ë‹¤ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë°ì´í„°ì™€ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ë¥¼ ê¸°ìˆ í•˜ëŠ” ë…¼ë¦¬ì ì´ê³  ê³ ìˆ˜ì¤€(ì‚¬ëŒì´ ì´í•´í•˜ê¸° ì‰½ê²Œ ì‘ì„±ëœ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ì˜ë¯¸í•¨)ì¸ ì–¸ì–´ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ eì»¤ë¨¸ìŠ¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œ ì¤‘ì´ë¼ë©´ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì€ ê³ ê°, ê³„ì •, ì‹ ìš©ì¹´ë“œ ê²°ì œ, ì¬ê³  ê´€ë¦¬ì™€ ê°™ì€ ê²ƒë“¤ì„ í¬í•¨í•˜ê³  ìˆì„ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ í˜ì´ìŠ¤ë¶ì„ ê°œë°œí•˜ê³  ìˆë‹¤ë©´ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì€ ì‚¬ìš©ì, ì¢‹ì•„ìš”, &amp; relationships(?)ì´ ë ê²ƒ ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë„ë©”ì¸ì€ ì—¬ëŸ¬ë¶„ì˜ ê·¼ë³¸ì ì¸ ê¸°ìˆ ê³¼ëŠ” ë…ë¦½ì ì¸ ê°œë…ì…ë‹ˆë‹¤.\n\nYour application has a logical, high-level language that describes how data and processes interact. This is your domain. If you have an e-commerce application your domain involves things like customers, accounts, charging credit cards, and handling inventory. If youâ€™re Facebook then your domain is users, likes, &amp; relationships. Itâ€™s the stuff that doesnâ€™t depend on your underlying technology.\n\nì €ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸(root) íŒ¨í‚¤ì§€ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” User êµ¬ì¡°ì²´ë‚˜ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì§€ê³  ì˜¤ê±°ë‚˜ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” UserService ì¸í„°í˜ì´ìŠ¤ì™€ ê°™ì€ ë‹¨ìˆœí•œ ë°ì´í„° íƒ€ì…ë“¤ë§Œì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\nI place my domain types in my root package. This package only contains simple data types like a User struct for holding user data or a UserService interface for fetching or saving user data.\n\nê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ë³´ì¼ ìˆ˜ ìˆì„ê²ë‹ˆë‹¤:\n\nIt may look something like:\n\ngo1234567891011121314package myapptype User struct {\tID      int\tName    string\tAddress Address}type UserService interface {\tUser(id int) (*User, error)\tUsers() ([]*User, error)\tCreateUser(u *User) error\tDeleteUser(id int) error}\n\nì´ê²ƒì€ ì—¬ëŸ¬ë¶„ì˜ ê¸°ë³¸ íŒ¨í‚¤ì§€ë¥¼ ë§¤ìš° ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ë˜í•œ ì—¬ëŸ¬ë¶„ì€ ë‹¤ë¥¸ ë„ë©”ì¸ íƒ€ì…ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°ì—ë§Œ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” íƒ€ì…ë“¤ì„ í¬í•¨í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ë¶„ì´ UserServiceë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í´ë§(polling)í•˜ëŠ” íŠ¹ì • íƒ€ì…ì„ í¬í•¨ì‹œì¼œì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤. ê·¸ê²ƒì€ ì„¸ë¶€ì ì¸ êµ¬í˜„ ì‚¬í•­ì…ë‹ˆë‹¤.\n\nThis makes your root package extremely simple. You may also include types that perform actions but only if they solely depend on other domain types. For example, you could have a type that polls your UserService periodically. However, it should not call out to external services or save to a database. That is an implementation detail.\n\nê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì¡´ì¬í•˜ëŠ” ì–´ë– í•œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ë„ ì˜ì¡´ì ì´ì–´ì„  ì•ˆë©ë‹ˆë‹¤!\n\nThe root package should not depend on any other package in your application!\n\n\n\n#2. ì˜ì¡´ì„±ì— ë”°ë¼ í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ê·¸ë£¹í™”í•˜ë¼ë§Œì•½ ê¸°ë³¸ íŒ¨í‚¤ì§€ê°€ ì™¸ë¶€ ì˜ì¡´ì„±ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì´ëŸ¬í•œ ì˜ì¡´ì„±ë“¤ì„ í•˜ìœ„íŒ¨í‚¤ì§€ì— ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì—ì„œëŠ” í•˜ìœ„íŒ¨í‚¤ì§€ê°€ ë„ë©”ì¸ê³¼ êµ¬í˜„(implementation)ì‚¬ì´ì˜ ì–´ëŒ‘í„°ë¡œì„œ ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤.\n\nIf your root package is not allowed to have external dependencies then we must push those dependencies to subpackages. In this approach to package layout, subpackages exist as an adapter between your domain and your implementation.\n\nì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ë¶„ì˜ UserServiceê°€ PostgreSQLì„ ì§€ì›í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ ì—¬ëŸ¬ë¶„ì€ postgres.UserServiceì— ëŒ€í•œ ì„¸ë¶€ êµ¬í˜„ì„ ì œê³µí•˜ëŠ” postgres í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\nFor example, your UserService might be backed by PostgreSQL. You can introduce a postgres subpackage in your application that provides a postgres.UserService implementation:\n\ngo12345678910111213141516171819202122232425package postgresimport (\t\"database/sql\"\t\"github.com/benbjohnson/myapp\"\t_ \"github.com/lib/pq\")// UserService represents a PostgreSQL implementation of myapp.UserService.type UserService struct {\tDB *sql.DB}// User returns a user for a given id.func (s *UserService) User(id int) (*myapp.User, error) {\tvar u myapp.User\trow := db.QueryRow(`SELECT id, name FROM users WHERE id = $1`, id)\tif row.Scan(&amp;u.ID, &amp;u.Name); err != nil {\t\treturn nil, err\t}\treturn &amp;u, nil}// implement remaining myapp.UserService interface...\n\nì´ê²ƒì€ PostgreSQL ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•˜ê²Œë˜ëŠ”ë° ì´ëŸ¬í•œ ì˜ì¡´ì„±ì˜ ë¶„ë¦¬ëŠ” í…ŒìŠ¤íŠ¸ ê³¼ì •ì„ ë‹¨ìˆœí™”ì‹œì¼œì£¼ê³  ì¶”í›„ ë˜ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê¸° ìœ„í•œ ì‰¬ìš´ ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ BoltDBì™€ ê°™ì€ ë˜ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì„¸ë¶€ êµ¬í˜„ì„ ì§€ì›í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤ë©´ ì´ê²ƒì€ í”ŒëŸ¬ê·¸í˜• êµ¬ì¡°ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nThis isolates our PostgreSQL dependency which simplifies testing and provides an easy way to migrate to another database in the future. It can be used as a pluggable architecture if you decide to support other database implementations such as BoltDB.\n\nì´ê²ƒì€ ë˜í•œ êµ¬í˜„ì„ ê³„ì¸µí™”í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì•„ë§ˆë„ ì—¬ëŸ¬ë¶„ì€ PostgreSQL ì•ì— LRU ìºì‹œë¥¼ ë‘ì–´ ë°ì´í„°ë¥¼ ë©”ëª¨ìƒì— ë³´ê´€í•˜ê¸°ë¥¼ ì›í•  ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ PostgreSQL ì„¸ë¶€ êµ¬í˜„ì„ ë˜í•‘(wrapping)í•  ìˆ˜ ìˆëŠ” UserServiceë¥¼ êµ¬í˜„í•˜ëŠ” UserCacheë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nIt also gives you a way to layer implementations. Perhaps you want to hold an in-memory, LRU cache in front of PostgreSQL. You can add a UserCache that implements UserService which can wrap your PostgreSQL implementation:\n\ngo123456789101112131415161718192021222324252627282930313233package myapp// UserCache wraps a UserService to provide an in-memory cache.type UserCache struct {\t\tcache   map[int]*User\t\tservice UserService}// NewUserCache returns a new read-through cache for service.func NewUserCache(service UserService) *UserCache {\t\treturn &amp;UserCache{\t\t\t\tcache: make(map[int]*User),\t\t\t\tservice: service,\t\t}}// User returns a user for a given id.// Returns the cached instance if available.func (c *UserCache) User(id int) (*User, error) {\t// Check the local cache first.\t\tif u := c.cache[id]; u != nil {\t\t\t\treturn u, nil\t\t}\t// Otherwise fetch from the underlying service.\t\tu, err := c.service.User(id)\t\tif err != nil {\t\t\treturn nil, err\t\t} else if u != nil {\t\t\tc.cache[id] = u\t\t}\t\treturn u, err}\n\nGolangì˜ ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì—ì„œë„ ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. io.ReaderëŠ” ë°”ì´íŠ¸ë¥¼ ì½ì–´ë“¤ì´ê¸° ìœ„í•œ ë„ë©”ì¸ íƒ€ì…ì´ê³  ê·¸ê²ƒì˜ ì„¸ë¶€ êµ¬í˜„ë“¤ì€ ì˜ì¡´ì„±ì— ì˜í•´ ê·¸ë£¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤ - tar.Reader, gzip.Reader, multipart.Reader. ì´ê²ƒë“¤ ë˜í•œ ê³„ì¸µí™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. os.Fileì€ bufio.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆê³  ì´ bufio.ReaderëŠ” gzip.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆìœ¼ë©° gzip.ReaderëŠ” tar.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆëŠ” ì´ëŸ¬í•œ ëª¨ìŠµë“¤ì€ í”íˆ ë³´ì´ëŠ” ê³„ì¸µ êµ¬ì¡°ë“¤ì…ë‹ˆë‹¤.\n\nWe see this approach in the standard library too. The io.Reader is a domain type for reading bytes and its implementations are grouped by dependency â€” tar.Reader, gzip.Reader, multipart.Reader. These can be layered as well. Itâ€™s common to see an os.File wrapped by a bufio.Reader which is wrapped by a gzip.Reader which is wrapped by a tar.Reader.\n\n\n\nì˜ì¡´ì„± ê°„ì˜ ì˜ì¡´ì„±ì—¬ëŸ¬ë¶„ì˜ ì˜ì¡´ì„±ì€ í™€ë¡œ ê³ ë¦½ëœ ì±„ë¡œ ì‚´ì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. User ë°ì´í„°ëŠ” PostgreSQLì— ì €ì¥ì„ í•˜ê³  ì¬ë¬´ì™€ ê´€ë ¨ëœ íŠ¸ëœì­ì…˜ ë°ì´í„°ëŠ” Stripeì™€ ê°™ì€ 3rd party ì„œë¹„ìŠ¤ì— ì €ì¥í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” Stripeê°€ ë…¼ë¦¬ì ì¸ ë„ë©”ì¸ íƒ€ì…ê³¼ í•¨ê»˜ ë¬¶ì´ê²Œ ë©ë‹ˆë‹¤ - ì´ê²ƒì„ TranscationServiceë¼ê³  ë¶€ë¥´ê¸°ë¡œ í•˜ê² ìŠµë‹ˆë‹¤.\n\nYour dependencies donâ€™t live in isolation. You may store User data in PostgreSQL but your financial transaction data exists in a third party service like Stripe. In this case we wrap our Stripe dependency with a logical domain type â€” letâ€™s call it TransactionService.\n\nUserServiceì— TransactionServiceë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ì´ ë‘ê°€ì§€ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nBy adding our TransactionService to our UserService we decouple our two dependencies:\n\ngo1234type UserService struct {\tDB                 *sql.DB\tTransactionService myapp.TransactionService}\n\nì´ì œ ìš°ë¦¬ì˜ ì˜ì¡´ì„±ë“¤ì€ ì˜¤ì§ ê³µí†µëœ ë„ë©”ì¸ ì–¸ì–´ë¥¼ í†µí•´ì„œë§Œ ì†Œí†µí•˜ê²Œ ë©ë‹ˆë‹¤. ì´ê²ƒì€ ìš°ë¦¬ê°€ ë‹¤ë¥¸ ì˜ì¡´ì„±ë“¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  PostgreSQLì„ MySQLë¡œ Stripeë¥¼ ë˜ ë‹¤ë¥¸ ì§€ë¶ˆ í”„ë¡œì„¸ì„œë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\nNow our dependencies communicate solely through our common domain language. This means that we could swap out PostgreSQL for MySQL or switch Stripe for another payment processor without affecting other dependencies.\n\n\n\nì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ 3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ˆë¼3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ë¼ëŠ” ë§ì´ ì´ìƒí•˜ê²Œ ë“¤ë¦´ ìˆ˜ ìˆì§€ë§Œ ì´ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ Golangì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê³ ë¦½ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, net/http íŒ¨í‚¤ì§€ëŠ” ë‹¨ì§€ ë˜ ë‹¤ë¥¸ ì˜ì¡´ì„±ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì¡´ì¬í•˜ëŠ” http ë¼ëŠ” í•˜ìœ„íŒ¨í‚¤ì§€ì— ì´ net/http íŒ¨í‚¤ì§€ë¥¼  ì¶”ê°€í•¨ìœ¼ë¡œì¨ ê³ ë¦½ëœ í™˜ê²½ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nThis may sound odd but I also isolate my standard library dependencies with this same method. For instance, the net/http package is just another dependency. We can isolate it as well by including an http subpackage in our application.\n\ní•´ë‹¹ íŒ¨í‚¤ì§€ì˜ ì´ë¦„ì´ ê·¸ê²ƒì´ ê°ì‹¸ê³  ìˆëŠ” ì˜ì¡´ì„±ê³¼ ë™ì¼í•œ ì´ë¦„ì„ ê°–ëŠ”ë‹¤ëŠ” ê²ƒì´ ì´ìƒí•  ìˆ˜ ìˆì§€ë§Œ ì´ê²ƒì€ ì˜ë„ëœ ê²ƒì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ë¥¸ ì–´ë– í•œ ëª¨ë“ˆë“¤ì—ì„œë„ net/http íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì´ ì—†ë‹¤ë©´ íŒ¨í‚¤ì§€ ì´ë¦„ ì¶©ëŒì´ ë°œìƒí•  ì¼ì€ ì—†ìŠµë‹ˆë‹¤. ì´ë¦„ì„ ì¤‘ë³µì‹œí‚´ìœ¼ë¡œ ì–»ì„ ìˆ˜ ìˆëŠ” ì´ì ì€ ì´ë¥¼ í†µí•´ ì—¬ëŸ¬ë¶„ì´ HTTPì™€ ê´€ë ¨ëœ ëª¨ë“  ì½”ë“œë“¤ì€ ìƒˆë¡­ê²Œ ë§Œë“  http íŒ¨í‚¤ì§€ì— í¬í•¨ë˜ë„ë¡ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nIt might seem odd to have a package with the same name as the dependency it wraps, however, this is intentional. There are no package name conflicts in your application unless you allow net/http to be used in other parts of your application. The benefit to duplicating the name is that it requires you to isolate all HTTP code to your http package.\n\ngo123456789101112131415package httpimport (\t\t\"net/http\"\t\t\t\t\"github.com/benbjohnson/myapp\")type Handler struct {\t\tUserService myapp.UserService}func (h *Handler) ServeHTTP(w http.ResponseWriter, r *http.Request) {\t\t// handle request}\n\nì´ì œ ìš°ë¦¬ê°€ ë§Œë“  http.HandlerëŠ” ë„ë©”ì¸ê³¼ HTTP í”„ë¡œí† ì½œ ê°„ ì–´ëŒ‘í„°ë¡œì„œì˜ ì—­í• ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.\n\nNow your http.Handler acts as an adapter between your domain and the HTTP protocol.\n\n\n\n#3. ê³µìœ ëœ mock í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë¼ìš°ë¦¬ì˜ ì˜ì¡´ì„±ë“¤ì€ ë„ë©”ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë‹¤ë¥¸ ì˜ì¡´ì„±ë“¤ê³¼ ë¶„ë¦¬ë˜ì–´ ìˆê¸°ë–„ë¬¸ì— ìš°ë¦¬ëŠ” mock êµ¬í˜„ì„ ì£¼ì…í•˜ê¸° ìœ„í•´ ì´ëŸ¬í•œ ì—°ê²° ì§€ì ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nBecause our dependencies are isolated from other dependencies by our domain interfaces, we can use these connection points to inject mock implementations.\n\nì—¬ëŸ¬ë¶„ì—ê²Œ mockë¥¼ ìƒì„±í•´ì£¼ëŠ” GoMockê³¼ ê°™ì€ mocking ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ëª‡ê°€ì§€ ìˆì§€ë§Œ ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ ê·¸ê²ƒë“¤ì„ ì§ì ‘ ì‘ì„±í•˜ëŠ”ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ mocking ë„êµ¬ë“¤ì€ ë„ˆë¬´ ë³µì¡í•˜ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.\n\nThere are several mocking libraries such as GoMock that will generate mocks for you but I personally prefer to just write them myself. I find many of the mocking tools to be overly complicated.\n\nì œê°€ ì‚¬ìš©í•˜ëŠ” mocksëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, UserServiceë¥¼ ìœ„í•œ mockì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:\n\nThe mocks I use are very simple. For example, a mock for the UserService looks like:\n\ngo12345678910111213141516171819202122package mockimport \"github.com/benbjohnson/myapp\"// UserService represents a mock implementation of myapp.UserService.type UserService struct {\t\tUserFn      func(id int) (*myapp.User, error)\t\tUserInvoked bool\t\tUsersFn     func() ([]*myapp.User, error)\t\tUsersInvoked bool\t\t// additional function implementations...}// User invokes the mock implementation and marks the function as invoked.func (s *UserService) User(id int) (*myapp.User, error) {\t\ts.UserInvoked = true\t\treturn s.UserFn(id)}// additional functions: Users(), CreateUser(), DeleteUser()\n\nì´ mockì€ ì¸ìë“¤ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê±°ë‚˜ ê¸°ëŒ€ëœ ë°ì´í„°ê°€ ë°˜í™˜ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ì‹¤íŒ¨í•˜ëŠ” ì¼€ì´ìŠ¤ë¥¼ ì£¼ì…í•´ë³´ê¸° ìœ„í•´ myapp.UserService ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸°ë§Œ í•œë‹¤ë©´ ì–´ëŠ ê³³ì´ë“  í•¨ìˆ˜ë“¤ì„ ì£¼ì…í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nThis mock lets me inject functions into anything that uses the myapp.UserService interface to validate arguments, return expected data, or inject failures.\n\nì˜ˆë¥¼ ë“¤ì–´ ìœ„ì—ì„œ ë§Œë“¤ì–´ ë³¸ http.Handlerë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ì›í•œë‹¤ê³  í•´ë´…ì‹œë‹¤:\n\nLetâ€™s say we want to test our http.Handler that we built above:\n\ngo12345678910111213141516171819202122232425262728293031323334package http_testimport (\t\"testing\"\t\"net/http\"\t\"net/http/httptest\"\t\"github.com/benbjohnson/myapp/mock\")func TestHandler(t *testing.T) {\t// Inject our mock into our handler.\tvar us mock.UserService\tvar h Handler\th.UserService = &amp;us\t// Mock our User() call.\tus.UserFn = func(id int) (*myapp.User, error) {\t\tif id != 100 {\t\t\tt.Fatalf(\"unexpected id: %d\", id)\t\t}\t\treturn &amp;myapp.User{ID: 100, Name: \"susy\"}, nil\t}\t// Invoke the handler.\tw := httptest.NewRecorder()\tr, _ := http.NewRequest(\"GET\", \"/users/100\", nil)\th.ServeHTTP(w, r)\t\t// Validate mock.\tif !us.UserInvoked {\t\tt.Fatal(\"expected User() to be invoked\")\t}}\n\nmockëŠ” ìœ ë‹› í…ŒìŠ¤íŠ¸ì™€ HTTP í”„ë¡œí† ì½œì˜ ì²˜ë¦¬ë¶€ë¶„ì´ ì™„ì „íˆ ë¶„ë¦¬ë  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.\n\nOur mock lets us completely isolate our unit test to only the handling of the HTTP protocol.\n\n\n\n#4. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì˜ì¡´ì„±ë“¤ì„ í•˜ë‚˜ë¡œ ì—®ëŠ”ë‹¤ì´ëŸ¬í•œ ëª¨ë“  ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë“¤ì´ ê³ ë¦½ëœ ì±„ë¡œ ë– ë‹¤ë‹ˆê²Œ ëœë‹¤ë©´ ì´ë“¤ì„ ì–´ë–»ê²Œ í•˜ë‚˜ë¡œ ê²°í•©í•  ìˆ˜ ìˆì„ì§€ ê¶ê¸ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ ë©”ì¸ íŒ¨í‚¤ì§€ ì…ë‹ˆë‹¤.\n\nWith all these dependency packages floating around in isolation, you may wonder how they all come together. Thatâ€™s the job of the main package.\n\n\n\në©”ì¸ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒì–´í”Œë¦¬ì¼€ì´ì…˜ì€ 2ê°œ ì´ìƒì˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ë„ ìˆëŠ”ë° ì´ë¥¼ ìœ„í•´ ë©”ì¸ íŒ¨í‚¤ì§€ë¥¼ cmd íŒ¨í‚¤ì§€ì˜ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ ë‘ëŠ” Go ì–¸ì–´ì˜ ê´€ìŠµ(convention)ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìš°ë¦¬ í”„ë¡œì íŠ¸ê°€ myapp ì´ë¼ëŠ” ì„œë²„ ë°”ì´ë„ˆë¦¬ë¿ë§Œ ì•„ë‹ˆë¼ í„°ë¯¸ë„ì„ í†µí•´ ì„œë²„ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” myappctl ì´ë¼ëŠ” í´ë¼ì´ì–¸íŠ¸ ë°”ì´ë„ˆë¦¬ë„ ê°–ê³ ìˆë‹¤ê³  í•´ë´…ì‹œë‹¤. ìš°ë¦¬ì˜ ë©”ì¸ íŒ¨í‚¤ì§€ë¥¼ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤:\n\nAn application may produce multiple binaries so weâ€™ll use the Go convention of placing our main package as a subdirectory of the cmd package. For example, our project may have a myapp server binary but also a myappctl client binary for managing the server from the terminal. Weâ€™ll layout our main packages like this:\n\n123456myapp/    cmd/        myapp/            main.go        myappctl/            main.go\n\n\n\nì»´íŒŒì¼ íƒ€ì„ì— ì˜ì¡´ì„± ì£¼ì…â€œì˜ì¡´ì„± ì£¼ì…â€ì´ë¼ëŠ” ìš©ì–´ëŠ” ë‚˜ìœ í‰íŒì„ ë°›ì•„ì™”ìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì¥í™©í•œ Spring XML íŒŒì¼ì— ëŒ€í•œ ìƒê°ì„ ë¶ˆëŸ¬ì¼ìœ¼ í‚µë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ ìš©ì–´ì˜ ì‹¤ì œ ì˜ë¯¸ëŠ” ìš°ë¦¬ëŠ” ê°ì²´ì—ê²Œ ìŠ¤ìŠ¤ë¡œ ë¹Œë“œí•˜ê±°ë‚˜ ì˜ì¡´ì„±ì„ ì§ì ‘ ì°¾ì•„ê°€ëŠ” ê²ƒì„ ìš”êµ¬í•˜ëŠ” ëŒ€ì‹ ì— ê°ì²´ì—ê²Œ ì˜ì¡´ì„±ì„ ì§ì ‘ ì „ë‹¬í•´ì¤„ ê²ƒì´ë‹¤ë¼ëŠ” ê²ƒì´ ì „ë¶€ì…ë‹ˆë‹¤.\n\nThe term â€œdependency injectionâ€ has gotten a bad rap. It conjures up thoughts of verbose Spring XML files. However, all the term really means is that weâ€™re going to pass dependencies to our objects instead of requiring that the object build or find the dependency itself.\n\në©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì–´ë–¤ ì˜ì¡´ì„±ì„ ì–´ë–¤ ê°ì²´ì—ê²Œ ì£¼ì…í•  ê²ƒì¸ì§€ë¥¼ ì„ íƒí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ë‹¨ìˆœíˆ ì´ëŸ¬í•œ ì¡°ê°ë“¤ì„ ì´ì–´ ë¶™ì´ëŠ” ì—­í• ë§Œì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œì˜ ê·œëª¨ê°€ ì‘ê³  ì‚¬ì†Œí•œ ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤:\n\nThe main package is what gets to choose which dependencies to inject into which objects. Because the main package simply wires up the pieces, it tends to be fairly small and trivial code:\n\ngo12345678910111213141516171819202122232425262728package mainimport (\t\"log\"\t\"os\"\t\t\"github.com/benbjohnson/myapp\"\t\"github.com/benbjohnson/myapp/postgres\"\t\"github.com/benbjohnson/myapp/http\")func main() {\t// Connect to database.\tdb, err := postgres.Open(os.Getenv(\"DB\"))\tif err != nil {\t\tlog.Fatal(err)\t}\tdefer db.Close()\t// Create services.\tus := &amp;postgres.UserService{DB: db}\t// Attach to HTTP handler.\tvar h http.Handler\th.UserService = us\t\t// start http server...}\n\nì—¬ëŸ¬ë¶„ì˜ ë©”ì¸ íŒ¨í‚¤ì§€ ë˜í•œ ì–´ëŒ‘í„°ì˜ ì—­í• ì„ í•œë‹¤ëŠ” ê²ƒë„ ì¤‘ìš”í•œ ì ì…ë‹ˆë‹¤. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” í„°ë¯¸ë„ê³¼ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì„ ì—°ê²°í•´ì¤ë‹ˆë‹¤.\n\nItâ€™s also important to note that your main package is also an adapter. It connects the terminal to your domain.\n\n\n\nê²°ë¡ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë””ìì¸ì€ ë§¤ìš° ì–´ë ¤ìš´ ë¬¸ì œì…ë‹ˆë‹¤. ë„ˆë¬´ë‚˜ ë§ì€ ë””ìì¸ ê²°ì •ë“¤ì´ ì¡´ì¬í•˜ê³  ì—¬ëŸ¬ë¶„ì—ê²Œ ê°€ì´ë“œí•´ì¤„ ê²¬ê³ í•œ ì´ë¡ ë“¤ì˜ ë¶€ì¬ëŠ” ë¬¸ì œë¥¼ ë”ìš± ì‹¬ê°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” Go ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í˜„ì¬ ì‚¬ìš©ë˜ëŠ” ëª‡ê°€ì§€ ì ‘ê·¼ ë°©ì‹ì„ ì‚´í´ë³´ì•˜ê³  ê·¸ê²ƒë“¤ì˜ ë§ì€ ê²°í•¨ë“¤ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.\n\nApplication design is a hard problem. There are so many design decisions to make and without a set of solid principles to guide you the problem is made even worse. Weâ€™ve looked at several current approaches to Go application design and weâ€™ve seen many of their flaws.\n\nì €ëŠ” ì˜ì¡´ì„±ì˜ ê´€ì ì„ í†µí•´ ë””ìì¸ì— ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì´ ì½”ë“œ êµ¬ì„±ì„ ë” ë‹¨ìˆœí•˜ê³  ì‰½ê²Œ ì¶”ë¡ í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ ì¤€ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ë¨¼ì € ìš°ë¦¬ëŠ” ë„ë©”ì¸ ì–¸ì–´ë¥¼ ë””ìì¸ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ ì˜ì¡´ì„±ë“¤ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ mocksë¥¼ ë„ì…í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ë©”ì¸ íŒ¨í‚¤ì§€ ì•ˆì—ì„œ ì´ ëª¨ë“  ê²ƒë“¤ì„ í•˜ë‚˜ë¡œ ì—®ìŠµë‹ˆë‹¤.\n\nI believe approaching design from the standpoint of dependencies makes code organization simpler and easier to reason about. First we design our domain language. Then we isolate our dependencies. Next we introduce mocks to isolate our tests. Finally, we tie everything together within our main package.\n\nì—¬ëŸ¬ë¶„ì´ ë””ìì¸í•  ë‹¤ìŒ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì´ëŸ¬í•œ ì´ë¡ ë“¤ì„ ê³ ë ¤í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. ì§ˆë¬¸ì´ ìˆìœ¼ì‹œê±°ë‚˜ ë””ìì¸ì— ëŒ€í•œ í† ë¡ ì„ ì›í•˜ì‹ ë‹¤ë©´ @benbjohnson íŠ¸ìœ„í„°ë¥¼ í†µí•´ ì—°ë½ì£¼ì‹œê±°ë‚˜ Gopher ìŠ¬ë™ì—ì„œ benbjohnsonì„ ì°¾ì•„ì£¼ì„¸ìš”.\n\nConsider these principles in the next application you design. If you have any questions or want to discuss design, contact me at @benbjohnson on Twitter or find me as benbjohnson on the Gopher slack.\n\n\n\n\ní•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤ğŸ˜\n\nReference\n\nhttps://www.gobeyond.dev/standard-package-layout/\n\n","dateCreated":"2022-09-06T18:30:58+09:00","dateModified":"2023-07-02T22:23:21+09:00","datePublished":"2022-09-06T18:30:58+09:00","description":"ìµœê·¼ íšŒì‚¬ì—ì„œ Go ì–¸ì–´ë¥¼ í™œìš©í•˜ì—¬ ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ê¸°íšŒê°€ ìƒê²¼ëŠ”ë° ì¶”í›„ ì½”ë“œì˜ ìœ ì§€ ê´€ë¦¬ë¥¼ ê³ ë ¤í•´ë³¼ ë•Œ Go ì–¸ì–´ì˜ ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°ë¥¼ ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ì•¼ í•˜ëŠ”ê°€ì— ëŒ€í•´ ê³ ë¯¼ì´ ìƒê²¼ìŠµë‹ˆë‹¤.","headline":"ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ Go ì½”ë“œë¥¼ êµ¬ì¡°í™”í•´ì•¼ í•˜ëŠ”ê°€?","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/"},"publisher":{"@type":"Organization","name":"ì²¼ì‹œíŒ¬ê°œë°œì","sameAs":[],"image":"profile_github.jpeg","logo":{"@type":"ImageObject","url":"profile_github.jpeg"}},"url":"https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/","keywords":"go, golang, go layout, organize go code, package layout"}</script>
    <meta name="description" content="ìµœê·¼ íšŒì‚¬ì—ì„œ Go ì–¸ì–´ë¥¼ í™œìš©í•˜ì—¬ ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ê¸°íšŒê°€ ìƒê²¼ëŠ”ë° ì¶”í›„ ì½”ë“œì˜ ìœ ì§€ ê´€ë¦¬ë¥¼ ê³ ë ¤í•´ë³¼ ë•Œ Go ì–¸ì–´ì˜ ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°ë¥¼ ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ì•¼ í•˜ëŠ”ê°€ì— ëŒ€í•´ ê³ ë¯¼ì´ ìƒê²¼ìŠµë‹ˆë‹¤.">
<meta property="og:type" content="blog">
<meta property="og:title" content="ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ Go ì½”ë“œë¥¼ êµ¬ì¡°í™”í•´ì•¼ í•˜ëŠ”ê°€?">
<meta property="og:url" content="https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/index.html">
<meta property="og:site_name" content="ì²¼ì‹œíŒ¬ ê°œë°œì ì‘ì—… ê³µê°„">
<meta property="og:description" content="ìµœê·¼ íšŒì‚¬ì—ì„œ Go ì–¸ì–´ë¥¼ í™œìš©í•˜ì—¬ ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ê¸°íšŒê°€ ìƒê²¼ëŠ”ë° ì¶”í›„ ì½”ë“œì˜ ìœ ì§€ ê´€ë¦¬ë¥¼ ê³ ë ¤í•´ë³¼ ë•Œ Go ì–¸ì–´ì˜ ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°ë¥¼ ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ì•¼ í•˜ëŠ”ê°€ì— ëŒ€í•´ ê³ ë¯¼ì´ ìƒê²¼ìŠµë‹ˆë‹¤.">
<meta property="og:locale" content="ko_KR">
<meta property="article:published_time" content="2022-09-06T09:30:58.000Z">
<meta property="article:modified_time" content="2023-07-02T13:23:21.670Z">
<meta property="article:author" content="ì²¼ì‹œíŒ¬ê°œë°œì">
<meta property="article:tag" content="go">
<meta property="article:tag" content="golang">
<meta property="article:tag" content="go layout">
<meta property="article:tag" content="organize go code">
<meta property="article:tag" content="package layout">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://chelseafandev.github.io/assets/images/profile_github.jpeg">
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
    
    <link rel="canonical" href="https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/">
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/" aria-label>
            ì²¼ì‹œíŒ¬ ê°œë°œì ì‘ì—… ê³µê°„
        </a>
    </div>
    
        
            <a class="header-right-picture " href="#about" aria-label="ë§í¬ ì—´ê¸°: /#about">
        
        
            <img class="header-picture" src="/assets/images/profile_github.jpeg" alt="ì €ì ì´ë¯¸ì§€">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4" style="border-top-width: 100px;padding-top: 150px;">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about" aria-label="ì €ìì— ëŒ€í•´ ë” ì•Œì•„ë³´ê¸°">
                    <img class="sidebar-profile-picture" src="/assets/images/profile_github.jpeg" alt="ì €ì ì´ë¯¸ì§€">
                </a>
                <h4 class="sidebar-profile-name">ì²¼ì‹œíŒ¬ê°œë°œì</h4>
                
                    <h5 class="sidebar-profile-bio"><p>ì¡°ê¸ˆ ë”ë””ë”ë¼ë„ ê¾¸ì¤€íˆ</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/" rel="noopener" title="ì „ì²´ê¸€">
                        <i class="sidebar-button-icon fas fa-list-ul" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">ì „ì²´ê¸€</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" rel="noopener" title="ì¹´í…Œê³ ë¦¬">
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">ì¹´í…Œê³ ë¦¬</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" rel="noopener" title="íƒœê·¸">
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">íƒœê·¸</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" rel="noopener" title="ì•„ì¹´ì´ë¸Œ">
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">ì•„ì¹´ì´ë¸Œ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/chelseafandev" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/rss2.xml" rel="noopener" title="RSS">
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4" class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ Go ì½”ë“œë¥¼ êµ¬ì¡°í™”í•´ì•¼ í•˜ëŠ”ê°€?
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2022-09-06T18:30:58+09:00">
	
		    2022/09/06 18:30:58
    	
    </time>
    
        <span>ì¹´í…Œê³ ë¦¬ </span>
        
    <a class="category-link" href="/categories/Go/">Go</a>


    
    
        -
        <span class="reading-time">â±</span>
        
            ì½ëŠ”ë° 17 ë¶„ ì •ë„ ì†Œìš” ì˜ˆìƒ
        
        
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>ìµœê·¼ íšŒì‚¬ì—ì„œ Go ì–¸ì–´ë¥¼ í™œìš©í•˜ì—¬ ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ê¸°íšŒê°€ ìƒê²¼ëŠ”ë° ì¶”í›„ ì½”ë“œì˜ ìœ ì§€ ê´€ë¦¬ë¥¼ ê³ ë ¤í•´ë³¼ ë•Œ Go ì–¸ì–´ì˜ ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°ë¥¼ ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ì•¼ í•˜ëŠ”ê°€ì— ëŒ€í•´ ê³ ë¯¼ì´ ìƒê²¼ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<p>êµ¬ê¸€ë§ ì¤‘ì— Go ì–¸ì–´ì˜ ì½”ë“œ êµ¬ì¡°í™”ì— ê´€í•œ ì¢‹ì€ ê¸€ì„ ë°œê²¬í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ì—ë„ ë°˜ì˜í•´ë³¼ ê²¸ í•´ì„œ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì—­ì‹œë‚˜ ì €ì™€ ê°™ì€ ê³ ë¯¼ì„ ì•ì„œ í•´ì£¼ì‹  ì„ êµ¬ìë‹˜ë“¤ì´ ê³„ì‹œë”ë¼ê³ ìš”ğŸ˜.</p>
<p>ì›ë¬¸ì˜ ì¼ë¶€ ë‚´ìš©ì€ ë²ˆì—­ì—ì„œ ì œì™¸í–ˆìœ¼ë‹ˆ ì›ë¬¸ì„ ì°¸ê³ í•˜ì‹¤ ë¶„ë“¤ì€ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.gobeyond.dev/standard-package-layout/">í•´ë‹¹ ë§í¬</a>ë¥¼ í™•ì¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<br>

<h1 id="table-of-contents">ëª©ì°¨</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%ED%91%9C%EC%A4%80-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83"><span class="toc-number">1.</span> <span class="toc-text">í‘œì¤€ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%EA%B8%B0%EB%B3%B8-%ED%8C%A8%ED%82%A4%EC%A7%80%EB%8A%94-%EB%8F%84%EB%A9%94%EC%9D%B8-%ED%83%80%EC%9E%85%EC%9D%84-%EC%9C%84%ED%95%9C-%ED%8C%A8%ED%82%A4%EC%A7%80%EB%8B%A4"><span class="toc-number">1.1.</span> <span class="toc-text">#1. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ ìœ„í•œ íŒ¨í‚¤ì§€ë‹¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%EC%9D%98%EC%A1%B4%EC%84%B1%EC%97%90-%EB%94%B0%EB%9D%BC-%ED%95%98%EC%9C%84%ED%8C%A8%ED%82%A4%EC%A7%80%EB%A5%BC-%EA%B7%B8%EB%A3%B9%ED%99%94%ED%95%98%EB%9D%BC"><span class="toc-number">1.2.</span> <span class="toc-text">#2. ì˜ì¡´ì„±ì— ë”°ë¼ í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ê·¸ë£¹í™”í•˜ë¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EC%9D%98%EC%A1%B4%EC%84%B1-%EA%B0%84%EC%9D%98-%EC%9D%98%EC%A1%B4%EC%84%B1"><span class="toc-number">1.2.1.</span> <span class="toc-text">ì˜ì¡´ì„± ê°„ì˜ ì˜ì¡´ì„±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EC%9D%B4%EB%9F%AC%ED%95%9C-%EC%A0%91%EA%B7%BC-%EB%B0%A9%EC%8B%9D%EC%9D%84-3rd-party-%EC%9D%98%EC%A1%B4%EC%84%B1%EC%97%90%EB%A7%8C-%EA%B5%AD%ED%95%9C-%EC%8B%9C%ED%82%A4%EC%A7%80%EB%A7%88%EB%9D%BC"><span class="toc-number">1.2.2.</span> <span class="toc-text">ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ 3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ˆë¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%EA%B3%B5%EC%9C%A0%EB%90%9C-mock-%ED%95%98%EC%9C%84%ED%8C%A8%ED%82%A4%EC%A7%80%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC"><span class="toc-number">1.3.</span> <span class="toc-text">#3. ê³µìœ ëœ mock í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%EB%A9%94%EC%9D%B8-%ED%8C%A8%ED%82%A4%EC%A7%80%EB%8A%94-%EC%9D%98%EC%A1%B4%EC%84%B1%EB%93%A4%EC%9D%84-%ED%95%98%EB%82%98%EB%A1%9C-%EC%97%AE%EB%8A%94%EB%8B%A4"><span class="toc-number">1.4.</span> <span class="toc-text">#4. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì˜ì¡´ì„±ë“¤ì„ í•˜ë‚˜ë¡œ ì—®ëŠ”ë‹¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EB%A9%94%EC%9D%B8-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83"><span class="toc-number">1.4.1.</span> <span class="toc-text">ë©”ì¸ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EC%BB%B4%ED%8C%8C%EC%9D%BC-%ED%83%80%EC%9E%84%EC%97%90-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85"><span class="toc-number">1.4.2.</span> <span class="toc-text">ì»´íŒŒì¼ íƒ€ì„ì— ì˜ì¡´ì„± ì£¼ì…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EA%B2%B0%EB%A1%A0"><span class="toc-number">1.5.</span> <span class="toc-text">ê²°ë¡ </span></a></li></ol></li></ol>

<br>

<h1 id="í‘œì¤€-íŒ¨í‚¤ì§€-ë ˆì´ì•„ì›ƒ"><a href="#í‘œì¤€-íŒ¨í‚¤ì§€-ë ˆì´ì•„ì›ƒ" class="headerlink" title="í‘œì¤€ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ"></a>í‘œì¤€ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ</h1><p>Vendoring. Generics. ì´ê²ƒë“¤ì€ Go ì»¤ë®¤ë‹ˆí‹° ë‚´ì—ì„œ í° ì´ìŠˆë“¤ë¡œ ë³´ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì¢€ ì²˜ëŸ¼ ì–¸ê¸‰ë˜ì§€ ì•ŠëŠ” ë˜ ë‹¤ë¥¸ ì´ìŠˆê°€ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤ - ë°”ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Vendoring. Generics. These are seen as big issues in the Go community but thereâ€™s another issue thatâ€™s rarely mentioned â€” application package layout.</p>
</blockquote>
<p>ì œê°€ ì§€ê¸ˆê¹Œì§€ ì‘ì—…í•´ì™”ë˜ ëª¨ë“  Go ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ â€œë‚´ ì½”ë“œë¥¼ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ êµ¬ì¡°í™”í•´ì•¼í•˜ëŠ”ê°€?â€ë¼ëŠ” ì§ˆë¬¸ì— ëŒ€í•œ ê°ê¸° ë‹¤ë¥¸ ëŒ€ë‹µì„ ê°€ì§€ê³  ìˆëŠ”ê²ƒ ì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤. ëª‡ëª‡ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ì— ëª¨ë“  ê²ƒì„ ë°€ì–´ ë„£ê¸°ë„í•˜ê³  ë˜ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ íƒ€ì…ì´ë‚˜ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ê·¸ë£¹í™”í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ íŒ€ ì „ë°˜ì— ê±¸ì³ ì ìš©í•  ë§Œí•œ ì¢‹ì€ ì „ëµì´ ì—†ë‹¤ë©´, ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ì–‘í•œ íŒ¨í‚¤ì§€ë“¤ì— ê³³ê³³ì— ì½”ë“œê°€ í©ë¿Œë ¤ì§€ê²Œ ë˜ëŠ” ê²ƒì„ ë³´ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” Go ì–´í”Œë¦¬ì¼€ì´ì…˜ ë””ìì¸ì— ì ìš©í•  ìˆ˜ ìˆëŠ” ë”ë‚˜ì€ í‘œì¤€ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Every Go application Iâ€™ve ever worked on appears to have a different answer to the question, how should I organize my code? Some applications push everything into one package while others group by type or module. Without a good strategy applied across your team, youâ€™ll find code scattered across various packages of your application. We need a better standard for Go application design.</p>
</blockquote>
<p>ì €ëŠ” ë” ë‚˜ì€ ì ‘ê·¼ ë°©ì‹ì„ ì œì•ˆí•˜ê³ ì í•©ë‹ˆë‹¤. ëª‡ê°€ì§€ ë‹¨ìˆœí•œ ê·œì¹™ë“¤ì„ ë”°ë¦„ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ì½”ë“œë¥¼ ë¶„ë¦¬ì‹œí‚¤ê³  í…ŒìŠ¤íŠ¸ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“¤ë©° í”„ë¡œì íŠ¸ì— ì¼ê´€ëœ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.</p>
<blockquote>
<p>I suggest a better approach. By following a few simple rules we can decouple our code, make it easier to test, and bring a consistent structure to our project.</p>
</blockquote>
<br>

<h2 id="1-ê¸°ë³¸-íŒ¨í‚¤ì§€ëŠ”-ë„ë©”ì¸-íƒ€ì…ì„-ìœ„í•œ-íŒ¨í‚¤ì§€ë‹¤"><a href="#1-ê¸°ë³¸-íŒ¨í‚¤ì§€ëŠ”-ë„ë©”ì¸-íƒ€ì…ì„-ìœ„í•œ-íŒ¨í‚¤ì§€ë‹¤" class="headerlink" title="#1. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ ìœ„í•œ íŒ¨í‚¤ì§€ë‹¤"></a>#1. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ ìœ„í•œ íŒ¨í‚¤ì§€ë‹¤</h2><p>ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë°ì´í„°ì™€ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ë¥¼ ê¸°ìˆ í•˜ëŠ” ë…¼ë¦¬ì ì´ê³  ê³ ìˆ˜ì¤€(ì‚¬ëŒì´ ì´í•´í•˜ê¸° ì‰½ê²Œ ì‘ì„±ëœ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ì˜ë¯¸í•¨)ì¸ ì–¸ì–´ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ eì»¤ë¨¸ìŠ¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œ ì¤‘ì´ë¼ë©´ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì€ ê³ ê°, ê³„ì •, ì‹ ìš©ì¹´ë“œ ê²°ì œ, ì¬ê³  ê´€ë¦¬ì™€ ê°™ì€ ê²ƒë“¤ì„ í¬í•¨í•˜ê³  ìˆì„ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ í˜ì´ìŠ¤ë¶ì„ ê°œë°œí•˜ê³  ìˆë‹¤ë©´ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì€ ì‚¬ìš©ì, ì¢‹ì•„ìš”, &amp; relationships(?)ì´ ë ê²ƒ ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë„ë©”ì¸ì€ ì—¬ëŸ¬ë¶„ì˜ ê·¼ë³¸ì ì¸ ê¸°ìˆ ê³¼ëŠ” ë…ë¦½ì ì¸ ê°œë…ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Your application has a logical, high-level language that describes how data and processes interact. This is your domain. If you have an e-commerce application your domain involves things like customers, accounts, charging credit cards, and handling inventory. If youâ€™re Facebook then your domain is users, likes, &amp; relationships. Itâ€™s the stuff that doesnâ€™t depend on your underlying technology.</p>
</blockquote>
<p>ì €ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸(root) íŒ¨í‚¤ì§€ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” User êµ¬ì¡°ì²´ë‚˜ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì§€ê³  ì˜¤ê±°ë‚˜ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” UserService ì¸í„°í˜ì´ìŠ¤ì™€ ê°™ì€ ë‹¨ìˆœí•œ ë°ì´í„° íƒ€ì…ë“¤ë§Œì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>I place my domain types in my root package. This package only contains simple data types like a User struct for holding user data or a UserService interface for fetching or saving user data.</p>
</blockquote>
<p>ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ë³´ì¼ ìˆ˜ ìˆì„ê²ë‹ˆë‹¤:</p>
<blockquote>
<p>It may look something like:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myapp</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> {</span><br><span class="line">	ID      <span class="keyword">int</span></span><br><span class="line">	Name    <span class="keyword">string</span></span><br><span class="line">	Address Address</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserService <span class="keyword">interface</span> {</span><br><span class="line">	User(id <span class="keyword">int</span>) (*User, error)</span><br><span class="line">	Users() ([]*User, error)</span><br><span class="line">	CreateUser(u *User) error</span><br><span class="line">	DeleteUser(id <span class="keyword">int</span>) error</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ê²ƒì€ ì—¬ëŸ¬ë¶„ì˜ ê¸°ë³¸ íŒ¨í‚¤ì§€ë¥¼ ë§¤ìš° ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ë˜í•œ ì—¬ëŸ¬ë¶„ì€ ë‹¤ë¥¸ ë„ë©”ì¸ íƒ€ì…ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°ì—ë§Œ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” íƒ€ì…ë“¤ì„ í¬í•¨í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ë¶„ì´ UserServiceë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í´ë§(polling)í•˜ëŠ” íŠ¹ì • íƒ€ì…ì„ í¬í•¨ì‹œì¼œì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤. ê·¸ê²ƒì€ ì„¸ë¶€ì ì¸ êµ¬í˜„ ì‚¬í•­ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>This makes your root package extremely simple. You may also include types that perform actions but only if they solely depend on other domain types. For example, you could have a type that polls your UserService periodically. However, it should not call out to external services or save to a database. That is an implementation detail.</p>
</blockquote>
<p><em>ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì¡´ì¬í•˜ëŠ” ì–´ë– í•œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ë„ ì˜ì¡´ì ì´ì–´ì„  ì•ˆë©ë‹ˆë‹¤!</em></p>
<blockquote>
<p><em>The root package should not depend on any other package in your application!</em></p>
</blockquote>
<br>

<h2 id="2-ì˜ì¡´ì„±ì—-ë”°ë¼-í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼-ê·¸ë£¹í™”í•˜ë¼"><a href="#2-ì˜ì¡´ì„±ì—-ë”°ë¼-í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼-ê·¸ë£¹í™”í•˜ë¼" class="headerlink" title="#2. ì˜ì¡´ì„±ì— ë”°ë¼ í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ê·¸ë£¹í™”í•˜ë¼"></a>#2. ì˜ì¡´ì„±ì— ë”°ë¼ í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ê·¸ë£¹í™”í•˜ë¼</h2><p>ë§Œì•½ ê¸°ë³¸ íŒ¨í‚¤ì§€ê°€ ì™¸ë¶€ ì˜ì¡´ì„±ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì´ëŸ¬í•œ ì˜ì¡´ì„±ë“¤ì„ í•˜ìœ„íŒ¨í‚¤ì§€ì— ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì—ì„œëŠ” í•˜ìœ„íŒ¨í‚¤ì§€ê°€ ë„ë©”ì¸ê³¼ êµ¬í˜„(implementation)ì‚¬ì´ì˜ ì–´ëŒ‘í„°ë¡œì„œ ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>If your root package is not allowed to have external dependencies then we must push those dependencies to subpackages. In this approach to package layout, subpackages exist as an adapter between your domain and your implementation.</p>
</blockquote>
<p>ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ë¶„ì˜ UserServiceê°€ PostgreSQLì„ ì§€ì›í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ ì—¬ëŸ¬ë¶„ì€ postgres.UserServiceì— ëŒ€í•œ ì„¸ë¶€ êµ¬í˜„ì„ ì œê³µí•˜ëŠ” postgres í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>For example, your UserService might be backed by PostgreSQL. You can introduce a postgres subpackage in your application that provides a postgres.UserService implementation:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> postgres</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"database/sql"</span></span><br><span class="line"></span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp"</span></span><br><span class="line">	_ <span class="string">"github.com/lib/pq"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// UserService represents a PostgreSQL implementation of myapp.UserService.</span></span><br><span class="line"><span class="keyword">type</span> UserService <span class="keyword">struct</span> {</span><br><span class="line">	DB *sql.DB</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// User returns a user for a given id.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *UserService)</span> <span class="title">User</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*myapp.User, error)</span></span> {</span><br><span class="line">	<span class="keyword">var</span> u myapp.User</span><br><span class="line">	row := db.QueryRow(<span class="string">`SELECT id, name FROM users WHERE id = $1`</span>, id)</span><br><span class="line">	<span class="keyword">if</span> row.Scan(&amp;u.ID, &amp;u.Name); err != <span class="literal">nil</span> {</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> &amp;u, <span class="literal">nil</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// implement remaining myapp.UserService interface...</span></span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ê²ƒì€ PostgreSQL ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•˜ê²Œë˜ëŠ”ë° ì´ëŸ¬í•œ ì˜ì¡´ì„±ì˜ ë¶„ë¦¬ëŠ” í…ŒìŠ¤íŠ¸ ê³¼ì •ì„ ë‹¨ìˆœí™”ì‹œì¼œì£¼ê³  ì¶”í›„ ë˜ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê¸° ìœ„í•œ ì‰¬ìš´ ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ BoltDBì™€ ê°™ì€ ë˜ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì„¸ë¶€ êµ¬í˜„ì„ ì§€ì›í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤ë©´ ì´ê²ƒì€ í”ŒëŸ¬ê·¸í˜• êµ¬ì¡°ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>This isolates our PostgreSQL dependency which simplifies testing and provides an easy way to migrate to another database in the future. It can be used as a pluggable architecture if you decide to support other database implementations such as BoltDB.</p>
</blockquote>
<p>ì´ê²ƒì€ ë˜í•œ êµ¬í˜„ì„ ê³„ì¸µí™”í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì•„ë§ˆë„ ì—¬ëŸ¬ë¶„ì€ PostgreSQL ì•ì— LRU ìºì‹œë¥¼ ë‘ì–´ ë°ì´í„°ë¥¼ ë©”ëª¨ìƒì— ë³´ê´€í•˜ê¸°ë¥¼ ì›í•  ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ PostgreSQL ì„¸ë¶€ êµ¬í˜„ì„ ë˜í•‘(wrapping)í•  ìˆ˜ ìˆëŠ” UserServiceë¥¼ êµ¬í˜„í•˜ëŠ” UserCacheë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>It also gives you a way to layer implementations. Perhaps you want to hold an in-memory, LRU cache in front of PostgreSQL. You can add a UserCache that implements UserService which can wrap your PostgreSQL implementation:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myapp</span><br><span class="line"></span><br><span class="line"><span class="comment">// UserCache wraps a UserService to provide an in-memory cache.</span></span><br><span class="line"><span class="keyword">type</span> UserCache <span class="keyword">struct</span> {</span><br><span class="line">		cache   <span class="keyword">map</span>[<span class="keyword">int</span>]*User</span><br><span class="line">		service UserService</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// NewUserCache returns a new read-through cache for service.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewUserCache</span><span class="params">(service UserService)</span> *<span class="title">UserCache</span></span> {</span><br><span class="line">		<span class="keyword">return</span> &amp;UserCache{</span><br><span class="line">				cache: <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]*User),</span><br><span class="line">				service: service,</span><br><span class="line">		}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// User returns a user for a given id.</span></span><br><span class="line"><span class="comment">// Returns the cached instance if available.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *UserCache)</span> <span class="title">User</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*User, error)</span></span> {</span><br><span class="line">	<span class="comment">// Check the local cache first.</span></span><br><span class="line">		<span class="keyword">if</span> u := c.cache[id]; u != <span class="literal">nil</span> {</span><br><span class="line">				<span class="keyword">return</span> u, <span class="literal">nil</span></span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Otherwise fetch from the underlying service.</span></span><br><span class="line">		u, err := c.service.User(id)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">		} <span class="keyword">else</span> <span class="keyword">if</span> u != <span class="literal">nil</span> {</span><br><span class="line">			c.cache[id] = u</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">return</span> u, err</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>Golangì˜ ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì—ì„œë„ ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. io.ReaderëŠ” ë°”ì´íŠ¸ë¥¼ ì½ì–´ë“¤ì´ê¸° ìœ„í•œ ë„ë©”ì¸ íƒ€ì…ì´ê³  ê·¸ê²ƒì˜ ì„¸ë¶€ êµ¬í˜„ë“¤ì€ ì˜ì¡´ì„±ì— ì˜í•´ ê·¸ë£¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤ - tar.Reader, gzip.Reader, multipart.Reader. ì´ê²ƒë“¤ ë˜í•œ ê³„ì¸µí™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. os.Fileì€ bufio.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆê³  ì´ bufio.ReaderëŠ” gzip.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆìœ¼ë©° gzip.ReaderëŠ” tar.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆëŠ” ì´ëŸ¬í•œ ëª¨ìŠµë“¤ì€ í”íˆ ë³´ì´ëŠ” ê³„ì¸µ êµ¬ì¡°ë“¤ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>We see this approach in the standard library too. The io.Reader is a domain type for reading bytes and its implementations are grouped by dependency â€” tar.Reader, gzip.Reader, multipart.Reader. These can be layered as well. Itâ€™s common to see an os.File wrapped by a bufio.Reader which is wrapped by a gzip.Reader which is wrapped by a tar.Reader.</p>
</blockquote>
<br>

<h3 id="ì˜ì¡´ì„±-ê°„ì˜-ì˜ì¡´ì„±"><a href="#ì˜ì¡´ì„±-ê°„ì˜-ì˜ì¡´ì„±" class="headerlink" title="ì˜ì¡´ì„± ê°„ì˜ ì˜ì¡´ì„±"></a>ì˜ì¡´ì„± ê°„ì˜ ì˜ì¡´ì„±</h3><p>ì—¬ëŸ¬ë¶„ì˜ ì˜ì¡´ì„±ì€ í™€ë¡œ ê³ ë¦½ëœ ì±„ë¡œ ì‚´ì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. User ë°ì´í„°ëŠ” PostgreSQLì— ì €ì¥ì„ í•˜ê³  ì¬ë¬´ì™€ ê´€ë ¨ëœ íŠ¸ëœì­ì…˜ ë°ì´í„°ëŠ” Stripeì™€ ê°™ì€ 3rd party ì„œë¹„ìŠ¤ì— ì €ì¥í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” Stripeê°€ ë…¼ë¦¬ì ì¸ ë„ë©”ì¸ íƒ€ì…ê³¼ í•¨ê»˜ ë¬¶ì´ê²Œ ë©ë‹ˆë‹¤ - ì´ê²ƒì„ TranscationServiceë¼ê³  ë¶€ë¥´ê¸°ë¡œ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Your dependencies donâ€™t live in isolation. You may store User data in PostgreSQL but your financial transaction data exists in a third party service like Stripe. In this case we wrap our Stripe dependency with a logical domain type â€” letâ€™s call it TransactionService.</p>
</blockquote>
<p>UserServiceì— TransactionServiceë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ì´ ë‘ê°€ì§€ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>By adding our TransactionService to our UserService we decouple our two dependencies:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> UserService <span class="keyword">struct</span> {</span><br><span class="line">	DB                 *sql.DB</span><br><span class="line">	TransactionService myapp.TransactionService</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ì œ ìš°ë¦¬ì˜ ì˜ì¡´ì„±ë“¤ì€ ì˜¤ì§ ê³µí†µëœ ë„ë©”ì¸ ì–¸ì–´ë¥¼ í†µí•´ì„œë§Œ ì†Œí†µí•˜ê²Œ ë©ë‹ˆë‹¤. ì´ê²ƒì€ ìš°ë¦¬ê°€ ë‹¤ë¥¸ ì˜ì¡´ì„±ë“¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  PostgreSQLì„ MySQLë¡œ Stripeë¥¼ ë˜ ë‹¤ë¥¸ ì§€ë¶ˆ í”„ë¡œì„¸ì„œë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Now our dependencies communicate solely through our common domain language. This means that we could swap out PostgreSQL for MySQL or switch Stripe for another payment processor without affecting other dependencies.</p>
</blockquote>
<br>

<h3 id="ì´ëŸ¬í•œ-ì ‘ê·¼-ë°©ì‹ì„-3rd-party-ì˜ì¡´ì„±ì—ë§Œ-êµ­í•œ-ì‹œí‚¤ì§€ë§ˆë¼"><a href="#ì´ëŸ¬í•œ-ì ‘ê·¼-ë°©ì‹ì„-3rd-party-ì˜ì¡´ì„±ì—ë§Œ-êµ­í•œ-ì‹œí‚¤ì§€ë§ˆë¼" class="headerlink" title="ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ 3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ˆë¼"></a>ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ 3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ˆë¼</h3><p>3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ë¼ëŠ” ë§ì´ ì´ìƒí•˜ê²Œ ë“¤ë¦´ ìˆ˜ ìˆì§€ë§Œ ì´ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ Golangì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê³ ë¦½ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, net/http íŒ¨í‚¤ì§€ëŠ” ë‹¨ì§€ ë˜ ë‹¤ë¥¸ ì˜ì¡´ì„±ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì¡´ì¬í•˜ëŠ” http ë¼ëŠ” í•˜ìœ„íŒ¨í‚¤ì§€ì— ì´ net/http íŒ¨í‚¤ì§€ë¥¼  ì¶”ê°€í•¨ìœ¼ë¡œì¨ ê³ ë¦½ëœ í™˜ê²½ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>This may sound odd but I also isolate my standard library dependencies with this same method. For instance, the net/http package is just another dependency. We can isolate it as well by including an http subpackage in our application.</p>
</blockquote>
<p>í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ ì´ë¦„ì´ ê·¸ê²ƒì´ ê°ì‹¸ê³  ìˆëŠ” ì˜ì¡´ì„±ê³¼ ë™ì¼í•œ ì´ë¦„ì„ ê°–ëŠ”ë‹¤ëŠ” ê²ƒì´ ì´ìƒí•  ìˆ˜ ìˆì§€ë§Œ ì´ê²ƒì€ ì˜ë„ëœ ê²ƒì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ë¥¸ ì–´ë– í•œ ëª¨ë“ˆë“¤ì—ì„œë„ net/http íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì´ ì—†ë‹¤ë©´ íŒ¨í‚¤ì§€ ì´ë¦„ ì¶©ëŒì´ ë°œìƒí•  ì¼ì€ ì—†ìŠµë‹ˆë‹¤. ì´ë¦„ì„ ì¤‘ë³µì‹œí‚´ìœ¼ë¡œ ì–»ì„ ìˆ˜ ìˆëŠ” ì´ì ì€ ì´ë¥¼ í†µí•´ ì—¬ëŸ¬ë¶„ì´ HTTPì™€ ê´€ë ¨ëœ ëª¨ë“  ì½”ë“œë“¤ì€ ìƒˆë¡­ê²Œ ë§Œë“  http íŒ¨í‚¤ì§€ì— í¬í•¨ë˜ë„ë¡ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>It might seem odd to have a package with the same name as the dependency it wraps, however, this is intentional. There are no package name conflicts in your application unless you allow net/http to be used in other parts of your application. The benefit to duplicating the name is that it requires you to isolate all HTTP code to your http package.</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> http</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">		<span class="string">"net/http"</span></span><br><span class="line">		</span><br><span class="line">		<span class="string">"github.com/benbjohnson/myapp"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Handler <span class="keyword">struct</span> {</span><br><span class="line">		UserService myapp.UserService</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *Handler)</span> <span class="title">ServeHTTP</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> {</span><br><span class="line">		<span class="comment">// handle request</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ì œ ìš°ë¦¬ê°€ ë§Œë“  http.HandlerëŠ” ë„ë©”ì¸ê³¼ HTTP í”„ë¡œí† ì½œ ê°„ ì–´ëŒ‘í„°ë¡œì„œì˜ ì—­í• ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Now your http.Handler acts as an adapter between your domain and the HTTP protocol.</p>
</blockquote>
<br>

<h2 id="3-ê³µìœ ëœ-mock-í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼-ì‚¬ìš©í•˜ë¼"><a href="#3-ê³µìœ ëœ-mock-í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼-ì‚¬ìš©í•˜ë¼" class="headerlink" title="#3. ê³µìœ ëœ mock í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë¼"></a>#3. ê³µìœ ëœ mock í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë¼</h2><p>ìš°ë¦¬ì˜ ì˜ì¡´ì„±ë“¤ì€ ë„ë©”ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë‹¤ë¥¸ ì˜ì¡´ì„±ë“¤ê³¼ ë¶„ë¦¬ë˜ì–´ ìˆê¸°ë–„ë¬¸ì— ìš°ë¦¬ëŠ” mock êµ¬í˜„ì„ ì£¼ì…í•˜ê¸° ìœ„í•´ ì´ëŸ¬í•œ ì—°ê²° ì§€ì ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Because our dependencies are isolated from other dependencies by our domain interfaces, we can use these connection points to inject mock implementations.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì—ê²Œ mockë¥¼ ìƒì„±í•´ì£¼ëŠ” GoMockê³¼ ê°™ì€ mocking ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ëª‡ê°€ì§€ ìˆì§€ë§Œ ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ ê·¸ê²ƒë“¤ì„ ì§ì ‘ ì‘ì„±í•˜ëŠ”ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ mocking ë„êµ¬ë“¤ì€ ë„ˆë¬´ ë³µì¡í•˜ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>There are several mocking libraries such as GoMock that will generate mocks for you but I personally prefer to just write them myself. I find many of the mocking tools to be overly complicated.</p>
</blockquote>
<p>ì œê°€ ì‚¬ìš©í•˜ëŠ” mocksëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, UserServiceë¥¼ ìœ„í•œ mockì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>The mocks I use are very simple. For example, a mock for the UserService looks like:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mock</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"github.com/benbjohnson/myapp"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// UserService represents a mock implementation of myapp.UserService.</span></span><br><span class="line"><span class="keyword">type</span> UserService <span class="keyword">struct</span> {</span><br><span class="line">		UserFn      <span class="function"><span class="keyword">func</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*myapp.User, error)</span></span></span><br><span class="line">		UserInvoked <span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line">		UsersFn     <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="params">([]*myapp.User, error)</span></span></span><br><span class="line">		UsersInvoked <span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// additional function implementations...</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// User invokes the mock implementation and marks the function as invoked.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *UserService)</span> <span class="title">User</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*myapp.User, error)</span></span> {</span><br><span class="line">		s.UserInvoked = <span class="literal">true</span></span><br><span class="line">		<span class="keyword">return</span> s.UserFn(id)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// additional functions: Users(), CreateUser(), DeleteUser()</span></span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ mockì€ ì¸ìë“¤ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê±°ë‚˜ ê¸°ëŒ€ëœ ë°ì´í„°ê°€ ë°˜í™˜ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ì‹¤íŒ¨í•˜ëŠ” ì¼€ì´ìŠ¤ë¥¼ ì£¼ì…í•´ë³´ê¸° ìœ„í•´ myapp.UserService ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸°ë§Œ í•œë‹¤ë©´ ì–´ëŠ ê³³ì´ë“  í•¨ìˆ˜ë“¤ì„ ì£¼ì…í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>This mock lets me inject functions into anything that uses the myapp.UserService interface to validate arguments, return expected data, or inject failures.</p>
</blockquote>
<p>ì˜ˆë¥¼ ë“¤ì–´ ìœ„ì—ì„œ ë§Œë“¤ì–´ ë³¸ http.Handlerë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ì›í•œë‹¤ê³  í•´ë´…ì‹œë‹¤:</p>
<blockquote>
<p>Letâ€™s say we want to test our http.Handler that we built above:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> http_test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"testing"</span></span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">	<span class="string">"net/http/httptest"</span></span><br><span class="line"></span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp/mock"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestHandler</span><span class="params">(t *testing.T)</span></span> {</span><br><span class="line">	<span class="comment">// Inject our mock into our handler.</span></span><br><span class="line">	<span class="keyword">var</span> us mock.UserService</span><br><span class="line">	<span class="keyword">var</span> h Handler</span><br><span class="line">	h.UserService = &amp;us</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Mock our User() call.</span></span><br><span class="line">	us.UserFn = <span class="function"><span class="keyword">func</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*myapp.User, error)</span></span> {</span><br><span class="line">		<span class="keyword">if</span> id != <span class="number">100</span> {</span><br><span class="line">			t.Fatalf(<span class="string">"unexpected id: %d"</span>, id)</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">return</span> &amp;myapp.User{ID: <span class="number">100</span>, Name: <span class="string">"susy"</span>}, <span class="literal">nil</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Invoke the handler.</span></span><br><span class="line">	w := httptest.NewRecorder()</span><br><span class="line">	r, _ := http.NewRequest(<span class="string">"GET"</span>, <span class="string">"/users/100"</span>, <span class="literal">nil</span>)</span><br><span class="line">	h.ServeHTTP(w, r)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// Validate mock.</span></span><br><span class="line">	<span class="keyword">if</span> !us.UserInvoked {</span><br><span class="line">		t.Fatal(<span class="string">"expected User() to be invoked"</span>)</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>mockëŠ” ìœ ë‹› í…ŒìŠ¤íŠ¸ì™€ HTTP í”„ë¡œí† ì½œì˜ ì²˜ë¦¬ë¶€ë¶„ì´ ì™„ì „íˆ ë¶„ë¦¬ë  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Our mock lets us completely isolate our unit test to only the handling of the HTTP protocol.</p>
</blockquote>
<br>

<h2 id="4-ë©”ì¸-íŒ¨í‚¤ì§€ëŠ”-ì˜ì¡´ì„±ë“¤ì„-í•˜ë‚˜ë¡œ-ì—®ëŠ”ë‹¤"><a href="#4-ë©”ì¸-íŒ¨í‚¤ì§€ëŠ”-ì˜ì¡´ì„±ë“¤ì„-í•˜ë‚˜ë¡œ-ì—®ëŠ”ë‹¤" class="headerlink" title="#4. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì˜ì¡´ì„±ë“¤ì„ í•˜ë‚˜ë¡œ ì—®ëŠ”ë‹¤"></a>#4. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì˜ì¡´ì„±ë“¤ì„ í•˜ë‚˜ë¡œ ì—®ëŠ”ë‹¤</h2><p>ì´ëŸ¬í•œ ëª¨ë“  ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë“¤ì´ ê³ ë¦½ëœ ì±„ë¡œ ë– ë‹¤ë‹ˆê²Œ ëœë‹¤ë©´ ì´ë“¤ì„ ì–´ë–»ê²Œ í•˜ë‚˜ë¡œ ê²°í•©í•  ìˆ˜ ìˆì„ì§€ ê¶ê¸ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ ë©”ì¸ íŒ¨í‚¤ì§€ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>With all these dependency packages floating around in isolation, you may wonder how they all come together. Thatâ€™s the job of the main package.</p>
</blockquote>
<br>

<h3 id="ë©”ì¸-íŒ¨í‚¤ì§€-ë ˆì´ì•„ì›ƒ"><a href="#ë©”ì¸-íŒ¨í‚¤ì§€-ë ˆì´ì•„ì›ƒ" class="headerlink" title="ë©”ì¸ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ"></a>ë©”ì¸ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ</h3><p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ 2ê°œ ì´ìƒì˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ë„ ìˆëŠ”ë° ì´ë¥¼ ìœ„í•´ ë©”ì¸ íŒ¨í‚¤ì§€ë¥¼ cmd íŒ¨í‚¤ì§€ì˜ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ ë‘ëŠ” Go ì–¸ì–´ì˜ ê´€ìŠµ(convention)ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìš°ë¦¬ í”„ë¡œì íŠ¸ê°€ myapp ì´ë¼ëŠ” ì„œë²„ ë°”ì´ë„ˆë¦¬ë¿ë§Œ ì•„ë‹ˆë¼ í„°ë¯¸ë„ì„ í†µí•´ ì„œë²„ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” myappctl ì´ë¼ëŠ” í´ë¼ì´ì–¸íŠ¸ ë°”ì´ë„ˆë¦¬ë„ ê°–ê³ ìˆë‹¤ê³  í•´ë´…ì‹œë‹¤. ìš°ë¦¬ì˜ ë©”ì¸ íŒ¨í‚¤ì§€ë¥¼ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤:</p>
<blockquote>
<p>An application may produce multiple binaries so weâ€™ll use the Go convention of placing our main package as a subdirectory of the cmd package. For example, our project may have a myapp server binary but also a myappctl client binary for managing the server from the terminal. Weâ€™ll layout our main packages like this:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">myapp/</span><br><span class="line">    cmd/</span><br><span class="line">        myapp/</span><br><span class="line">            main.go</span><br><span class="line">        myappctl/</span><br><span class="line">            main.go</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ì»´íŒŒì¼-íƒ€ì„ì—-ì˜ì¡´ì„±-ì£¼ì…"><a href="#ì»´íŒŒì¼-íƒ€ì„ì—-ì˜ì¡´ì„±-ì£¼ì…" class="headerlink" title="ì»´íŒŒì¼ íƒ€ì„ì— ì˜ì¡´ì„± ì£¼ì…"></a>ì»´íŒŒì¼ íƒ€ì„ì— ì˜ì¡´ì„± ì£¼ì…</h3><p>â€œì˜ì¡´ì„± ì£¼ì…â€ì´ë¼ëŠ” ìš©ì–´ëŠ” ë‚˜ìœ í‰íŒì„ ë°›ì•„ì™”ìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì¥í™©í•œ Spring XML íŒŒì¼ì— ëŒ€í•œ ìƒê°ì„ ë¶ˆëŸ¬ì¼ìœ¼ í‚µë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ ìš©ì–´ì˜ ì‹¤ì œ ì˜ë¯¸ëŠ” ìš°ë¦¬ëŠ” ê°ì²´ì—ê²Œ ìŠ¤ìŠ¤ë¡œ ë¹Œë“œí•˜ê±°ë‚˜ ì˜ì¡´ì„±ì„ ì§ì ‘ ì°¾ì•„ê°€ëŠ” ê²ƒì„ ìš”êµ¬í•˜ëŠ” ëŒ€ì‹ ì— ê°ì²´ì—ê²Œ ì˜ì¡´ì„±ì„ ì§ì ‘ ì „ë‹¬í•´ì¤„ ê²ƒì´ë‹¤ë¼ëŠ” ê²ƒì´ ì „ë¶€ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The term â€œdependency injectionâ€ has gotten a bad rap. It conjures up thoughts of verbose Spring XML files. However, all the term really means is that weâ€™re going to pass dependencies to our objects instead of requiring that the object build or find the dependency itself.</p>
</blockquote>
<p>ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì–´ë–¤ ì˜ì¡´ì„±ì„ ì–´ë–¤ ê°ì²´ì—ê²Œ ì£¼ì…í•  ê²ƒì¸ì§€ë¥¼ ì„ íƒí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ë‹¨ìˆœíˆ ì´ëŸ¬í•œ ì¡°ê°ë“¤ì„ ì´ì–´ ë¶™ì´ëŠ” ì—­í• ë§Œì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œì˜ ê·œëª¨ê°€ ì‘ê³  ì‚¬ì†Œí•œ ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>The main package is what gets to choose which dependencies to inject into which objects. Because the main package simply wires up the pieces, it tends to be fairly small and trivial code:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"log"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">	</span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp"</span></span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp/postgres"</span></span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp/http"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">	<span class="comment">// Connect to database.</span></span><br><span class="line">	db, err := postgres.Open(os.Getenv(<span class="string">"DB"</span>))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">defer</span> db.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Create services.</span></span><br><span class="line">	us := &amp;postgres.UserService{DB: db}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Attach to HTTP handler.</span></span><br><span class="line">	<span class="keyword">var</span> h http.Handler</span><br><span class="line">	h.UserService = us</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// start http server...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì—¬ëŸ¬ë¶„ì˜ ë©”ì¸ íŒ¨í‚¤ì§€ ë˜í•œ ì–´ëŒ‘í„°ì˜ ì—­í• ì„ í•œë‹¤ëŠ” ê²ƒë„ ì¤‘ìš”í•œ ì ì…ë‹ˆë‹¤. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” í„°ë¯¸ë„ê³¼ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì„ ì—°ê²°í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Itâ€™s also important to note that your main package is also an adapter. It connects the terminal to your domain.</p>
</blockquote>
<br>

<h2 id="ê²°ë¡ "><a href="#ê²°ë¡ " class="headerlink" title="ê²°ë¡ "></a>ê²°ë¡ </h2><p>ì–´í”Œë¦¬ì¼€ì´ì…˜ ë””ìì¸ì€ ë§¤ìš° ì–´ë ¤ìš´ ë¬¸ì œì…ë‹ˆë‹¤. ë„ˆë¬´ë‚˜ ë§ì€ ë””ìì¸ ê²°ì •ë“¤ì´ ì¡´ì¬í•˜ê³  ì—¬ëŸ¬ë¶„ì—ê²Œ ê°€ì´ë“œí•´ì¤„ ê²¬ê³ í•œ ì´ë¡ ë“¤ì˜ ë¶€ì¬ëŠ” ë¬¸ì œë¥¼ ë”ìš± ì‹¬ê°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” Go ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í˜„ì¬ ì‚¬ìš©ë˜ëŠ” ëª‡ê°€ì§€ ì ‘ê·¼ ë°©ì‹ì„ ì‚´í´ë³´ì•˜ê³  ê·¸ê²ƒë“¤ì˜ ë§ì€ ê²°í•¨ë“¤ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Application design is a hard problem. There are so many design decisions to make and without a set of solid principles to guide you the problem is made even worse. Weâ€™ve looked at several current approaches to Go application design and weâ€™ve seen many of their flaws.</p>
</blockquote>
<p>ì €ëŠ” ì˜ì¡´ì„±ì˜ ê´€ì ì„ í†µí•´ ë””ìì¸ì— ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì´ ì½”ë“œ êµ¬ì„±ì„ ë” ë‹¨ìˆœí•˜ê³  ì‰½ê²Œ ì¶”ë¡ í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ ì¤€ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ë¨¼ì € ìš°ë¦¬ëŠ” ë„ë©”ì¸ ì–¸ì–´ë¥¼ ë””ìì¸ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ ì˜ì¡´ì„±ë“¤ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ mocksë¥¼ ë„ì…í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ë©”ì¸ íŒ¨í‚¤ì§€ ì•ˆì—ì„œ ì´ ëª¨ë“  ê²ƒë“¤ì„ í•˜ë‚˜ë¡œ ì—®ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>I believe approaching design from the standpoint of dependencies makes code organization simpler and easier to reason about. First we design our domain language. Then we isolate our dependencies. Next we introduce mocks to isolate our tests. Finally, we tie everything together within our main package.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì´ ë””ìì¸í•  ë‹¤ìŒ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì´ëŸ¬í•œ ì´ë¡ ë“¤ì„ ê³ ë ¤í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. ì§ˆë¬¸ì´ ìˆìœ¼ì‹œê±°ë‚˜ ë””ìì¸ì— ëŒ€í•œ í† ë¡ ì„ ì›í•˜ì‹ ë‹¤ë©´ @benbjohnson íŠ¸ìœ„í„°ë¥¼ í†µí•´ ì—°ë½ì£¼ì‹œê±°ë‚˜ Gopher ìŠ¬ë™ì—ì„œ benbjohnsonì„ ì°¾ì•„ì£¼ì„¸ìš”.</p>
<blockquote>
<p>Consider these principles in the next application you design. If you have any questions or want to discuss design, contact me at @benbjohnson on Twitter or find me as benbjohnson on the Gopher slack.</p>
</blockquote>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.gobeyond.dev/standard-package-layout/">https://www.gobeyond.dev/standard-package-layout/</a></li>
</ul>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">íƒœê·¸</span><br>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/go/" rel="tag">go</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/go-layout/" rel="tag">go layout</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/golang/" rel="tag">golang</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/organize-go-code/" rel="tag">organize go code</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/package-layout/" rel="tag">package layout</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2022/12/01/translate-packages-as-layers/" data-tooltip="ê·¸ë£¹ì´ ì•„ë‹Œ ê³„ì¸µìœ¼ë¡œì„œì˜ Go íŒ¨í‚¤ì§€" aria-label="ì´ì „: ê·¸ë£¹ì´ ì•„ë‹Œ ê³„ì¸µìœ¼ë¡œì„œì˜ Go íŒ¨í‚¤ì§€">
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ì´ì „</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2022/03/05/cmake-tutorial/" data-tooltip="CMakeì— ëŒ€í•´ ì•Œì•„ë³´ì" aria-label="ë‹¤ìŒ: CMakeì— ëŒ€í•´ ì•Œì•„ë³´ì">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ë‹¤ìŒ</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="ì´ í¬ìŠ¤íŠ¸ ê³µìœ í•˜ê¸°">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" title="Facebookì— ê³µìœ í•˜ê¸°" aria-label="Facebookì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" title="Twitterì— ê³µìœ í•˜ê¸°" aria-label="Twitterì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://plus.google.com/share?url=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" title="Google+ì— ê³µìœ í•˜ê¸°" aria-label="Google+ì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ëª©ì°¨">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



<!-- Comment -->
<!--  utteranc comment -->

<script src="https://utteranc.es/client.js" repo="chelseafandev/blog-comment" issue-term="title" label="Comment" theme="github-light" crossorigin="anonymous" async>
</script>

                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2024 ì²¼ì‹œíŒ¬ê°œë°œì. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2022/12/01/translate-packages-as-layers/" data-tooltip="ê·¸ë£¹ì´ ì•„ë‹Œ ê³„ì¸µìœ¼ë¡œì„œì˜ Go íŒ¨í‚¤ì§€" aria-label="ì´ì „: ê·¸ë£¹ì´ ì•„ë‹Œ ê³„ì¸µìœ¼ë¡œì„œì˜ Go íŒ¨í‚¤ì§€">
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ì´ì „</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2022/03/05/cmake-tutorial/" data-tooltip="CMakeì— ëŒ€í•´ ì•Œì•„ë³´ì" aria-label="ë‹¤ìŒ: CMakeì— ëŒ€í•´ ì•Œì•„ë³´ì">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ë‹¤ìŒ</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="ì´ í¬ìŠ¤íŠ¸ ê³µìœ í•˜ê¸°">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" title="Facebookì— ê³µìœ í•˜ê¸°" aria-label="Facebookì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" title="Twitterì— ê³µìœ í•˜ê¸°" aria-label="Twitterì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://plus.google.com/share?url=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" title="Google+ì— ê³µìœ í•˜ê¸°" aria-label="Google+ì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ëª©ì°¨">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" aria-label="Facebookì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebookì— ê³µìœ í•˜ê¸°</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://twitter.com/intent/tweet?text=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" aria-label="Twitterì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitterì— ê³µìœ í•˜ê¸°</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://plus.google.com/share?url=https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/" aria-label="Google+ì— ê³µìœ í•˜ê¸°" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+ì— ê³µìœ í•˜ê¸°</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile_github.jpeg" alt="ì €ì ì´ë¯¸ì§€">
        
            <h4 id="about-card-name">ì²¼ì‹œíŒ¬ê°œë°œì</h4>
        
            <div id="about-card-bio"><p>ì¡°ê¸ˆ ë”ë””ë”ë¼ë„ ê¾¸ì¤€íˆ</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>ê°œë°œì</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                ì„œìš¸, ëŒ€í•œë¯¼êµ­
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="external nofollow noopener noreferrer" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="/assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search" class="form-control input--large search-input" placeholder="Search ">
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">í¬ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
            <div class="results">
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/07/08/hello-hexo/" aria-label=": Hexo Tranquilpeak í…Œë§ˆì˜ Markdown syntax">
                            <h3 class="media-heading">Hexo Tranquilpeak í…Œë§ˆì˜ Markdown syntax</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 7ì›” 8ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>Hexo í…Œë§ˆ ì¤‘ í•˜ë‚˜ì¸ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak/blob/master/DOCUMENTATION.md">Tranquilpeakì˜ ê³µì‹ ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì—¬ Postì‹œì— í™œìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ Markdown syntaxë“¤ì„ ì‚¬ìš©í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!-- 
                    <div class="media-left">
                        <a
                            class="link-unstyled"
                            href="https://chelseafandev.github.io/2021/07/10/tr-ruud-gullit/"
                            aria-label=": (BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œ ë£¨ë“œ êµ´ë¦¬íŠ¸ 25ë…„ì´ ì§€ë‚œ ì§€ê¸ˆ ê·¸ì˜ í”„ë¦¬ë¯¸ì–´ê·¸ë¦¬ ì§„ì¶œì„ ì• ì •ì–´ë¦° ì‹œì„ ìœ¼ë¡œ ë˜ëŒì•„ ë³´ë‹¤"
                        >
                            <img class="media-image" src="https://chelseafandev.github.io/2021/07/10/tr-ruud-gullit/tr_ruud_gullit_picture_1.png" width="90" height="90"/>
                        </a>
                    </div>
                     -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/07/10/tr-ruud-gullit/" aria-label=": (BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œ ë£¨ë“œ êµ´ë¦¬íŠ¸ 25ë…„ì´ ì§€ë‚œ ì§€ê¸ˆ ê·¸ì˜ í”„ë¦¬ë¯¸ì–´ê·¸ë¦¬ ì§„ì¶œì„ ì• ì •ì–´ë¦° ì‹œì„ ìœ¼ë¡œ ë˜ëŒì•„ ë³´ë‹¤">
                            <h3 class="media-heading">(BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œ ë£¨ë“œ êµ´ë¦¬íŠ¸ 25ë…„ì´ ì§€ë‚œ ì§€ê¸ˆ ê·¸ì˜ í”„ë¦¬ë¯¸ì–´ê·¸ë¦¬ ì§„ì¶œì„ ì• ì •ì–´ë¦° ì‹œì„ ìœ¼ë¡œ ë˜ëŒì•„ ë³´ë‹¤</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 7ì›” 10ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>í”¼íŒŒ ì¢€ í•œë‹¤ëŠ” ì‚¬ëŒì´ë¼ë©´ ëª¨ë‘ê°€ ë‹¤ ì•Œë§Œí•œ ê·¸ ë¶„, Xì‚¬ê¸°ìº êµ´ë¦¬íŠ¸ğŸ˜¬<br>ì»¤ë¦¬ì–´ ë§‰ë°”ì§€ì— ì²¼ì‹œì—ì„œë„ ì ê¹ í™œì•½í–ˆì—ˆë„¤ìš”.<br><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.bbc.com/sport/football/52904670">BBC Sportì— êµ´ë¦¬íŠ¸ê°€ ì§ì ‘ ê¸°ê³ í•œ íšŒê³ ë¡ ëŠë‚Œì˜ ê¸€</a>ì„ í•œë²ˆ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/07/13/os-io-system/" aria-label=": I/OëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ?">
                            <h3 class="media-heading">I/OëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ?</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 7ì›” 13ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ìš´ì˜ ì²´ì œì˜ ë°”ì´ë¸” <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.wiley.com/en-us/Operating+System+Concepts%2C+10th+Edition-p-9781119320913">Operating System Concepts</a>(í”íˆ ê³µë£¡ì±…ğŸ¦•ì´ë¼ê³ ë“¤ í•˜ì£ )ì„ ë°”íƒ•ìœ¼ë¡œ I/O ì‹œìŠ¤í…œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/07/22/tip-how-to-use-tmux-md/" aria-label=": ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œ tmuxë¥¼ í™œìš©í•´ë³´ì">
                            <h3 class="media-heading">ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œ tmuxë¥¼ í™œìš©í•´ë³´ì</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 7ì›” 22ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì´ë²ˆì—” ìµìˆ™í•´ì§€ë©´ ì •ë§ ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œì¸ tmuxì— ëŒ€í•´ ì†Œê°œí•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/08/02/os-sync-async-block-nonblock/" aria-label=": Blocking, Nonblocking, Sync, Async">
                            <h3 class="media-heading">Blocking, Nonblocking, Sync, Async</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 8ì›” 2ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì˜¤ëŠ˜ì€ ê³µë£¡ì±…ğŸ¦•ì— ì–¸ê¸‰ëœ Blockingê³¼ Nonblocking, Synchronousì™€ Asynchronousì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤. Synchronousì™€ Asynchronousì˜ ê°œë…ì€ <strong>ì“°ë ˆë“œ</strong>ì™€ <strong>I/O</strong>ì—ì„œ ë“±ì¥í•˜ê²Œ ë˜ëŠ”ë°ìš”, ê°ê°ì´ ì–´ë– í•œ ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ë„ êµ¬ë¶„í•´ì„œ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!-- 
                    <div class="media-left">
                        <a
                            class="link-unstyled"
                            href="https://chelseafandev.github.io/2021/08/05/tr-lukaku-want-to-chelsea/"
                            aria-label=": (BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œì˜ ë¬¼ë§ì— ì˜¤ë¥¸ ë£¨ì¹´ì¿  ì ì ˆí•œ ì˜¤í¼ê°€ ì˜¨ë‹¤ë©´ ì¸í„° ë°€ë€ì„ ë– ë‚˜ê¸° ì›í•´"
                        >
                            <img class="media-image" src="https://chelseafandev.github.io/2021/08/05/tr-lukaku-want-to-chelsea/tr-lukaku-want-to-chelsea.jpg" width="90" height="90"/>
                        </a>
                    </div>
                     -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/08/05/tr-lukaku-want-to-chelsea/" aria-label=": (BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œì˜ ë¬¼ë§ì— ì˜¤ë¥¸ ë£¨ì¹´ì¿  ì ì ˆí•œ ì˜¤í¼ê°€ ì˜¨ë‹¤ë©´ ì¸í„° ë°€ë€ì„ ë– ë‚˜ê¸° ì›í•´">
                            <h3 class="media-heading">(BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œì˜ ë¬¼ë§ì— ì˜¤ë¥¸ ë£¨ì¹´ì¿  ì ì ˆí•œ ì˜¤í¼ê°€ ì˜¨ë‹¤ë©´ ì¸í„° ë°€ë€ì„ ë– ë‚˜ê¸° ì›í•´</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 8ì›” 5ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì˜¤ëŠ˜ì€ ì²¼ì‹œ ì´ì ì„¤ì´ ê°€ê¹Œì›Œì ¸ê°€ê³  ìˆëŠ” ë£¨ì¹´ì¿  ê´€ë ¨ ê¸°ì‚¬ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ë² ë¥´ë„ˆì˜ ê²°ì •ë ¥ì´ ë„ˆë¬´ë‚˜ë„ ì•„ì‰¬ì› ë˜ ì§€ë‚œ ì‹œì¦Œ ì²¼ì‹œë¥¼ ìƒê°í•˜ë©´ ê¼­ í•„ìš”í•œ ì˜ì…ì´ë¼ê³  ìƒê°ë˜ë„¤ìš”ğŸ˜</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!-- 
                    <div class="media-left">
                        <a
                            class="link-unstyled"
                            href="https://chelseafandev.github.io/2021/08/12/tr-son-new-contract/"
                            aria-label=": (BBC ìŠ¤í¬ì¸ ) í† íŠ¸ë„˜ ê³µê²©ìˆ˜ ì†í¥ë¯¼ 4ë…„ ì¬ê³„ì•½ ì„±ì‚¬"
                        >
                            <img class="media-image" src="https://chelseafandev.github.io/2021/08/12/tr-son-new-contract/tr-son-new-contract-figure1.jpg" width="90" height="90"/>
                        </a>
                    </div>
                     -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/08/12/tr-son-new-contract/" aria-label=": (BBC ìŠ¤í¬ì¸ ) í† íŠ¸ë„˜ ê³µê²©ìˆ˜ ì†í¥ë¯¼ 4ë…„ ì¬ê³„ì•½ ì„±ì‚¬">
                            <h3 class="media-heading">(BBC ìŠ¤í¬ì¸ ) í† íŠ¸ë„˜ ê³µê²©ìˆ˜ ì†í¥ë¯¼ 4ë…„ ì¬ê³„ì•½ ì„±ì‚¬</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 8ì›” 12ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì˜¤ëŠ˜ì€ í˜„ì¬ í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ í† íŠ¸ë„˜ í•«ìŠ¤í¼ì—ì„œ í™œì•½ ì¤‘ì¸ ì†í¥ë¯¼ ì„ ìˆ˜ì˜ ì¬ê³„ì•½ ê´€ë ¨ ê¸°ì‚¬ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ë‹¤ìŒ ì‹œì¦Œ ëˆ„ëˆ„ê°ë…ì´ ì´ëŒê²Œ ë˜ëŠ” í† íŠ¸ë„˜, ìŒ‰ì›”í´ğŸ‘ ì†í¥ë¯¼ì„ ìˆ˜ì™€ í•¨ê»˜ ì¢‹ì€ ì„±ì  ê±°ë’€ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/09/24/hyperscan-phase1/" aria-label=": ì¸í…” Hyperscan ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ ë²ˆì—­">
                            <h3 class="media-heading">ì¸í…” Hyperscan ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ ë²ˆì—­</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 9ì›” 24ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì¸í…” Hyperscanì˜ <a target="_blank" rel="external nofollow noopener noreferrer" href="http://intel.github.io/hyperscan/dev-reference/index.html">ê³µì‹ ë¬¸ì„œ</a>ë¥¼ í†µí•´ ì»´íŒŒì¼(compile)ì´ë‚˜ ìŠ¤ìº”(scan)ê³¼ ê°™ì€ Hyperscanì˜ ê¸°ë³¸ì ì¸ ê°œë…ë“¤ì— ëŒ€í•´ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì¶”í›„ì—ëŠ” Hyperscan APIë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ì •ê·œ í‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­ì„ ìˆ˜í–‰í•˜ëŠ” ìƒ˜í”Œ ì½”ë“œë„ ì—…ë¡œë“œí•  ì˜ˆì •ì…ë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/10/12/hyperscan-phase2/" aria-label=": ì¸í…” Hyperscan API í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±">
                            <h3 class="media-heading">ì¸í…” Hyperscan API í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 10ì›” 12ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” <a href="https://chelseafandev.github.io/2021/09/24/hyperscan-phase1/">ì¸í…” Hyperscan ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ ë²ˆì—­</a>ì— ì´ì–´ì„œ Hyperscan APIë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ì •ê·œ í‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­ì„ ìˆ˜í–‰í•˜ëŠ” ìƒ˜í”Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  í…ŒìŠ¤íŠ¸ í•´ë³´ëŠ” ì‹œê°„ì„ ê°–ê² ìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    <!--  -->
                    <div class="media-body">
                        <a class="link-unstyled" href="https://chelseafandev.github.io/2021/11/09/gdb-chapter4-program-crash/" aria-label=": Seg FaultëŠ” ì™œ ë°œìƒí•˜ëŠ”ê°€?">
                            <h3 class="media-heading">Seg FaultëŠ” ì™œ ë°œìƒí•˜ëŠ”ê°€?</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2021ë…„ 11ì›” 9ì¼
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-nanumsquareround"><p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” <a target="_blank" rel="external nofollow noopener noreferrer" href="https://nostarch.com/debugging.htm">The Art of Debugging with GDB, DDD and Eclipse</a>ì˜ <strong>Chatper 4 WHEN A PROGRAM CRASHES</strong> ë‚´ìš©ì„ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤. í•´ë‹¹ ì±•í„°ì˜ ì•ë¶€ë¶„ì—ì„œëŠ” ê°€ìƒ ì£¼ì†Œ ê³µê°„ì—ì„œì˜ í˜ì´ì§€(page)ì— ëŒ€í•œ ê°œë…ì„ ì†Œê°œí•˜ê³  seg faultê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì„ í˜ì´ì§€(page)ì™€ ì—°ê´€ì§€ì–´ ì˜ ì„¤ëª…í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium" data-message-zero="í¬ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤." data-message-one="1 ê°œì˜ í¬ìŠ¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤." data-message-other="{n} ê°œì˜ í¬ìŠ¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤.">
                28 ê°œì˜ í¬ìŠ¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤.
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/chelsea_cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    



    
<script src="/assets/js/moment-with-locales.js"></script>

    
<script src="/assets/js/algoliasearch.js"></script>

    <script>
      var algoliaClient = algoliasearch('FDTOJ7KLS8', '935491408ac4c43d728c68858e4ea147');
      var algoliaIndex = algoliaClient.initIndex('chelseafandev');
    </script>


    </body>
</html>

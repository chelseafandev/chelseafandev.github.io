<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>boost io_contextì— ëŒ€í•œ ê³ ì°°</title>
    <url>/2021/12/28/boost-io-context/</url>
    <content><![CDATA[<p><em><strong>ë­í•˜ëŠ” ë†ˆì¸ì§€ëŠ” ì•Œê³  ì“°ì</strong></em> ì‹œë¦¬ì¦ˆì˜ ì²«ë²ˆì§¸ ì£¼ì œëŠ” <code>boost io_context</code>ì…ë‹ˆë‹¤.</p>
<span id="more"></span>

<p>ì´ë²ˆ ê¸°íšŒì— boost ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ í•œë²ˆì¯¤ì€ ë§ˆì£¼ì¹˜ê²Œë˜ëŠ” io_contextì— ëŒ€í•´ ìƒê°í•´ë³´ëŠ” ì‹œê°„ì„ ê°–ê² ìŠµë‹ˆë‹¤.</p>
<br>

<!-- toc -->

<br>

<hr>
<h1 id="Boost-Asio"><a href="#Boost-Asio" class="headerlink" title="Boost Asio"></a>Boost Asio</h1><p>ìš°ì„  io_contextì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ê¸° ì „ì— Boost Asioë¥¼ ê°„ëµí•˜ê²Œ ì†Œê°œí•˜ê³  ë„˜ì–´ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. boost ê³µì‹ í™ˆí˜ì´ì§€ì˜ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•˜ì˜€ìœ¼ë‹ˆ ì›ë¬¸ ë‚´ìš©ì€ <a href="https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/overview.html">ì—¬ê¸°</a>ë¥¼ ì°¸ì¡°í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<br>

<p>Boost.AsioëŠ” ì“°ë ˆë“œì™€ ëª…ì‹œì  Lockingì„ ê¸°ë°˜ìœ¼ë¡œí•œ ë™ì‹œì„± ëª¨ë¸ì˜ ì‚¬ìš©ì„ í”„ë¡œê·¸ë¨ì—ê²Œ ìš”êµ¬í•˜ì§€ ì•Šìœ¼ë©´ì„œ ëŠë¦° I/O operationì„ ê´€ë¦¬í•˜ëŠ” ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. (ì´ëŠ” Boost.Asio ë‚´ë¶€ì ìœ¼ë¡œ ë™ì‹œì„± ì²˜ë¦¬ë¥¼ í• ê±°ë‹ˆê¹ ì‚¬ìš©ìë“¤ì€ ê±±ì •ë§ê³  ì‚¬ìš©í•˜ë¼ëŠ” ì˜ë¯¸ë¡œë„ ë³¼ ìˆ˜ ìˆì£ .)</p>
<blockquote>
<p>Boost.Asio provides the tools to manage these long running operations, without requiring programs to use concurrency models based on threads and explicit locking.</p>
</blockquote>
<p>ì†Œì¼“ì„ ì˜ˆë¡œ ë“¤ì–´ Boost.Asioì—ì„œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ë“¤ì— ëŒ€í•´ ì¡°ê¸ˆ ë” ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<br>

<h2 id="ë™ê¸°-ì—°ê²°"><a href="#ë™ê¸°-ì—°ê²°" class="headerlink" title="ë™ê¸° ì—°ê²°"></a>ë™ê¸° ì—°ê²°</h2><p>ì—¬ëŸ¬ë¶„ì˜ í”„ë¡œê·¸ë¨ì€ ì ì–´ë„ í•œ ê°œ ì´ìƒì˜ (boost::asio::io_contextë‚˜ boost::asio::thread_pool ë˜ëŠ” boost::asio::system_context ê°ì²´ì™€ ê°™ì€)I/O execution contextë¥¼ ê°€ì§€ê³  ìˆì„ ê²ƒì…ë‹ˆë‹¤. I/O execution contextëŠ” OSì˜ I/O ì„œë¹„ìŠ¤ì— ëŒ€í•œ í”„ë¡œê·¸ë¨ì˜ ë§í¬ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
<blockquote>
<p><strong>Your program</strong> will have at least one <strong>I/O execution context</strong>, such as an boost::asio::io_context object, boost::asio::thread_pool object, or boost::asio::system_context. This <strong>I/O execution context</strong> represents <strong>your program</strong>â€˜s link to the <strong>operating system</strong>â€˜s I/O services.</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">boost::asio::io_context io_context;</span><br></pre></td></tr></table></figure>


<br>

<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/boost-asio-sync-socket.png" alt=""></div>

<br>

<ol>
<li>I/O object(ì—¬ê¸°ì„œëŠ” socket)ì—ì„œ connect í˜¸ì¶œ<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">boost::asio::ip::<span class="function">tcp::socket <span class="title">socket</span><span class="params">(io_context)</span></span>;</span><br><span class="line">socket.<span class="built_in">connect</span>(server_endpoint);</span><br></pre></td></tr></table></figure></li>
<li>I/O objectëŠ” I/O execution contextì—ê²Œ ìš”ì²­ ì „ë‹¬</li>
<li>I/O execution contextëŠ” connect ë™ì‘ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ OS í˜¸ì¶œ</li>
<li>OSëŠ” I/O execution contextì—ê²Œ ìˆ˜í–‰ ê²°ê³¼ë¥¼ ë¦¬í„´</li>
<li>I/O execution contextëŠ” boost::system::error_codeì— ìˆ˜í–‰ ê²°ê³¼ ë°œìƒí•œ ì—ëŸ¬ë¥¼ í•´ì„í•˜ê³  ì´ë¥¼ I/O objectì—ê²Œ ë‹¤ì‹œ ì „ë‹¬</li>
<li>I/O objectëŠ” ìˆ˜í–‰ì— ì‹¤íŒ¨í–ˆì„ ê²½ìš° ì˜ˆì™¸ë¥¼ ë˜ì§</li>
</ol>
<br>

<h2 id="ë¹„ë™ê¸°-ì—°ê²°"><a href="#ë¹„ë™ê¸°-ì—°ê²°" class="headerlink" title="ë¹„ë™ê¸° ì—°ê²°"></a>ë¹„ë™ê¸° ì—°ê²°</h2><div class="figure " style="width:;"><img class="fig-img" src="/assets/images/boost-asio-async-socket.png" alt=""></div>

<br>

<ol>
<li><p>I/O objectì—ì„œ async_connect í˜¸ì¶œ(your_completion_handlerëŠ” í•¨ìˆ˜ ë˜ëŠ” í•¨ìˆ˜ ê°ì²´ì„)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">your_completion_handler</span><span class="params">(<span class="keyword">const</span> boost::system::error_code&amp; ec)</span></span>;</span><br><span class="line">socket.<span class="built_in">async_connect</span>(server_endpoint, your_completion_handler);</span><br></pre></td></tr></table></figure></li>
<li><p>I/O objectëŠ” I/O execution contextì—ê²Œ ìš”ì²­ ì „ë‹¬</p>
</li>
<li><p>I/O execution contextëŠ” async_connect ë™ì‘ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ OS í˜¸ì¶œ(ë™ê¸° ì—°ê²°ê³¼ ë‹¤ë¥´ê²Œ async_connectì˜ ìˆ˜í–‰ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ì§€ëŠ” ì•ŠìŒ)</p>
</li>
</ol>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/boost-asio-async-socket-2.png" alt=""></div>

<ol start="4">
<li>OSëŠ” íì— ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨ async_connect ìˆ˜í–‰ì´ ì™„ë£Œëë‹¤ëŠ” ê²ƒì„ ì•Œë¦¼</li>
<li>I/O execution contextë¡œ io_contextë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” io_context::run()í•¨ìˆ˜ë¥¼ ë°˜ë“œì‹œ í˜¸ì¶œí•´ì•¼í•¨. io_context::run()í•¨ìˆ˜ëŠ” ì™„ë£Œë˜ì§€ ì•Šì€ ë¹„ë™ê¸° ìˆ˜í–‰ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” block ìƒíƒœì´ë¯€ë¡œ ëŒ€ê²Œ ìµœì´ˆ ë¹„ë™ê¸° ìˆ˜í–‰ì„ ì‹œì‘í•˜ìë§ˆì í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•¨</li>
<li>io_context::run()í•¨ìˆ˜ ë‚´ì—ì„œ I/O execution contextëŠ” íì— ì¶”ê°€ëœ ìˆ˜í–‰ ê²°ê³¼ë“¤ì„ ë½‘ì•„ë‚´ì–´ error_codeì— í•´ì„ ê²°ê³¼ë¥¼ ì €ì¥í•˜ê³  handler í•¨ìˆ˜ì—ê²Œ ì „ë‹¬í•¨</li>
</ol>
<p>ë™ê¸° ë° ë¹„ë™ê¸° ì†Œì¼“ ì—°ê²°ì— ëŒ€í•œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ io_contextì˜ ê°œë…ì„ ì •ë¦¬í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  </p>
<blockquote>
<p>ìœ ì € ê³µê°„ì—ì„œ ì»¤ë„ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œ ì½œì„ ë‚ ë¦¬ë ¤ê³  í• ë•Œ ì‹¤ì œ ì»¤ë„ê³¼ì˜ í†µì‹ ì„ ì¤‘ê³„í•˜ëŠ” ì£¼ì²´ì´ë‹¤. ì¦‰, ì‹¤ì œ ì‹œìŠ¤í…œ ì½œ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ” ê³µê°„ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.</p>
</blockquote>
<br> 

<hr>
<h1 id="Execution-Context"><a href="#Execution-Context" class="headerlink" title="Execution Context"></a>Execution Context</h1><p>io_contextëŠ” I/O ì‘ì—…ì„ ìœ„í•œ ë§¤ê°œì²´ì´ì ì¼ì¢…ì˜ ì‘ì—… ê³µê°„ì´ë¼ëŠ”ê±´ ì–´ëŠì •ë„ ëŠë‚Œì´ ì˜¨ ê²ƒê°™ìŠµë‹ˆë‹¤. ì´ì œëŠ” io_contextë¥¼ í¬í•¨í•˜ëŠ” ê°œë…ì¸ execution contextì— ëŒ€í•´ ì¡°ê¸ˆ ë” ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. (í•´ë‹¹ ë‚´ìš©ì€ <a href="https://think-async.com/executors/Executors_and_Asynchronous_Operations_Slides.pdf">Executors and Asynchronous Operations</a>ë¥¼ ì°¸ì¡°í•˜ì—¬ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.)</p>
<p>execution contextëŠ” <U>í•¨ìˆ˜ ê°ì²´ê°€ ì‹¤í–‰ë˜ëŠ” ê³µê°„</U>ì…ë‹ˆë‹¤.</p>
<blockquote>
<ul>
<li>An execution context is <U>a place where function objects are executed.</U></li>
<li>Examples<ul>
<li>A fixed-size thread pool</li>
<li>A loop scheduler</li>
<li>An asio::io_context</li>
<li>The set of all threads in the process</li>
</ul>
</li>
</ul>
</blockquote>
<p>ë§ê·¸ëŒ€ë¡œ í•¨ìˆ˜ ê°ì²´(ìš°ë¦¬ê°€ í”íˆ í•¸ë“¤ëŸ¬ë¼ê³  ë¶€ë¥´ëŠ”)ê°€ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ê³µê°„ì´ë¼ëŠ” ê²ë‹ˆë‹¤. ëŒ€í‘œì ì¸ execution contextì¸ io_contextì™€ thread pool ì‚¬ìš© ì˜ˆì œë¥¼ í•œë²ˆ ì‚´í´ë´…ì‹œë‹¤.</p>
<br>

<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">  boost::asio::io_context context;</span><br><span class="line">  boost::asio::post(context, [](){ <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hello boost::asio::post in context"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; });</span><br><span class="line">  context.run();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ìœ„ ì½”ë“œëŠ” boost::asio::post í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒë‹¤ ì‹ìœ¼ë¡œ ì •ì˜ëœ í•¨ìˆ˜ ê°ì²´ë¥¼ ìœ„ì—ì„œ ì •ì˜í•œ io_contextì—ì„œ ì‹¤í–‰ì‹œí‚¤ê² ë‹¤ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤. (ëŒë‹¤ ì‹ì€ closureë¼ëŠ” ì´ë¦„ì—†ëŠ” í•¨ìˆ˜ ê°ì²´ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤. <a href="https://en.cppreference.com/w/cpp/language/lambda">ëŒë‹¤ ì‹ì˜ ì •ì˜</a>ëŠ” ì—¬ê¸°ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.)  </p>
<p>ì•„ ê·¸ë¦¬ê³  post í•¨ìˆ˜ ì•„ë˜ io_contextì˜ run í•¨ìˆ˜ëŠ” í•¨ìˆ˜ ê°ì²´ë¥¼ ì‹¤í–‰ì‹œí‚¬ ê³µê°„(ì—¬ê¸°ì„œëŠ” io_context)ì„ í™œì„±í™”ì‹œì¼œì£¼ëŠ” ì—­í• ì„ í•œë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë  ê²ƒê°™ìŠµë‹ˆë‹¤. (run í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê³ ì„œëŠ” ëŒë‹¤ ì‹ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!)</p>
<br>

<p>ì•„ë˜ ì½”ë“œëŠ” ë§ˆì°¬ê°€ì§€ë¡œ boost::asio::post í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë²ˆì—ëŠ” ì§ì ‘ ì •ì˜í•œ í•¨ìˆ˜ test_functionì„ io_contextê°€ ì•„ë‹Œ thread_pool(ë˜ ë‹¤ë¥¸ execution contextë“¤ ì¤‘ í•˜ë‚˜ì£ )ì—ì„œ ì‹¤í–‰ì‹œí‚¤ê² ë‹¤ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test_function</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hello boost::asio::post in thread pool"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">  boost::asio::thread_pool tp;</span><br><span class="line">  boost::asio::post(tp, test_function);</span><br><span class="line">  tp.join();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<br>

<hr>
<h1 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h1><p>ì§€ê¸ˆê¹Œì§€ io_contextë¥¼ ì‹œì‘ìœ¼ë¡œ execution contextë¼ëŠ” ê°œë…ì„ ì¡°ê¸ˆì´ë‚˜ë§ˆ êµ¬ì²´í™”í•˜ëŠ” ì‹œê°„ì„ ê°€ì ¸ë´¤ìŠµë‹ˆë‹¤. í•œì¤„ë¡œ ì •ë¦¬í•˜ë©° ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Execution ContextëŠ” í•¨ìˆ˜ ë˜ëŠ” í•¨ìˆ˜ ê°ì²´ê°€ ì‹¤í–‰ë˜ëŠ” ê³µê°„ì´ë‹¤.</p>
</blockquote>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/overview.html">https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/overview.html</a></li>
<li><a href="https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/overview/rationale.html">https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/overview/rationale.html</a></li>
<li><a href="https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/overview/core/basics.html">https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/overview/core/basics.html</a></li>
<li><a href="https://think-async.com/executors/Executors_and_Asynchronous_Operations_Slides.pdf">https://think-async.com/executors/Executors_and_Asynchronous_Operations_Slides.pdf</a></li>
<li><a href="https://en.cppreference.com/w/cpp/language/lambda">https://en.cppreference.com/w/cpp/language/lambda</a></li>
</ul>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>boost asio</tag>
        <tag>io_context</tag>
        <tag>io_service</tag>
        <tag>execution context</tag>
      </tags>
  </entry>
  <entry>
    <title>boost::asio::post í•¨ìˆ˜ì˜ ì¸ìë¡œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì „ë‹¬í•  ë•Œ ì£¼ì˜ ì‚¬í•­</title>
    <url>/2023/01/26/caution-when-passing-instance-to-post/</url>
    <content><![CDATA[<p><escape><span id="more"></span></escape></p>
<p>boost::asio::post í•¨ìˆ˜ì˜ ì¸ìë¡œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì „ë‹¬í•˜ëŠ” ê²½ìš°ì—ëŠ” ë°˜ë“œì‹œ í•´ë‹¹ í´ë˜ìŠ¤ì— <code>í•¨ìˆ˜ í˜¸ì¶œ ì—°ì‚°ì</code>ê°€ <strong>ì˜¤ë²„ë¡œë”©</strong> ë˜ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<br>

<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">handler</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    handler(<span class="keyword">int</span> a, <span class="keyword">int</span> b) : a_(a), b_(b) {}</span><br><span class="line"></span><br><span class="line">    <span class="comment">// í•´ë‹¹ í•¨ìˆ˜ ì£¼ì„ ì²˜ë¦¬í•˜ë©´ compile error!!</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; a_ * b_ &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> a_;</span><br><span class="line">    <span class="keyword">int</span> b_;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="function">handler <span class="title">h</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">    boost::asio::post(h);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>boost::asio::post</tag>
        <tag>passing instance to post function</tag>
        <tag>function call operator</tag>
        <tag>operator overloading</tag>
      </tags>
  </entry>
  <entry>
    <title>Ethernet ìŠ¤ìœ„ì¹­ ê³¼ì •ì— ëŒ€í•´ ì•Œì•„ë³´ì</title>
    <url>/2021/12/06/ethernet-switching-flow/</url>
    <content><![CDATA[<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” L3 ìŠ¤ìœ„ì¹˜ì—ì„œì˜ Ethernet ìŠ¤ìœ„ì¹­ ê³¼ì •ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>
<p><a href="https://www.netmanias.com/ko/">ë„·ë§¤ë‹ˆì•„ì¦ˆ</a>ë¼ëŠ” ì‚¬ì´íŠ¸ì— ì´ 4í¸ì˜ ì‹œë¦¬ì¦ˆë¡œ ì—°ì¬ëœ L3 ìŠ¤ìœ„ì¹˜ì˜ íŒ¨í‚· ì „ë‹¬ì— ëŒ€í•œ ì•„ì£¼ ì–‘ì§ˆì˜ ê²Œì‹œë¬¼ì„ ì°¸ê³ í•˜ì—¬ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì‹¤ì œ ì—°ì¬ê¸€ì—ì„œëŠ” ìƒì„¸í•œ ê·¸ë¦¼ê³¼ í•¨ê»˜ L3 ìŠ¤ìœ„ì¹˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ì¢€ ë” ì„¸ë¶„í™”í•˜ì—¬ ì„¤ëª…í•˜ê³  ìˆìœ¼ë‹ˆ ê´€ì‹¬ì´ ìˆìœ¼ì‹ ë¶„ë“¤ì€ <a href="https://www.netmanias.com/ko/?m=view&id=blog&no=5526">ì—¬ê¸°</a>ë¥¼ ì°¸ì¡°í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<br>

<!-- toc -->


<p>ì„œë²„1ê³¼ ì„œë²„3ì€ í˜„ì¬ ë™ì¼í•œ VLAN(VLAN ID: 10)ë‚´ì— ìˆìœ¼ë©°, ì„œë²„1ì˜ ARP í…Œì´ë¸”ì—ëŠ” ì„œë²„3ì˜ ì—”íŠ¸ë¦¬ê°€ ì´ë¯¸ ì¡´ì¬í•œë‹¤ê³  ê°€ì •(ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” ARP Request/Reply ë©”ì‹œì§€ë¥¼ í†µí•´ ARP í…Œì´ë¸”ì„ ì±„ì›Œì£¼ì–´ì•¼í•¨)í•˜ê² ìŠµë‹ˆë‹¤.<br><br></p>
<h3 id="ì„œë²„1ì—ì„œ-ì„œë²„3ìœ¼ë¡œ-íŒ¨í‚·-ì „ë‹¬-Flooding"><a href="#ì„œë²„1ì—ì„œ-ì„œë²„3ìœ¼ë¡œ-íŒ¨í‚·-ì „ë‹¬-Flooding" class="headerlink" title="ì„œë²„1ì—ì„œ ì„œë²„3ìœ¼ë¡œ íŒ¨í‚· ì „ë‹¬(Flooding)"></a>ì„œë²„1ì—ì„œ ì„œë²„3ìœ¼ë¡œ íŒ¨í‚· ì „ë‹¬(Flooding)</h3><div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/ehternet-switching-flooding.png" alt="Flooding"><span class="caption">Flooding</span></div>

<ol>
<li>ì„œë²„1ì—ì„œ ì„œë²„3ìœ¼ë¡œ Ping íŒ¨í‚·ì„ ë³´ë‚´ë ¤ê³ í•©ë‹ˆë‹¤.</li>
<li>ì„œë²„1ì˜ <strong>ë¼ìš°íŒ… í…Œì´ë¸”</strong>ì„ ì°¸ì¡°(Destination ì£¼ì†Œ ë³„ ê²Œì´íŠ¸ì›¨ì´ IPì™€ ì¶œë ¥ í¬íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ)í•˜ì—¬ ì„œë²„3ì´ ì„œë²„1ê³¼ ë™ì¼í•œ ë„¤íŠ¸ì›Œí¬ë¼ëŠ” ê²ƒê³¼ íŒ¨í‚·ì„ ë‚´ë³´ë‚¼ ì¶œë ¥ í¬íŠ¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>ì„œë²„1ì˜ <strong>ARP í…Œì´ë¸”</strong>ì„ ì°¸ì¡°í•˜ì—¬ ì„œë²„3ì˜ IPì£¼ì†Œì— ëŒ€í•œ MAC ì£¼ì†Œë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>ì¶œë ¥ í¬íŠ¸ì™€ MAC ì£¼ì†Œë¥¼ í™•ì¸í–ˆìœ¼ë‹ˆ ì„œë²„1ì€ ì„œë²„3ìœ¼ë¡œ Ping íŒ¨í‚·ì„ ì†¡ì‹ í•©ë‹ˆë‹¤.</li>
<li>Ping íŒ¨í‚·ì€ ì¶œë ¥ í¬íŠ¸ë¥¼ í†µí•´ L3 ìŠ¤ìœ„ì¹˜ë¡œ ì´ë™í•©ë‹ˆë‹¤.</li>
<li>Ping íŒ¨í‚·ì„ ìˆ˜ì‹ í•œ L3 ìŠ¤ìœ„ì¹˜ëŠ” í•´ë‹¹ íŒ¨í‚·ì„ ë²„í¼(Ingress Packet Buffer)ì— ì ì‹œ ì €ì¥í•´ë‘¡ë‹ˆë‹¤.</li>
<li>ì´ì œ L3 ìŠ¤ìœ„ì¹˜ì—ì„œ ìˆ˜ì‹ í•œ Ping íŒ¨í‚·ì˜ <strong>Source MAC ì£¼ì†Œë¥¼ í•™ìŠµ</strong>í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë™ì¼ VLANì„ ì†Œìœ í•œ Line Cardë“¤ì—ë§Œ Source MAC ì£¼ì†Œ ì •ë³´ë¥¼ ê³µìœ í•˜ì—¬ ê°ê°ì˜ <strong>MAC í…Œì´ë¸”</strong>ì— ê·¸ ê°’(VLAN, Source MAC ì£¼ì†Œ, í¬íŠ¸)ì„ ì €ì¥í•˜ë„ë¡ í•©ë‹ˆë‹¤.</li>
<li>ë‹¤ìŒìœ¼ë¡œ í•´ë‹¹ íŒ¨í‚·ì„ <strong>IP ë¼ìš°íŒ…</strong>ì‹œí‚¬ì§€ <strong>Ethernet ìŠ¤ìœ„ì¹­</strong>ì‹œí‚¬ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ëŠ”ë° ì´ë¥¼ ìœ„í•´ Destination MAC ì£¼ì†Œë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.<div class="alert info"><p>Destination MAC ì£¼ì†Œê°€ L3 ìŠ¤ìœ„ì¹˜ì˜ MAC ì£¼ì†Œì¸ ê²½ìš°ì—ëŠ”, <strong>IP ë¼ìš°íŒ…</strong><br>Destination MAC ì£¼ì†Œê°€ L3 ìŠ¤ìœ„ì¹˜ì˜ MAC ì£¼ì†Œê°€ ì•„ë‹Œ ê²½ìš°ì—ëŠ”, <strong>Ethernet ìŠ¤ìœ„ì¹­</strong></p>
</div>
<br></li>
<li>ì´ ê²½ìš°ì—ëŠ” í•´ë‹¹ íŒ¨í‚·ì˜ Destination MAC ì£¼ì†Œê°€ ì„œë²„3ì˜ MAC ì£¼ì†Œì´ë¯€ë¡œ Ethernet ìŠ¤ìœ„ì¹­ì„ ì‹œí‚µë‹ˆë‹¤.</li>
<li>Ethernet ìŠ¤ìœ„ì¹­ì„ ìœ„í•´ L3 ìŠ¤ìœ„ì¹˜ì—ì„œëŠ” í•´ë‹¹ íŒ¨í‚·ì˜ Destination MAC ì£¼ì†Œê°€ MAC í…Œì´ë¸”ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>ë§Œì•½ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ë™ì¼ VLANì— ì†í•œ í¬íŠ¸ë“¤ ì¤‘ì—ì„œ ìˆ˜ì‹  í¬íŠ¸(ì„œë²„1ì˜ í¬íŠ¸)ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ëª¨ë“  í¬íŠ¸(ì—¬ê¸°ì„œëŠ” ì„œë²„2ì™€ ì„œë²„3ì˜ í¬íŠ¸ë¼ê³  ê°€ì •)ë¡œ ìˆ˜ì‹ í•œ Ping íŒ¨í‚·ì„ <strong>Flooding</strong>í•´ì•¼í•¨ì„ ì•Œê²Œë©ë‹ˆë‹¤.</li>
<li>L3 ìŠ¤ìœ„ì¹˜ëŠ” ì•ì„œ ë²„í¼ì— ì ì‹œ ì €ì¥í•´ë‘” íŒ¨í‚·(6ë²ˆ ê³¼ì •ì„ ì°¸ê³ )ì„ ì¶œë ¥ì„ ìœ„í•œ ë²„í¼(Egress Packet Buffer)ë¡œ ì˜®ê¸´ í›„ 11ë²ˆì—ì„œ í™•ì¸ëœ í¬íŠ¸ë“¤ë¡œ í•´ë‹¹ íŒ¨í‚·ì„ Floodingí•©ë‹ˆë‹¤.</li>
<li>ì´ì œ ì„œë²„2ì™€ ì„œë²„3ì´ ì„œë²„1ì´ ë³´ë‚¸ Ping íŒ¨í‚·ì„ ìˆ˜ì‹ í•˜ê²Œ ë©ë‹ˆë‹¤.</li>
</ol>
<hr>
<h3 id="ì„œë²„3ì—ì„œ-ì„œë²„1ë¡œ-íŒ¨í‚·-ì „ë‹¬-Unicasting"><a href="#ì„œë²„3ì—ì„œ-ì„œë²„1ë¡œ-íŒ¨í‚·-ì „ë‹¬-Unicasting" class="headerlink" title="ì„œë²„3ì—ì„œ ì„œë²„1ë¡œ íŒ¨í‚· ì „ë‹¬(Unicasting)"></a>ì„œë²„3ì—ì„œ ì„œë²„1ë¡œ íŒ¨í‚· ì „ë‹¬(Unicasting)</h3><div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/ehternet-switching-unicasting.png" alt="Unicasting"><span class="caption">Unicasting</span></div>

<ol>
<li>Ping íŒ¨í‚·ì˜ Destination MAC ì£¼ì†ŒëŠ” ì„œë²„3ì˜ MAC ì£¼ì†Œì´ê¸°ë•Œë¬¸ì— ì„œë²„2ì—ì„œëŠ” ìˆ˜ì‹ í•œ Ping íŒ¨í‚·ì„ ë²„ë¦½ë‹ˆë‹¤.</li>
<li>ì„œë²„3ì€ ìˆ˜ì‹ í•œ Ping íŒ¨í‚·ì— ëŒ€í•œ ì‘ë‹µ íŒ¨í‚·ì„ ì„œë²„1ë¡œ ì†¡ì‹ í•©ë‹ˆë‹¤.(ì„œë²„1ì—ì„œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì„œë²„3ì€ ìì‹ ì˜ ë¼ìš°íŒ… í…Œì´ë¸”ê³¼ ARP í…Œì´ë¸”ì„ ì°¸ì¡°í•˜ì—¬ ì¶œë ¥ í¬íŠ¸ì™€ ì„œë²„1ì˜ MACì£¼ì†Œë¥¼ í™•ì¸í•¨)</li>
<li>ì‘ë‹µ íŒ¨í‚·ì€ ì¶œë ¥ í¬íŠ¸ë¥¼ í†µí•´ L3 ìŠ¤ìœ„ì¹˜ë¡œ ì´ë™í•©ë‹ˆë‹¤.</li>
<li>ì‘ë‹µ íŒ¨í‚·ì„ ìˆ˜ì‹ í•œ L3 ìŠ¤ìœ„ì¹˜ëŠ” í•´ë‹¹ íŒ¨í‚·ì„ ë²„í¼(Ingress Packet Buffer)ì— ì ì‹œ ì €ì¥í•´ë‘¡ë‹ˆë‹¤.</li>
<li>ì´ì œ L3 ìŠ¤ìœ„ì¹˜ì—ì„œ ìˆ˜ì‹ í•œ ì‘ë‹µ íŒ¨í‚·ì˜ <strong>Source MAC ì£¼ì†Œë¥¼ í•™ìŠµ</strong>í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë™ì¼ VLANì„ ì†Œìœ í•œ Line Cardë“¤ì—ë§Œ Source MAC ì£¼ì†Œ ì •ë³´ë¥¼ ê³µìœ í•˜ì—¬ ê°ê°ì˜ <strong>MAC í…Œì´ë¸”</strong>ì— ê·¸ ê°’(VLAN, Source MAC ì£¼ì†Œ, í¬íŠ¸)ì„ ì €ì¥í•˜ë„ë¡ í•©ë‹ˆë‹¤.</li>
<li>ë‹¤ìŒìœ¼ë¡œ í•´ë‹¹ íŒ¨í‚·ì„ <strong>IP ë¼ìš°íŒ…</strong>ì‹œí‚¬ì§€ <strong>Ethernet ìŠ¤ìœ„ì¹­</strong>ì‹œí‚¬ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ëŠ”ë° ì´ë¥¼ ìœ„í•´ Destination MAC ì£¼ì†Œë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.</li>
<li>ì´ ê²½ìš°ì—ëŠ” í•´ë‹¹ íŒ¨í‚·ì˜ Destination MAC ì£¼ì†Œê°€ ì„œë²„1ì˜ MAC ì£¼ì†Œì´ë¯€ë¡œ Ethernet ìŠ¤ìœ„ì¹­ì„ ì‹œí‚µë‹ˆë‹¤.</li>
<li>Ethernet ìŠ¤ìœ„ì¹­ì„ ìœ„í•´ L3 ìŠ¤ìœ„ì¹˜ì—ì„œëŠ” í•´ë‹¹ íŒ¨í‚·ì˜ Destination MAC ì£¼ì†Œê°€ MAC í…Œì´ë¸”ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ì¡´ì¬(ì´ì „ì˜ Source MAC ì£¼ì†Œ í•™ìŠµì„ í†µí•´ ì„œë²„1ì˜ MAC ì£¼ì†Œê°€ ì €ì¥ëœ ìƒíƒœì´ë¯€ë¡œ)í•©ë‹ˆë‹¤.</li>
<li>L3 ìŠ¤ìœ„ì¹˜ëŠ” ì•ì„œ ë²„í¼ì— ì ì‹œ ì €ì¥í•´ë‘” íŒ¨í‚·(4ë²ˆ ê³¼ì •ì„ ì°¸ê³ )ì„ ì¶œë ¥ì„ ìœ„í•œ ë²„í¼(Egress Packet Buffer)ë¡œ ì˜®ê¸´ í›„ 8ë²ˆì—ì„œ í™•ì¸ëœ MACì£¼ì†Œë¡œ í•´ë‹¹ íŒ¨í‚·ì„ ì†¡ì‹ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ MAC í…Œì´ë¸”ì— ë§¤ì¹­ë˜ì–´ í•˜ë‚˜ì˜ í¬íŠ¸ë¡œ íŒ¨í‚·ì´ ë‚˜ê°€ëŠ” ê²½ìš°ë¥¼ Unicastingì´ë¼ê³  í•©ë‹ˆë‹¤.</li>
</ol>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.netmanias.com/ko/?m=view&amp;id=blog&amp;no=5526">https://www.netmanias.com/ko/?m=view&amp;id=blog&amp;no=5526</a></li>
</ul>
]]></content>
      <categories>
        <category>ë„¤íŠ¸ì›Œí¬</category>
      </categories>
      <tags>
        <tag>ethernet switching</tag>
        <tag>ì´ë”ë„· ìŠ¤ìœ„ì¹˜</tag>
        <tag>Source MAC Learning</tag>
        <tag>ARP Table</tag>
        <tag>L3 ìŠ¤ìœ„ì¹˜</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo Tranquilpeak í…Œë§ˆì˜ Markdown syntax</title>
    <url>/2021/07/08/hello-hexo/</url>
    <content><![CDATA[<p>Hexo í…Œë§ˆ ì¤‘ í•˜ë‚˜ì¸ <a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak/blob/master/DOCUMENTATION.md">Tranquilpeakì˜ ê³µì‹ ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì—¬ Postì‹œì— í™œìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ Markdown syntaxë“¤ì„ ì‚¬ìš©í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<!-- toc -->

<hr>
<h3 id="Tags"><a href="#Tags" class="headerlink" title="Tags"></a>Tags</h3><div class="alert danger"><p>ì•ŒëŒ í‘œí˜„ì€ ì´ë ‡ê²ŒğŸ˜¨</p>
</div>

<div class="alert info"><p>ì•ŒëŒ í‘œí˜„ì€ ì´ë ‡ê²ŒğŸ˜®</p>
</div>
<br>

<figure class="highlight md"><figcaption><span>Tags</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;% alert danger %&#125;</span><br><span class="line">ì•ŒëŒ í‘œí˜„ì€ ì´ë ‡ê²ŒğŸ˜¨</span><br><span class="line">&#123;% endalert %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% alert info %&#125;</span><br><span class="line">ì•ŒëŒ í‘œí˜„ì€ ì´ë ‡ê²ŒğŸ˜®</span><br><span class="line">&#123;% endalert %&#125;</span><br></pre></td></tr></table></figure>
<br>

<hr>
<h3 id="Highlight-text"><a href="#Highlight-text" class="headerlink" title="Highlight text"></a>Highlight text</h3><span class="highlight-text green">í•˜ì´ë¼ì´íŠ¸ ê·¸ë¦°</span>ì€ ì´ë ‡ê²ŒğŸ˜
<p>Tranquilpeakì€ <span class="highlight-text" style="background-color:#CCCCFF;">rgbë„ ì§€ì›</span>í•´ì¤˜ì„œ ë‹¤ì–‘í•œ ìƒ‰ìƒ í‘œí˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.ğŸ˜<br><br></p>
<figure class="highlight md"><figcaption><span>Highlight text</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;% hl<span class="emphasis">_text green %&#125; í•˜ì´ë¼ì´íŠ¸ ê·¸ë¦°&#123;% endhl_</span>text %&#125;ì€ ì´ë ‡ê²ŒğŸ˜</span><br><span class="line">Tranquilpeakì€ &#123;% hl<span class="emphasis">_text #CCCCFF %&#125; rgbë„ ì§€ì›&#123;% endhl_</span>text %&#125;í•´ì¤˜ì„œ ë‹¤ì–‘í•œ ìƒ‰ìƒ í‘œí˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.ğŸ˜</span><br></pre></td></tr></table></figure>
<br>

<hr>
<h3 id="Tabbed-code-block"><a href="#Tabbed-code-block" class="headerlink" title="Tabbed code block"></a>Tabbed code block</h3><p>ë™ì¼í•œ ê¸°ëŠ¥ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì–¸ì–´ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ íƒ­ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ í‘œí˜„í•  ìˆ˜ ë„ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><span>Tabbed code block</span><ul class="tabs"><li class="tab active">cpp</li><li class="tab">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hello hex!"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight go" style="display: none;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">    fmt.Println(<span class="string">"hello hexo!"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>
<br>

<figure class="highlight md"><figcaption><span>Tabbed code block</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;% tabbed<span class="emphasis">_codeblock Tabbed code block %&#125;</span></span><br><span class="line"><span class="emphasis">    &lt;!-- tab cpp --&gt;</span></span><br><span class="line"><span class="emphasis">    #include <span class="xml"><span class="tag">&lt;<span class="name">iostream</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    int main()</span></span><br><span class="line"><span class="emphasis">    &#123;</span></span><br><span class="line"><span class="emphasis">        std::cout &lt;&lt; &quot;hello hex!&quot; &lt;&lt; std::endl;</span></span><br><span class="line"><span class="emphasis">        return 0;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis">    &lt;!-- endtab --&gt;</span></span><br><span class="line"><span class="emphasis">    &lt;!-- tab go --&gt;</span></span><br><span class="line"><span class="emphasis">    package main</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    import &quot;fmt&quot;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    func main() &#123;</span></span><br><span class="line"><span class="emphasis">        fmt.Println(&quot;hello hexo!&quot;)</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis">    &lt;!-- endtab --&gt;</span></span><br><span class="line"><span class="emphasis">&#123;% endtabbed_</span>codeblock %&#125;</span><br></pre></td></tr></table></figure>
<br>

<hr>
<h3 id="Quote"><a href="#Quote" class="headerlink" title="Quote"></a>Quote</h3><p>ë§í¬ê°€ í¬í•¨ëœ ì¸ìš©êµ¬ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œí˜„ë©ë‹ˆë‹¤.</p>
<blockquote><p>ë‚˜ì˜ Github Repository</p>
<footer><strong>chelseafandev</strong><cite><a href="https://github.com/chelseafandev">Github Repo</a></cite></footer></blockquote>

<p>ë§í¬ê°€ ì—†ëŠ” ì¸ìš©êµ¬ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œí˜„ë©ë‹ˆë‹¤.</p>
<blockquote><p>ëˆ„êµ¬ë‚˜ ê·¸ëŸ´ì‹¸í•œ ê³„íšì„ ê°€ì§€ê³  ìˆë‹¤. í•œ ëŒ€ ì²˜ë§ê¸° ì „ê¹Œì§€ëŠ”</p>
<footer><strong>Michael Gerard Tyson</strong><cite>he's quotation</cite></footer></blockquote>
<br>

<figure class="highlight md"><figcaption><span>Quote</span></figcaption><table><tr><td class="code"><pre><span class="line">ë§í¬ê°€ í¬í•¨ëœ ì¸ìš©êµ¬ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œí˜„ë©ë‹ˆë‹¤.</span><br><span class="line">&#123;% blockquote chelseafandev https://github.com/chelseafandev Github Repo %&#125;</span><br><span class="line">ë‚˜ì˜ Github Repository</span><br><span class="line">&#123;% endblockquote %&#125;</span><br><span class="line"></span><br><span class="line">ë§í¬ê°€ ì—†ëŠ” ì¸ìš©êµ¬ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œí˜„ë©ë‹ˆë‹¤.</span><br><span class="line">&#123;% blockquote Michael Gerard Tyson, he&#x27;s quotation %&#125;</span><br><span class="line">ëˆ„êµ¬ë‚˜ ê·¸ëŸ´ì‹¸í•œ ê³„íšì„ ê°€ì§€ê³  ìˆë‹¤. í•œ ëŒ€ ì²˜ë§ê¸° ì „ê¹Œì§€ëŠ”</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<br>

<hr>
<h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><p>ì²¨ë¶€í•  ì´ë¯¸ì§€ íŒŒì¼ì„ themes/tranquilpeak/source/_images í•˜ìœ„ì— ì €ì¥í•˜ë©´ ë°°í¬ ì‹œ public/assets/images í´ë”ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/chelsea_cover.jpg" alt="Blue is the Colour"><span class="caption">Blue is the Colour</span></div>
<br>

<figure class="highlight md"><figcaption><span>Image</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;% image /assets/images/chelsea<span class="emphasis">_cover.jpg &quot;Blue is the Colour&quot; %&#125;</span></span><br></pre></td></tr></table></figure>
<br>

<hr>
<h3 id="Wide-Image"><a href="#Wide-Image" class="headerlink" title="Wide Image"></a>Wide Image</h3><p>ë„“ì€ ì´ë¯¸ì§€ë„ ì•„ë˜ì™€ ê°™ì´ í‘œí˜„ë©ë‹ˆë‹¤.<br><a href="https://www.instagram.com/chelseafc/?hl=ko">ì²¼ì‹œ ê³µì‹ ì¸ìŠ¤íƒ€ ê³„ì •</a>ì— ì˜¬ë¼ì˜¨ 2020 ìœ ë¡œ ê¸°ë… ì‚¬ì§„ì„ ì´ì–´ ë¶™ì—¬ë³´ì•˜ìŠµë‹ˆë‹¤. ì¡°ë¥´ì§€ë‰´ í™”ì´íŒ…ğŸ˜</p>
<!-- endcontent --><div class="figure figure--fullWidth"><img class="figure-img" src="/assets/images/chelsea_instagram.png" alt="UEFA Euro 2020 with chelsea players"><span class="caption">UEFA Euro 2020 with chelsea players</span></div><!-- content -->
<br>

<figure class="highlight md"><figcaption><span>Wide Image</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;% wide<span class="emphasis">_image /assets/images/chelsea_</span>instagram.png &quot;UEFA Euro 2020 with chelsea players&quot; %&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ìœ ìš©í•œ íŒ</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>tranquilpeak</tag>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Seg FaultëŠ” ì™œ ë°œìƒí•˜ëŠ”ê°€?</title>
    <url>/2021/11/09/gdb-chapter4-program-crash/</url>
    <content><![CDATA[<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” <a href="https://nostarch.com/debugging.htm">The Art of Debugging with GDB, DDD and Eclipse</a>ì˜ <strong>Chatper 4 WHEN A PROGRAM CRASHES</strong> ë‚´ìš©ì„ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤. í•´ë‹¹ ì±•í„°ì˜ ì•ë¶€ë¶„ì—ì„œëŠ” ê°€ìƒ ì£¼ì†Œ ê³µê°„ì—ì„œì˜ í˜ì´ì§€(page)ì— ëŒ€í•œ ê°œë…ì„ ì†Œê°œí•˜ê³  seg faultê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì„ í˜ì´ì§€(page)ì™€ ì—°ê´€ì§€ì–´ ì˜ ì„¤ëª…í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<br>

<!-- toc -->

<br>

<h2 id="Background-Material-Memory-Management"><a href="#Background-Material-Memory-Management" class="headerlink" title="Background Material: Memory Management"></a>Background Material: Memory Management</h2><h3 id="Why-does-a-program-crash"><a href="#Why-does-a-program-crash" class="headerlink" title="Why does a program crash?"></a>Why does a program crash?</h3><p>ë‹¨ì—°ì½” ì¶©ëŒì´ ë°œìƒí•˜ëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ì›ì¸ì€ í”„ë¡œê·¸ë¨ì´ ì ‘ê·¼ ê¶Œí•œì´ ì—†ëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>By far the most common cause of a crash is for a program to attempt to access a memory location without having the permission to do so.</p>
</blockquote>
<br>

<p>Unix ê³„ì—´ì˜ í”Œë«í¼ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì´ segmentation fault(seg faultë¡œ ì•Œë ¤ì ¸ìˆëŠ”)ë¥¼ ë°œìƒì‹œì¼°ë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ê³  í•´ë‹¹ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ì„ ì¤‘ë‹¨í•  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>On Unix-family platforms, the OS will normally announce that the program has caused a segmentation fault, commonly referred to as a seg fault, and discontinue execution of the program.</p>
</blockquote>
<br>

<p>seg faultë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ GDBë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ”, ë©”ëª¨ë¦¬ ì ‘ê·¼ ì—ëŸ¬ê°€ ì–´ë–»ê²Œ ë°œìƒí•˜ëŠ”ì§€ì— ëŒ€í•´ ì •í™•íˆ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>In order to effectively use GDB to deal with seg faults, it is important to understand exactly how memory access errors occur.</p>
</blockquote>
<br>

<h3 id="Program-layout-in-memory"><a href="#Program-layout-in-memory" class="headerlink" title="Program layout in memory"></a>Program layout in memory</h3><p>Unix í”Œë«í¼ì—ì„œ í”„ë¡œê·¸ë¨ì— í• ë‹¹ëœ ê°€ìƒ ì£¼ì†Œë“¤ì˜ ì§‘í•©ì€ Figure 4-1 ê·¸ë¦¼ê³¼ ê°™ì€ í˜•íƒœë¡œ ë°°ì¹˜ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>On Unix platforms, a programâ€™s set of allocated virtual addresses typically is laid out something like the diagram in Figure 4-1.</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/figure-4-1-program-memory-layout.png" alt=""></div>

<br>

<p><strong>text section</strong>ì€ ì»´íŒŒì¼ëŸ¬ê°€ ë‹¹ì‹ ì˜ í”„ë¡œê·¸ë¨ ì†ŒìŠ¤ ì½”ë“œë¥¼ í†µí•´ ìƒì„±í•´ë‚¸ ê¸°ê³„ ì§€ì‹œì–´ë“¤ë¡œ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The <strong>text section</strong> consists of the machine instructions produced by the compiler from your programâ€™s source code.</p>
</blockquote>
<br>

<p><strong>data section</strong>ì€ ì»´íŒŒì¼ íƒ€ì„ì— í• ë‹¹ë˜ëŠ” ëª¨ë“  í”„ë¡œê·¸ë¨ ë³€ìˆ˜ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤. (ì´ˆê¸°í™”ëœ ë³€ìˆ˜ëŠ” dataì˜ì—­ì— ì´ˆê¸°í™”ë˜ì§€ì•Šì€ ë³€ìˆ˜ëŠ” bssì˜ì—­ì— ì €ì¥ë¨)</p>
<blockquote>
<p>The <strong>data section</strong> contains all the program variables that are allocated at compile time. </p>
</blockquote>
<br>

<p>ë‹¹ì‹ ì˜ í”„ë¡œê·¸ë¨ì´ ëŸ°íƒ€ì„ì— OSë¡œë¶€í„° ì¶”ê°€ì ì¸ ë©”ëª¨ë¦¬ë¥¼ ìš”ì²­í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹ ë©”ëª¨ë¦¬ëŠ” <strong>heap</strong>ì´ë¼ëŠ” ê³µê°„ì— í• ë‹¹ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>When your program requests additional memory from the operating system at run time the requested memory is allocated in an area called the <strong>heap</strong>.</p>
</blockquote>
<br>

<p><strong>stack section</strong>ì€ ë™ì ìœ¼ë¡œ í• ë‹¹ëœ ë°ì´í„°ë¥¼ ìœ„í•œ ê³µê°„ì…ë‹ˆë‹¤. í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ì‚¬ìš©ë˜ëŠ” ì¸ìë“¤ì´ë‚˜ ì§€ì—­ ë³€ìˆ˜ë“¤ ê·¸ë¦¬ê³  ë°˜í™˜ ì£¼ì†Œê°’ë“¤ì´ stack ê³µê°„ì— ì €ì¥ë©ë‹ˆë‹¤. stackì˜ í¬ê¸°ëŠ” í•¨ìˆ˜ í˜¸ì¶œì´ ë°œìƒí•  ë•Œ ì¦ê°€í•˜ê³  í˜¸ì¶œìì—ê²Œ í•¨ìˆ˜ê°€ ë‹¤ì‹œ ë°˜í™˜ë ë•Œ ê°ì†Œí•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The <strong>stack section</strong> is space for dynamically allocated data. The data for function calls â€” including arguments, local variables, and return addresses â€” are stored on the stack. The stack grows each time a function call is made and shrinks each time a function returns to its caller.</p>
</blockquote>
<br>

<h3 id="The-notion-of-pages"><a href="#The-notion-of-pages" class="headerlink" title="The notion of pages"></a>The notion of pages</h3><p>ê°€ìƒ ì£¼ì†Œ ê³µê°„ì€ <strong>í˜ì´ì§€</strong>ë¼ê³  ë¶ˆë¦¬ëŠ” ë©ì–´ë¦¬(chunk)ë“¤ì˜ êµ¬ì„±ìœ¼ë¡œ í‘œí˜„ë©ë‹ˆë‹¤. RAMì´ë‚˜ ROMê³¼ ê°™ì€ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ë˜í•œ í˜ì´ì§€ë“¤ë¡œ ë‚˜ëˆ„ì–´ì§„ ë¬´ì–¸ê°€ë¡œ í‘œí˜„ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>A virtual address space is viewed as organized into chunks called <strong>pages</strong>. Physical memory (both RAM and ROM) is also viewed as divided into pages.</p>
</blockquote>
<br>

<p>ì‹¤í–‰ì— ì˜í•´ í”„ë¡œê·¸ë¨ì´ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ë•Œ, OSëŠ” í”„ë¡œê·¸ë¨ì˜ ëª‡ëª‡ í˜ì´ì§€ë“¤ì„ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì˜ í˜ì´ì§€ì— ì €ì¥ë˜ë„ë¡ ë°°ì—´ì‹œí‚µë‹ˆë‹¤. ì´ëŸ¬í•œ í˜ì´ì§€ë“¤ì„ <strong>resident</strong>ë¼ê³  ë¶€ë¥´ë©° residentë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ í˜ì´ì§€ë“¤ì€ ë””ìŠ¤í¬ì— ì €ì¥ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>When a program is loaded into memory for execution, the OS arranges for some of the pages of the program to be stored in pages of physical memory. These pages are said to be <strong>resident</strong>, and the rest are stored on disk.</p>
</blockquote>
<br>

<p>ì§€ê¸ˆ í˜„ì¬ëŠ” resident(ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì˜ í˜ì´ì§€ì— ì €ì¥ëœ í”„ë¡œê·¸ë¨ì˜ í˜ì´ì§€)ê°€ ì•„ë‹Œ ëª‡ëª‡ í”„ë¡œê·¸ë¨ í˜ì´ì§€ë“¤ì´ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ ì¤‘ì¸ ë™ì•ˆì˜ ë‹¤ì–‘í•œ ì‹œì ì— í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì‹œì ì— ê·¸ê²ƒì€ í•˜ë“œì›¨ì–´ì— ì˜í•´ ê°ì§€ë˜ê³  ì´ë¥¼ í†µí•´ ë‹¹ì‹ ì˜ í”„ë¡œê·¸ë¨ì€ ì œì–´ê¶Œì„ OSë¡œ ë„˜ê²¨ì£¼ê²Œ ë©ë‹ˆë‹¤. OSëŠ” í•„ìš”í•œ í”„ë¡œê·¸ë¨ì˜ í˜ì´ì§€ë¥¼ ë©”ëª¨ë¦¬ë¡œ ë¡œë”©í•˜ê³ ë‚˜ì„œ ì œì–´ê¶Œ ë‹¤ì‹œ í”„ë¡œê·¸ë¨ì—ê²Œ ë„˜ê²¨ì¤ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë”ì´ìƒ residentê°€ ì•„ë‹Œ í”„ë¡œê·¸ë¨ í˜ì´ì§€(= nonresident)ëŠ” ë””ìŠ¤í¬ì— ì €ì¥ë  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>At various times during execution, some program page that is not currently resident will be needed. When this occurs, it will be sensed by the hardware, which transfers control to the OS. The latter brings the required page into memory and then returns control to our program. The evicted program page, if any, becomes nonresident and will be stored on disk.</p>
</blockquote>
<br>

<p>ìœ„ì˜ ëª¨ë“  ê³¼ì •ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ OSëŠ” ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ <strong>í˜ì´ì§€ í…Œì´ë¸”</strong>ì´ë¼ëŠ” ê²ƒì„ ìœ ì§€í•˜ê²Œ ë©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ì˜ ê°€ìƒ í˜ì´ì§€ë“¤ ê°ê°ì€ í…Œì´ë¸” ë‚´ì— entryë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©° ì´ entryì—ëŠ” ì•„ë˜ ì •ë³´ë“¤ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>To manage all of this, the OS maintains a <strong>page table</strong> for each process. Each of the processâ€™s virtual pages has an entry in the table, which includes the following information:</p>
</blockquote>
<br>

<ul>
<li>í˜ì´ì§€ì˜ ë©”ëª¨ë¦¬ í˜¹ì€ ë””ìŠ¤í¬ ìƒì˜ í˜„ì¬ ë¬¼ë¦¬ì  ìœ„ì¹˜ ì •ë³´</li>
<li>í˜ì´ì§€ì˜ read, write, execute ê¶Œí•œ ì •ë³´</li>
</ul>
<blockquote>
<ul>
<li>The current physical location of this page in memory or on disk.</li>
<li>Permissions â€” read, write, execute â€” for this page.</li>
</ul>
</blockquote>
<br>

<p>OSê°€ ë¶€ë¶„ì ì¸ í˜ì´ì§€ë“¤ì„ í”„ë¡œê·¸ë¨ì— í• ë‹¹í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ê²ƒì— ì£¼ëª©í•©ì‹œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ì´ ì•½ 10,000 bytesì˜ ì‚¬ì´ì¦ˆë¥¼ ê°–ëŠ”ë‹¤ê³  í•œë‹¤ë©´, ì´ í”„ë¡œê·¸ë¨ì´ ì˜¨ì „íˆ ë¡œë“œëì„ ê²½ìš° ë©”ëª¨ë¦¬ì˜ 3ê°œ í˜ì´ì§€ë¥¼ ì°¨ì§€(í˜ì´ì§€ ê¸°ë³¸ ì‚¬ì´ì¦ˆê°€ 4,096 bytesì¸ ê²½ìš°)í•  ê²ƒì…ë‹ˆë‹¤. í˜ì´ì§€ëŠ” VM ì‹œìŠ¤í…œì— ì˜í•´ ì¡°ì‘ë˜ëŠ” ë©”ëª¨ë¦¬ì˜ ê°€ì¥ ì‘ì€ ë‹¨ìœ„ì´ê¸° ë•Œë¬¸ì— ì•½ 2.5 í˜ì´ì§€ë¥¼ ì°¨ì§€í•œë‹¤ê±°ë‚˜ í•˜ì§€ëŠ” ì•Šì„ê²ƒì…ë‹ˆë‹¤. ë°”ë¡œ ì´ ì§€ì ì´ ë””ë²„ê¹… ì‹œì— ë§¤ìš° ì¤‘ìš”í•œ í¬ì¸íŠ¸ì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ê²ƒì€ í”„ë¡œê·¸ë¨ì— ì˜í•´ ë°œìƒí•˜ëŠ” ëª‡ëª‡ ì˜ëª»ëœ ë©”ëª¨ë¦¬ ì ‘ê·¼ë“¤ì´ seg faultë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šì„ ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. </p>
<blockquote>
<p>Note that the OS will not allocate partial pages to a program. For example, if the program to be run has a total size of about 10,000 bytes, it would occupy three pages of memory if fully loaded. It would not merely occupy about 2.5 pages, as pages are the smallest unit of memory manipulated by the VM system. This is an important point to understand when debugging, because it implies that some erroneous memory accesses by the program will not trigger seg faults, as you will see below.</p>
</blockquote>
<br>

<p>ë‹¤ì‹œ ë§í•´, ë””ë²„ê¹… ì„¸ì…˜ì— ìˆëŠ” ë™ì•ˆì— ë‹¹ì‹ ì€ â€œì†ŒìŠ¤ ì½”ë“œì˜ ì´ ë¼ì¸ì€ seg faultë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— í‹€ë¦¼ì—†ì´ ê´œì°®ì„ ê²ƒì´ë‹¤â€ì™€ ê°™ì´ ì´ì•¼ê¸° í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>In other words, during your debugging session, you cannot say something like, â€œThis line of source code must be okay, since it didnâ€™t cause a seg fault.â€</p>
</blockquote>
<br>

<h3 id="Details-on-the-role-of-the-page-table"><a href="#Details-on-the-role-of-the-page-table" class="headerlink" title="Details on the role of the page table"></a>Details on the role of the page table</h3><div class="alert info"><p>ì•„ë˜ ì„¤ëª…ì— ë‚˜ì˜¤ëŠ” í˜ì´ì§€ì˜ í¬ê¸°ëŠ” 4,096 bytes ë¼ê³  ê°€ì •í•˜ì</p>
<p>virtual page 0 : 0 ~ 4,095 bytes<br>virtual page 1 : 4,096 ~ 8,191 bytes<br>â€¦</p>
<p>Keep the virtual address space in Table 4-1 in mind, and continue to assume that the page size is 4,096 bytes. Then virtual page 0 comprises bytes 0 though 4,095 of the virtual address space, page 1 comprises bytes 4,096 through 8,191, and so on.</p>
</div>

<br>

<p>ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë“¯ì´, ìš°ë¦¬ê°€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¬ë•Œ, OSëŠ” í”„ë¡œê·¸ë¨ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ê°€ìƒ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§€ í…Œì´ë¸”ì„ ìƒì„±í•©ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì´ë¼ë©´ ì–¸ì œë“ ì§€, í•˜ë“œì›¨ì–´ì˜ page table registerëŠ” í˜ì´ì§€ í…Œì´ë¸”ì„ ê°€ë¦¬í‚¤ê³  ìˆì„ê²ë‹ˆë‹¤.</p>
<blockquote>
<p>As mentioned, when we run a program, the OS creates a page table that it uses to manage the virtual memory of the process that executes the program code. Whenever that process runs, the hardwareâ€™s page table register will point to that table.</p>
</blockquote>
<br>

<p>ê°œë…ì ìœ¼ë¡œ ì´ì•¼ê¸°í•˜ìë©´, í”„ë¡œì„¸ìŠ¤ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì˜ ê°ê°ì˜ í˜ì´ì§€ëŠ” í˜ì´ì§€ í…Œì´ë¸” ì•ˆì˜ entryë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ì´ í˜ì´ì§€ í…Œì´ë¸” entryëŠ” í˜ì´ì§€ì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ì •ë³´ë“¤ì„ ì €ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì •ë³´ë“¤ ì¤‘ì—ì„œ seg faultsì™€ ê´€ë ¨ëœ ë°ì´í„°ëŠ” í˜ì´ì§€ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì…ë‹ˆë‹¤. ì´ëŠ” read, write, executeì™€ ê°™ì€ íŒŒì¼ ì ‘ê·¼ ê¶Œí•œê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í˜ì´ì§€ 3ë²ˆì— ëŒ€í•œ í˜ì´ì§€ í…Œì´ë¸” entryëŠ” ì—¬ëŸ¬ë¶„ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ê·¸ í˜ì´ì§€ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì„ ê¶Œí•œì´ ìˆëŠ”ì§€, ê·¸ í˜ì´ì§€ì— ë°ì´í„°ë¥¼ ì“¸ ê¶Œí•œì´ ìˆëŠ”ì§€, ê·¸ í˜ì´ì§€ì— ì§€ì‹œì–´ë¥¼ ì‹¤í–‰í•  ê¶Œí•œì´ ìˆëŠ”ì§€ ê°€ë¦¬í‚¬ ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Conceptually speaking, each page of the virtual address space of the process has an entry in the page table. This page table entry stores various pieces of information related to the page. The data of interest in relation to seg faults are the access permissions for the page, which are similar to file access permissions: read, write, and execute. For example, the page table entry for page 3 will indicate whether your process has the right to read data from that page, the right to write data to it, and the right to execute instructions on it.</p>
</blockquote>
<br>

<p>í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ ê³¼ì •ì—ì„œ, í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ì— ì˜í•´ ìƒì„±ë˜ëŠ” ì£¼ì†Œë“¤ì€ ê°€ìƒì˜ ê°’ì¼ ê²ƒì…ë‹ˆë‹¤. í”„ë¡œê·¸ë¨ì´ yë¼ê³ í•˜ëŠ” íŠ¹ì •í•œ ê°€ìƒ ì£¼ì†Œë¥¼ ê°–ëŠ” ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ë ¤ê³  í• ë•Œ, í•˜ë“œì›¨ì–´ëŠ” ì´ ê°€ìƒ ì£¼ì†Œ yë¥¼ ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ vë¡œ ë³€í™˜í•  ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ì¸ vëŠ” ê°€ìƒ ì£¼ì†Œ yë¥¼ 4,096ìœ¼ë¡œ ë‚˜ëˆˆ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ í•˜ë“œì›¨ì–´ëŠ” í˜ì´ì§€ í…Œì´ë¸”ë‚´ì—ì„œ entryê°’ì¸ vê°€ ìˆ˜í–‰í•˜ê³ ì í•˜ëŠ” ì—°ì‚°ê³¼ ì¼ì¹˜í•˜ëŠ” ê¶Œí•œì„ ê°€ì§€ê³ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•  ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ ì¼ì¹˜í•œë‹¤ë©´, í•˜ë“œì›¨ì–´ëŠ” ì´ í…Œì´ë¸” entryë¡œë¶€í„° ì‹¤ì œ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ê³µê°„ì˜ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì–»ì–´ë‚¼ ê²ƒì´ë©° ìš”ì²­ëœ ë©”ëª¨ë¦¬ ì—°ì‚°ì„ ìˆ˜í–‰í•  ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë§Œì•½ í…Œì´ë¸” entryê°€ ìš”ì²­í•œ ì—°ì‚°ì— ëŒ€í•œ ì ì ˆí•œ ê¶Œí•œì´ ì—†ì„ë•Œì—ëŠ” ë‚´ë¶€ì ì¸ ì¸í„°ëŸ½íŠ¸ë¥¼ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤. ì´ ì¸í„°ëŸ½íŠ¸ëŠ” OSì˜ ì—ëŸ¬ í•¸ë“¤ë§ ë£¨í‹´ìœ¼ë¡œ jumpí•˜ë„ë¡ í•´ì¤ë‹ˆë‹¤. OSëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì ‘ê·¼ ìœ„ë°˜ì„ ì•Œë ¤ì£¼ê³  í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ì„ ì¤‘ë‹¨ì‹œí‚µë‹ˆë‹¤.</p>
<blockquote>
<p>During the execution of the program, the addresses it generates will be virtual. When the program attempts to access memory at a certain virtual address, say y, the hardware will convert that to a virtual page number v, which equals y divided by 4,096. The hardware will then check entry v in the page table to see whether the permissions for the page match the operation to be performed. If they do match, the hardware will get the desired locationâ€™s actual physical page number from this table entry and then carry out the requested memory operation. But if the table entry shows that the requested operation does not have the proper permission, the hardware will execute an internal interrupt. This will cause a jump to the OSâ€™s error-handling routine. The OS will normally then announce a memory access violation and discontinue execution of the program.</p>
</blockquote>
<br>

<h3 id="A-slight-memory-access-bug-might-not-cause-a-seg-fault"><a href="#A-slight-memory-access-bug-might-not-cause-a-seg-fault" class="headerlink" title="A slight memory-access bug might not cause a seg fault"></a>A slight memory-access bug might not cause a seg fault</h3><figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> q[<span class="number">200</span>];</span><br><span class="line">main()</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">2000</span>; i++) {</span><br><span class="line">    q[i] = i;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<br>

<p>ê±°ì˜ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì‹¤í–‰ ì‹œê°„ì— seg faultê°€ ë°œìƒí•  ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ì‹œì ì´ ë‹¹ì‹ ì„ ë†€ë¼ê²Œ í•  ê²ƒì…ë‹ˆë‹¤. ì—ëŸ¬ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ì‹œì ì— ë°œìƒí•˜ì§€ ì•Šì„ ê°€ëŠ¥ì„±ì´ ìˆëŠ”ë°, ë‹¤ì‹œ ë§í•´, iê°€ 200ì¸ ê²½ìš°ê°€ ì•„ë‹Œ ê·¸ ì´í›„ ì‹œì ì— ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>At execution time, a seg fault is quite likely to occur. However, the timing of the error may surprise you. The error is not likely to appear at the â€œnaturalâ€ time, that is, when i = 200; rather, it is likely to happen much later than that. </p>
</blockquote>
<br>

<p>ì´ í˜„ìƒì„ ì¬í˜„í•˜ê¸° ìœ„í•´ ìš°ë¦¬ëŠ” ì´ í”„ë¡œê·¸ë¨ì„ ë³€ìˆ˜ì˜ ì£¼ì†Œë¥¼ ê²€ìƒ‰í•˜ê¸°ì— í¸ë¦¬í•œ GDBë¥¼ í†µí•´ ì‹¤í–‰ì‹œì¼°ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ seg faultëŠ” iê°€ 200ì´ ì•„ë‹Œ 728(í…ŒìŠ¤íŠ¸ í™˜ê²½ì— ë”°ë¼ iì˜ ê°’ì€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ)ì—ì„œ ë°œìƒí–ˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì™œ ì´ëŸ¬í•œ í˜„ìƒì´ ë°œìƒí•˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤.</p>
<blockquote>
<p>To illustrate this, we ran this program on a Linux PC under GDB, in order to conveniently query addresses of variables. It turned out that the seg fault occurred not at i = 200, but at i = 728. Letâ€™s see why.</p>
</blockquote>
<br>

<p>GDBì— ì§ˆì˜ ê²°ê³¼, ìš°ë¦¬ëŠ” ë°°ì—´ q(q[])ì˜ ì£¼ì†Œê°’ì´ 0x80497bfë¡œ ëë‚œë‹¤ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì¦‰, q[199]ì˜ ë§ˆì§€ë§‰ byteê°€ í•´ë‹¹ ë©”ëª¨ë¦¬ ì£¼ì†Œì— ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. í˜ì´ì§€ í¬ê¸°ëŠ” 4,096 byteì— 32-bitì˜ word í¬ê¸°ë¥¼ ê°–ëŠ” ì¥ì¹˜ë¼ê³  ê³ ë ¤í•´ë³¸ë‹¤ë©´, ê°€ìƒ ì£¼ì†Œ ê³µê°„ì€ 20-bitì˜ í˜ì´ì§€ ë²ˆí˜¸ì™€ 12-bitì˜ ì˜¤í”„ì…‹ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì§‘ë‹ˆë‹¤. ìš°ë¦¬ í”„ë¡œê·¸ë¨ì˜ ê²½ìš°, ë°°ì—´ q[]ëŠ” ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ 0x8049 = 32841, ì˜¤í”„ì…‹ ê°’ 0x7bf = 1983ì´ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ qê°€ í• ë‹¹ëœ ë©”ëª¨ë¦¬ì˜ í˜ì´ì§€ ìœ„ì— ì—¬ì „íˆ 2,112 byteì˜ ê³µê°„ì´ ë‚¨ì•„ìˆê²Œ ë©ë‹ˆë‹¤. ì´ ê³µê°„ì€ integer ë³€ìˆ˜ 528ê°œë¥¼ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë©°, ìš°ë¦¬ í”„ë¡œê·¸ë¨ì€ ê·¸ê²ƒì„ ë§ˆì¹˜ qì˜ ìš”ì†Œë“¤ì´ í¬í•¨ëœ ê³µê°„ìœ¼ë¡œ ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤(q[200] ~ q[727]).</p>
<blockquote>
<p>From queries to GDB we found that the array q[] ended at address 0x80497bf; that is, the last byte of q[199] was at that memory location. Taking into account the Intel page size of 4,096 bytes and the 32-bit word size of this machine, a virtual address breaks down into a 20-bit page number and a 12-bit offset. In our case, q[] ended in virtual page number 0x8049 = 32841, offset 0x7bf = 1983. So there were still 4,096 âˆ’ 1,984 = 2,112 bytes on the page of memory on which q was allocated. That space can hold 2112 / 4 = 528 integer variables (since each is 4 bytes wide on the machine used here), and our code treated it as if it contained elements of q at â€œpositionsâ€ 200 through 727.</p>
</blockquote>
<br>

<p>ë¬¼ë¡  q[] ë°°ì—´ì˜ ì´ëŸ¬í•œ ìš”ì†Œ(q[200] ~ q[727])ë“¤ì€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ì§€ ì•Šì§€ë§Œ, ì»´íŒŒì¼ëŸ¬ëŠ” ë¶ˆë§Œì„ ì œê¸°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—¬ì „íˆ í•´ë‹¹ í˜ì´ì§€ëŠ” ì“°ê¸° ê¶Œí•œì„ ê°€ì§€ê³  ìˆê¸° ë–„ë¬¸ì— í•˜ë“œì›¨ì–´ ë˜í•œ ë¶ˆë§Œì„ ì œê¸°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜¤ë¡œì§€ iê°€ 728ì´ ë˜ëŠ” ì‹œì ì— q[i]ëŠ” ë‹¤ë¥¸ í˜ì´ì§€ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë©ë‹ˆë‹¤. ë°”ë¡œ ì´ ê²½ìš°ì—, í•´ë‹¹ í˜ì´ì§€ì—ëŠ” ì“°ê¸° ê¶Œí•œì´ ì—†ê²Œë˜ê³  ê°€ìƒ ë©”ëª¨ë¦¬ í•˜ë“œì›¨ì–´ëŠ” ì´ë¥¼ ê°ì§€í•˜ì—¬ seg faultë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.</p>
<blockquote>
<p>Those elements of q[] donâ€™t exist, of course, but the compiler did not complain. Neither did the hardware, since the writes were still being performed to a page for which we certainly had write permission. Only when i became 728 did q[i] refer to an address on a different page. In this case, it was a page for which we didnâ€™t have write (or any other) permission; the virtual memory hardware detected this and triggered a seg fault.</p>
</blockquote>
<br>

<span class="highlight-text green">êµí›ˆ: ì´ì „ì— ì–¸ê¸‰í–ˆë“¯ì´, seg faultê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ ì—°ì‚°ì— ì˜¤ë¥˜ê°€ ì—†ë‹¤ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.</span>
<blockquote>
<p>The moral: As stated earlier, we canâ€™t conclude from the absence of a seg fault that a memory operation is correct.</p>
</blockquote>
<br>
<br>
<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li>Norman Matloff, Peter Jay Salzman. (2008). The Art of Debugging with GDB, DDD, and Eclipse. No Starch Press</li>
<li><a href="https://nostarch.com/debugging.htm">https://nostarch.com/debugging.htm</a></li>
</ul>
]]></content>
      <categories>
        <category>ê¸°ìˆ ë¬¸ì„œ ë²ˆì—­</category>
      </categories>
      <tags>
        <tag>gdb</tag>
        <tag>coredump</tag>
        <tag>gdb debugging</tag>
        <tag>page</tag>
        <tag>page table</tag>
        <tag>seg fault</tag>
        <tag>segmentation fault</tag>
      </tags>
  </entry>
  <entry>
    <title>SELECT ì¿¼ë¦¬ ê²°ê³¼ ë™ì ìœ¼ë¡œ ë°›ì•„ì˜¤ëŠ” ë°©ë²•</title>
    <url>/2023/01/26/how-to-get-query-result-dynamically/</url>
    <content><![CDATA[<p><escape><span id="more"></span></escape></p>
<p><code>SelectQueryResultType</code>ì€ ì¿¼ë¦¬ ì¡°íšŒ ê²°ê³¼ë¡œ ë‚˜ì˜¨ ì¹¼ëŸ¼ ì´ë¦„ì„ keyê°’ìœ¼ë¡œ í•˜ê³  í•´ë‹¹ ì¹¼ëŸ¼ì˜ íƒ€ì…ì— ê´€ê³„ ì—†ì´ ê·¸ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ë¹ˆ ì¸í„°í˜ì´ìŠ¤ íƒ€ì…ì˜ valueë¥¼ ê°–ëŠ” map ìŠ¬ë¼ì´ìŠ¤ì´ê³  ì¡°íšŒëœ row ê°œìˆ˜ ë§Œí¼ í•´ë‹¹ ìŠ¬ë¼ì´ìŠ¤ì— append ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
<p><code>pointers</code>ë¼ëŠ” ë¹ˆ(empty) ì¸í„°í˜ì´ìŠ¤ ìŠ¬ë¼ì´ìŠ¤ë¥¼ ì¶”ê°€í•œ ì´ìœ ëŠ” pq ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ Scan() í•¨ìˆ˜ëŠ” ì¡°íšŒëœ ì¹¼ëŸ¼ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ <strong>ë³€ìˆ˜ì˜ ì£¼ì†Œ ê°’</strong>ì„ ì¸ìë¡œ ë°›ê¸° ë•Œë¬¸ì— <code>values</code> ë¼ëŠ” ë¹ˆ(empty) ì¸í„°í˜ì´ìŠ¤ ìŠ¬ë¼ì´ìŠ¤(ì¡°íšŒëœ ì¹¼ëŸ¼ ê°’ì„ ì €ì¥í•  ê³µê°„)ì˜ ìš”ì†Œ ë³„ ì£¼ì†Œ ê°’ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ìŠ¬ë¼ì´ìŠ¤ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. <img src="/assets/images/how-to-get-query-result-dynamically-figure1.jpeg" class="" width="200" height="200"></p>
<br>

<figure class="highlight go"><figcaption><span>postgres.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> postgres</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;database/sql&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line">	_ <span class="string">&quot;github.com/lib/pq&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> SelectQueryResultType []<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(db *DB)</span> <span class="title">SelectQuery</span><span class="params">(query <span class="keyword">string</span>)</span> <span class="params">(SelectQueryResultType, error)</span></span> &#123;</span><br><span class="line">	rows, err := db.db.Query(query)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cols, err := rows.Columns()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;db columns fail: %s\n&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> result SelectQueryResultType</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> rows.Next() &#123;</span><br><span class="line">		values := <span class="built_in">make</span>([]<span class="keyword">interface</span>&#123;&#125;, <span class="built_in">len</span>(cols))</span><br><span class="line">		pointers := <span class="built_in">make</span>([]<span class="keyword">interface</span>&#123;&#125;, <span class="built_in">len</span>(cols))</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> i := <span class="keyword">range</span> values &#123;</span><br><span class="line">			pointers[i] = &amp;values[i]</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> err = rows.Scan(pointers...); err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;db scan fail: %s\n&quot;</span>, err)</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		row := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">		<span class="keyword">for</span> i, val := <span class="keyword">range</span> values &#123;</span><br><span class="line">			row[strings.ToLower(cols[i])] = val</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		result = <span class="built_in">append</span>(result, row)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> result, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://stackoverflow.com/questions/53435455/handling-dynamic-queries-cant-scan-into-struct">https://stackoverflow.com/questions/53435455/handling-dynamic-queries-cant-scan-into-struct</a></li>
</ul>
]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>lib/pq</tag>
        <tag>Scan()</tag>
        <tag>Golang query</tag>
      </tags>
  </entry>
  <entry>
    <title>ì¸í…” Hyperscan ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ ë²ˆì—­</title>
    <url>/2021/09/24/hyperscan-phase1/</url>
    <content><![CDATA[<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì¸í…” Hyperscanì˜ <a href="http://intel.github.io/hyperscan/dev-reference/index.html">ê³µì‹ ë¬¸ì„œ</a>ë¥¼ í†µí•´ ì»´íŒŒì¼(compile)ì´ë‚˜ ìŠ¤ìº”(scan)ê³¼ ê°™ì€ Hyperscanì˜ ê¸°ë³¸ì ì¸ ê°œë…ë“¤ì— ëŒ€í•´ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì¶”í›„ì—ëŠ” Hyperscan APIë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ì •ê·œ í‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­ì„ ìˆ˜í–‰í•˜ëŠ” ìƒ˜í”Œ ì½”ë“œë„ ì—…ë¡œë“œí•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<span id="more"></span>

<br>

<!-- toc -->

<br>

<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Hyperscanì€ ë†’ì€ ì„±ëŠ¥ê³¼ ìœ ì—°ì„±ì„ ê³ ë ¤í•˜ì—¬ ë””ìì¸ëœ ì •ê·œ í‘œí˜„ì‹ ë§¤ì¹­ ì—”ì§„ ì†Œí”„íŠ¸ì›¨ì–´ ì…ë‹ˆë‹¤. ì´ê²ƒì€ ì§ê´€ì ì¸ C API í˜•íƒœì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Hyperscan is a software regular expression matching engine designed with high performance and flexibility in mind. It is implemented as a library that exposes a straightforward C API.</p>
</blockquote>
<br>

<p>Hyperscan APIëŠ” 2ê°€ì§€ ìš”ì†Œ(<strong>compilation</strong>ê³¼ <strong>scanning</strong>)ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The Hyperscan API itself is composed of two major components:</p>
</blockquote>
<br>

<h3 id="Compilation"><a href="#Compilation" class="headerlink" title="Compilation"></a>Compilation</h3><p>ì´ í•¨ìˆ˜ë“¤ì€ ì‹ë³„ìë‚˜ ì˜µì…˜ í”Œë˜ê·¸ê°’ì— ë”°ë¥¸ ì •ê·œ í‘œí˜„ì‹ ê·¸ë£¹ì„ ì „ë‹¬ë°›ì•„ Hyperscanì˜ scanning APIì—ì„œ ì‚¬ìš©í•˜ëŠ” ë³€ê²½ì´ ë¶ˆê°€í•œ ë°ì´í„°ë² ì´ìŠ¤ í˜•íƒœë¡œ ë³€í™˜(compile)í•©ë‹ˆë‹¤. ì´ ë³€í™˜ ê³¼ì •ì—ì„œ ì£¼ì–´ì§„ í‘œí˜„ì‹ë“¤ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë§¤ì¹­í•˜ê¸°ìœ„í•œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ë§ì€ ì–‘ì˜ ë¶„ì„ ë° ìµœì í™” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>These functions take a group of regular expressions, along with identifiers and option flags, and compile them into an immutable database that can be used by the Hyperscan scanning API. This compilation process performs considerable analysis and optimization work in order to build a database that will match the given expressions efficiently.</p>
</blockquote>
<br>

<p>ë§Œì•½ (Hyperscanì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì •ê·œí‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë¦¬ì†ŒìŠ¤ ì„ê³„ì¹˜ ì´ˆê³¼ì™€ ê°™ì€)ì–´ë– í•œ ì´ìœ ì—ì„œë“  íŠ¹ì • íŒ¨í„´ì´ ë°ì´í„°ë² ì´ìŠ¤í™”ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ íŒ¨í„´ ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ì—ëŸ¬ê°€ ë°˜í™˜ë  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>If a pattern cannot be built into a database for any reason (such as the use of an unsupported expression construct, or the overflowing of a resource limit), an error will be returned by the pattern compiler.</p>
</blockquote>
<br>

<p>ë³€í™˜ëœ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì§ë ¬í™”ë˜ê±°ë‚˜ ì¬ë°°ì¹˜ë  ìˆ˜ ìˆìœ¼ë©° ì´ë¥¼ í†µí•´ ë””ìŠ¤í¬ì— ì €ì¥ë˜ê±°ë‚˜ í˜¸ìŠ¤íŠ¸ ê°„ ì´ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ ì´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” íŠ¹ì •í•œ í”Œë«í¼ íŠ¹ì„±ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì˜ˆë¥¼ ë“¤ì–´, IntelÂ® AVX2 ì§€ì‹œì–´ì˜ ì‚¬ìš©)</p>
<blockquote>
<p>Compiled databases can be serialized and relocated, so that they can be stored to disk or moved between hosts. They can also be targeted to particular platform features (for example, the use of IntelÂ® Advanced Vector Extensions 2 (IntelÂ® AVX2) instructions).</p>
</blockquote>
<br>

<h3 id="Scanning"><a href="#Scanning" class="headerlink" title="Scanning"></a>Scanning</h3><p>ì¼ë‹¨ Hyperscan ë°ì´í„°ë² ì´ìŠ¤ê°€ ìƒì„±ì´ ëœë‹¤ë©´, ì´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë©”ëª¨ë¦¬ ìƒì— ìˆëŠ” ë°ì´í„°ë¥¼ ìŠ¤ìº”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Hyperscanì€ ëª‡ê°€ì§€ ìŠ¤ìºë‹ ëª¨ë“œë¥¼ ì œê³µí•˜ëŠ”ë°, ì´ ëª¨ë“œëŠ” ìŠ¤ìº”í•œ ë°ì´í„°ê°€ ë‹¨ì¼ ì¸ì ‘ ë¸”ë¡(single contiguous block)ìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•œì§€, ë©”ëª¨ë¦¬ì— ìˆëŠ” ëª‡ëª‡ ë¸”ë¡ì— ë™ì‹œì— ë¶„ë°°ê°€ ê°€ëŠ¥í•œì§€ ë˜ëŠ” ìŠ¤íŠ¸ë¦¼ ì•ˆì—ì„œ ì¼ë ¨ì˜ ë¸”ë¡(sequence of blocks)ìœ¼ë¡œ ìŠ¤ìº”ë˜ëŠ”ì§€ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Once a Hyperscan database has been created, it can be used to scan data in memory. Hyperscan provides several scanning modes, depending on whether the data to be scanned is available as a single contiguous block, whether it is distributed amongst several blocks in memory at the same time, or whether it is to be scanned as a sequence of blocks in a stream.</p>
</blockquote>
<br>

<p>ë§¤ì¹­ëœ ì •ë³´ëŠ” ê°ê°ì˜ ë§¤ì¹­ ê³¼ì •ì—ì„œ ë™ê¸°ì ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ” ì‚¬ìš©ì ì •ì˜ ì½œë°± í•¨ìˆ˜ë¥¼ í†µí•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Matches are delivered to the application via a user-supplied callback function that is called synchronously for each match.</p>
</blockquote>
<br>

<p>ì£¼ì–´ì§„ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•´, Hyperscanì€ ëª‡ê°€ì§€ ë³´ì¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
<blockquote>
<p>For a given database, Hyperscan provides several guarantees:</p>
</blockquote>
<br>

<ul>
<li>2ê°€ì§€ ê³ ì • ì‚¬ì´ì¦ˆ í• ë‹¹ì„ ì œì™¸í•˜ë©´ ëŸ°íƒ€ì„ì‹œì— ë©”ëª¨ë¦¬ í• ë‹¹ì€ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©°, 2ê°€ì§€ ê³ ì • ì‚¬ì´ì¦ˆ í• ë‹¹ ê³¼ì •ì€ ë°˜ë“œì‹œ performance-critical ì–´í”Œë¦¬ì¼€ì´ì…˜ ì „ì— ëë‚˜ì•¼í•©ë‹ˆë‹¤.<ul>
<li>ìŠ¤í¬ë˜ì¹˜ ê³µê°„: ìŠ¤ìº” ì‹œì ì— ë‚´ë¶€ ë°ì´í„°ì— ì‚¬ìš©ë˜ëŠ” ì„ì‹œ ë©”ëª¨ë¦¬ ê³µê°„ì…ë‹ˆë‹¤. ë‹¨ì¼ ìŠ¤ìº” í˜¸ì¶œì´ ëë‚œ ì´í›„ì— scratch ê³µê°„ ë‚´ì˜ êµ¬ì¡°ë“¤ì€ ìœ ì§€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
<li>ìŠ¤íŠ¸ë¦¼ ê³µê°„: ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œì¸ ê²½ìš°ì—ë§Œ í•´ë‹¹í•˜ë©°, ê°ê°ì˜ ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•œ ìŠ¤ìº” í˜¸ì¶œ ì‚¬ì´ì—ì„œ ìœ ì§€ë˜ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ëª‡ëª‡ ìƒíƒœ ê³µê°„ì´ ìš”êµ¬ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Hyperscanì€ ë³µìˆ˜ì˜ ë°ì´í„° ë¸”ë¡ì— ê±¸ì³ ë§¤ì¹­ë˜ëŠ” ì •ë³´ë¥¼ íŠ¸ë™í‚¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
</li>
<li>ì£¼ì–´ì§„ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìš”êµ¬í•˜ëŠ” scratch ê³µê°„ ë° stream ìƒíƒœ(ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œì—ì„œ) ê³µê°„ì˜ í¬ê¸°ëŠ” ê³ ì •ë˜ì–´ìˆìœ¼ë©° ë°ì´í„°ë² ì´ìŠ¤ ì»´íŒŒì¼ íƒ€ì„ì— ê²°ì •ë©ë‹ˆë‹¤. ì´ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ëª¨ë¦¬ ìš”êµ¬ì‚¬í•­ì„ ì‚¬ì „ì— ì•Œ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë©°, ì„±ëŠ¥ìƒì˜ ì´ìœ ë¡œ í•„ìš”í•œ ê²½ìš°ë¼ë©´, ì´ëŸ¬í•œ êµ¬ì¡°ë“¤ì€ ë¯¸ë¦¬ í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>Hyperscan ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ì •ìƒì ìœ¼ë¡œ ì»´íŒŒì¼ëœ íŒ¨í„´ì´ë¼ë©´ ì–´ë– í•œ ì…ë ¥ ê°’ì´ ë“¤ì–´ì˜¤ë”ë¼ë„ ìŠ¤ìº”ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ëŸ°íƒ€ì„ ì‹œ ìŠ¤ìº” í˜¸ì¶œì´ ì—ëŸ¬ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•˜ëŠ” ë‚´ë¶€ì ì¸ ë¦¬ì†ŒìŠ¤ ì œí•œì´ë‚˜ ë‹¤ë¥¸ ì œì•½ì‚¬í•­ë“¤ì€ ì—†ìŠµë‹ˆë‹¤.</li>
</ul>
<blockquote>
<ul>
<li>No memory allocations occur at runtime with the exception of two fixed-size allocations, both of which should be done ahead of time for performance-critical applications:<ul>
<li>Scratch space: temporary memory used for internal data at scan time. Structures in scratch space do not persist beyond the end of a single scan call.</li>
<li>Stream state: in streaming mode only, some state space is required to store data that persists between scan calls for each stream. This allows Hyperscan to track matches that span multiple blocks of data.</li>
</ul>
</li>
<li>The sizes of the scratch space and stream state (in streaming mode) required for a given database are fixed and determined at database compile time. This means that the memory requirements of the application are known ahead of time, and these structures can be pre-allocated if required for performance reasons.</li>
<li>Any pattern that has successfully been compiled by the Hyperscan compiler can be scanned against any input. There are no internal resource limits or other limitations at runtime that could cause a scan call to return an error.</li>
</ul>
</blockquote>
<br>
<br>

<hr>
<h2 id="Compiling-Patterns"><a href="#Compiling-Patterns" class="headerlink" title="Compiling Patterns"></a>Compiling Patterns</h2><h3 id="Building-a-Database"><a href="#Building-a-Database" class="headerlink" title="Building a Database"></a>Building a Database</h3><p>Hyperscan ì»´íŒŒì¼ëŸ¬ APIëŠ” ì •ê·œí‘œí˜„ì‹ì„ ì…ë ¥ë°›ì•„ ê·¸ê²ƒë“¤ì„ ìŠ¤ìº” ì‘ì—…ì‹œì— ì‚¬ìš©ë˜ëŠ” ì»´íŒŒì¼ëœ íŒ¨í„´ ë°ì´í„°ë² ì´ìŠ¤ í˜•íƒœë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The Hyperscan compiler API accepts regular expressions and converts them into a compiled pattern database that can then be used to scan data.</p>
</blockquote>
<br>

<p>APIì—ì„œëŠ” ì •ê·œí‘œí˜„ì‹ì„ ë°ì´í„°ë² ì´ìŠ¤í™”í•˜ê¸° ìœ„í•œ 3ê°€ì§€ í˜•íƒœì˜ í•¨ìˆ˜ë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The API provides three functions that compile regular expressions into databases:</p>
</blockquote>
<br>

<ol>
<li>hs_compile(): ë‹¨ì¼ ì •ê·œí‘œí˜„ì‹ì„ íŒ¨í„´ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì»´íŒŒì¼í•©ë‹ˆë‹¤.</li>
<li>hs_compile_multi(): ì •ê·œí‘œí˜„ì‹ì˜ ë°°ì—´(ì •ê·œí‘œí˜„ì‹ì˜ ì§‘í•©)ì„ íŒ¨í„´ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì»´íŒŒì¼í•©ë‹ˆë‹¤. ì§€ì›í•˜ëŠ” ëª¨ë“  íŒ¨í„´ë“¤ì´ ë§¤ì¹­ì— ì„±ê³µí•˜ëŠ” ê²½ìš°ì— ë°˜í™˜ë˜ëŠ” ì‚¬ìš©ì ì •ì˜ êµ¬ë¶„ì(id)ë¥¼ ê°€ì§€ê³  ë™ì‹œì— ìŠ¤ìº”ë  ê²ƒì…ë‹ˆë‹¤. </li>
<li>hs_compile_ext_multi(): ìœ„ í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì •ê·œí‘œí˜„ì‹ì˜ ë°°ì—´(ì •ê·œí‘œí˜„ì‹ì˜ ì§‘í•©)ì„ íŒ¨í„´ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì»´íŒŒì¼í•˜ë©°, ê°ê°ì˜ í‘œí˜„ì‹ì— ëŒ€í•´ í™•ì¥ëœ íŒŒë¼ë¯¸í„°ê°€ ëª…ì‹œë˜ë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤.</li>
</ol>
<blockquote>
<ol>
<li>hs_compile(): compiles a single expression into a pattern database.</li>
<li>hs_compile_multi(): compiles an array of expressions into a pattern database. All of the supplied patterns will be scanned for concurrently at scan time, with user-supplied identifiers returned when they match.</li>
<li>hs_compile_ext_multi(): compiles an array of expressions as above, but allows Extended Parameters to be specified for each expression.</li>
</ol>
</blockquote>
<br>

<p>ì»´íŒŒì¼ ì‘ì—…ì€ Hyperscan ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì£¼ì–´ì§„ íŒ¨í„´ë“¤ì„ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ê³ , ëŸ°íƒ€ì„ ì‹œì— ê³„ì‚°í–ˆë‹¤ë©´ ë¹„ìš©ì´ êµ‰ì¥íˆ í´ ìˆ˜ ìˆëŠ” ì´ëŸ¬í•œ íŒ¨í„´ë“¤ì„ ì–´ë–»ê²Œí•˜ë©´ ìµœì í™”ëœ ë°©ì‹ìœ¼ë¡œ ìŠ¤ìº”í•  ìˆ˜ ìˆì„ì§€ë¥¼ ë¯¸ë¦¬ ê²°ì •í•˜ë„ë¡ í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Compilation allows the Hyperscan library to analyze the given pattern(s) and pre-determine how to scan for these patterns in an optimized fashion that would be far too expensive to compute at run-time.</p>
</blockquote>
<br>

<p>í‘œí˜„ì‹ë“¤ì„ ì»´íŒŒì¼í•˜ê³ ì í• ë•ŒëŠ”, ì»´íŒŒì¼ëœ íŒ¨í„´ë“¤ì˜ ê²°ê³¼ê°€ ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œì— ì‚¬ìš©ë ê²ƒì¸ì§€ ë¸”ë¡ ë˜ëŠ” ë²¡í„° ëª¨ë“œì—ì„œ ì‚¬ìš©ë  ê²ƒì¸ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•´ì•¼í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>When compiling expressions, a decision needs to be made whether the resulting compiled patterns are to be used in a streaming, block or vectored mode:</p>
</blockquote>
<br>

<ul>
<li>ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œ: ìŠ¤ìº”í•˜ë ¤ëŠ” ëŒ€ìƒì´ ì—°ì†ì ì¸ ìŠ¤íŠ¸ë¦¼ì´ë©° ì´ë¥¼ í•œë²ˆì— ìŠ¤ìº”í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤; ë°ì´í„°ì˜ ë¸”ë¡ì´ ìˆœì°¨ì ìœ¼ë¡œ ìŠ¤ìº”ë˜ë©° ìŠ¤íŠ¸ë¦¼ ë‚´ ì—¬ëŸ¬ ë¸”ë¡ë“¤ì—ì„œ ë§¤ì¹­ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œì—ì„œ ê°ê°ì˜ ìŠ¤íŠ¸ë¦¼ì€ ìŠ¤ìº” í˜¸ì¶œ ê°„ì˜ ìŠ¤íŠ¸ë¦¼ ìƒíƒœë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ë©”ëª¨ë¦¬ ë¸”ë¡ì„ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.</li>
<li>ë¸”ë¡ ëª¨ë“œ: ìŠ¤ìº” ëŒ€ìƒì´ ê°œë³„ì ì´ê³  ì¸ì ‘í•œ ë¸”ë¡ì´ë©° ì´ ë¸”ë¡ì€ í•œë²ˆì˜ í˜¸ì¶œë¡œ ìŠ¤ìº”ë  ìˆ˜ ìˆìœ¼ë©° ìƒíƒœê°’ ì €ì¥ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
<li>ë²¡í„° ëª¨ë“œ: ìŠ¤ìº” ëŒ€ìƒì´ í•œë²ˆì— ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ ì¸ì ‘í•˜ì§€ ì•Šì€ ë¸”ë¡ì˜ ë¦¬ìŠ¤íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤. ë¸”ë¡ ëª¨ë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìƒíƒœê°’ ì €ì¥ì€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
</ul>
<blockquote>
<ul>
<li>Streaming mode: the target data to be scanned is a continuous stream, not all of which is available at once; blocks of data are scanned in sequence and matches may span multiple blocks in a stream. In streaming mode, each stream requires a block of memory to store its state between scan calls.</li>
<li>Block mode: the target data is a discrete, contiguous block which can be scanned in one call and does not require state to be retained.</li>
<li>Vectored mode: the target data consists of a list of non-contiguous blocks that are available all at once. As for block mode, no retention of state is required.</li>
</ul>
</blockquote>
<br>

<p>ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œì— ì‚¬ìš©ë˜ëŠ” íŒ¨í„´ë“¤ì„ ì»´íŒŒì¼í•˜ê¸° ìœ„í•´ì„œëŠ” hs_compile() í•¨ìˆ˜ì˜ ëª¨ë“œ íŒŒë¼ë¯¸í„° ê°’ì„ HS_MODE_STREAMìœ¼ë¡œ ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤; ì´ì™€ ë™ì¼í•˜ê²Œ, ë¸”ë¡ ëª¨ë“œëŠ” HS_MODE_BLCOK, ë²¡í„° ëª¨ë“œì—ì„œëŠ” HS_MODE_VECTOREDë¡œ ì„¤ì •í•´ì•¼í•©ë‹ˆë‹¤. í•˜ë‚˜ì˜ ëª¨ë“œë¡œ ì»´íŒŒì¼ëœ íŒ¨í„´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì˜¤ì§ ê·¸ ëª¨ë“œì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒ¨í„´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì»´íŒŒì¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœ Hyperscan ë²„ì „ê³¼ ìŠ¤ìº”ì„ ìœ„í•œ Hyperscan ë²„ì „ì€ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>To compile patterns to be used in streaming mode, the mode parameter of hs_compile() must be set to HS_MODE_STREAM; similarly, block mode requires the use of HS_MODE_BLOCK and vectored mode requires the use of HS_MODE_VECTORED. A pattern database compiled for one mode (streaming, block or vectored) can only be used in that mode. The version of Hyperscan used to produce a compiled pattern database must match the version of Hyperscan used to scan with it.</p>
</blockquote>
<br>

<h3 id="Pattern-Support"><a href="#Pattern-Support" class="headerlink" title="Pattern Support"></a>Pattern Support</h3><p>Hyperscanì€ PCRE ë¼ì´ë¸ŒëŸ¬ë¦¬(â€œlibpcreâ€)ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´ ë¬¸ë²•(<a href="https://www.pcre.org/">https://www.pcre.org</a> ì°¸ì¡°)ì„ ì§€ì›í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ libpcreì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ ëª¨ë“  êµ¬ì¡°ë“¤ì„ ì§€ì›í•˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. ì§€ì›í•˜ì§€ ì•ŠëŠ” êµ¬ì¡°ë“¤ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Hyperscan supports the pattern syntax used by the PCRE library (â€œlibpcreâ€), described at <a href="https://www.pcre.org/">https://www.pcre.org</a>. However, not all constructs available in libpcre are supported. The use of unsupported constructs will result in compilation errors.</p>
</blockquote>
<br>

<p>PCRE 8.41 ë˜ëŠ” ê·¸ ìƒìœ„ ë²„ì „ì„ ì‚¬ìš©í•´ì•¼ë§Œ Hyperscanì˜ PCRE ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ë²• ë¶„ì„ì´ ìœ íš¨í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The version of PCRE used to validate Hyperscanâ€™s interpretation of this syntax is 8.41 or above.</p>
</blockquote>
<br>

<h4 id="Supported-Constructs"><a href="#Supported-Constructs" class="headerlink" title="Supported Constructs"></a>Supported Constructs</h4><p>ì§€ì›í•˜ëŠ” ì •ê·œí‘œí˜„ì‹ êµ¬ì¡°ë“¤ì€ <a href="http://intel.github.io/hyperscan/dev-reference/compilation.html#pattern-support">í•´ë‹¹ ë§í¬</a>ë¥¼ í†µí•´ í™•ì¸ê°€ëŠ¥í•˜ë©°, ì•„ë˜ 2ê°€ì§€ ì •ë³´ë¥¼ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<div class="alert info"><p>ì„ì˜ í‘œí˜„ì‹ì˜ ë§¤ìš° í° ë°˜ë³µ íšŸìˆ˜ë¥¼ ê°–ëŠ” ê²½ê³„ê°€ ìˆëŠ” ë°˜ë³µ í•œì •ì‚¬(ì˜ˆë¥¼ ë“¤ì–´, ([a-z]|bc*d|xy?z){1000,5000})ëŠ” íŒ¨í„´ ì»´íŒŒì¼ íƒ€ì„ì— â€œPattern too largeâ€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤.</p>
<p>Bounded-repeat quantifiers with large repeat counts of arbitrary expressions (e.g. ([a-z]|bc*d|xy?z){1000,5000}) will result in a â€œPattern too largeâ€ error at pattern compile time.</p>
</div>

<div class="alert info"><p>ë§¤ì¹­ì˜ ì‹œì‘ ì§€ì ì„ ì¶”ì¶œí•˜ëŠ” ì˜µì…˜ í”Œë˜ê·¸ê°’ì¸ HS_FLAG_SOM_LEFTMOSTë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´íŒŒì¼í•˜ëŠ” ê²½ìš°ì—ëŠ” ëª¨ë“  íŒ¨í„´ì´ ì •ìƒì ìœ¼ë¡œ ì»´íŒŒì¼ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ í”Œë˜ê·¸ ê°’ì„ ì§€ì›í•˜ëŠ” íŒ¨í„´ë“¤ì€ Hyperscanì— ì˜í•´ ì •ìƒì ìœ¼ë¡œ ì»´íŒŒì¼ë˜ëŠ” íŒ¨í„´ë“¤ì˜ ì¼ë¶€ì…ë‹ˆë‹¤; ì£¼ëª©í• ì ì€, ë§¤ì¹­ì˜ ì‹œì‘ ì§€ì ì„ ì¶”ì¶œí•˜ëŠ” ì˜µì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  Hyperscan ì»´íŒŒì¼ì´ ê°€ëŠ¥í•œ ëŒ€ë‹¤ìˆ˜ì˜ ê²½ê³„ê°€ ìˆëŠ” ë°˜ë³µ í•œì •ì‚¬ í˜•íƒœë“¤ì€ í•´ë‹¹ ì˜µì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ì»´íŒŒì¼ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë°˜ë³µ í•œì •ì‚¬ë¥¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ë“¤ì˜ ê²½ìš°ì—ëŠ” ì»´íŒŒì¼ ì‹œ SOMê°’ ì‚¬ìš©ì— ì£¼ì˜í•´ì•¼í•¨)</p>
<p>At this time, not all patterns can be successfully compiled with the HS_FLAG_SOM_LEFTMOST flag, which enables per-pattern support for Start of Match. The patterns that support this flag are a subset of patterns that can be successfully compiled with Hyperscan; notably, many bounded repeat forms that can be compiled with Hyperscan without the Start of Match flag enabled cannot be compiled with the flag enabled.</p>
</div>

<br>

<h3 id="Semantics"><a href="#Semantics" class="headerlink" title="Semantics"></a>Semantics</h3><p>Hyperscanì€ ê¸°ë³¸ì ìœ¼ë¡œ libpcre ë¬¸ë²•ì„ ë”°ë¥´ì§€ë§Œ, ì•½ê°„ì€ ë‹¤ë¥¸ ë¬¸ë²•ë¥¼ ì œê³µí•©ë‹ˆë‹¤. libpcre ë¬¸ë²•ê³¼ì˜ ì£¼ìš”í•œ ì°¨ì´ëŠ” ìŠ¤íŠ¸ë¦¬ë°ê³¼ ë‹¤ì¤‘ ë™ì‹œ(multiple simultaneous) íŒ¨í„´ ë§¤ì¹­ì˜ ìš”êµ¬ ì‚¬í•­ë“¤ì— ì˜í•´ ë°œìƒí•œ ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>While Hyperscan follows libpcre syntax, it provides different semantics. The major departures from libpcre semantics are motivated by the requirements of streaming and multiple simultaneous pattern matching.</p>
</blockquote>
<br>

<p>libpcre ë¬¸ë²•ê³¼ ì£¼ìš”í•œ ì°¨ì´ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The major departures from libpcre semantics are:</p>
</blockquote>
<br>

<ol>
<li>ë‹¤ì¤‘ íŒ¨í„´ ë§¤ì¹­: Hyperscanì€ íŒ¨í„´ ë§¤ì¹­ì´ ëª‡ëª‡ íŒ¨í„´ì— ëŒ€í•´ ë™ì‹œì— ë¶„ì„ë˜ë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤. ì´ê²ƒì€ libpcreì—ì„œ |(íŒŒì´í”„)ë¥¼ í†µí•´ íŒ¨í„´ë“¤ì„ êµ¬ë¶„í•˜ëŠ” ê²ƒê³¼ëŠ” ë‹¤ë¦…ë‹ˆë‹¤.</li>
<li>ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŒ: Hyperscanì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì¤‘ ë§¤ì¹˜ëŠ” ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>
<li><U>ì¢…ë£Œ ì˜¤í”„ì…‹ë§Œ ì œê³µ</U>: Hyperscanì˜ ê¸°ë³¸ ë™ì‘ì€ ë§¤ì¹­ì˜ ì¢…ë£Œ ì˜¤í”„ì…‹ë§Œì„ ì•Œë ¤ì£¼ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì‹œì‘ ì˜¤í”„ì…‹ ê°’ì˜ ì‚¬ìš© ì—¬ë¶€ëŠ” íŒ¨í„´ ì»´íŒŒì¼ íƒ€ì„ì— í‘œí˜„ì‹ ë§ˆë‹¤ íŠ¹ì • í”Œë˜ê·¸ê°’(HS_FLAG_SOM_LEFTMOS)ì„ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Start of Match ë‹¨ë½ì—ì„œ ìì„¸í•œ ë‚´ìš©ì„ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li><U>â€œëª¨ë“  ë§¤ì¹­â€ì— ëŒ€í•œ ë¦¬í¬íŠ¸</U>: í‘œí˜„ì‹ fooxyzbarbarì— ëŒ€í•´ foo.*bar íŒ¨í„´ì„ ìŠ¤ìº”í•˜ëŠ” ê²½ìš° Hyperscanì€ 2ê°€ì§€ ë§¤ì¹­ ê²°ê³¼(fooxyzbarì™€ fooxyzbarbarì˜ ëì§€ì ê³¼ ì¼ì¹˜í•˜ëŠ” ì‹œì ì—)ë¥¼ ë°˜í™˜í•  ê²ƒì…ë‹ˆë‹¤. ì´ì™€ ëŒ€ì¡°ì ìœ¼ë¡œ ê¸°ë³¸ì ì¸ libpcre ë¬¸ë²•ì—ì„œëŠ” ì˜¤ë¡œì§€ í•˜ë‚˜ì˜ ë§¤ì¹­ ê²°ê³¼ë§Œì„ ë°˜í™˜í•˜ê²Œ ë©ë‹ˆë‹¤. (greedy semanticsì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¼ë©´ fooxyzbarbarë¥¼ non-greedy semanticsì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¼ë©´ fooxyzbarë¥¼) ì´ê²ƒì€ greedyì™€ non-greedy semanticsê°„ì˜ ì „í™˜ ê³¼ì •ì´ Hyperscanì—ì„œëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</li>
</ol>
<blockquote>
<ol>
<li>Multiple pattern matching: Hyperscan allows matches to be reported for several patterns simultaneously. This is not equivalent to separating the patterns by | in libpcre, which evaluates alternations left-to-right.</li>
<li>Lack of ordering: the multiple matches that Hyperscan produces are not guaranteed to be ordered, although they will always fall within the bounds of the current scan.</li>
<li>End offsets only: Hyperscanâ€™s default behaviour is only to report the end offset of a match. Reporting of the start offset can be enabled with per-expression flags at pattern compile time. See Start of Match for details.</li>
<li>â€œAll matchesâ€ reported: scanning /foo.*bar/ against fooxyzbarbar will return two matches from Hyperscan â€“ at the points corresponding to the ends of fooxyzbar and fooxyzbarbar. In contrast, libpcre semantics by default would report only one match at fooxyzbarbar (greedy semantics) or, if non-greedy semantics were switched on, one match at fooxyzbar. This means that switching between greedy and non-greedy semantics is a no-op in Hyperscan.</li>
</ol>
</blockquote>
<br>

<h4 id="Start-of-Match-SOM"><a href="#Start-of-Match-SOM" class="headerlink" title="Start of Match(SOM)"></a>Start of Match(SOM)</h4><p>ê¸°ë³¸ì ìœ¼ë¡œ Hyperscanì€ ë§¤ì¹­ ì½œë°± í•¨ìˆ˜(íŒ¨í„´ ë§¤ì¹­ì´ ë°œìƒí•˜ëŠ” ê²½ìš° ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ê²Œ í˜¸ì¶œ ê²°ê³¼ë¥¼ ì•Œë ¤ì£¼ëŠ” ì½œë°± í•¨ìˆ˜)ê°€ í˜¸ì¶œë  ë•Œ ë§¤ì¹­ì˜ ì¢…ë£Œ ì˜¤í”„ì…‹ë§Œì„ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ HS_FLAG_SOM_LEFTMOST í”Œë˜ê·¸ê°’ì„ íŠ¹ì • íŒ¨í„´ì— ì ìš©í•œë‹¤ë©´ ë™ì¼í•œ ë§¤ì¹­ ê²°ê³¼ë¿ë§Œ ì•„ë‹ˆë¼ ì¢…ë£Œ ì˜¤í”„ì…‹ì— ë¶€í•©í•˜ëŠ” ê°€ì¥ ì™¼ìª½ì˜ ì‹œì‘ ì˜¤í”„ì…‹ë„ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>In standard operation, Hyperscan will only provide the end offset of a match when the match callback is called. If the HS_FLAG_SOM_LEFTMOST flag is specified for a particular pattern, then the same set of matches is returned, but each match will also provide the leftmost possible start offset corresponding to its end offset.</p>
</blockquote>
<br>

<p>SOM(Start of Match) í”Œë˜ê·¸ì˜ ì‚¬ìš©ì€ ëª‡ê°€ì§€ íŠ¸ë ˆì´ë“œì˜¤í”„ì™€ ì œí•œë“¤ì„ ìˆ˜ë°˜í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Using the SOM flag entails a number of trade-offs and limitations:</p>
</blockquote>
<br>

<ul>
<li>ì§€ì›í•˜ëŠ” íŒ¨í„´ì˜ ê°ì†Œ: ë§ì€ íŒ¨í„´ì— ëŒ€í•´, SOMì„ ì¶”ì í•˜ëŠ” ê³¼ì •ì€ ë³µì¡í•˜ë©° Hyperscanì˜ íŒ¨í„´ ì»´íŒŒì¼ ê³¼ì •ì—ì„œ â€œPattern too largeâ€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (SOM í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì§€ì›í•˜ëŠ” íŒ¨í„´ì´ë¼í• ì§€ë¼ë„)</li>
<li>ì¦ê°€ëœ ìŠ¤íŠ¸ë¦¼ ìƒíƒœ: ìŠ¤ìº” ì‹œì ì— ìƒíƒœ ê³µê°„ì€ SOM ì˜¤í”„ì…‹ê°’ì„ ì¶”ì í•˜ëŠ”ë° í•„ìš”í•˜ë©°, ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œ ì‚¬ìš© ì‹œ í•´ë‹¹ ê³µê°„ì—ëŠ” ì§€ì†ì ì¸ ìŠ¤íŠ¸ë¦¼ ìƒíƒœ ì •ë³´ê°€ ì €ì¥ë˜ì–´ì•¼í•©ë‹ˆë‹¤. ì´ì™€ ê°™ì€ ì´ìœ ë¡œ SOMì€ íŒ¨í„´ ë§¤ì¹­ ì‹œ ìš”êµ¬ë˜ëŠ” ìŠ¤íŠ¸ë¦¼ ìƒíƒœë¥¼ ì¦ê°€ì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤.</li>
<li>ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ: ì¼ë°˜ì ìœ¼ë¡œ SOMì„ ì¶”ì í•˜ëŠ” ê²ƒê³¼ ê´€ë ¨ëœ ì„±ëŠ¥ ë¹„ìš©ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</li>
<li>ì–‘ë¦½í•  ìˆ˜ ì—†ëŠ” íŠ¹ì„±: ëª‡ê°€ì§€ ë‹¤ë¥¸ Hyperscan íŒ¨í„´ í”Œë˜ê·¸(HS_FLAG_SINGLEMATCHë‚˜ HS_FLAG_PREFILTER)ë“¤ê³¼ SOMì€ ë™ì‹œì— ì‚¬ìš©ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë“¤ì„ HS_FLAG_SOM_LEFTMOSTì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤.</li>
</ul>
<blockquote>
<ul>
<li>Reduced pattern support: For many patterns, tracking SOM is complex and can result in Hyperscan failing to compile a pattern with a â€œPattern too largeâ€ error, even if the pattern is supported in normal operation.</li>
<li>Increased stream state: At scan time, state space is required to track potential SOM offsets, and this must be stored in persistent stream state in streaming mode. Accordingly, SOM will generally increase the stream state required to match a pattern.</li>
<li>Performance overhead: Similarly, there is generally a performance cost associated with tracking SOM.</li>
<li>Incompatible features: Some other Hyperscan pattern flags (such as HS_FLAG_SINGLEMATCH and HS_FLAG_PREFILTER) can not be used in combination with SOM. Specifying them together with HS_FLAG_SOM_LEFTMOST will result in a compilation error.</li>
</ul>
</blockquote>
<br>

<p>ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œì—ì„œëŠ” SOMì— ì˜í•´ ì „ë‹¬ë˜ëŠ” ì •ë°€ì„±ì˜ ì •ë„ë¥¼ SOM horizon í”Œë˜ê·¸ë“¤ì„ í†µí•´ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ í”Œë˜ê·¸ë“¤ì€ Hyperscanì´ ì¢…ë£Œ ì˜¤í”„ì…‹ì˜ íŠ¹ì • ê¸¸ì´ ë‚´ì—ì„œ ì •í™•í•œ SOM ì •ë³´ë¥¼ ì „ë‹¬í•˜ë„ë¡ í•˜ë©°, ê·¸ë ‡ì§€ì•Šì€ ê²½ìš°ì—ëŠ” HS_OFFSET_PAST_HORIZONì˜ íŠ¹ë³„í•œ ì‹œì‘ ì˜¤í”„ì…‹ì„ ë°˜í™˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>In streaming mode, the amount of precision delivered by SOM can be controlled with the SOM horizon flags. These instruct Hyperscan to deliver accurate SOM information within a certain distance of the end offset, and return a special start offset of HS_OFFSET_PAST_HORIZON otherwise. Specifying a small or medium SOM horizon will usually reduce the stream state required for a given database.</p>
</blockquote>
<div class="alert info"><p>ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œì—ì„œ ë§¤ì¹­ ê²°ê³¼ë¡œ ë°˜í™˜ë˜ëŠ” ì‹œì‘ ì˜¤í”„ì…‹ì€ í˜„ì¬ ìŠ¤ìº”ì¤‘ì¸ ë¸”ë¡ ì´ì „ì˜ ìŠ¤íŠ¸ë¦¼ ë‚´ í•œ ì§€ì ì„ ê°€ë¦¬í‚µë‹ˆë‹¤. Hyperscanì€ ì´ì „ ë¸”ë¡ë“¤ì„ í‰ê°€í•˜ëŠ” ë„êµ¬ë¥¼ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤; ë§Œì•½ ì´ì „ ë°ì´í„°ì— ëŒ€í•œ ê²€ì‚¬ê°€ í•„ìš”í•˜ë‹¤ë©´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ìì²´ì ìœ¼ë¡œ ê·¸ ë°ì´í„°ë“¤ì„ ì €ì¥í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
<p>In streaming mode, the start offset returned for a match may refer to a point in the stream before the current block being scanned. Hyperscan provides no facility for accessing earlier blocks; if the calling application needs to inspect historical data, then it must store it itself.</p>
</div>

<br>
<br>

<hr>
<h2 id="Scanning-for-Patterns"><a href="#Scanning-for-Patterns" class="headerlink" title="Scanning for Patterns"></a>Scanning for Patterns</h2><p>Hyperscanì€ 3ê°€ì§€ ë‹¤ë¥¸ ìŠ¤ìºë‹ ëª¨ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê°ê°ì˜ ëª¨ë“œë“¤ì€ hs_scanìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ê·¸ë“¤ë§Œì˜ ìŠ¤ìºë‹ í•¨ìˆ˜ë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ì¶”ê°€ì ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œì—ëŠ” ìŠ¤íŠ¸ë¦¼ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ëª‡ê°€ì§€ ë‹¤ë¥¸ API í•¨ìˆ˜ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Hyperscan provides three different scanning modes, each with its own scan function beginning with hs_scan. In addition, streaming mode has a number of other API functions for managing stream state.</p>
</blockquote>
<br>

<h3 id="Handling-Matches"><a href="#Handling-Matches" class="headerlink" title="Handling Matches"></a>Handling Matches</h3><p>ë§¤ì¹­ì´ ë°œìƒí•œ ê²½ìš° ëª¨ë“  ìŠ¤ìºë‹ í•¨ìˆ˜ë“¤ì€ ì‚¬ìš©ìê°€ ì •ì˜í•œ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ê²ƒì…ë‹ˆë‹¤. ì´ ì½œë°± í•¨ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì€ ë°˜í™˜ ê°’ê³¼ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°–ìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>All of these functions will call a user-supplied callback function when a match is found. This function has the following signature:</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*match_event_handler)</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> id, <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> from, <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> to, <span class="keyword">unsigned</span> <span class="keyword">int</span> flags, <span class="keyword">void</span> *context)</span></span></span><br></pre></td></tr></table></figure>

<p><strong>ë§¤ê°œë³€ìˆ˜ id</strong>ì—ëŠ” ë§¤ì¹­ëœ í‘œí˜„ì—ëŒ€í•´ ì»´íŒŒì¼ íƒ€ì„ì— ì…ë ¥ëë˜ idê°’ì´ ì €ì¥ë˜ë©°, <strong>ë§¤ê°œë³€ìˆ˜ to</strong>ì—ëŠ” ë§¤ì¹­ì˜ ì¢…ë£Œ ì˜¤í”„ì…‹ì´ ì €ì¥ë  ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ í•´ë‹¹ íŒ¨í„´ì— SOMì´ ìš”ì²­ëë‹¤ë©´, <strong>ë§¤ê°œë³€ìˆ˜ from</strong>ì—ëŠ” ë§¤ì¹­ì˜ ê°€ì¥ ì™¼ìª½ì˜ ì‹œì‘ ì˜¤í”„ì…‹ì´ ì €ì¥ë  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The id argument will be set to the identifier for the matching expression provided at compile time, and the to argument will be set to the end-offset of the match. If SOM was requested for the pattern (see Start of Match), the from argument will be set to the leftmost possible start-offset for the match.</p>
</blockquote>
<br>

<p>ì½œë°± í•¨ìˆ˜ì—ëŠ” 0ì´ ì•„ë‹Œ ê°’ì„ ë°˜í™˜í•˜ì—¬ ìŠ¤ìºë‹ ì‘ì—…ì„ ì¤‘ì§€í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The match callback function has the capability to halt scanning by returning a non-zero value.</p>
</blockquote>
<br>

<p>ì½œë°± í•¨ìˆ˜ì— ëŒ€í•œ ë” ë§ì€ ì •ë³´ëŠ” <a href="http://intel.github.io/hyperscan/dev-reference/api_files.html#c.match_event_handler">match_event_handler</a>ì„ ì°¸ì¡°í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<blockquote>
<p>See match_event_handler for more information.</p>
</blockquote>
<br>

<h3 id="Streaming-Mode"><a href="#Streaming-Mode" class="headerlink" title="Streaming Mode"></a>Streaming Mode</h3><p><del>ì¼ë‹¨ì€ ë¸”ë¡ëª¨ë“œë¶€í„°ğŸ˜</del><br><a href="http://intel.github.io/hyperscan/dev-reference/runtime.html#streaming-mode">ë§í¬ ì°¸ì¡°</a></p>
<br>

<h3 id="Block-Mode"><a href="#Block-Mode" class="headerlink" title="Block Mode"></a>Block Mode</h3><p>ë¸”ë¡ ëª¨ë“œ APIëŠ” hs_scan() í•¨ìˆ˜ í•˜ë‚˜ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ í•¨ìˆ˜ëŠ” ì»´íŒŒì¼ëœ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ íƒ€ê²Ÿ ë°ì´í„°ë‚´ì˜ ë§¤ì¹˜ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ê³ , í•¨ìˆ˜ í¬ì¸í„° ì½œë°±ì„ ì‚¬ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ í†µì‹ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The block mode runtime API consists of a single function: hs_scan(). Using the compiled patterns this function identifies matches in the target data, using a function pointer callback to communicate with the application.</p>
</blockquote>
<p>hs_scan() í•¨ìˆ˜ëŠ” ë¸”ë¡ ëª¨ë“œì—ì„œëŠ” ìŠ¤íŠ¸ë¦¼ê³¼ ê´€ë ¨ëœ ì˜¤ë²„ë ˆë“œë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ” ë‹¤ëŠ” ì ë§Œ ì œì™¸í•˜ë©´ hs_open_stream() â†’ hs_scan_stream() â†’ hs_close_stream()ì˜ í˜¸ì¶œ ê³¼ì •ê³¼ ë™ì¼í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>This single hs_scan() function is essentially equivalent to calling hs_open_stream(), making a single call to hs_scan_stream(), and then hs_close_stream(), except that block mode operation does not incur all the stream related overhead.</p>
</blockquote>
<br>

<h3 id="Vectored-Mode"><a href="#Vectored-Mode" class="headerlink" title="Vectored Mode"></a>Vectored Mode</h3><p><del>ì¼ë‹¨ì€ ë¸”ë¡ëª¨ë“œë¶€í„°ğŸ˜</del><br><a href="http://intel.github.io/hyperscan/dev-reference/runtime.html#vectored-mode">ë§í¬ ì°¸ì¡°</a></p>
<br>

<h3 id="Scratch-Space"><a href="#Scratch-Space" class="headerlink" title="Scratch Space"></a>Scratch Space</h3><p>ë°ì´í„°ë¥¼ ìŠ¤ìºë‹í•˜ëŠ” ë™ì•ˆ Hyperscanì€ ê·¸ë•Œ ê·¸ë•Œ ìƒì„±ë˜ëŠ” ë‚´ë¶€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ ì„ì‹œ ë©”ëª¨ë¦¬ ê³µê°„ì˜ ì¼ë¶€ë¥¼ í•„ìš”ë¡œí•©ë‹ˆë‹¤. ì´ ë©”ëª¨ë¦¬ ê³µê°„ì´ ë¶ˆìš´í•˜ê²Œë„ ìŠ¤íƒì— ì˜¬ë¼ê°€ê¸°ì—ëŠ” ë„ˆë¬´ í¬ê³ , íŠ¹íˆë‚˜ ì„ë² ë””ë“œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš°ì—, ë™ì ìœ¼ë¡œ í• ë‹¹í•˜ê¸°ì—ëŠ” ë¹„ìš©ì´ ë„ˆë¬´ë‚˜ í½ë‹ˆë‹¤. ê·¸ë˜ì„œ ë¯¸ë¦¬ í• ë‹¹ë˜ëŠ” ê³µê°„ì¸ â€œìŠ¤í¬ë˜ì¹˜â€ ê³µê°„ì´ ìŠ¤ìºë‹ í•¨ìˆ˜ì— ì œê³µë˜ì–´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>While scanning data, Hyperscan needs a small amount of temporary memory to store on-the-fly internal data. This amount is unfortunately too large to fit on the stack, particularly for embedded applications, and allocating memory dynamically is too expensive, so a pre-allocated â€œscratchâ€ space must be provided to the scanning functions.</p>
</blockquote>
<br>

<p>hs_alloc_scratch() í•¨ìˆ˜ëŠ” ì£¼ì–´ì§„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ ì¶©ë¶„íˆ í° ìŠ¤í¬ë˜ì¹˜ ê³µê°„ì„ í• ë‹¹í•©ë‹ˆë‹¤. ë§Œì•½ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¼ë©´, ì˜¤ì§ í•˜ë‚˜ì˜ ìŠ¤í¬ë˜ì¹˜ ì˜ì—­ë§Œì´ í•„ìš”í•©ë‹ˆë‹¤: ì´ ê²½ìš°, ê°ê°ì˜ ë°ì´í„°ë² ì´ìŠ¤ë§ˆë‹¤ (ë™ì¼í•œ ìŠ¤í¬ë˜ì¹˜ í¬ì¸í„°ë¡œ) hs_alloc_scratch()í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ì£¼ì–´ì§„ ë°ì´í„°ë² ì´ìŠ¤ë¼ë©´ ì–´ë– í•œ ê²ƒì´ë“ ì§€ ìŠ¤ìºë‹ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ì¶©ë¶„í•œ ìŠ¤í¬ë˜ì¹˜ ê³µê°„ì„ ë³´ì¥í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The function hs_alloc_scratch() allocates a large enough region of scratch space to support a given database. If the application uses multiple databases, only a single scratch region is necessary: in this case, calling hs_alloc_scratch() on each database (with the same scratch pointer) will ensure that the scratch space is large enough to support scanning against any of the given databases.</p>
</blockquote>
<br>

<p>Hyperscan ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” re-entrant(ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ì½”ë“œë¥¼ ë™ì‹œì— ìˆ˜í–‰í•  ìˆ˜ ìˆê³ , ê·¸ëŸ° ê²½ìš°ì—ë„ ì‹¤í–‰ ê²°ê³¼ì˜ correctnessê°€ ë³´ì¥ë˜ëŠ” ê²ƒ) í•˜ì§€ë§Œ, ìŠ¤í¬ë˜ì¹˜ ê³µê°„ì˜ ì‚¬ìš©ì€ ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, êµ¬ì„± ìƒ ì¬ê·€ì ì´ê³  ì¤‘ì²©ë˜ëŠ” ìŠ¤ìºë‹ ë™ì‘ì´ í•„ìš”ë¡œ í•˜ë‹¤ë©´, ì»¨í…ìŠ¤íŠ¸ ë§ˆë‹¤ì˜ ìŠ¤í¬ë˜ì¹˜ ê³µê°„ì´ ìš”êµ¬ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>While the Hyperscan library is re-entrant, the use of scratch spaces is not. For example, if by design it is deemed necessary to run recursive or nested scanning (say, from the match callback function), then an additional scratch space is required for that context.</p>
</blockquote>
<p>ì¬ê·€ì ì¸ ìŠ¤ìºë‹ì´ ì—†ëŠ” ê²½ìš°ë¼ë©´, ì“°ë ˆë“œ í•˜ë‚˜ ë‹¹ ì˜¤ë¡œì§€ í•˜ë‚˜ì˜ ìŠ¤í¬ë˜ì¹˜ ê³µê°„ë§Œì´ í•„ìš”í•˜ë©° ì´ ê³µê°„ì€ ë°ì´í„° ìŠ¤ìºë‹ì´ ì‹œì‘ë˜ê¸° ì „ì— í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>In the absence of recursive scanning, only one such space is required per thread and can (and indeed should) be allocated before data scanning is to commence.</p>
</blockquote>
<p>í•˜ë‚˜ì˜ â€œmainâ€ ì“°ë ˆë“œì—ì„œ í‘œí˜„ì‹ë“¤ì˜ ì§‘í•©ì´ ì»´íŒŒì¼ë˜ê³  ë°ì´í„°ê°€ ë‹¤ì¤‘ â€œworkerâ€ ì“°ë ˆë“œì— ì˜í•´ ìŠ¤ìºë‹ë˜ëŠ” ìƒí™©ì—ì„œëŠ”, hs_clone_scratch()ë¼ëŠ” í¸ë¦¬í•œ í•¨ìˆ˜ê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìŠ¤í¬ë˜ì¹˜ ê³µê°„ì˜ ë³µì‚¬ë³¸ì´ ê°ê°ì˜ ì“°ë ˆë“œë“¤ì—ê²Œ í• ë‹¹ë  ìˆ˜ ìˆë„ë¡í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>In a scenario where a set of expressions are compiled by a single â€œmainâ€ thread and data will be scanned by multiple â€œworkerâ€ threads, the convenience function hs_clone_scratch() allows multiple copies of an existing scratch space to be made for each thread (rather than forcing the caller to pass all the compiled databases through hs_alloc_scratch() multiple times).</p>
</blockquote>
<br>

<p>ì˜ˆë¥¼ ë“¤ì–´</p>
<blockquote>
<p>For example:</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">hs_error_t</span> err;</span><br><span class="line"><span class="keyword">hs_scratch_t</span> *scratch_prototype = <span class="literal">NULL</span>;</span><br><span class="line">err = <span class="built_in">hs_alloc_scratch</span>(db, &amp;scratch_prototype);</span><br><span class="line"><span class="keyword">if</span> (err != HS_SUCCESS) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hs_alloc_scratch failed!&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">hs_scratch_t</span> *scratch_thread1 = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">hs_scratch_t</span> *scratch_thread2 = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ìœ„ì—ì„œ í• ë‹¹í•œ scratch_prototype ê³µê°„ì„ ë³µì‚¬(clone)í•´ì„œ scratch_thread1ì—ì„œë„ ì‚¬ìš©</span></span><br><span class="line">err = <span class="built_in">hs_clone_scratch</span>(scratch_prototype, &amp;scratch_thread1);</span><br><span class="line"><span class="keyword">if</span> (err != HS_SUCCESS) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hs_clone_scratch failed!&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ìœ„ì—ì„œ í• ë‹¹í•œ scratch_prototype ê³µê°„ì„ ë³µì‚¬(clone)í•´ì„œ scratch_thread2ì—ì„œë„ ì‚¬ìš©</span></span><br><span class="line">err = <span class="built_in">hs_clone_scratch</span>(scratch_prototype, &amp;scratch_thread2);</span><br><span class="line"><span class="keyword">if</span> (err != HS_SUCCESS) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hs_clone_scratch failed!&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">hs_free_scratch</span>(scratch_prototype);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Now two threads can both scan against database db, each with its own scratch space. */</span></span><br></pre></td></tr></table></figure>

<br>
<br>
<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.hyperscan.io/">https://www.hyperscan.io/</a></li>
<li><a href="http://intel.github.io/hyperscan/dev-reference/index.html">http://intel.github.io/hyperscan/dev-reference/index.html</a></li>
<li><a href="https://github.com/intel/hyperscan">https://github.com/intel/hyperscan</a></li>
<li><a href="http://pcre.org/">http://pcre.org/</a></li>
</ul>
]]></content>
      <categories>
        <category>ê¸°ìˆ ë¬¸ì„œ ë²ˆì—­</category>
      </categories>
      <tags>
        <tag>hyperscan</tag>
        <tag>regex</tag>
        <tag>regular expression</tag>
        <tag>ì¸í…” í•˜ì´í¼ìŠ¤ìº”</tag>
        <tag>ì •ê·œí‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­</tag>
      </tags>
  </entry>
  <entry>
    <title>IP ë¼ìš°íŒ… ê³¼ì •ì— ëŒ€í•´ ì•Œì•„ë³´ì</title>
    <url>/2021/12/06/ip-routing-flow/</url>
    <content><![CDATA[<p><a href="https://chelseafandev.github.io/2021/12/06/ethernet-switching-flow/">ì €ë²ˆ í¬ìŠ¤íŒ…</a>ì— ì´ì–´ì„œ ì´ë²ˆì—ëŠ” L3 ìŠ¤ìœ„ì¹˜ì—ì„œì˜ IP ë¼ìš°íŒ… ê³¼ì •ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>
<p><a href="https://www.netmanias.com/ko/">ë„·ë§¤ë‹ˆì•„ì¦ˆ</a>ë¼ëŠ” ì‚¬ì´íŠ¸ì— ì´ 4í¸ì˜ ì‹œë¦¬ì¦ˆë¡œ ì—°ì¬ëœ L3 ìŠ¤ìœ„ì¹˜ì˜ íŒ¨í‚· ì „ë‹¬ì— ëŒ€í•œ ì•„ì£¼ ì–‘ì§ˆì˜ ê²Œì‹œë¬¼ì„ ì°¸ê³ í•˜ì—¬ ì •ë¦¬í•´ë³´ì•˜ìœ¼ë©°, ì‹¤ì œ ì—°ì¬ê¸€ì—ì„œëŠ” ìƒì„¸í•œ ê·¸ë¦¼ê³¼ í•¨ê»˜ L3 ìŠ¤ìœ„ì¹˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ì¢€ ë” ì„¸ë¶„í™”í•˜ì—¬ ì„¤ëª…í•˜ê³  ìˆìœ¼ë‹ˆ ê´€ì‹¬ì´ ìˆìœ¼ì‹ ë¶„ë“¤ì€ <a href="https://www.netmanias.com/ko/?m=view&id=blog&no=5529">ì—¬ê¸°</a>ë¥¼ ì°¸ì¡°í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<br>

<!-- toc -->

<p>ì„œë²„1ê³¼ ì„œë²„4ëŠ” ì„œë¡œ ë‹¤ë¥¸ VLAN(ì„œë²„1ì€ VLAN ID: 10, ì„œë²„4ëŠ” VLAN ID: 20)ì— ì¡´ì¬í•˜ë©°, ì„œë²„1ì˜ ARP í…Œì´ë¸”ì—ëŠ” L3 ìŠ¤ìœ„ì¹˜(ì—¬ê¸°ì„œëŠ” Gateway)ì˜ ì—”íŠ¸ë¦¬ê°€ ì´ë¯¸ ì¡´ì¬í•œë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.<br><br></p>
<h3 id="ì„œë²„1ì—ì„œ-ì„œë²„4ë¡œ-íŒ¨í‚·-ì „ë‹¬-ARP-Request-Flooding"><a href="#ì„œë²„1ì—ì„œ-ì„œë²„4ë¡œ-íŒ¨í‚·-ì „ë‹¬-ARP-Request-Flooding" class="headerlink" title="ì„œë²„1ì—ì„œ ì„œë²„4ë¡œ íŒ¨í‚· ì „ë‹¬ - ARP Request Flooding"></a>ì„œë²„1ì—ì„œ ì„œë²„4ë¡œ íŒ¨í‚· ì „ë‹¬ - ARP Request Flooding</h3><div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/ip-routing-arp-request-flooding.png" alt="ARP Request Flooding"><span class="caption">ARP Request Flooding</span></div>

<ol>
<li>ì„œë²„1ì—ì„œ ì„œë²„4ë¡œ íŒ¨í‚·ì„ ë³´ë‚´ë ¤ê³  í•©ë‹ˆë‹¤.</li>
<li>ì„œë²„1ì˜ <strong>ë¼ìš°íŒ… í…Œì´ë¸”</strong>ì„ ì°¸ì¡°(Destination ì£¼ì†Œ ë³„ ê²Œì´íŠ¸ì›¨ì´ IPì™€ ì¶œë ¥ í¬íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ)í•˜ì—¬ ì„œë²„4ì˜ IPì£¼ì†ŒëŠ” ë””í´íŠ¸ ë¼ìš°íŠ¸ì— ë§¤ì¹­ëœë‹¤ëŠ” ì‚¬ì‹¤ê³¼ Gateway IPì£¼ì†Œ(ì—¬ê¸°ì„œëŠ” L3 ìŠ¤ìœ„ì¹˜ì˜ ì£¼ì†Œì„) ë° ì¶œë ¥ í¬íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ì„œë²„1ì€ <strong>ARP í…Œì´ë¸”</strong>ì„ ì°¸ì¡°í•˜ì—¬ Gateway IPì£¼ì†Œì— ëŒ€í•œ MAC ì£¼ì†Œë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>ì¶œë ¥ í¬íŠ¸ì™€ MAC ì£¼ì†Œë¥¼ í™•ì¸í–ˆìœ¼ë‹ˆ ì„œë²„1ì€ ì„œë²„4ë¡œ íŒ¨í‚·ì„ ì†¡ì‹ í•©ë‹ˆë‹¤.</li>
<li>í•´ë‹¹ íŒ¨í‚·ì€ ì¶œë ¥ í¬íŠ¸ë¥¼ í†µí•´ L3 ìŠ¤ìœ„ì¹˜ë¡œ ì´ë™í•©ë‹ˆë‹¤.</li>
<li>íŒ¨í‚·ì„ ìˆ˜ì‹ í•œ L3 ìŠ¤ìœ„ì¹˜ëŠ” í•´ë‹¹ íŒ¨í‚·ì„ ë²„í¼(Ingress Packet Buffer)ì— ì ì‹œ ì €ì¥í•´ë‘¡ë‹ˆë‹¤.</li>
<li>ì´ì œ L3 ìŠ¤ìœ„ì¹˜ì—ì„œ ìˆ˜ì‹ í•œ íŒ¨í‚·ì˜ <strong>Source MAC ì£¼ì†Œë¥¼ í•™ìŠµ</strong>í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë™ì¼ VLANì„ ì†Œìœ í•œ Line Cardë“¤ì—ë§Œ Source MAC ì£¼ì†Œ ì •ë³´ë¥¼ ê³µìœ í•˜ì—¬ ê°ê°ì˜ <strong>MAC í…Œì´ë¸”</strong>ì— ê·¸ ê°’(VLAN, Source MAC ì£¼ì†Œ, í¬íŠ¸)ì„ ì €ì¥í•˜ë„ë¡ í•©ë‹ˆë‹¤.</li>
<li>ë‹¤ìŒìœ¼ë¡œ í•´ë‹¹ íŒ¨í‚·ì„ <strong>IP ë¼ìš°íŒ…</strong>ì‹œí‚¬ì§€ <strong>Ethernet ìŠ¤ìœ„ì¹­</strong>ì‹œí‚¬ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ëŠ”ë° ì´ë¥¼ ìœ„í•´ Destination MAC ì£¼ì†Œë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.<div class="alert info"><p>Destination MAC ì£¼ì†Œê°€ L3 ìŠ¤ìœ„ì¹˜ì˜ MAC ì£¼ì†Œì¸ ê²½ìš°ì—ëŠ”, <strong>IP ë¼ìš°íŒ…</strong><br>Destination MAC ì£¼ì†Œê°€ L3 ìŠ¤ìœ„ì¹˜ì˜ MAC ì£¼ì†Œê°€ ì•„ë‹Œ ê²½ìš°ì—ëŠ”, <strong>Ethernet ìŠ¤ìœ„ì¹­</strong></p>
</div>
<br></li>
<li>ì´ ê²½ìš°ì—ëŠ” í•´ë‹¹ íŒ¨í‚·ì˜ Destination MAC ì£¼ì†Œê°€ Gateway ì¦‰, L3 ìŠ¤ìœ„ì¹˜ì˜ MAC ì£¼ì†Œì´ë¯€ë¡œ IP ë¼ìš°íŒ…ì„ ì‹œí‚µë‹ˆë‹¤.</li>
<li>IP ë¼ìš°íŒ…ì„ ìœ„í•´ L3 ìŠ¤ìœ„ì¹˜ëŠ” Destination IP ì£¼ì†Œì— ëŒ€í•œ FIB lookup(LPM: Longest Prefix Match)ì„ ìˆ˜í–‰í•˜ì—¬ í•´ë‹¹ íŒ¨í‚·ì´ L3 ìŠ¤ìœ„ì¹˜ì™€ ë°”ë¡œ ì—°ê²°ë˜ì–´ ìˆëŠ” ëª©ì ì§€ì¸ ì„œë²„4ë¡œ ê°€ê³ ìí•œë‹¤ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>ë‹¤ìŒìœ¼ë¡œ L3 ìŠ¤ìœ„ì¹˜ëŠ” ARP í…Œì´ë¸”ì„ í™•ì¸í•˜ì—¬ Destination IP ì£¼ì†Œì— ëŒ€í•œ MAC ì£¼ì†Œê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>ë§Œì•½ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤(ARP Miss!)ë©´ ë™ì¼í•œ VLANì— ì†í•œ Line Cardë“¤ì—ê²Œ ARP Request íŒ¨í‚·ì„ Floodingí•©ë‹ˆë‹¤.</li>
</ol>
<hr>
<h3 id="ì„œë²„1ì—ì„œ-ì„œë²„4ë¡œ-íŒ¨í‚·-ì „ë‹¬-ARP-Reply-ìˆ˜ì‹ "><a href="#ì„œë²„1ì—ì„œ-ì„œë²„4ë¡œ-íŒ¨í‚·-ì „ë‹¬-ARP-Reply-ìˆ˜ì‹ " class="headerlink" title="ì„œë²„1ì—ì„œ ì„œë²„4ë¡œ íŒ¨í‚· ì „ë‹¬ - ARP Reply ìˆ˜ì‹ "></a>ì„œë²„1ì—ì„œ ì„œë²„4ë¡œ íŒ¨í‚· ì „ë‹¬ - ARP Reply ìˆ˜ì‹ </h3><div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/ip-routing-arp-reply-receiving.png" alt="ARP Reply ìˆ˜ì‹ "><span class="caption">ARP Reply ìˆ˜ì‹ </span></div>

<ol>
<li>ARP Request íŒ¨í‚·ì„ ìˆ˜ì‹ í•œ ì„œë²„4, ì„œë²„5, ì„œë²„6ì¤‘ì— í•´ë‹¹ IP ì£¼ì†Œë¥¼ ì†Œìœ í•œ ì„œë²„4ê°€ ì´ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ ARP Replyë¥¼ L3 ìŠ¤ìœ„ì¹˜ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.</li>
<li>ARP Reply íŒ¨í‚·ì„ ìˆ˜ì‹ í•œ L3 ìŠ¤ìœ„ì¹˜ëŠ” í•´ë‹¹ íŒ¨í‚·ì„ ë²„í¼(Ingress Packet Buffer)ì— ì ì‹œ ì €ì¥í•´ë‘¡ë‹ˆë‹¤.</li>
<li>ì´ì œ L3 ìŠ¤ìœ„ì¹˜ì—ì„œ ìˆ˜ì‹ í•œ íŒ¨í‚·ì˜ <strong>Source MAC ì£¼ì†Œë¥¼ í•™ìŠµ</strong>í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë™ì¼ VLANì„ ì†Œìœ í•œ Line Cardë“¤ì—ë§Œ Source MAC ì£¼ì†Œ ì •ë³´ë¥¼ ê³µìœ í•˜ì—¬ ê°ê°ì˜ <strong>MAC í…Œì´ë¸”</strong>ì— ê·¸ ê°’(VLAN, Source MAC ì£¼ì†Œ, í¬íŠ¸)ì„ ì €ì¥í•˜ë„ë¡ í•©ë‹ˆë‹¤.</li>
<li>ë‹¤ìŒìœ¼ë¡œ í•´ë‹¹ íŒ¨í‚·ì„ <strong>IP ë¼ìš°íŒ…</strong>ì‹œí‚¬ì§€ <strong>Ethernet ìŠ¤ìœ„ì¹­</strong>ì‹œí‚¬ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ëŠ”ë° ì´ë¥¼ ìœ„í•´ Destination MAC ì£¼ì†Œë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.</li>
<li>ì´ ê²½ìš°ì—ëŠ” í•´ë‹¹ íŒ¨í‚·ì˜ Destination MAC ì£¼ì†Œê°€ L3 ìŠ¤ìœ„ì¹˜ì˜ MAC ì£¼ì†Œì´ë¯€ë¡œ IP ë¼ìš°íŒ…ì„ ì‹œí‚µë‹ˆë‹¤.</li>
<li>ì—¬ê¸°ì„œ ë§Œì•½ í•´ë‹¹ íŒ¨í‚·ì˜ íƒ€ì…(Ethernet Headerì— ìˆëŠ” EtherType)ì´ ARP íŒ¨í‚·(EtherType = 0x0806)ì¸ ê²½ìš°ì—ëŠ” ë¼ìš°íŒ… ì‹œí‚¤ì§€ ì•Šê³  ë¬´ì¡°ê±´ Control Module(L3 ìŠ¤ìœ„ì¹˜ ë‚´ì— ì¡´ì¬í•˜ëŠ” íŠ¹ì • ëª¨ë“ˆ)ì´ë¼ëŠ” ê³³ìœ¼ë¡œ ì˜¬ë ¤ì¤ë‹ˆë‹¤.</li>
<li>ARP Reply íŒ¨í‚·ì„ ìˆ˜ì‹ í•œ Control Moduleì€ ARP í…Œì´ë¸”ì— ì„œë²„4ì˜ IP ì£¼ì†Œì— ëŒ€í•œ MACì£¼ì†Œë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</li>
<li>ì—¬ê¸°ê¹Œì§€ ì™„ë£Œí•˜ë©´ ì´ì œ L3 ìŠ¤ìœ„ì¹˜ëŠ” ì„œë²„1ì—ì„œ ë°›ì€ íŒ¨í‚·ì„ ì„œë²„4ë¡œ ì†¡ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ol>
<hr>
<h3 id="ì„œë²„1ì—ì„œ-ì„œë²„4ë¡œ-íŒ¨í‚·-ì „ë‹¬-IP-ë¼ìš°íŒ…"><a href="#ì„œë²„1ì—ì„œ-ì„œë²„4ë¡œ-íŒ¨í‚·-ì „ë‹¬-IP-ë¼ìš°íŒ…" class="headerlink" title="ì„œë²„1ì—ì„œ ì„œë²„4ë¡œ íŒ¨í‚· ì „ë‹¬ - IP ë¼ìš°íŒ…"></a>ì„œë²„1ì—ì„œ ì„œë²„4ë¡œ íŒ¨í‚· ì „ë‹¬ - IP ë¼ìš°íŒ…</h3><div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/ip-routing.png" alt="IP ë¼ìš°íŒ…"><span class="caption">IP ë¼ìš°íŒ…</span></div>

<ol>
<li>ì„œë²„1ì´ ëª©ì ì§€ ì£¼ì†Œê°€ ì„œë²„4ì¸ íŒ¨í‚·ì„ L3 ìŠ¤ìœ„ì¹˜ë¡œ ë³´ëƒ…ë‹ˆë‹¤.</li>
<li>íŒ¨í‚·ì„ ìˆ˜ì‹ í•œ L3 ìŠ¤ìœ„ì¹˜ëŠ” í•´ë‹¹ íŒ¨í‚·ì„ ë²„í¼(Ingress Packet Buffer)ì— ì ì‹œ ì €ì¥í•´ë‘¡ë‹ˆë‹¤.</li>
<li>Source MAC ì£¼ì†Œë¥¼ í•™ìŠµí•´ë³¼ê¹Œ í–ˆì§€ë§Œ í•´ë‹¹ íŒ¨í‚·ì˜ Source MAC ì£¼ì†ŒëŠ” ì´ë¯¸ í•™ìŠµëœ ì„œë²„1ì˜ ì •ë³´ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆ ê±´ë„ˆëœë‹ˆë‹¤.</li>
<li>ì´ì œ ìˆ˜ì‹  íŒ¨í‚·ì˜ Destination IP ì£¼ì†Œë¡œ FIB lookupì„í•´ì„œ OIF(Outgoing Interface)ë¥¼ í™•ì¸(ì—¬ê¸°ì„œëŠ” ì„œë²„4ê°€ ì†í•œ VLAN IDë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ)í•©ë‹ˆë‹¤.</li>
<li>ê·¸ë¦¬ê³  ARP í…Œì´ë¸”ì„ ì°¸ì¡°í•˜ì—¬ Destination IPì— ëŒ€í•œ MAC ì£¼ì†Œë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>ë§ˆì§€ë§‰ìœ¼ë¡œ 5ë²ˆì—ì„œ ì°¾ì€ MAC ì£¼ì†Œë¥¼ í†µí•´ MAC í…Œì´ë¸”ì—ì„œ ì¶œë ¥ í¬íŠ¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</li>
<li>L3 ìŠ¤ìœ„ì¹˜ëŠ” ì•ì„œ ë²„í¼ì— ì ì‹œ ì €ì¥í•´ë‘” íŒ¨í‚·(2ë²ˆ ê³¼ì •ì„ ì°¸ê³ )ì„ ì¶œë ¥ì„ ìœ„í•œ ë²„í¼(Egress Packet Buffer)ë¡œ ì˜®ê¸´ í›„ 6ë²ˆì—ì„œ í™•ì¸ëœ MACì£¼ì†Œë¡œ í•´ë‹¹ íŒ¨í‚·ì„ ì†¡ì‹ í•©ë‹ˆë‹¤.</li>
<li>ì„œë²„1ì´ ì†¡ì‹ í•œ íŒ¨í‚·ì€ ìµœì¢…ì ìœ¼ë¡œ ì„œë²„4ì— ë„ë‹¬í•˜ê²Œë©ë‹ˆë‹¤.</li>
</ol>
<hr>
<h3 id="L3-ìŠ¤ìœ„ì¹˜-ë™ì‘ì˜-í•µì‹¬-ì •ë¦¬"><a href="#L3-ìŠ¤ìœ„ì¹˜-ë™ì‘ì˜-í•µì‹¬-ì •ë¦¬" class="headerlink" title="L3 ìŠ¤ìœ„ì¹˜ ë™ì‘ì˜ í•µì‹¬ ì •ë¦¬"></a>L3 ìŠ¤ìœ„ì¹˜ ë™ì‘ì˜ í•µì‹¬ ì •ë¦¬</h3><ul>
<li>L3 ìŠ¤ìœ„ì¹˜ëŠ” ìˆ˜ì‹  íŒ¨í‚·ì— ëŒ€í•´ í•­ìƒ Source MAC í•™ìŠµë¶€í„° ìˆ˜í–‰í•œë‹¤.</li>
<li>L3 ìŠ¤ìœ„ì¹˜ëŠ” ìˆ˜ì‹  íŒ¨í‚·ì˜ Destination MAC ì£¼ì†Œê°€ L3 ìŠ¤ìœ„ì¹˜ì˜ MAC ì£¼ì†Œì´ë©´ IP ë¼ìš°íŒ…ì‹œí‚¤ê³ , ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°ëŠ” Ethernet ìŠ¤ìœ„ì¹­ì‹œí‚¨ë‹¤.</li>
<li>L3 ìŠ¤ìœ„ì¹˜ëŠ” IP ë¼ìš°íŒ… ê³¼ì •ì—ì„œ RIB/FIBì— ëª…ì‹œëœ OIF(Outgoing Interface)ê°€ ë¬¼ë¦¬ì  í¬íŠ¸ê°€ ì•„ë‹Œ VLAN ID ì •ë³´ê°€ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì‹¤ì œ íŒ¨í‚·ì„ ì†¡ì‹ í•  ì¶œë ¥ í¬íŠ¸ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” MAC í…Œì´ë¸”ì„ ì°¸ì¡°í•´ì•¼í•œë‹¤. ì¦‰,<ol>
<li><strong>FIB</strong> lookupì„ í†µí•´ <strong>Next Hop IPì™€ OIF</strong>ë¥¼ ì•Œì•„ë‚´ê³ </li>
<li><strong>ARP í…Œì´ë¸”</strong> lookupì„ í†µí•´ Next Hop IPì— ëŒ€í•œ <strong>MAC ì£¼ì†Œ</strong>ë¥¼ ì•Œì•„ë‚´ê³  (ë§Œì•½ ëª©ì ì§€ê°€ L3 ìŠ¤ìœ„ì¹˜ì™€ ë°”ë¡œ ì—°ê²°ëœ ê²½ìš°ë¼ë©´, Destination IP ì£¼ì†Œì— ëŒ€í•œ MAC ì£¼ì†Œë¥¼ ì•Œì•„ëƒ„)</li>
<li><strong>MAC í…Œì´ë¸”</strong> lookupì„ í†µí•´ MAC ì£¼ì†Œì— ëŒ€í•œÂ <strong>ë¬¼ë¦¬ì  í¬íŠ¸</strong>ë¥¼ ì•Œì•„ë‚¸ë‹¤ (ë§Œì•½ IP ë¼ìš°íŒ… ê³¼ì •ì—ì„œ MAC í…Œì´ë¸”ì— í•´ë‹¹ ì—”íŠ¸ë¦¬ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, VLAN í…Œì´ë¸”ì„ ì°¸ì¡°í•˜ì—¬ OIFì— ì†í•œ ëª¨ë“  ë¬¼ë¦¬ì  í¬íŠ¸ë¡œ íŒ¨í‚·ì„ Flooding í•¨)</li>
</ol>
</li>
</ul>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.netmanias.com/ko/?m=view&amp;id=blog&amp;no=5529">https://www.netmanias.com/ko/?m=view&amp;id=blog&amp;no=5529</a></li>
</ul>
]]></content>
      <categories>
        <category>ë„¤íŠ¸ì›Œí¬</category>
      </categories>
      <tags>
        <tag>L3 ìŠ¤ìœ„ì¹˜</tag>
        <tag>ip routing</tag>
        <tag>ip ë¼ìš°íŒ…</tag>
        <tag>ARP Request</tag>
        <tag>ARP Reply</tag>
      </tags>
  </entry>
  <entry>
    <title>ì¸í…” Hyperscan API í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±</title>
    <url>/2021/10/12/hyperscan-phase2/</url>
    <content><![CDATA[<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” <a href="https://chelseafandev.github.io/2021/09/24/hyperscan-phase1/">ì¸í…” Hyperscan ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ ë²ˆì—­</a>ì— ì´ì–´ì„œ Hyperscan APIë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ ì •ê·œ í‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­ì„ ìˆ˜í–‰í•˜ëŠ” ìƒ˜í”Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  í…ŒìŠ¤íŠ¸ í•´ë³´ëŠ” ì‹œê°„ì„ ê°–ê² ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<p>í•´ë‹¹ í¬ìŠ¤íŒ…ì˜ Hyperscan ì„¤ì¹˜ ë° í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ <span class="highlight-text yellow">Ubuntu 18.04.5 LTS ê¸°ì¤€</span>ì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œ Hyperscan í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ ì í•˜ì‹œëŠ” ë¶„ë“¤ì€ <a href="http://intel.github.io/hyperscan/dev-reference/getting_started.html#requirements">Hyperscan ê³µì‹ í™ˆí˜ì´ì§€ì— ëª…ì‹œëœ ìš”êµ¬ì‚¬í•­ ì •ë³´</a>ë¥¼ í™•ì¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. </p>
<br>

<!-- toc -->

<br>

<p>ì•„ë˜ ê·¸ë¦¼ì€ Hyperscan ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì»´íŒŒì¼í•˜ê¸° ìœ„í•´ ë¯¸ë¦¬ ì„¤ì¹˜ë˜ì–´ì•¼í•  ì†Œí”„íŠ¸ì›¨ì–´ ëª©ë¡ê³¼ ìµœì†Œ ë²„ì „ ì •ë³´ì…ë‹ˆë‹¤. Pcapì€ hyperscanì—ì„œ ì œê³µí•˜ëŠ” ìƒ˜í”Œ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ê±°ë¼ë©´ êµ³ì´ ì„¤ì¹˜í•  í•„ìš”ëŠ” ì—†ê¸°ë•Œë¬¸ì— ì œì™¸í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. (ì„¤ì¹˜ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ í”¼ë“œë°±ë“œë¦¬ê² ìŠµë‹ˆë‹¤ğŸ˜)</p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/hyperscan_dependency.png" alt=""></div>

<br>

<h3 id="CMake-ì„¤ì¹˜"><a href="#CMake-ì„¤ì¹˜" class="headerlink" title="CMake ì„¤ì¹˜"></a>CMake ì„¤ì¹˜</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install cmake</span><br></pre></td></tr></table></figure>

<br>

<h3 id="Ragel-ì„¤ì¹˜"><a href="#Ragel-ì„¤ì¹˜" class="headerlink" title="Ragel ì„¤ì¹˜"></a>Ragel ì„¤ì¹˜</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install ragel</span><br></pre></td></tr></table></figure>

<br>

<h3 id="Python-ì„¤ì¹˜"><a href="#Python-ì„¤ì¹˜" class="headerlink" title="Python ì„¤ì¹˜"></a>Python ì„¤ì¹˜</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install python</span><br></pre></td></tr></table></figure>

<br>

<h3 id="Boost-ì„¤ì¹˜"><a href="#Boost-ì„¤ì¹˜" class="headerlink" title="Boost ì„¤ì¹˜"></a>Boost ì„¤ì¹˜</h3><p><a href="https://www.boost.org/doc/libs/1_77_0/more/getting_started/unix-variants.html">Boost ê³µì‹ í™ˆí˜ì´ì§€</a>ë¥¼ ì°¸ì¡°í•˜ì—¬ ìµœì‹  ë²„ì „(21.10.11 ê¸°ì¤€ 1.77.0) ì„¤ì¹˜ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ wget https://boostorg.jfrog.io/artifactory/main/release/1.77.0/source/boost_1_77_0.tar.bz2</span><br><span class="line">$ tar xvf boost_1_77_0.tar.bz2</span><br><span class="line">$ cd boost_1_77_0</span><br><span class="line">$ sudo ./bootstrap.sh</span><br><span class="line">$ sudo ./b2 install</span><br></pre></td></tr></table></figure>

<br>

<h3 id="Hyperscan-ì†ŒìŠ¤-ë¹Œë“œ"><a href="#Hyperscan-ì†ŒìŠ¤-ë¹Œë“œ" class="headerlink" title="Hyperscan ì†ŒìŠ¤ ë¹Œë“œ"></a>Hyperscan ì†ŒìŠ¤ ë¹Œë“œ</h3><p><a href="https://github.com/intel/hyperscan">í•´ë‹¹ ë§í¬</a>ì—ì„œ Hyperscan ìµœì‹  ì†ŒìŠ¤ ì½”ë“œ(21.10.11 ê¸°ì¤€ 5.4.0)ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ tar xvf v5.4.0.tar.gz</span><br><span class="line">$ cd hyperscan-5.4.0</span><br><span class="line">$ mkdir build</span><br><span class="line">$ cd build</span><br><span class="line">$ cmake -DBUILD_STATIC_AND_SHARED=1 ../</span><br><span class="line">$ sudo make</span><br><span class="line">$ sudo make install</span><br><span class="line">ln -s /usr/local/include/boost &lt;hyperscan-source-path&gt;/include/boost</span><br></pre></td></tr></table></figure>

<br>

<h3 id="í…ŒìŠ¤íŠ¸ì½”ë“œ-ì‘ì„±"><a href="#í…ŒìŠ¤íŠ¸ì½”ë“œ-ì‘ì„±" class="headerlink" title="í…ŒìŠ¤íŠ¸ì½”ë“œ ì‘ì„±"></a>í…ŒìŠ¤íŠ¸ì½”ë“œ ì‘ì„±</h3><p>í…ŒìŠ¤íŠ¸ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì€ ì½”ë“œ ë‚´ ì£¼ì„ìœ¼ë¡œ ëŒ€ì‹ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><span>Hyperscan API test code</span><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;hs.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HyperscanTest</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	HyperscanTest()</span><br><span class="line">	{</span><br><span class="line">		db_ = <span class="literal">nullptr</span>;</span><br><span class="line">		scratch_ = <span class="literal">nullptr</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	~HyperscanTest()</span><br><span class="line">	{</span><br><span class="line">		hs_free_scratch(scratch_);</span><br><span class="line">		hs_free_database(db_);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ì •ê·œí‘œí˜„ì‹ ìƒ˜í”Œ íŒ¨í„´ì´ ì €ì¥ëœ íŒŒì¼ì„ Hyperscan Pattern DBë¥¼ ì»´íŒŒì¼í•˜ê¸° ìœ„í•œ í˜•íƒœë¡œ íŒŒì‹±í•´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// íŒŒì‹±í•˜ëŠ” íŒŒì¼ì˜ êµ¬ì¡°ëŠ” &lt;id&gt;:/&lt;pattern&gt;/&lt;flags&gt; í˜•íƒœì´ë©°, </span></span><br><span class="line">	<span class="comment">// id/pattern/flagsë¥¼ ê°ê° ë©¤ë²„ ë³€ìˆ˜ì¸ ids_, patterns_, flags_ì— ì €ì¥í•©ë‹ˆë‹¤.</span></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">parseFile</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;filename)</span></span></span><br><span class="line"><span class="function">	</span>{</span><br><span class="line">		<span class="function"><span class="built_in">std</span>::ifstream <span class="title">inFile</span><span class="params">(filename, <span class="built_in">std</span>::ifstream::in)</span></span>;</span><br><span class="line">		<span class="keyword">if</span> (!inFile.good())</span><br><span class="line">		{</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: unable to open file \""</span> &lt;&lt; filename &lt;&lt; <span class="string">"\""</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; !inFile.eof(); i++)</span><br><span class="line">		{</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">string</span> line;</span><br><span class="line">			getline(inFile, line);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (line.empty() || line[<span class="number">0</span>] == <span class="string">'#'</span>)</span><br><span class="line">			{</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			}</span><br><span class="line"></span><br><span class="line">			<span class="keyword">size_t</span> colonIdx = line.find_first_of(<span class="string">':'</span>);</span><br><span class="line">			<span class="keyword">if</span> (colonIdx == <span class="built_in">std</span>::<span class="built_in">string</span>::npos)</span><br><span class="line">			{</span><br><span class="line">				<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: Could not parse line "</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">				inFile.close();</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">			}</span><br><span class="line"></span><br><span class="line">			<span class="keyword">unsigned</span> <span class="keyword">int</span> id = <span class="built_in">std</span>::stoi(line.substr(<span class="number">0</span>, colonIdx).c_str());</span><br><span class="line"></span><br><span class="line">			<span class="function"><span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">expr</span><span class="params">(line.substr(colonIdx + <span class="number">1</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">size_t</span> flagsStart = expr.find_last_of(<span class="string">'/'</span>);</span><br><span class="line">			<span class="keyword">if</span> (flagsStart == <span class="built_in">std</span>::<span class="built_in">string</span>::npos)</span><br><span class="line">			{</span><br><span class="line">				<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: no trailing '/' char"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">				inFile.close();</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">			}</span><br><span class="line"></span><br><span class="line">			<span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">pcre</span><span class="params">(expr.substr(<span class="number">1</span>, flagsStart - <span class="number">1</span>))</span></span>;</span><br><span class="line">			<span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">flagsStr</span><span class="params">(expr.substr(flagsStart + <span class="number">1</span>, expr.size() - flagsStart))</span></span>;</span><br><span class="line">			<span class="keyword">unsigned</span> <span class="keyword">int</span> flag = parseFlags(flagsStr);</span><br><span class="line"></span><br><span class="line">			patterns_.push_back(pcre);</span><br><span class="line">			flags_.push_back(flag);</span><br><span class="line">			ids_.push_back(id);</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		inFile.close();</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// íŒŒì‹±ëœ ë°ì´í„°ë“¤ì„ í™œìš©í•˜ì—¬ Hyperscanì—ì„œ ì‚¬ìš©í•˜ëŠ” Pattern DBë¥¼ ì»´íŒŒì¼í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</span></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">compileDatabase</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>{</span><br><span class="line">		<span class="keyword">hs_database_t</span> *db = <span class="literal">nullptr</span>;</span><br><span class="line">		<span class="keyword">hs_compile_error_t</span> *compileErr;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">const</span> <span class="keyword">char</span> *&gt; cstrPatterns;</span><br><span class="line">		cstrPatterns.reserve(patterns_.size());</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;pattern : patterns_)</span><br><span class="line">		{</span><br><span class="line">			cstrPatterns.push_back(pattern.c_str());</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="keyword">hs_error_t</span> err_compile = hs_compile_multi(cstrPatterns.data(), flags_.data(), ids_.data(), cstrPatterns.size(), HS_MODE_BLOCK, <span class="literal">nullptr</span>, &amp;db, &amp;compileErr);</span><br><span class="line">		<span class="keyword">if</span> (err_compile != HS_SUCCESS)</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">if</span> (compileErr-&gt;expression &lt; <span class="number">0</span>)</span><br><span class="line">			{</span><br><span class="line">				<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: "</span> &lt;&lt; compileErr-&gt;message &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">				hs_free_compile_error(compileErr);</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">			}</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			{</span><br><span class="line">				<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: Pattern '"</span> &lt;&lt; patterns_[compileErr-&gt;expression] &lt;&lt; <span class="string">"' failed with error '"</span> &lt;&lt; compileErr-&gt;message &lt;&lt; <span class="string">"'"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">				hs_free_compile_error(compileErr);</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (db_ != <span class="literal">nullptr</span>)</span><br><span class="line">			hs_free_database(db_);</span><br><span class="line"></span><br><span class="line">		db_ = db;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">hs_error_t</span> err_scratch = hs_alloc_scratch(db_, &amp;scratch_);</span><br><span class="line">		<span class="keyword">if</span> (err_scratch != HS_SUCCESS)</span><br><span class="line">		{</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ERROR: hs_alloc_scratch failed."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ì¸ìë¡œ ì „ë‹¬ëœ íŒ¨í„´ ì •ë³´ê°€ Hyperscan Pattern DBì— ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</span></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">scanPattern</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> pattern)</span></span></span><br><span class="line"><span class="function">	</span>{</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">int</span> match_count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ë§¤ì¹­ë˜ëŠ” íŒ¨í„´ì´ Hyperscan Pattern DBì— ì¡´ì¬í•œë‹¤ë©´ hs_scan í•¨ìˆ˜ì˜ 6ë²ˆì§¸ ì¸ìë¡œ ë“±ë¡ë˜ëŠ” </span></span><br><span class="line">		<span class="comment">// ì½œë°± í•¨ìˆ˜(í•´ë‹¹ ì½”ë“œì—ì„œëŠ” ëŒë‹¤ í•¨ìˆ˜ë¡œ êµ¬í˜„)ë¥¼ í†µí•´ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°,</span></span><br><span class="line">		<span class="comment">// 5ë²ˆì§¸ ì¸ìì¸ ctxë¥¼ í†µí•´ hs_scan ì™¸ë¶€ì˜ ë³€ìˆ˜ì— ì½œë°± í•¨ìˆ˜ì˜ ê²°ê³¼ë¥¼ ì €ì¥í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</span></span><br><span class="line">		<span class="keyword">if</span> (hs_scan(</span><br><span class="line">				db_,</span><br><span class="line">				pattern.c_str(),</span><br><span class="line">				pattern.length(),</span><br><span class="line">				<span class="number">0</span>,</span><br><span class="line">				scratch_,</span><br><span class="line">				[](<span class="keyword">unsigned</span> <span class="keyword">int</span> id, <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> from, <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> to, <span class="keyword">unsigned</span> <span class="keyword">int</span> flags, <span class="keyword">void</span> *ctx) -&gt; <span class="keyword">int</span></span><br><span class="line">				{</span><br><span class="line">					<span class="keyword">size_t</span> *matches = (<span class="keyword">size_t</span> *)ctx;</span><br><span class="line">					(*matches)++;</span><br><span class="line">					<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"id: "</span> &lt;&lt; id &lt;&lt; <span class="string">" from: "</span> &lt;&lt; from &lt;&lt; <span class="string">" to: "</span> &lt;&lt; to &lt;&lt; <span class="string">" flags: "</span> &lt;&lt; flags &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">					<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">				},</span><br><span class="line">				&amp;match_count) != HS_SUCCESS)</span><br><span class="line">		{</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hs_scan failed."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"match count: "</span> &lt;&lt; match_count &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">hs_database_t</span> *db_;</span><br><span class="line">   	<span class="keyword">hs_stream_t</span> *stream_;</span><br><span class="line">   	<span class="keyword">hs_scratch_t</span> *scratch_;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt; ids_;</span><br><span class="line">   	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; patterns_;</span><br><span class="line">   	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt; flags_;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// parseFile í•¨ìˆ˜ì—ì„œ í˜¸ì¶œí•˜ë©° íŒŒì¼ì— ë“±ë¡ëœ flags ì •ë³´ë¥¼ Hyperscanì—ì„œ ì •ì˜í•œ ìƒìˆ˜ ê°’ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…ì„ í•©ë‹ˆë‹¤.</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">parseFlags</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;flagsStr)</span></span></span><br><span class="line"><span class="function">	</span>{</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">int</span> flags = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;c : flagsStr)</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">switch</span> (c)</span><br><span class="line">			{</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'i'</span>:</span><br><span class="line">				flags |= HS_FLAG_CASELESS;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'m'</span>:</span><br><span class="line">				flags |= HS_FLAG_MULTILINE;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'s'</span>:</span><br><span class="line">				flags |= HS_FLAG_DOTALL;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'H'</span>:</span><br><span class="line">				flags |= HS_FLAG_SINGLEMATCH;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'V'</span>:</span><br><span class="line">				flags |= HS_FLAG_ALLOWEMPTY;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'8'</span>:</span><br><span class="line">				flags |= HS_FLAG_UTF8;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'W'</span>:</span><br><span class="line">				flags |= HS_FLAG_UCP;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'\r'</span>: <span class="comment">// stray carriage-return</span></span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> flags;</span><br><span class="line">	}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">   	HyperscanTest hst;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 1. ì •ê·œí‘œí˜„ì‹ ìƒ˜í”Œ íŒ¨í„´ë“¤ì´ ë“±ë¡ëœ íŒŒì¼ì„ Hyperscanì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í˜•íƒœë¡œ íŒŒì‹±</span></span><br><span class="line">	<span class="keyword">if</span>(!hst.parseFile(<span class="string">"./pattern.db"</span>))</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"parseFile failed."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 2. Hyperscan Pattern DB ì»´íŒŒì¼</span></span><br><span class="line">	<span class="keyword">if</span>(!hst.compileDatabase())</span><br><span class="line">	{</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"compileDatabase failed."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">   	{</span><br><span class="line">    	<span class="built_in">std</span>::<span class="built_in">string</span> pattren = <span class="string">""</span>;</span><br><span class="line">    	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"ì²´í¬í•  íŒ¨í„´ì„ ì…ë ¥í•˜ì„¸ìš” &gt;&gt; "</span>;</span><br><span class="line">    	getline(<span class="built_in">std</span>::<span class="built_in">cin</span>, pattren);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 3. ì»´íŒŒì¼ëœ Hyperscan Pattern DBë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒ¨í„´ ì²´í¬</span></span><br><span class="line">		<span class="keyword">if</span>(!hst.scanPattern(pattren))</span><br><span class="line">		{</span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"scanPattern failed."</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		}</span><br><span class="line">   	} <span class="keyword">while</span> (<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<br>

<h3 id="ì •ê·œí‘œí˜„ì‹-ìƒ˜í”Œ-íŒ¨í„´-ë“±ë¡"><a href="#ì •ê·œí‘œí˜„ì‹-ìƒ˜í”Œ-íŒ¨í„´-ë“±ë¡" class="headerlink" title="ì •ê·œí‘œí˜„ì‹ ìƒ˜í”Œ íŒ¨í„´ ë“±ë¡"></a>ì •ê·œí‘œí˜„ì‹ ìƒ˜í”Œ íŒ¨í„´ ë“±ë¡</h3><p>ì•„ë˜ ì˜ˆì‹œëŠ” (ìˆœì„œëŒ€ë¡œ) ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, íœ´ëŒ€í°ë²ˆí˜¸, ìš°í¸ë²ˆí˜¸, ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ì— ëŒ€í•œ ì •ê·œí‘œí˜„ì‹ ìƒ˜í”Œ íŒ¨í„´ì´ë©°, ìƒì„±í•œ pattern.dbëŠ” í…ŒìŠ¤íŠ¸ì½”ë“œ ë¹Œë“œ ê²°ê³¼ ìƒì„±ë˜ëŠ” ì‹¤í–‰ íŒŒì¼(example)ê³¼ ë™ì¼í•œ ê²½ë¡œì— ìœ„ì¹˜ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ vim pattern.db</span><br><span class="line"></span><br><span class="line">1:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]&#123;2,4&#125;$/</span><br><span class="line">2:/^(070|02|031|032|033|041|042|043|051|052|053|054|055|061|062|063|064)-\d&#123;3,4&#125;-\d&#123;4&#125;$/</span><br><span class="line">3:/^(010|011|016|017|018|019)-\d&#123;3,4&#125;-\d&#123;4&#125;$/</span><br><span class="line">4:/^\d&#123;3&#125;-?\d&#123;3&#125;$/</span><br><span class="line">5:/^\d&#123;2&#125;[0-1]\d[0-3]\d-?[1-6]\d&#123;6&#125;$/</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ë¹Œë“œ-ë°-í…ŒìŠ¤íŠ¸"><a href="#ë¹Œë“œ-ë°-í…ŒìŠ¤íŠ¸" class="headerlink" title="ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸"></a>ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ c++ -I /usr/local/include/hs example.cpp -o example -L &lt;hyperscan-source-path&gt;/build/lib -lhs</span><br><span class="line">$ ./example</span><br><span class="line">ì²´í¬í•  íŒ¨í„´ì„ ì…ë ¥í•˜ì„¸ìš” &gt;&gt; 900101-1234567</span><br><span class="line">id: 5 from: 0 to: 14 flags: 0</span><br><span class="line">match count: 1</span><br><span class="line">ì²´í¬í•  íŒ¨í„´ì„ ì…ë ¥í•˜ì„¸ìš” &gt;&gt; 010-1234-5678</span><br><span class="line">id: 3 from: 0 to: 13 flags: 0</span><br><span class="line">match count: 1</span><br><span class="line">ì²´í¬í•  íŒ¨í„´ì„ ì…ë ¥í•˜ì„¸ìš” &gt;&gt; bluetomorrow90@gmail.com</span><br><span class="line">id: 1 from: 0 to: 24 flags: 0</span><br><span class="line">match count: 1</span><br><span class="line">ì²´í¬í•  íŒ¨í„´ì„ ì…ë ¥í•˜ì„¸ìš” &gt;&gt; </span><br></pre></td></tr></table></figure>

<div class="alert info"><p>example ì‹¤í–‰ ì‹œ libhs.soë¥¼ ì°¸ì¡°í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ì—ëŠ” ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¸ì¡° ê²½ë¡œë¥¼ ì§ì ‘ ì§€ì •í•´ì¤ë‹ˆë‹¤.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ export LD_LIBRARY_PATH=&lt;hyperscan-source-path&gt;/build/lib</span><br></pre></td></tr></table></figure></div>

<br>

<h3 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h3><p>ì§€ê¸ˆê¹Œì§€ Hyperscan ì†ŒìŠ¤ ë¹Œë“œ ê³¼ì •ê³¼ ì •ê·œí‘œí˜„ì‹ ìƒ˜í”Œ íŒ¨í„´ì„ ì²´í¬í•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” Hyperscan APIì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ë™ì‘ë“¤ë§Œì„ ì‚´í´ë³´ì•˜êµ¬ìš”, Hyperscan ê³µì‹ ë¬¸ì„œë¥¼ ì‚´í´ë³´ë©´ ë©€í‹°ì“°ë ˆë“œ í™˜ê²½(â€œmainâ€ threadì—ì„œ pattern dbë¥¼ compileí•˜ê³  2ê°œ ì´ìƒì˜ â€œworkerâ€ threadì—ì„œ scanì„ ìˆ˜í–‰)ì—ì„œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í•˜ë‹ˆ ì–´ë–¤ì‹ìœ¼ë¡œ êµ¬í˜„í•´ì•¼í• ì§€ í•¨ê»˜ ê³ ë¯¼í•´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ğŸ™‚</p>
<blockquote>
<p>In a scenario where a set of expressions are compiled by a single â€œmainâ€ thread and data will be scanned by multiple â€œworkerâ€ threads, the convenience function hs_clone_scratch() allows multiple copies of an existing scratch space to be made for each thread (rather than forcing the caller to pass all the compiled databases through hs_alloc_scratch() multiple times).</p>
</blockquote>
<br>
<br>
<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://intel.github.io/hyperscan/dev-reference/getting_started.html">https://intel.github.io/hyperscan/dev-reference/getting_started.html</a></li>
<li><a href="https://www.boost.org/doc/libs/1_77_0/more/getting_started/unix-variants.html">https://www.boost.org/doc/libs/1_77_0/more/getting_started/unix-variants.html</a></li>
<li><a href="https://github.com/intel/hyperscan">https://github.com/intel/hyperscan</a></li>
<li><a href="https://myeonguni.tistory.com/1555">https://myeonguni.tistory.com/1555</a></li>
</ul>
]]></content>
      <categories>
        <category>ê¸°ìˆ ë¬¸ì„œ ë²ˆì—­</category>
      </categories>
      <tags>
        <tag>hyperscan</tag>
        <tag>regex</tag>
        <tag>regular expression</tag>
        <tag>ì¸í…” í•˜ì´í¼ìŠ¤ìº”</tag>
        <tag>ì •ê·œí‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­</tag>
      </tags>
  </entry>
  <entry>
    <title>boost::multiprecisionì„ í™œìš©í•˜ì—¬ Javaì˜ BigInteger í‰ë‚´ë‚´ê¸°</title>
    <url>/2023/05/12/impl-big-integer-in-cpp/</url>
    <content><![CDATA[<p><escape><span id="more"></span></escape></p>
<p>ì•„ë˜ í‘œì—ì„œ ì²˜ëŸ¼ C/C++ì—ì„œ ì§€ì›í•˜ëŠ” ì •ìˆ˜ íƒ€ì…ì˜ ìë£Œí˜•(long long ë˜ëŠ” unsigned long long)ì€ ìµœëŒ€ 8byteì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ 8byte(32bit)ë¥¼ ì´ˆê³¼í•˜ëŠ” ì •ìˆ˜ëŠ” ì–´ë–¤ ìë£Œí˜•ì„ í†µí•´ ê´€ë¦¬í•´ì•¼í• ê¹Œìš”?</p>
<table>
<thead>
<tr>
<th><strong>ìë£Œí˜•</strong></th>
<th><strong>í¬ê¸°</strong></th>
<th><strong>ë²”ìœ„</strong></th>
</tr>
</thead>
<tbody><tr>
<td>long long</td>
<td>8 byte</td>
<td>-9,223,372,036,854,775,807 ~ 9,223,372,036,854,775,807</td>
</tr>
<tr>
<td>unsigned long long</td>
<td>8 byte</td>
<td>0 ~ 18,446,744,073,709,551,615</td>
</tr>
</tbody></table>
<p>Javaì—ì„œëŠ” ì´ì²˜ëŸ¼ 8byteë¥¼ ì´ˆê³¼í•˜ëŠ” í° ì •ìˆ˜ë“¤ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ BigIntegerë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">java</li></ul></figcaption><div class="tabs-content"><figure class="highlight java" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line">String left = <span class="string">"18446744073709551615"</span>;</span><br><span class="line">String right = <span class="string">"18446744073709551615"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ë¬¸ìì—´ íƒ€ì…ì˜ ì²«ë²ˆì§¸ ì¸ì ê°’ì„ ë‘ë²ˆì§¸ ì¸ìë¡œ ì§€ì •ëœ Nì§„ìˆ˜ë¡œ ë³€í™˜í•´ì¤Œ</span></span><br><span class="line">BigInteger bi_left = <span class="keyword">new</span> BigInteger(left, <span class="number">10</span>);</span><br><span class="line">BigInteger bi_right = <span class="keyword">new</span> BigInteger(right, <span class="number">10</span>);</span><br><span class="line">BigInteger output = bi_left.add(bi_right);</span><br><span class="line">System.out.println(<span class="string">"output(dec): "</span> + output.toString());</span><br><span class="line">      </span><br><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"><span class="keyword">byte</span>[] ba = output.toByteArray();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">final</span> <span class="keyword">byte</span> b: ba)</span><br><span class="line">{</span><br><span class="line">  sb.append(String.format(<span class="string">"0x%02x "</span>, b&amp;<span class="number">0xff</span>));</span><br><span class="line">}</span><br><span class="line">System.out.println(<span class="string">"output(hex): "</span> + sb);</span><br></pre></td></tr></tbody></table></figure></div></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">output(dec) : 36893488147419103230</span><br><span class="line">output(hex) : 0x01 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xfe</span><br></pre></td></tr></table></figure>

<br>

<p>ë¶ˆí–‰íˆë„ C/C++ ë‚´ì¥í˜• íƒ€ì… ì¤‘ì—ëŠ” 8byteë¥¼ ì´ˆê³¼í•˜ëŠ” ìë£Œí˜•ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. stackoverflowë¥¼ ì°¾ì•„ë³´ë‹ˆ ì§ì ‘ êµ¬í˜„ì„ í•´ì„œ ì‚¬ìš©í•˜ê±°ë‚˜ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬(<a href="https://gmplib.org/">Gmplib</a>, <a href="https://gist.github.com/bloopletech/338338">bigint</a>)ë¥¼ ì‚¬ìš©í•˜ë¼ê³  í•˜ëŠ”ë°..<br>ì…ë§›ì— ë§ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ boost::multiprecisionì„ í™œìš©í•˜ì—¬ ê°„ëµí•˜ê²Œ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cinttypes&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/multiprecision/cpp_int.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">string</span> left = <span class="string">"18446744073709551615"</span>;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">string</span> right = <span class="string">"18446744073709551615"</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 18446744073709551615ëŠ” 10ì§„ìˆ˜ë¡œ í‘œí˜„ëœ 20ìë¦¬ ì •ìˆ˜ ê°’ì´ë©° í’€ì–´ì¨ë³´ë©´ (1*10^19) + (8*10^18) + (4*10^17) + ... + (1*10^1) + (5*10^0) ì…ë‹ˆë‹¤.</span></span><br><span class="line">  <span class="comment">// í•´ë‹¹ ê³¼ì •ì„ êµ¬í˜„í•œ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// ì‚¬ì‹¤ 10ì§„ìˆ˜ ì •ìˆ˜ì˜ ê²½ìš°ì—ëŠ” ë¬¸ìì—´ íƒ€ì…ì˜ ê°’ì„ boost::multiprecision::cpp_int ìƒì„±ìì˜ ì¸ìë¡œ ì „ë‹¬í•˜ë©´ ì‰½ê²Œ ë³€í™˜í•˜ì—¬ ì—°ì‚°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</span></span><br><span class="line">  <span class="comment">//   std::string value = "18446744073709551615";</span></span><br><span class="line">  <span class="comment">//   boost::multiprecision::cpp_int bi_value(value);</span></span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="comment">// í•˜ì§€ë§Œ Javaì˜ BigInteger ì²˜ëŸ¼ ì‚¬ìš©ìê°€ ì§ì ‘ íŠ¹ì • ì§„ìˆ˜ë¥¼ ì§€ì •í•˜ì—¬ ë³€í™˜í•  ìˆ˜ëŠ” ì—†ì—ˆê¸°ë•Œë¬¸ì— ì§„ìˆ˜ ë³€í™˜ ë¡œì§ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</span></span><br><span class="line">  boost::<span class="function">multiprecision::cpp_int <span class="title">bi_left</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">  <span class="keyword">int</span> len = left.length();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)</span><br><span class="line">  {</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> tmp_str;</span><br><span class="line">    tmp_str.append(<span class="number">1</span>, left[i]);</span><br><span class="line">    bi_left += (boost::multiprecision::<span class="built_in">pow</span>(boost::multiprecision::cpp_int(<span class="number">10</span>), len - i - <span class="number">1</span>) * <span class="built_in">std</span>::strtoimax(tmp_str.c_str(), <span class="literal">nullptr</span>, <span class="number">10</span>));</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  boost::<span class="function">multiprecision::cpp_int <span class="title">bi_right</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">  len = right.length();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)</span><br><span class="line">  {</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> tmp_str;</span><br><span class="line">    tmp_str.append(<span class="number">1</span>, left[i]);</span><br><span class="line">    bi_right += (boost::multiprecision::<span class="built_in">pow</span>(boost::multiprecision::cpp_int(<span class="number">10</span>), len - i - <span class="number">1</span>) * <span class="built_in">std</span>::strtoimax(tmp_str.c_str(), <span class="literal">nullptr</span>, <span class="number">10</span>));</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  boost::multiprecision::cpp_int output = bi_left + bi_right;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"output(dec): "</span> &lt;&lt; output &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">using</span> byte_array_type = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">char</span>&gt;;</span><br><span class="line">  byte_array_type ba_output;</span><br><span class="line">  boost::multiprecision::export_bits(output, <span class="built_in">std</span>::back_inserter(ba_output), <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"output(hex): "</span>);</span><br><span class="line">  <span class="keyword">int</span> ba_output_len = ba_output.size();</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ba_output_len; ++i)</span><br><span class="line">  {</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"0x%02x "</span>, ba_output[i]);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">output(dec) : 36893488147419103230</span><br><span class="line">output(hex) : 0x01 0xff 0xff 0xff 0xff 0xff 0xff 0xff 0xfe</span><br></pre></td></tr></table></figure>

<br>

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/ko-kr/cpp/cpp/data-type-ranges?view=msvc-170">https://learn.microsoft.com/ko-kr/cpp/cpp/data-type-ranges?view=msvc-170</a></li>
<li><a href="https://stackoverflow.com/questions/36952038/how-to-handle-big-integer-data-more-than-8-byte-or-more-than-20-digits-in-c">https://stackoverflow.com/questions/36952038/how-to-handle-big-integer-data-more-than-8-byte-or-more-than-20-digits-in-c</a></li>
<li><a href="https://gmplib.org/">https://gmplib.org/</a></li>
<li><a href="https://gist.github.com/bloopletech/338338">https://gist.github.com/bloopletech/338338</a></li>
</ul>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>boost::multiprecision</tag>
        <tag>biginteger in c++</tag>
      </tags>
  </entry>
  <entry>
    <title>í´ë˜ìŠ¤ í…œí”Œë¦¿ì˜ íŠ¹ì • ë©¤ë²„ í•¨ìˆ˜ë§Œ íŠ¹ìˆ˜í™”í•˜ê¸°</title>
    <url>/2023/05/02/make-specific-memberfunc-to-templatefunc/</url>
    <content><![CDATA[<p><escape><span id="more"></span></escape></p>
<p>ì•„ë˜ì™€ ê°™ì´ í´ë˜ìŠ¤ í…œí”Œë¦¿ì—ì„œ <code>íŠ¹ì • ë©¤ë²„ í•¨ìˆ˜ë§Œ íŠ¹ìˆ˜í™”</code>ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><span>mytemplateclass.h</span><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">mytemplateclass</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">get_name</span><span class="params">()</span></span>; <span class="comment">// íŠ¹ìˆ˜í™” í•˜ë ¤ëŠ” ëŒ€ìƒ</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">get_grade</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">string</span> name_;</span><br><span class="line">  <span class="keyword">int</span> grade_;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mytemplateclass.impl.h"</span></span></span><br></pre></td></tr></tbody></table></figure></div></figure>

<figure class="codeblock codeblock--tabbed"><figcaption><span>mytemplateclass.impl.h</span><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> mytemplateclass&lt;T&gt;::get_name()</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">return</span> name_;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> mytemplateclass&lt;<span class="keyword">int</span>&gt;::get_name()</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"specific member function specialization"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> mytemplateclass&lt;T&gt;::get_grade()</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">return</span> grade_;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<br>

<p>C++17 ë¶€í„°ëŠ” <code>if constexpr</code>ì™€ <code>std::is_same_v</code>ë¥¼ ì¡°í•©í•˜ì—¬ ì¢€ ë” ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><span>mytemplateclass_v2.h</span><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">mytemplateclass_v2</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">get_name</span><span class="params">()</span></span>; <span class="comment">// íŠ¹ìˆ˜í™” í•˜ë ¤ëŠ” ëŒ€ìƒ</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">get_grade</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">string</span> name_;</span><br><span class="line">  <span class="keyword">int</span> grade_;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mytemplateclass_v2.impl.h"</span></span></span><br></pre></td></tr></tbody></table></figure></div></figure>

<figure class="codeblock codeblock--tabbed"><figcaption><span>mytemplateclass_v2.impl.h</span><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> mytemplateclass_v2&lt;T&gt;::get_name()</span><br><span class="line">{</span><br><span class="line">  <span class="function"><span class="keyword">if</span> <span class="title">constexpr</span> <span class="params">(<span class="built_in">std</span>::is_same_v&lt;<span class="keyword">int</span>, T&gt;)</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"specific member function specialization"</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> name_;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> mytemplateclass_v2&lt;T&gt;::get_grade()</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">return</span> grade_;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<br>

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://stackoverflow.com/questions/5512910/explicit-specialization-of-template-class-member-function">https://stackoverflow.com/questions/5512910/explicit-specialization-of-template-class-member-function</a></li>
<li><a href="https://en.cppreference.com/w/cpp/types/is_same">https://en.cppreference.com/w/cpp/types/is_same</a></li>
</ul>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>template</tag>
        <tag>template function specialization</tag>
        <tag>if constexpr</tag>
        <tag>std::is_same_v</tag>
      </tags>
  </entry>
  <entry>
    <title>Blocking, Nonblocking, Sync, Async</title>
    <url>/2021/08/02/os-sync-async-block-nonblock/</url>
    <content><![CDATA[<p>ì˜¤ëŠ˜ì€ ê³µë£¡ì±…ğŸ¦•ì— ì–¸ê¸‰ëœ Blockingê³¼ Nonblocking, Synchronousì™€ Asynchronousì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤. Synchronousì™€ Asynchronousì˜ ê°œë…ì€ <strong>ì“°ë ˆë“œ</strong>ì™€ <strong>I/O</strong>ì—ì„œ ë“±ì¥í•˜ê²Œ ë˜ëŠ”ë°ìš”, ê°ê°ì´ ì–´ë– í•œ ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ë„ êµ¬ë¶„í•´ì„œ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<!-- toc -->
<br>

<h2 id="I-O-ê´€ì ì—ì„œì˜-ë™ê¸°ì™€-ë¹„ë™ê¸°"><a href="#I-O-ê´€ì ì—ì„œì˜-ë™ê¸°ì™€-ë¹„ë™ê¸°" class="headerlink" title="I/O ê´€ì ì—ì„œì˜ ë™ê¸°ì™€ ë¹„ë™ê¸°"></a>I/O ê´€ì ì—ì„œì˜ ë™ê¸°ì™€ ë¹„ë™ê¸°</h2><p>ë™ê¸°(synchronous) ì¥ì¹˜ëŠ” ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì‘ë‹µ ì‹œê°„ì„ ê°–ëŠ” ë°ì´í„° ì „ì†¡ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ì™€ ë°˜ëŒ€ë¡œ ë¹„ë™ê¸°(asynchronous) ì¥ì¹˜ëŠ” ë°ì´í„° ì „ì†¡ ì‘ì—…ì— ëŒ€í•œ ì‘ë‹µ ì‹œê°„ì´ ë¶ˆê·œì¹™ í•˜ê±°ë‚˜ ì˜ˆì¸¡ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>A synchronous device performs data transfers with predictable response times, in coordination with other aspects of the system. An asynchronous device exhibits irregular or unpredictable response times not coordinated with other computer events.</p>
</blockquote>
<div class="alert info"><p>ë™ê¸° ì¥ì¹˜ë¡œëŠ” í…Œì´í”„, ë¹„ë™ê¸° ì¥ì¹˜ë¡œëŠ” í‚¤ë³´ë“œë¥¼ ì˜ˆë¡œ ë“¤ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</div>

<br>

<p>ì•„ë˜ ê·¸ë¦¼ì€ I/O ì²˜ë¦¬ì— ìˆì–´ì„œ ë™ê¸°ì™€ ë¹„ë™ê¸°ì˜ ì°¨ì´(I/Oì²˜ë¦¬ê°€ ì™„ë£Œë ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠëƒ ê¸°ë‹¤ë¦¬ì§€ ì•ŠëŠëƒ)ë¥¼ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤.</p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/os-sync-async-figure1.png" alt=""></div>
<hr>
<h2 id="ë…¼ë¸”ë¡í‚¹ê³¼-ë¹„ë™ê¸°-I-O"><a href="#ë…¼ë¸”ë¡í‚¹ê³¼-ë¹„ë™ê¸°-I-O" class="headerlink" title="ë…¼ë¸”ë¡í‚¹ê³¼ ë¹„ë™ê¸° I/O"></a>ë…¼ë¸”ë¡í‚¹ê³¼ ë¹„ë™ê¸° I/O</h2><p>ì‹œìŠ¤í…œ ì½œ ì¸í„°í˜ì´ìŠ¤ì˜ ë˜ ë‹¤ë¥¸ ì¸¡ë©´ì€ ë¸”ë¡í‚¹(blocking) I/Oì™€ ë…¼ë¸”ë¡í‚¹(nonblocking) I/O ì¤‘ ë¬´ì—‡ì„ ì„ íƒí•˜ëŠ”ì§€ì™€ ê´€ë ¨ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë¸”ë¡í‚¹ ì‹œìŠ¤í…œ ì½œì„ ìš”ì²­í•˜ëŠ” ê²½ìš°ì—ëŠ” í•´ë‹¹ ì‹œìŠ¤í…œ ì½œì„ ìš”ì²­í•œ ì“°ë ˆë“œì˜ ì‹¤í–‰ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤. ì´ ì“°ë ˆë“œëŠ” ìš´ì˜ ì²´ì œì˜ ì‹¤í–‰ í(run queue)ì—ì„œ ëŒ€ê¸° í(wait queue)ë¡œ ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤. ì‹œìŠ¤í…œ ì½œì´ ì™„ë£Œëœ ì´í›„ì—ëŠ”, í•´ë‹¹ ì“°ë ˆë“œê°€ ì‹¤í–‰ì´ ì¬ê°œë  ìˆ˜ ìˆëŠ” ìƒíƒœì¸ ì‹¤í–‰ í(run queue)ë¡œ ë‹¤ì‹œ ì´ë™í•©ë‹ˆë‹¤. ì‹¤í–‰ì´ ì¬ê°œëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì‹œìŠ¤í…œ ì½œë¡œ ë¶€í„° ë°˜í™˜ëœ ê²°ê³¼ë¥¼ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤. I/O ì¥ì¹˜ì— ì˜í•´ ìˆ˜í–‰ë˜ëŠ” ë¬¼ë¦¬ì ì¸ í–‰ìœ„ë“¤ì€ ì¼ë°˜ì ìœ¼ë¡œ ë¹„ë™ê¸°ì (I/O ì¥ì¹˜ë§ˆë‹¤ ë¬¼ë¦¬ì  í–‰ìœ„ë“¤ì„ ìˆ˜í–‰í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ë‹¤ì–‘í•˜ê³  ì˜ˆì¸¡í•  ìˆ˜ ì—†ê¸°ë•Œë¬¸ì—)ì…ë‹ˆë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ìš´ì˜ ì²´ì œëŠ” ë¸”ë¡í‚¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ë…¼ë¸”ë¡í‚¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë³´ë‹¤ ìƒëŒ€ì ìœ¼ë¡œ ì‘ì„±í•˜ê¸° ì‰½ê¸° ë•Œë¬¸ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¸”ë¡í‚¹ ì‹œìŠ¤í…œ ì½œì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Another aspect of the system-call interface relates to the choice between blocking I/O and nonblocking I/O. When an application issues a blocking system call, the execution of the calling thread is suspended. The thread is moved from the operating systemâ€™s run queue to a wait queue. After the system call completes, the thread is moved back to the run queue, where it is eligible to resume execution. When it resumes execution, it will receive the values returned by the system call. The physical actions performed by I/O devices are generally asynchronousâ€” they take a varying or unpredictable amount of time. Nevertheless, operating systems provide blocking system calls for the application interface, because blocking application code is easier to write than nonblocking application code.</p>
</blockquote>
<br>

<p>ëª‡ëª‡ ì‚¬ìš©ì ë ˆë²¨ì˜ í”„ë¡œì„¸ìŠ¤ë“¤ì—ì„œ ë…¼ë¸”ë¡í‚¹ I/Oê°€ í•„ìš”í•œ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. í•œê°€ì§€ ì˜ˆë¡œ ëª¨ë‹ˆí„°ì— ë°ì´í„°ë¥¼ ì¶œë ¥í•¨ê³¼ ë™ì‹œì— í‚¤ë³´ë“œì™€ ë§ˆìš°ìŠ¤ì˜ ì…ë ¥ ê°’ì„ ë°›ëŠ” ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒê°í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜ë‹¤ë¥¸ ì˜ˆë¡œ ì¶œë ¥ ê°’ì˜ ì••ì¶•ì„ í’€ë©´ì„œ ëª¨ë‹ˆí„° í™”ë©´ì— ë¿Œë ¤ì¤Œê³¼ ë™ì‹œì— ë””ìŠ¤í¬ì— ì €ì¥ëœ íŒŒì¼ì—ì„œ í”„ë ˆì„ë“¤ì„ ì½ì–´ë“¤ì´ëŠ” ë¹„ë””ì˜¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒê°í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Some user-level processes need nonblocking I/O. One example is a user interface that receives keyboard and mouse input while processing and displaying data on the screen. Another example is a video application that reads frames from a file on disk while simultaneously decompressing and displaying the output on the display.</p>
</blockquote>
<br>

<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìê°€ I/Oì™€ ë™ì‹œì— ë˜ ë‹¤ë¥¸ ì‹¤í–‰ íë¦„ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í•œê°€ì§€ ë°©ë²•ì€ ë©€í‹°ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì¼ë¶€ ì“°ë ˆë“œëŠ” ë¸”ë¡í‚¹ ì‹œìŠ¤í…œ ì½œì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê³  ë‚˜ë¨¸ì§€ ì“°ë ˆë“œë“¤ì€ ì‘ì—…ì„ ê³„ì†í•´ë‚˜ê°€ë©´ ë©ë‹ˆë‹¤. ëª‡ëª‡ ìš´ì˜ ì²´ì œëŠ” ë…¼ë¸”ë¡í‚¹ I/O ì‹œìŠ¤í…œ ì½œì„ ì œê³µí•©ë‹ˆë‹¤. ë…¼ë¸”ë¡í‚¹ í˜¸ì¶œì€ ì“°ë ˆë“œì˜ ì‹¤í–‰ì„ ì¤‘ë‹¨ì‹œí‚¤ì§€ ì•ŠëŠ” ëŒ€ì‹  ëª‡ ë°”ì´íŠ¸ê°€ ì „ë‹¬ëëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ê³§ë°”ë¡œ ë¦¬í„´í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>One way an application writer can overlap execution with I/O is to write a multithreaded application. Some threads can perform blocking system calls, while others continue executing. Some operating systems provide nonblocking I/O system calls. A nonblocking call does not halt the execution of the thread for an extended time. Instead, it returns quickly, with a return value that indicates how many bytes were transferred.</p>
</blockquote>
<br>

<p>ë…¼ë¸”ë¡í‚¹ ì‹œìŠ¤í…œ ì½œì— ëŒ€í•œ ëŒ€ì•ˆìœ¼ë¡œ ë¹„ë™ê¸° ì‹œìŠ¤í…œ ì½œì´ ìˆìŠµë‹ˆë‹¤. ë¹„ë™ê¸° í˜¸ì¶œì€ I/O ì²˜ë¦¬ê°€ ëë‚˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê¸° ì•Šê³  ê³§ë°”ë¡œ ë¦¬í„´í•©ë‹ˆë‹¤. ì“°ë ˆë“œëŠ” ê³„ì†í•´ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•´ ë‚˜ê°‘ë‹ˆë‹¤. I/O ì²˜ë¦¬ê°€ ì™„ë£Œë˜ëŠ” ì‹œì ì´ ë˜ë©´ ì“°ë ˆë“œì˜ ì£¼ì†Œ ê³µê°„ì— ì €ì¥ëœ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì‹œê·¸ë„ ë˜ëŠ” ì¸í„°ëŸ½íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê±°ë‚˜ ì“°ë ˆë“œì˜ ì„ í˜• ì»¨íŠ¸ë¡¤ íë¦„ ë°”ê¹¥ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì½œë°± ë£¨í‹´ì„ í†µí•´ I/O ì²˜ë¦¬ ì™„ë£Œ ì—¬ë¶€ê°€ ì“°ë ˆë“œë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ë…¼ë¸”ë¡í‚¹ read() í•¨ìˆ˜ì˜ ê²½ìš°ì—ëŠ” ì‚¬ìš© ê°€ëŠ¥í•œ ë°ì´í„°ê°€ ë¬´ì—‡ì´ë“  ì¦‰ì‹œ ë¦¬í„´(ë¦¬í„´ ê°’ì€ ìš”ì²­ë°›ì€ ë°”ì´íŠ¸ ì „ì²´ê°€ ë  ìˆ˜ë„ ìˆê³  í˜¹ì€ ê·¸ ë³´ë‹¤ ì ê±°ë‚˜ ë˜ëŠ” ì•„ì˜ˆ ì—†ì„ ìˆ˜ë„ ìˆìŒ)í•˜ê²Œ ë˜ë©°, ë¹„ë™ê¸° read() í•¨ìˆ˜ì˜ ê²½ìš°ì—ëŠ” í•¨ìˆ˜ ì „ì²´ì— ê±¸ì³ ìˆ˜í–‰ë  ì˜ˆì •ì´ë‚˜ ë‚˜ì¤‘ì— ì™„ë£Œë  ì „ì†¡ì„ ìš”ì²­í•œë‹¤ëŠ” ê²ƒì— ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>An alternative to a nonblocking system call is an asynchronous system call. An asynchronous call returns immediately, without waiting for the I/O to complete. The thread continues to execute its code. The completion of the I/O at some future time is communicated to the thread, either through the setting of some variable in the address space of the thread or through the triggering of a signal or software interrupt or a call-back routine that is executed outside the linear control flow of the thread. The difference between nonblocking and asynchronous system calls is that a nonblocking read() returns immediately with whatever data are availableâ€” the full number of bytes requested, fewer, or none at all. An asynchronous read() call requests a transfer that will be performed in its entirety but will complete at some future time.</p>
</blockquote>
<div class="alert info"><p>í•´ë‹¹ ì„¤ëª…ë§Œìœ¼ë¡œëŠ” nonblockingê³¼ asynchronousì˜ ì°¨ì´ê°€ ëª…í™•íˆ ì´í•´ê°€ ë˜ì§ˆ ì•Šì•„ <a href="https://stackoverflow.com/questions/7931537/whats-the-difference-between-asynchronous-non-blocking-event-base-architectu/9489547#9489547">stack-overflowì˜ ê´€ë ¨ ë‹µë³€</a>ì„ ì°¸ì¡°í•˜ì˜€ìŠµë‹ˆë‹¤. í•´ë‹¹ ë§í¬ì—ì„œ Non-Blockingì— ëŒ€í•œ ì„¤ëª… ì¤‘ â€œexpect caller to execute the call againâ€ ë¼ëŠ” ë¬¸ì¥ì´ ëˆˆì— ë“¤ì–´ì˜¤ë„¤ìš”ğŸ™‚</p>
</div>

<br>

<p>ë…¼ë¸”ë¡í‚¹ ë™ì‘ì˜ ì¢‹ì€ ì˜ˆë¡œ ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì—ì„œ ì‚¬ìš©ë˜ëŠ” select() ì‹œìŠ¤í…œ ì½œì´ ìˆìŠµë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œ ì½œì€ ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ ì •ë³´ë¥¼ ì¸ìë¡œ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ì´ ê°’ì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ ì“°ë ˆë“œëŠ” ë¸”ë¡í‚¹ì—†ì´ ë„¤íŠ¸ì›Œí¬ í™œë™ì— ëŒ€í•´ì„œ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ select() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì¶”ê°€ì ì¸ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•˜ê²Œ ë˜ëŠ”ë° ì´ëŠ” select() í•¨ìˆ˜ê°€ ì˜¤ì§ I/Oê°€ ê°€ëŠ¥í•œì§€ ì—¬ë¶€ë§Œì„ í™•ì¸(ì‹¤ì œ ë°ì´í„° ì „ì†¡ì€ ì¼ì–´ë‚˜ì§€ ì•ŠìŒ)í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì‹¤ì œ ë°ì´í„° ì „ì†¡ì„ ìœ„í•´ì„œëŠ” select() í•¨ìˆ˜ ì´í›„ì— read()ë‚˜ write() í•¨ìˆ˜ í˜¸ì¶œì´ ë°˜ë“œì‹œ ìˆ˜ë°˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>A good example of nonblocking behavior is the select() system call for network sockets. This system call takes an argument that specifies a maximum waiting time. By setting it to 0, a thread can poll for network activity without blocking. But using select() introduces extra overhead, because the select() call only checks whether I/O is possible. For a data transfer, select() must be followed by some kind of read() or write() command.</p>
</blockquote>
<hr>
<h2 id="ì“°ë ˆë“œ-ê´€ì ì—ì„œì˜-ë™ê¸°ì™€-ë¹„ë™ê¸°"><a href="#ì“°ë ˆë“œ-ê´€ì ì—ì„œì˜-ë™ê¸°ì™€-ë¹„ë™ê¸°" class="headerlink" title="ì“°ë ˆë“œ ê´€ì ì—ì„œì˜ ë™ê¸°ì™€ ë¹„ë™ê¸°"></a>ì“°ë ˆë“œ ê´€ì ì—ì„œì˜ ë™ê¸°ì™€ ë¹„ë™ê¸°</h2><p>ë©€í‹° ì“°ë ˆë“œ ìƒì„±ì˜ 2ê°€ì§€ ì „ëµì¸ ë¹„ë™ê¸° ì“°ë ˆë“œì™€ ë™ê¸° ì“°ë ˆë“œì— ëŒ€í•´ ì†Œê°œí•´ë³´ë ¤í•©ë‹ˆë‹¤. ë¹„ë™ê¸° ì“°ë ˆë“œì—ì„œëŠ” ë¶€ëª¨ ì“°ë ˆë“œê°€ ìì‹ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ê³ ë‚˜ì„œ ìì‹ ì˜ ì‹¤í–‰ì„ ì´ì–´ë‚˜ê°€ëŠ”ë° ì´ê²ƒì€ ë¶€ëª¨ì™€ ìì‹ ì“°ë ˆë“œê°€ ë™ì‹œì— ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©° ê°ê°ì˜ ì‹¤í–‰ íë¦„ì´ ë…ë¦½ì ì„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì“°ë ˆë“œë“¤ì€ ë…ë¦½ì ì´ë¯€ë¡œ ëŒ€ê²Œ ì“°ë ˆë“œ ê°„ì˜ ë°ì´í„° ê³µìœ ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>We introduce two general strategies for creating multiple threads: asynchronous threading and synchronous threading. With asynchronous threading, once the parent creates a child thread, the parent resumes its execution, so that the parent and child execute concurrently and independently of one another. Because the threads are independent, there is typically little data sharing between them.</p>
</blockquote>
<p>ë™ê¸° ì“°ë ˆë“œëŠ” ë¶€ëª¨ ì“°ë ˆë“œê°€ í•œê°œ ë˜ëŠ” ê·¸ ì´ìƒì˜ ìì‹ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ëª¨ë“  ìì‹ì˜ ì‘ì—…ì´ ëë‚ ë•Œê¹Œì§€ ëŒ€ê¸°í•œ í›„ì— ë¶€ëª¨ ìì‹ ì˜ ì‹¤í–‰ì´ ì¬ê°œë©ë‹ˆë‹¤. ë¶€ëª¨ì— ì˜í•´ ìƒì„±ëœ ìì‹ ì“°ë ˆë“œë“¤ì€ ë™ì‹œì— ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ë§Œ ìì‹ ì“°ë ˆë“œë“¤ì˜ ì‘ì—…ì´ ëª¨ë‘ ì™„ë£Œë ë•Œê¹Œì§€ ë¶€ëª¨ ì“°ë ˆë“œëŠ” ì¤‘ë‹¨ë©ë‹ˆë‹¤. ê°ê°ì˜ ìì‹ ì“°ë ˆë“œê°€ ì‘ì—…ì„ ë§ˆì¹˜ê²Œ ë˜ë©´ ê·¸ê²ƒë“¤ì€ ì¢…ë£Œë˜ê³  ê·¸ë“¤ì˜ ë¶€ëª¨ ì“°ë ˆë“œë¡œ í•©ë¥˜(join)í•˜ê²Œ ë©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ë™ê¸° ì“°ë ˆë“œëŠ” ì“°ë ˆë“œë“¤ ê°„ì˜ ì¤‘ìš”í•œ ë°ì´í„° ê³µìœ ë¥¼ ìˆ˜ë°˜í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¶€ëª¨ ì“°ë ˆë“œê°€ ì—¬ëŸ¬ ìì‹ ì“°ë ˆë“œì— ì˜í•´ ê³„ì‚°ëœ ê²°ê³¼ë“¤ì„ ì·¨í•©í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Synchronous threading occurs when the parent thread creates one or more children and then must wait for all of its children to terminate before it resumes. Here, the threads created by the parent perform work concurrently, but the parent cannot continue until this work has been completed. Once each thread has finished its work, it terminates and joins with its parent. Only after all of the children have joined can the parent resume execution. Typically, synchronous threading involves significant data sharing among threads. For example, the parent thread may combine the results calculated by its various children.</p>
</blockquote>
<hr>
<h2 id="ì •ë¦¬í•´ë³´ë©´"><a href="#ì •ë¦¬í•´ë³´ë©´" class="headerlink" title="ì •ë¦¬í•´ë³´ë©´"></a>ì •ë¦¬í•´ë³´ë©´</h2><p><strong>ë¸”ë¡í‚¹ vs ë…¼ë¸”ë¡í‚¹</strong></p>
<ul>
<li>ì‹œìŠ¤í…œ ì½œì˜ ìš”ì²­ ì£¼ì²´ê°€ ë˜ëŠ” ì“°ë ˆë“œë¥¼ ì¤‘ë‹¨í•˜ëŠëƒ(ëŒ€ê¸° íë¡œ ì´ë™ì‹œí‚¤ëŠëƒ) ê·¸ë ‡ì§€ ì•ŠëŠëƒ</li>
</ul>
<p><strong>ë…¼ë¸”ë¡í‚¹ vs ë¹„ë™ê¸°</strong></p>
<ul>
<li>ì‹œìŠ¤í…œ ì½œì´ ê³§ë°”ë¡œ ë°˜í™˜ë˜ëŠ” ê²½ìš°, ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ê°–ê³  ìˆëŠëƒ ê·¸ë ‡ì§€ ì•ŠëŠëƒ</li>
</ul>
<p><strong>ë™ê¸° vs ë¹„ë™ê¸°</strong></p>
<ul>
<li>ì‹œìŠ¤í…œ ì½œì˜ ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¬ëŠëƒ ê¸°ë‹¤ë¦¬ì§€ ì•ŠëŠëƒ</li>
</ul>
<hr>
<br>
<br>
<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li>Abraham Silberschatz, Greg Gagne, Peter B. Galvin. (2018). Operating System Concepts, 10th Edition. Wiley</li>
<li><a href="http://homoefficio.github.io/2017/02/19/Blocking-NonBlocking-Synchronous-Asynchronous/">http://homoefficio.github.io/2017/02/19/Blocking-NonBlocking-Synchronous-Asynchronous/</a></li>
</ul>
]]></content>
      <categories>
        <category>ìš´ì˜ì²´ì œ</category>
      </categories>
      <tags>
        <tag>async</tag>
        <tag>sync</tag>
        <tag>blocking</tag>
        <tag>nonblocking</tag>
      </tags>
  </entry>
  <entry>
    <title>boost::io_context ì‹¤í–‰ ëª¨ë¸ì— ëŒ€í•´ ì•Œì•„ë³´ì</title>
    <url>/2023/05/19/multithreaded-execution/</url>
    <content><![CDATA[<p><em><strong>ë­í•˜ëŠ” ë†ˆì¸ì§€ëŠ” ì•Œê³  ì“°ì</strong></em> ì‹œë¦¬ì¦ˆì˜ ë„¤ë²ˆì§¸ ì£¼ì œëŠ” <code>boost io_context ì‹¤í–‰ ëª¨ë¸</code>ì…ë‹ˆë‹¤.</p>
<span id="more"></span>

<p><a href="https://dens.website/tutorials/cpp-asio/multithreading">execution model where you launch N threads for the sameÂ io_contextÂ class instance.</a>ì™€ <a href="https://dens.website/tutorials/cpp-asio/multithreading-2">execution model where you create N pairs of â€œ1Â io_contextÂ + 1 threadâ€</a>ì— í¬ìŠ¤íŒ…ëœ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë‹ˆ ì°¸ê³ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
<br>

<!-- toc -->

<br>

<h2 id="Nê°œì˜-ì“°ë ˆë“œì—ì„œ-1ê°œì˜-io-contextë¥¼-ì‚¬ìš©í•˜ëŠ”-ì‹¤í–‰-ëª¨ë¸"><a href="#Nê°œì˜-ì“°ë ˆë“œì—ì„œ-1ê°œì˜-io-contextë¥¼-ì‚¬ìš©í•˜ëŠ”-ì‹¤í–‰-ëª¨ë¸" class="headerlink" title="Nê°œì˜ ì“°ë ˆë“œì—ì„œ 1ê°œì˜ io_contextë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹¤í–‰ ëª¨ë¸"></a>Nê°œì˜ ì“°ë ˆë“œì—ì„œ 1ê°œì˜ io_contextë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹¤í–‰ ëª¨ë¸</h2><p>ë©€í‹° ì“°ë ˆë“œ ì ‘ê·¼ ë°©ì‹ì— ë›°ì–´ë“¤ê¸° ìœ„í•œ ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ê°ê°ì˜ ì“°ë ˆë“œë“¤ì—ì„œ ë™ì¼í•œ io_context ê°ì²´ì— ëŒ€í•´ì„œ io_context::run ë©¤ë²„ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The simplest way to jump into a multithreaded approach is to run io_context::run member function on multiple threads with the same io_context object.</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BOOST_ASIO_NO_DEPRECATED</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">io::io_context io_context;</span><br><span class="line"><span class="comment">// Prepare things</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::thread&gt; threads;</span><br><span class="line"><span class="keyword">auto</span> count = <span class="built_in">std</span>::thread::hardware_concurrency() * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; count; ++n)</span><br><span class="line">{</span><br><span class="line">    threads.emplace_back([&amp;]</span><br><span class="line">    {</span><br><span class="line">        io_context.run();</span><br><span class="line">    });</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span>&amp; thread : threads)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span>(thread.joinable())</span><br><span class="line">    {</span><br><span class="line">        thread.join();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ ê²½ìš°ì— io_contextëŠ” í´ë˜ì‹í•œ ì“°ë ˆë“œ í’€ê³¼ ê°™ì´ ë™ì‘í•©ë‹ˆë‹¤. ë¹„ë™ê¸° ì‘ì—…ë“¤ì€ OS ì¸¡ë©´ì˜ ì–´ë”˜ê°€ì—ì„œ ìˆ˜í–‰ë˜ì§€ë§Œ ì™„ë£Œ í•¸ë“¤ëŸ¬ëŠ” io_context::run í•¨ìˆ˜ê°€ ì‹¤í–‰ì¤‘ì¸ ì“°ë ˆë“œë“¤ì—ì„œ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. ì¢€ ë” ì •í™•íˆ ë§í•˜ìë©´: ëª¨ë“  ì™„ë£Œ í•¸ë“¤ëŸ¬ëŠ” io_context::run í•¨ìˆ˜ê°€ ì‹¤í–‰ ì¤‘ì¸ ìµœì´ˆì˜ ìœ íœ´ ìƒíƒœ ì“°ë ˆë“œì—ì„œ ë°œìƒí•©ë‹ˆë‹¤.</p>
<blockquote>
<p>In that case io_context operates like a classic thread pool. Asynchronous tasks are performed somewhere on the OS side, however completion handlers are invoked on those threads where io_context::run function is running. To be more precise: every completion handler is invoked on a first free thread which io_context::run function is running on.</p>
</blockquote>
<p>ì´ê²ƒì€ ì™„ë£Œ í•¸ë“¤ëŸ¬ê°€ ë³‘ë ¬ì ìœ¼ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ê²ƒì€ ìš°ë¦¬ê°€ ë™ê¸°í™”ê°€ í•„ìš”í•œ ì§€ì ì— ë„ë‹¬í–ˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ê¸°ë„ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>It means that completion handlers could run in parallel. And this is, in turn, mean that weâ€™ve reached a point where we need some synchronization.</p>
</blockquote>
<p>ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ë¶„ì´ ë™ê¸°í™”ì— ëŒ€í•´ ì‹ ê²½ì¨ì•¼í•˜ëŠ” ë¶€ë¶„ë“¤ì„ ì¤„ì¼ ìˆ˜ë¡ ë” ì¢‹ì„ ê²ƒì…ë‹ˆë‹¤. ì¢‹ì€ ì†Œì‹ì€ Boost.Asioë¥¼ í™œìš©í•œ ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œëŠ” ë™ê¸°í™”ë¥¼ ìœ„í•´ ë®¤í…ìŠ¤ ë˜ëŠ” ì„¸ë§ˆí¬ì–´ì™€ ê°™ì€ ì—£ì§€ ë¡œìš° ë ˆë²¨ ë™ê¸°í™” íˆ´ë“¤ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The less you have to care about synchronization in a multithreaded environment â€” the better. The good news is that we donâ€™t need such edgy low-level synchronization tools like mutexes or semaphores to get things synchronized in the Boost.Asio multithreaded environment.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì˜ ì™„ë£Œ í•¸ë“¤ëŸ¬ë¥¼ ì ì ˆí•˜ê²Œ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê²ƒì€ io_context::strand í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¿ì…ë‹ˆë‹¤. ê·¸ê²ƒì€ ê½¤ ë‹¨ìˆœí•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤: ë™ì¼í•œ io_context::strandì— í• ë‹¹ëœ ì™„ë£Œ í•¸ë“¤ëŸ¬ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë  ê²ƒì…ë‹ˆë‹¤. ê·¸ê²ƒë“¤ì€ ì„œë¡œ ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì—ì„œ ì‹¤í–‰ë˜ì§€ë§Œ, ê·¸ê²ƒë“¤ì˜ ì‹¤í–‰ì€ ìˆœì°¨ì ì´ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ì´ê²ƒì€ ê·¸ê²ƒë“¤ì´ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì„ê²ƒì´ë©° ì—¬ëŸ¬ë¶„ì´ ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•´ì¤„ í•„ìš”ê°€ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The only thing you need to get your completion handlers synchronized properly is io_context::strand class instance. It works pretty simple: completion handlers attached to the same io_context::strand will be invoked serially. They could be invoked from different threads, however those invocations will be serialized. This means that things wonâ€™t go in parallel and you donâ€™t have to deal with synchronization.</p>
</blockquote>
<p>ë”°ë¼ì„œ ì—¬ëŸ¬ë¶„ì´ í•´ì•¼ í•  ì¼ì€ ê³µìœ  ë°ì´í„°ì—ì„œ ì‘ë™í•˜ëŠ” ì™„ë£Œ í•¸ë“¤ëŸ¬ì™€ ë™ì¼í•œ io_context::strandì— ì—°ê²°ë˜ì–´ì•¼ í•˜ëŠ” ì™„ë£Œ í•¸ë“¤ëŸ¬, ê·¸ë¦¬ê³  ì´ë“¤ ì¤‘ ì–´ëŠ ê²ƒì´ ë…ë¦½ì ì´ê³  ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì€ ì™„ë£Œ í•¸ë“¤ëŸ¬ë¥¼ strandë¡œ ê°ì‹¸ê¸°ìœ„í•´ boost::asio::bind_executor í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤. ì˜ˆì œë¥¼ ì‚´í´ë´…ì‹œë‹¤. ìš°ë¦¬ì˜ io_context::run í•¨ìˆ˜ê°€ ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì‹¤í–‰ì¤‘ì´ë¼ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>So, everything you need to do is to decide which completion handlers operate on a shared data and should be attached to the same io_context::strand, and which of them are independent and can go in parallel. You should use boost::asio::bind_executor function to wrap a completion handler into a strand. Letâ€™s look at the example. Assume that our io_context::run is running on multiple threads:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">session</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    session(io::io_context&amp; io_context)</span><br><span class="line">    : socket(io_context)</span><br><span class="line">    , read  (io_context)</span><br><span class="line">    , write (io_context)</span><br><span class="line">    {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">async_read</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        io::async_read(socket, read_buffer, io::bind_executor(read, [&amp;] (error_code error, <span class="built_in">std</span>::<span class="keyword">size_t</span> bytes_transferred)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span>(!error)</span><br><span class="line">            {</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">                async_read();</span><br><span class="line">            }</span><br><span class="line">        }));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">async_write</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        io::async_read(socket, write_buffer, io::bind_executor(write, [&amp;] (error_code error, <span class="built_in">std</span>::<span class="keyword">size_t</span> bytes_transferred)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span>(!error)</span><br><span class="line">            {</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">                async_write();</span><br><span class="line">            }</span><br><span class="line">        }));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">    tcp::socket socket;</span><br><span class="line">    io::io_context::strand read;</span><br><span class="line">    io::io_context::strand write;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ìœ„ì˜ ì˜ˆì œì—ì„œ ìš°ë¦¬ëŠ” 2ê°œì˜ strandë¥¼ ì‚¬ìš©í–ˆëŠ”ë° í•˜ë‚˜ëŠ” read ì—°ì‚°ì„ ë‹¤ë¥¸ í•˜ë‚˜ëŠ” write ì—°ì‚°ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ì´ê²ƒì€ read ì™„ë£Œ í•¸ë“¤ëŸ¬ì™€ write ì™„ë£Œ í•¸ë“¤ëŸ¬ê°€ ì„œë¡œ ë‹¤ë¥¸ strandì—ì„œ ì§ë ¬í™” ë  ê²ƒì´ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë˜í•œ ì´ê²ƒì€ ë™ì¼í•œ íƒ€ì…(ì—¬ê¸°ì„œëŠ” readëƒ writeëƒ)ì˜ ì™„ë£Œ í•¸ë“¤ëŸ¬ë“¤ì€ ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰ë˜ë‚˜ readì™€ write í•¸ë“¤ëŸ¬ëŠ” ê°ê° ë³‘ë ¬ì ìœ¼ë¡œ ì§„í–‰ë  ê²ƒì´ë¼ëŠ” ì˜ë¯¸ì´ê¸°ë„ í•©ë‹ˆë‹¤. ì´ê²ƒì´ ì—¬ëŸ¬ë¶„ì´ ì œì–´ íë¦„ì„ ë™ê¸°ì ìœ¼ë¡œ ìœ ì§€í•˜ê¸° ìœ„í•´ í•´ì•¼í•  ì „ë¶€ì…ë‹ˆë‹¤. ë„ˆë¬´ ê°„ë‹¨í•˜ì§€ ì•Šì€ê°€ìš”! ì—¬ëŸ¬ë¶„ì´ strandë¥¼ ì ì ˆí•˜ê²Œ í• ë‹¹í•´ì£¼ëŠ” í•œ êµì°©ìƒíƒœì— ë¹ ì§€ê±°ë‚˜ ë‹¤ë¥¸ ì¼ë°˜ì ì¸ ë©€í‹°ì“°ë ˆë”© ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>In the example above we used two strands, one for reading and one for writing operations. This means that read completion handlers will be serialized with one strand and write handlers will be serialized with another strand. Which means that completion handlers of the same type will go serially, however read and write handlers will go in parallel to each other. And thatâ€™s all you need to keep your control flow synchronized, so simple! Note that you canâ€™t get deadlocked here or run into other common multithreading issues. As long as you designate your strands properly.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì€ ì£¼ì–´ì§„ strandì•ˆì—ì„œ ì—¬ëŸ¬ë¶„ì˜ functorë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ boost::asio::post í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>You can also use boost::asio::post function with io_context::strand to execute your functors within a given strand:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line">io::post(read, []</span><br><span class="line">{</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"We're inside a read sequence, it's safe to access a read-related data here!\n"</span>;</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure></div></figure>

<br>

<h2 id="1ê°œì˜-io-contextì™€-1ê°œì˜-ì“°ë ˆë“œ-ìŒì„-Nê°œ-ìƒì„±í•˜ëŠ”-ì‹¤í–‰-ëª¨ë¸"><a href="#1ê°œì˜-io-contextì™€-1ê°œì˜-ì“°ë ˆë“œ-ìŒì„-Nê°œ-ìƒì„±í•˜ëŠ”-ì‹¤í–‰-ëª¨ë¸" class="headerlink" title="1ê°œì˜ io_contextì™€ 1ê°œì˜ ì“°ë ˆë“œ ìŒì„ Nê°œ ìƒì„±í•˜ëŠ” ì‹¤í–‰ ëª¨ë¸"></a>1ê°œì˜ io_contextì™€ 1ê°œì˜ ì“°ë ˆë“œ ìŒì„ Nê°œ ìƒì„±í•˜ëŠ” ì‹¤í–‰ ëª¨ë¸</h2><p>ì´ì „ ê°•ì˜ì—ì„œ Nê°œì˜ ì“°ë ˆë“œë¥¼ í•˜ë‚˜ì˜ io_context í´ë˜ìŠ¤ ê°ì²´ì—ì„œ ë™ì‘í•˜ë„ë¡ í•˜ëŠ” ì‹¤í–‰ ëª¨ë¸ì„ ë°°ì›Œë³´ì•˜ìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì— io_contextëŠ” ì—¬ëŸ¬ë¶„ì„ ìœ„í•´ ìì²´ì ìœ¼ë¡œ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ ìˆ˜í–‰í•˜ë©°, ì—¬ëŸ¬ë¶„ì€ ë‹¤ìŒ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì–´ë–¤ ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ì§€ì— ëŒ€í•´ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>In the previous lesson weâ€™ve learned an execution model where you launch N threads for the same io_context class instance. In that case io_context do load balancing for you, and you donâ€™t need to care which thread should be used for the next handler to execute on.</p>
</blockquote>
<p>1ê°œì˜ io_contextì™€ 1ê°œì˜ ì“°ë ˆë“œ ìŒì„ Nê°œ ìƒì„±í•˜ëŠ” ë˜ ë‹¤ë¥¸ ì‹¤í–‰ ëª¨ë¸ì´ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì— ëª¨ë“  ì“°ë ˆë“œëŠ” ê°ìì˜ io_context í´ë˜ìŠ¤ ê°ì²´ë¥¼ ê°–ê²Œë©ë‹ˆë‹¤. ì•„ë˜ ì˜ˆì œë¥¼ ì‚´í´ë´…ì‹œë‹¤. io_context group wrapperëŠ” ìš”ì²­ëœ io_context, work guard ê·¸ë¦¬ê³  ì“°ë ˆë“œ í´ë˜ìŠ¤ ê°ì²´ì˜ ì¹´ìš´íŠ¸ ê°’ì„ ìƒì„±í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì•„ë˜ ì˜ˆì œë¥¼ í†µí•´ ì´ ì‹¤í–‰ ëª¨ë¸ì— ëŒ€í•´ ë…¼ì˜í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>There is another execution model where you create N pairs of â€œ1 io_context + 1 threadâ€ instead. In that case every thread has its own io_context class instance. Look at the example below. Itâ€™s io_context group wrapper which creates requested count of io_context, work guard and thread class instances. We will discuss this execution model below the example.</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BOOST_ASIO_NO_DEPRECATED</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> io = boost::asio;</span><br><span class="line"><span class="keyword">using</span> tcp = io::ip::tcp;</span><br><span class="line"><span class="keyword">using</span> work_guard_type = io::executor_work_guard&lt;io::io_context::executor_type&gt;;</span><br><span class="line"><span class="keyword">using</span> error_code = boost::system::error_code;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">io_context_group</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    io_context_group(<span class="built_in">std</span>::<span class="keyword">size_t</span> size)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// Create io_context and work guard pairs</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">std</span>::<span class="keyword">size_t</span> n = <span class="number">0</span>; n &lt; size; ++n)</span><br><span class="line">        {</span><br><span class="line">            contexts.emplace_back(<span class="built_in">std</span>::make_shared&lt;io::io_context&gt;());</span><br><span class="line">            guards.emplace_back(<span class="built_in">std</span>::make_shared&lt;work_guard_type&gt;(contexts.back()-&gt;get_executor()));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// Create threads</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; io_context : contexts)</span><br><span class="line">        {</span><br><span class="line">            threads.emplace_back([&amp;]</span><br><span class="line">            {</span><br><span class="line">                io_context-&gt;run();</span><br><span class="line">            });</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Join threads</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; thread : threads)</span><br><span class="line">        {</span><br><span class="line">            thread.join();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Round-robin io_context&amp; query</span></span><br><span class="line">    <span class="function">io::io_context&amp; <span class="title">query</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">return</span> *contexts[index++ % contexts.size()];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    <span class="keyword">using</span> vector_ptr = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">shared_ptr</span>&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line">    vector_ptr&lt;io::io_context&gt; contexts;</span><br><span class="line">    vector_ptr&lt;work_guard_type&gt; guards;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::thread&gt; threads;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::atomic&lt;<span class="built_in">std</span>::<span class="keyword">size_t</span>&gt; index = <span class="number">0</span>;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="function">io_context_group <span class="title">group</span><span class="params">(<span class="built_in">std</span>::thread::hardware_concurrency() * <span class="number">2</span>)</span></span>;</span><br><span class="line">    <span class="function">tcp::socket <span class="title">socket</span><span class="params">(group.query())</span></span>;</span><br><span class="line">    <span class="comment">// Schedule some tasks</span></span><br><span class="line">    group.run();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì—¬ëŸ¬ë¶„ì´ ì´ ì‹¤í–‰ ëª¨ë¸ì— ê´€í•´ ì•Œì•„ì•¼í•˜ëŠ” ë‚´ìš©ë“¤:</p>
<blockquote>
<p>Things you should know about this execution model:</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì€ strands ë˜ëŠ” ë‹¤ë¥¸ ì–´ë–¤ ë™ê¸°í™” ë„êµ¬ë“¤ë¡œ ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì„ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤: ëª¨ë“  io_contextê°€ ë‹¨ì¼ ì“°ë ˆë“œ ë‚´ì—ì„œ ì‹¤í–‰ë˜ê¸°ë•Œë¬¸ì— ë™ê¸°í™”ê°€ í•„ìš”í•œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë¬¼ë¡  ë™ì¼í•œ io_context í•¸ë“¤ëŸ¬ì—ì„œ ë™ì¼í•œ ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ”ê²ƒì— í•œí•´ì„œ ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ì ì€ í”ŒëŸ¬ìŠ¤ ìš”ì¸ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ğŸ’¡ You donâ€™t need to mess with strands or any other synchronization tools: since every io_context runs within a single thread, no data requires synchronization. As long as you access the same data from the same io_context handlers only. That looks like a plus.</p>
</blockquote>
<p>io_contextì—ì„œ ë™ì‘í•˜ëŠ” socketì´ë‚˜ acceptor ë“±ê³¼ ê°™ì€ ê°ì²´ë“¤ì€ io_context ê°ì²´ì— í•œ ë²ˆë§Œ ë°”ì¸ë”©ë©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì€ ì´ëŸ¬í•œ ê°ì²´ë“¤ì˜ ìƒëª…ì£¼ê¸° ë‚´ì—ì„œëŠ” ë˜ ë‹¤ë¥¸ io_contextì— ë‹¤ì‹œ ë°”ì¸ë”©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ ë§ì€ ê³§ ë™ì¼í•œ io_contextì— ë°”ì¸ë”©ëœ ëª¨ë“  ê°ì²´ë“¤ì€ ë‹¨ì¼ ì“°ë ˆë“œ ë‚´ì—ì„œ ì‹¤í–‰ë  ê²ƒì´ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ê²ƒì´ ê·¸ë“¤ì´ ëª¨ë“  ì‹œê°„ ë™ì•ˆì— ë™ì¼í•œ CPU ì½”ì–´ì— ë°”ì¸ë”©ëœë‹¤ëŠ” ì˜ë¯¸ëŠ” ì•„ë‹™ë‹ˆë‹¤ - OSëŠ” ê°€ì¥ ì í•©í•œ ì½”ì–´ë¼ê³  ìƒê°ë˜ëŠ” ê³³ì—ì„œ ì“°ë ˆë“œë¥¼ ì‹¤í–‰í•˜ë©° ì“°ë ˆë“œì˜ ìƒëª…ì£¼ê¸° ë‚´ì—ì„œ ì“°ë ˆë“œì˜ ì½”ì–´ê°€ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì“°ë ˆë“œê°€ ì‹¤í–‰ë˜ëŠ” ì½”ì–´ê°€ ì–´ë””ëƒì— ê´€ê³„ì—†ì´ ëª¨ë“  io_context ê°ì²´ë“¤ì€ í•­ìƒ (í˜„ì¬ì˜)ë‹¨ì¼ ì½”ì–´ ë‚´ì—ì„œ ì‹¤í–‰ë  ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì—¬ëŸ¬ë¶„ì€ í•˜ë‚˜ì˜ ì½”ì–´ê°€ 100% ì‚¬ìš©ë¥ ì„ ë³´ì´ëŠ” ë°˜ë©´ ë‹¤ë¥¸ ì½”ì–´ë“¤ì€ ë†€ê³  ìˆëŠ” ìƒíƒœì¸ ìƒí™©ì„ ì§ë©´í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì–¸ëœ»ë³´ê¸°ì— ì´ê²ƒì€ ë§ˆì´ë„ˆìŠ¤ ìš”ì¸ì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ğŸ’¡ Objects working on io_context, such as sockets, acceptors, etc, are bound to io_context object once. You canâ€™t rebind any of them to another io_context within their lifetime. Which means that all objects bound to the same io_context will run within a single thread. This doesnâ€™t mean that theyâ€™re bound to the same hardware CPU core all the time â€” an operating system runs a thread on the most suitable core and may change a threadâ€™s core within a threadâ€™s lifetime. However wherever that thread is running, all io_context objects will always run within a single (current) core. So you may face a situation when one core runs at 100% load while the others are idle. At a first glance thatâ€™s look like a minus.</p>
</blockquote>
<p>ì§„ì§œ ë§ˆì´ë„ˆìŠ¤ ìš”ì¸ì€ ì´ëŸ¬í•œ ì‚¬ì‹¤ ìì²´(í•˜ë‚˜ì˜ ì½”ì–´ê°€ 100% ì‚¬ìš©ë¥ ì„ ë³´ì´ëŠ” ë°˜ë©´ ë‹¤ë¥¸ ì½”ì–´ë“¤ì€ ë†€ê³  ìˆëŠ” ìƒíƒœ)ë¼ê¸° ë³´ë‹¤ëŠ” ì„ íƒí•œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜ ë˜ëŠ” íŠ¹ì •í•œ ì´ìš© ì‚¬ë¡€ì— ëŒ€í•œ ì‹¤í–‰ ëª¨ë¸ì˜ ë¶€ì ì ˆí•œ ì‚¬ìš©ì˜ ê²°ê³¼ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì „ì— ì‚´í´ë³¸ 1:N ì‹¤í–‰ ëª¨ë¸ì˜ ê²½ìš°ì—ëŠ” ìì²´ì ìœ¼ë¡œ ì—¬ëŸ¬ë¶„ì—ê²Œ ë°¸ëŸ°ì‹±ì„ ì œê³µí•´ì£¼ëŠ” ë°˜ë©´, ì´ ëª¨ë¸ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜(ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬) ê°œë°œìì— ì˜í•´ êµ¬í˜„ë˜ëŠ” ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ìš”êµ¬í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>ğŸ’¡ Well, itâ€™s not really a minus of the execution model itself, but a minus of a balancing algorithm chosen or a result of improper usage of the execution model for a specific use-case. While the execution model from the previous lesson do balancing for you, this lessonâ€™s model requires balancing algorithm to be implemented by the application (or a library) developer.</p>
</blockquote>
<p>ì´ì „ ê°•ì˜ì—ì„œ ì‚´í´ë³¸ 1:N ì‹¤í–‰ ëª¨ë¸ì€ ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ëª¨ë¸ì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ì„ íƒí•´ì•¼í•˜ëŠ” ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜ì´ ë¬´ì—‡ì¸ì§€ ëª¨ë¥´ê² ëŠ” ìƒí™©ì´ë¼ë©´ ì´ ëª¨ë¸ì„ ì„ íƒí•˜ì‹œë©´ ë©ë‹ˆë‹¤. ìœ„ì—ì„œ ì‚´í´ë³¸ 1:1 ì‹¤í–‰ ëª¨ë¸ì€ ë” ë¹ ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì€ íŠ¹ë³„í•œ ì¼€ì´ìŠ¤ì— ëŒ€í•´ì„œë§Œ ì•Œë§ì€ ì„ íƒì…ë‹ˆë‹¤: ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë˜ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ ëª‡ê°€ì§€ íŠ¹ë³„í•œ ë°©ì‹ìœ¼ë¡œ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê²½ìš°ì—. ê·¸ë¦¬ê³  ì´ íŠ¹ë³„í•œ ë°©ì‹ì€ ì ì ˆí•œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ìš”êµ¬í•©ë‹ˆë‹¤. ìœ„ì—ì„œ ë³¸ ì˜ˆì œì—ì„œëŠ” ë¼ìš´ë“œë¡œë¹ˆ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í–ˆê³ , ì¼ë°˜ì ìœ¼ë¡œ ê·¸ ì•Œê³ ë¦¬ì¦˜ì´ ë‚˜ì˜ë‹¤ í˜¹ì€ ì¢‹ë‹¤ë¼ê³  ë§í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤ - ì´ ì•Œê³ ë¦¬ì¦˜ì´ ì ì ˆí•œì§€ì— ëŒ€í•œ íŒë‹¨ì€ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ì˜ ìƒí˜¸ì‘ìš© ë°©ì‹ì´ ë¬´ì—‡ì´ëƒì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìš°ë¦¬ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë§ì€ ëœë¤í•œ ê°€ë²¼ìš´ ì‘ì—…ë“¤ì„ ì²˜ë¦¬í•˜ëŠ” ê²½ìš°ë¼ë©´ ìë™í™”ëœ ë°¸ëŸ°ì„œë³´ë‹¤ ë” ë‚˜ì€ í•´ê²°ì±…ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ¬í•œ íŒë‹¨ì„ ëª…í™•íˆ í•˜ëŠ”ê²ƒì€ ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤. ì»¤ìŠ¤í…€ ë°¸ëŸ°ì„œì˜ ë‹¤ë¥¸ ì´ìš© ì‚¬ë¡€ë‚˜ ë””ìì¸ íŒ¨í„´ë“¤ì€ ì´ë²ˆ ê°•ì˜ì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤. ì´ê²ƒë“¤ì— ëŒ€í•´ì„œëŠ” ë‚˜ì¤‘ì— ë‹¤ë£¨ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ë‹¤ì‹œ í•œë²ˆ: ì—¬ëŸ¬ë¶„ì´ ì–´ë– í•œ íƒ€ì…ì˜ ì‹¤í–‰ ëª¨ë¸ì„ ì‚¬ìš©í•´ì•¼í• ì§€ í™•ì‹ ì´ ì„œì§€ ì•ŠëŠ”ë‹¤ë©´ ì´ì „ ê°•ì˜ì—ì„œ ì‚´í´ë³¸ 1:N ì‹¤í–‰ ëª¨ë¸ì„ ì„ íƒí•˜ëŠ”ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>ğŸ’¡ The execution model from the previous lesson is a universal one. Pick it if you donâ€™t really know what balancing algorithm you should choose. The execution model from the current lesson may work faster though. However it best fit for special cases only: when your application interacts with other applications in some of special ways. And those special ways require a proper balancing algorithms. In the example above we used a round-robin algorithm, and we canâ€™t really say if that algorithm is bad or good in general â€” that depends on a way of interaction of our application with other applications. For example, if our application handles a lot of random lightweight tasks then it could be a better solution than the automatic balancer. However things could be not as obvious as theyâ€™re appear to be at a first glance. Different use-cases and design patterns of a custom balancer is out of scope of this lesson. We will discuss them some later. Once again: if youâ€™re not sure what type of execution model you should choose then pick an automatic one from the previous lesson.</p>
</blockquote>
<br>

<h2 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h2><p>ì§€ê¸ˆê¹Œì§€ boost::io_contextì˜ ì‹¤í–‰ ëª¨ë¸(execution model)ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì •ë¦¬í•´ë³´ë©° í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ì—¬ê¸°ì„œ ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br><br></p>
<ul>
<li>boost::io_contextì˜ ì‹¤í–‰ ëª¨ë¸ì´ë€ í•˜ë‚˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ íŠ¹ì •í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” <em><strong>thread</strong></em>ì™€ ê·¸ ì“°ë ˆë“œë¥¼ êµ¬ë™í•˜ëŠ” ê³µê°„ì¸ <em><strong>io_context</strong></em>ê°„ì˜ ê´€ê³„ë¥¼ ê·œì •í•´ë†“ì€ ê²ƒì´ë‹¤.</li>
<li>boost::io_contextì˜ ì‹¤í–‰ ëª¨ë¸ì—ëŠ” 1:N ë°©ì‹ê³¼ 1:1 ë°©ì‹ì´ ìˆë‹¤. (io_context:thread)</li>
<li>1:N ì‹¤í–‰ ëª¨ë¸ì˜ ê²½ìš°ì—ëŠ” Nê°œì˜ ì“°ë ˆë“œë¥¼ í•˜ë‚˜ì˜ io_contextì—ì„œ ì²˜ë¦¬í•˜ëŠ” êµ¬ì¡°ì´ë‹¤.</li>
<li>1:1 ì‹¤í–‰ ëª¨ë¸ì˜ ê²½ìš°ì—ëŠ” ëª¨ë“  ì“°ë ˆë“œê°€ ê°ìì˜ io_contextë¥¼ ê°–ëŠ” êµ¬ì¡°ì´ë‹¤.</li>
<li>1:N ì‹¤í–‰ ëª¨ë¸ì€ Nê°œì˜ ì“°ë ˆë“œë“¤ì— ëŒ€í•´ì„œ ìì²´ì ì¸ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ ì œê³µí•˜ì§€ë§Œ, 1:1 ì‹¤í–‰ ëª¨ë¸ì˜ ê²½ìš°ì—ëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤(ì ì ˆí•œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ê°œë°œìê°€ ì„ íƒí•´ì„œ ì ìš©í•´ì•¼í•¨).</li>
<li>ì–´ë– í•œ íƒ€ì…ì˜ ì‹¤í–‰ ëª¨ë¸ì„ ì‚¬ìš©í•´ì•¼í• ì§€ í™•ì‹ ì´ ì„œì§€ ì•ŠëŠ”ë‹¤ë©´ 1:N ëª¨ë¸ì„ íƒí•˜ë¼.</li>
</ul>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://dens.website/tutorials/cpp-asio/multithreading">https://dens.website/tutorials/cpp-asio/multithreading</a></li>
<li><a href="https://dens.website/tutorials/cpp-asio/multithreading-2">https://dens.website/tutorials/cpp-asio/multithreading-2</a></li>
</ul>
]]></content>
      <categories>
        <category>ê¸°ìˆ ë¬¸ì„œ ë²ˆì—­</category>
      </categories>
      <tags>
        <tag>boost asio</tag>
        <tag>io_context</tag>
        <tag>thread</tag>
        <tag>execution model</tag>
      </tags>
  </entry>
  <entry>
    <title>I/OëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ?</title>
    <url>/2021/07/13/os-io-system/</url>
    <content><![CDATA[<p>ìš´ì˜ ì²´ì œì˜ ë°”ì´ë¸” <a href="https://www.wiley.com/en-us/Operating+System+Concepts%2C+10th+Edition-p-9781119320913">Operating System Concepts</a>(í”íˆ ê³µë£¡ì±…ğŸ¦•ì´ë¼ê³ ë“¤ í•˜ì£ )ì„ ë°”íƒ•ìœ¼ë¡œ I/O ì‹œìŠ¤í…œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<!-- toc -->
<br>

<h2 id="I-Oê°€-ëŒ€ì²´-ë­ì§€"><a href="#I-Oê°€-ëŒ€ì²´-ë­ì§€" class="headerlink" title="I/Oê°€ ëŒ€ì²´ ë­ì§€?"></a>I/Oê°€ ëŒ€ì²´ ë­ì§€?</h2><p>ì»´í“¨í„°ëŠ” í¬ê²Œ 2ê°€ì§€ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆëŠ”ë° í•˜ë‚˜ëŠ” <span class="highlight-text" style="background-color:#fbf595;">ì—°ì‚°(computing)</span> ì´ê³ , í•˜ë‚˜ëŠ” I/O ì¦‰, <span class="highlight-text" style="background-color:#fbf595;">ì…ì¶œë ¥ì„ ì²˜ë¦¬</span>í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì»´í“¨í„°ì˜ ì£¼ìš”í•œ ì—­í• ì€ ì…ì¶œë ¥ì€ ì²˜ë¦¬í•˜ëŠ” I/Oë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. (ìš°ë¦¬ê°€ ì›¹ í˜ì´ì§€ì— ì ‘ì†í•œë‹¤ê±°ë‚˜ íŒŒì¼ì„ í¸ì§‘í•˜ê±°ë‚˜ ë˜ëŠ” ì–´ë– í•œ ì •ë³´ë¥¼ ì½ê±°ë‚˜ ì…ë ¥í•˜ê³ ì í•  ë•Œ ì—„ì²­ë‚œ ì—°ì‚°ì´ ì¼ì–´ë‚˜ì§€ëŠ” ì•Šì£ ?)<br>ì»´í“¨í„°ì—ì„œ ìš´ì˜ ì²´ì œëŠ” ì´ëŸ¬í•œ ì…ì¶œë ¥ì— ëŒ€í•œ ìˆ˜í–‰ê³¼ ë¬¼ë¦¬ì ì¸ ì…ì¶œë ¥ ì¥ì¹˜(í•˜ë“œì›¨ì–´)ë¥¼ ê´€ë¦¬í•˜ê³  ì»¨íŠ¸ë¡¤í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ (í‚¤ë³´ë“œì˜ ì…ë ¥ê³¼ ê°™ì€) í•˜ë“œì›¨ì–´ê°€ ì£¼ëŠ” ì…ì¶œë ¥ ì‹ í˜¸ë¥¼ ì–´ë–»ê²Œ ë‚´ PCì— ìˆëŠ” í”„ë¡œê·¸ë¨ì´ ì „ë‹¬ë°›ì•„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê±¸ê¹Œìš”?</p>
<hr>
<h2 id="I-O-ìš”ì²­ì€-ì–´ë–»ê²Œ-ì²˜ë¦¬ë˜ëŠ”-ê±¸ê¹Œ"><a href="#I-O-ìš”ì²­ì€-ì–´ë–»ê²Œ-ì²˜ë¦¬ë˜ëŠ”-ê±¸ê¹Œ" class="headerlink" title="I/O ìš”ì²­ì€ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ëŠ” ê±¸ê¹Œ?"></a>I/O ìš”ì²­ì€ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ëŠ” ê±¸ê¹Œ?</h2><p>ê³µë£¡ì±…ğŸ¦•ì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ I/O ìš”ì²­ì´ ì²˜ë¦¬ë˜ëŠ” ê³¼ì •ì„ í•˜ë‚˜ì”© ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br><br></p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/os-io-system-figure1.png" alt=""></div>

<ol>
<li>ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ëŠ” ì—´ê³  ìˆë˜ íŒŒì¼ì˜ íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°(fd)ë¥¼ í†µí•´ blocking í•¨ìˆ˜ì¸ read()ë¥¼ í˜¸ì¶œ(ì‹œìŠ¤í…œ ì½œ)í•©ë‹ˆë‹¤.</li>
<li>ì»¤ë„ ë‚´ë¶€ì˜ ì‹œìŠ¤í…œ ì½œ ì½”ë“œì—ì„œëŠ” ì •í™•ì„±ì„ ìœ„í•´ íŒŒë¼ë¯¸í„°ë“¤ì„ ì²´í¬í•©ë‹ˆë‹¤. ì…ë ¥ ê°’ì¸ ê²½ìš°ì—ëŠ” í•´ë‹¹ ë°ì´í„°ê°€ ì´ë¯¸ ë²„í¼ ìºì‹œì— ì¡´ì¬í•˜ì—¬ ì ‘ê·¼ì´ ê°€ëŠ¥í•œ ìƒíƒœë¼ë©´ ê·¸ ë°ì´í„°ëŠ” ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ë¡œ ê³§ì¥ ë°˜í™˜ë˜ê³  I/O ìš”ì²­ì€ ì™„ë£Œë©ë‹ˆë‹¤.</li>
<li>ë§Œì•½ ë²„í¼ ìºì‹œì— ë°ì´í„°ê°€ ì—†ëŠ” ìƒíƒœë¼ë©´ ë¬¼ë¦¬ì ì¸ I/Oê°€ ë°˜ë“œì‹œ ìˆ˜í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì‹œìŠ¤í…œ ì½œì„ ìš”ì²­í•œ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ëŠ” ì‹¤í–‰ í(run queue)ì—ì„œ ì‚­ì œë˜ê³  ëŒ€ê¸° í(wait queue)ì— ì¶”ê°€ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ ì‹œìŠ¤í…œ ì½œì— ì˜í•œ I/O ì‘ì—… ìš”ì²­ì´ ìŠ¤ì¼€ì¤„ì— í¬í•¨ë©ë‹ˆë‹¤. ê¶ê·¹ì ìœ¼ë¡œ I/O ì„œë¸Œ ì‹œìŠ¤í…œì´ í•´ë‹¹ ìš”ì²­ì„ ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. I/O ì‘ì—… ìš”ì²­ì´ ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ë¡œ ì „ë‹¬ë˜ëŠ” ë°©ì‹ì€ ìš´ì˜ ì²´ì œì˜ ì¢…ë¥˜ì— ë”°ë¼ subroutine callì´ ë  ìˆ˜ë„ ìˆê³ , in-kernel messageê°€ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</li>
<li>ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ëŠ” ì»¤ë„ ë²„í¼ ê³µê°„ì„ í• ë‹¹ë°›ì•„ ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•  ì¤€ë¹„ë¥¼ í•˜ê³  I/O ìŠ¤ì¼€ì¤„ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ê¶ê·¹ì ìœ¼ë¡œ ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ëŠ” ë””ë°”ì´ìŠ¤ ì»¨íŠ¸ë¡¤ ë ˆì§€ìŠ¤í„°ë¥¼ í†µí•´ì„œ ë””ë°”ì´ìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²Œ ì‹¤ì œ ì»¤ë§¨ë“œë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.</li>
<li>ë””ë°”ì´ìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë°ì´í„° ì „ì†¡ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ë””ë°”ì´ìŠ¤ í•˜ë“œì›¨ì–´ë¥¼ ë™ì‘ì‹œí‚µë‹ˆë‹¤. <span class="highlight-text red">ì—¬ê¸°ê¹Œì§€ê°€ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì—ì„œì˜ I/O ìš”ì²­ì´ ì‹¤ì œ í•˜ë“œì›¨ì–´ê¹Œì§€ ë„ë‹¬í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤ğŸ˜</span></li>
<li>ì§€ê¸ˆ ë³´ê³  ìˆëŠ” ì˜ˆì‹œì˜ ê²½ìš°ì— (ë””ë°”ì´ìŠ¤ë¡œ I/O ìš”ì²­ ì „ì†¡ì´ ì™„ë£Œëœ ê²½ìš° ì¸í„°ëŸ½íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ”)DMA ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì „ì†¡ ê³¼ì •ì„ ê´€ë¦¬í•œë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.</li>
<li>ì¸í„°ëŸ½íŠ¸ ë²¡í„° í…Œì´ë¸”ì„ ì°¸ì¡°í•˜ì—¬ í•´ë‹¹ ì¸í„°ëŸ½íŠ¸ ì‹ í˜¸ê°€ ì ì ˆí•œ ì¸í„°ëŸ½íŠ¸ í•¸ë“¤ëŸ¬ì—ê²Œ ì „ë‹¬ë˜ê³ , í•´ë‹¹ ì¸í„°ëŸ½íŠ¸ í•¸ë“¤ëŸ¬ëŠ” í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ë¡œ ì‹ í˜¸ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.</li>
<li>ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ê°€ ì™„ë£Œëœ I/O ìš”ì²­ ìƒíƒœë¥¼ ê²°ì •í•˜ê³  ì»¤ë„ I/O ì„œë¸Œ ì‹œìŠ¤í…œì—ê²Œ ì „ë‹¬ëœ ìš”ì²­ ì •ë³´ ì²˜ë¦¬ê°€ ì™„ë£Œëë‹¤ê³  ì•Œë ¤ì¤ë‹ˆë‹¤.</li>
<li>ì»¤ë„ì€ ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ë¡œë¶€í„° ì „ë‹¬ë°›ì€ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³  ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì˜ ì£¼ì†Œ ê³µê°„ì— ì½”ë“œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ëŠ” ëŒ€ê¸° í(wait queue)ì—ì„œ ì¤€ë¹„ í(ready queue)ë¡œ ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤.</li>
<li>ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ë¥¼ ì¤€ë¹„ í(ready queue)ë¡œ ì´ë™ì‹œí‚¤ëŠ” ì‘ì—…ì€ í•´ë‹¹ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì˜ blocking ìƒíƒœë¥¼ í’€ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ì‹œ CPUì— í• ë‹¹í•˜ê³  ì‹œìŠ¤í…œ ì½œì´ ì™„ë£Œë˜ëŠ” ì‹œì ì— ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ëŠ” ì‹¤í–‰ ìƒíƒœë¡œ ì¬ê°œë©ë‹ˆë‹¤.</li>
</ol>
<hr>
<h2 id="ë¡œì»¬-PCì˜-í‚¤ë³´ë“œ-ì…ë ¥ì„-ì›ê²©ì§€-PCë¡œ-ì „ë‹¬í•˜ëŠ”-ê³¼ì •"><a href="#ë¡œì»¬-PCì˜-í‚¤ë³´ë“œ-ì…ë ¥ì„-ì›ê²©ì§€-PCë¡œ-ì „ë‹¬í•˜ëŠ”-ê³¼ì •" class="headerlink" title="ë¡œì»¬ PCì˜ í‚¤ë³´ë“œ ì…ë ¥ì„ ì›ê²©ì§€ PCë¡œ ì „ë‹¬í•˜ëŠ” ê³¼ì •"></a>ë¡œì»¬ PCì˜ í‚¤ë³´ë“œ ì…ë ¥ì„ ì›ê²©ì§€ PCë¡œ ì „ë‹¬í•˜ëŠ” ê³¼ì •</h2><p>ê³µë£¡ì±…ğŸ¦•ì—ì„œ ê°€ì ¸ì˜¨ ì˜ˆì‹œë¥¼ í†µí•´ í‚¤ë³´ë“œë¡œ ë¶€í„° ë“¤ì–´ì˜¨ ì…ë ¥ ì‹ í˜¸ê°€ ì–´ë–»ê²Œ ë‚´ PCì˜ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ”ì§€, ë” ë‚˜ì•„ê°€ ì „ë‹¬ë°›ì€ í‚¤ë³´ë“œ ì…ë ¥ì„ ì–´ë–»ê²Œ ë©€ë¦¬ ë–¨ì–´ì§„ ì›ê²©ì§€ PCì— ì „ë‹¬í•  ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.<br><br></p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/os-io-system-figure2.png" alt=""></div>

<p>ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ë˜í•œ ë†’ì€ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹˜ ë¹„ìœ¨ì˜ ì›ì¸ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ ì¥ë¹„ì—ì„œ ë˜ ë‹¤ë¥¸ ì¥ë¹„ë¡œ ì›ê²© ë¡œê·¸ì¸ì„ í•˜ëŠ” ìƒí™©ì„ ì˜ˆë¡œ ë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤. ë¡œì»¬ ì¥ë¹„ì—ì„œ ì…ë ¥ ë˜ëŠ” ê°ê°ì˜ ë¬¸ìë“¤ì€ ì›ê²©ì§€ ì¥ë¹„ë¡œ ì „ë‹¬ë¼ì•¼ í•©ë‹ˆë‹¤. ë¡œì»¬ ì¥ë¹„ì—ì„œì˜ ìƒí™©ì„ ë³´ë©´ ë¬¸ìê°€ ì…ë ¥ë˜ê³ ; í‚¤ë³´ë“œ ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•˜ë©°; ì…ë ¥ëœ ë¬¸ìëŠ” ì¸í„°ëŸ½íŠ¸ í•¸ë“¤ëŸ¬ì™€ ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„, ì»¤ë„ì„ ì°¨ë¡€ëŒ€ë¡œ í†µê³¼í•˜ì—¬ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì— ë„ë‹¬í•©ë‹ˆë‹¤. ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ëŠ” ì›ê²©ì§€ ì¥ë¹„ì— ë¬¸ìë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•´ ë„¤íŠ¸ì›Œí¬ I/O ì‹œìŠ¤í…œ ì½œì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Network traffic can also cause a high context-switch rate. Consider, for instance, a remote login from one machine to another. Each character typed on the local machine must be transported to the remote machine. On the local machine, the character is typed; a keyboard interrupt is generated; and the character is passed through the interrupt handler to the device driver, to the kernel, and then to the user process. The user process issues a network I/O system call to send the character to the remote machine.</p>
</blockquote>
<p>ì´í›„ ì…ë ¥ëœ ë¬¸ìëŠ” ë„¤íŠ¸ì›Œí¬ íŒ¨í‚·ì„ ìƒì„±í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë ˆì´ì–´ë¥¼ í†µí•´ ë¡œì»¬ ì»¤ë„ì—ì„œ ë„¤íŠ¸ì›Œí¬ ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ë¡œ í˜ëŸ¬ ë“¤ì–´ê°‘ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ëŠ” ì „ì†¡í•  ë¬¸ìê°€ í¬í•¨ëœ ë„¤íŠ¸ì›Œí¬ íŒ¨í‚·ì„ ë„¤íŠ¸ì›Œí¬ ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²Œ ì „ë‹¬í•˜ë©° ì´ ê³¼ì •ì—ì„œ ë¬¸ìê°€ ì „ì†¡ë˜ê³  ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. ì¸í„°ëŸ½íŠ¸ëŠ” ì»¤ë„ì„ í†µí•´ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ë¡œ ë‹¤ì‹œ ëŒì•„ê°€ê²Œ ë˜ëŠ”ë° ì´ëŠ” ë„¤íŠ¸ì›Œí¬ I/O ì‹œìŠ¤í…œ ì½œì´ ì™„ë£Œë˜ì—ˆìŒì„ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì— ì•Œë¦¬ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The character then flows into the local kernel, through the network layers that construct a network packet, and into the network device driver. The network device driver transfers the packet to the network controller, which sends the character and generates an interrupt. The interrupt is passed back up through the kernel to cause the network I/O system call to complete.</p>
</blockquote>
<p>ì´ì œ ì›ê²©ì§€ ì‹œìŠ¤í…œ(ìœ„ ê·¸ë¦¼ì˜ receiving system)ì˜ ë„¤íŠ¸ì›Œí¬ í•˜ë“œì›¨ì–´ëŠ” (ìœ„ ê·¸ë¦¼ì˜ sending systemì—ì„œ ì „ì†¡í•œ)íŒ¨í‚·ì„ ìˆ˜ì‹ í•˜ë©° íŒ¨í‚· ìˆ˜ì‹ ì— ëŒ€í•œ ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒë©ë‹ˆë‹¤. ì „ì†¡ëœ ë¬¸ìëŠ” ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œì„ í†µí•´ ì–¸íŒ¨í‚¤ì§•ë˜ê³  ì ì ˆí•œ ë„¤íŠ¸ì›Œí¬ ë°ëª¬ìœ¼ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ë°ëª¬ì€ ì´ ì „ì†¡ê³¼ ê´€ë ¨ëœ ì›ê²©ì§€ ì¥ë¹„ì˜ ë¡œê·¸ì¸ ì„¸ì…˜ì„ í™•ì¸í•˜ì—¬ í•´ë‹¹ ì„œë¸Œ ë°ëª¬ìœ¼ë¡œ íŒ¨í‚·ì„ ì „ë‹¬í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì—ì„œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹˜ì™€ ìŠ¤í…Œì´íŠ¸ ìŠ¤ìœ„ì¹˜ê°€ ìˆ˜ë°˜ë©ë‹ˆë‹¤ (Figure 12.16).</p>
<blockquote>
<p>Now, the remote systemâ€™s network hardware receives the packet, and an interrupt is generated. The character is unpacked from the network protocols and is given to the appropriate network daemon. The network daemon identifies which remote login session is involved and passes the packet to the appropriate subdaemon for that session. Throughout this flow, there are context switches and state switches (Figure 12.16).</p>
</blockquote>
<hr>
<h2 id="I-Oì—-ëŒ€í•´-ì •ë¦¬í•´ë³´ë©´"><a href="#I-Oì—-ëŒ€í•´-ì •ë¦¬í•´ë³´ë©´" class="headerlink" title="I/Oì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë©´"></a>I/Oì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë©´</h2><span class="highlight-text" style="background-color:#fbf595;">I/Oë€ í•˜ë“œì›¨ì–´ ì¥ì¹˜ë¥¼ í†µí•œ ì…ì¶œë ¥ ì •ë³´ë¥¼ ì»´í“¨í„°ì—ì„œ êµ¬ë™ ì¤‘ì¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì»¨íŠ¸ë¡¤í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì¼ì¢…ì˜ ì¸í„°í˜ì´ìŠ¤</span>ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

<p>I/O ì‹œìŠ¤í…œ ì½œì€ ë¬¼ë¦¬ì ì¸ ì¥ì¹˜ì™€ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì˜ ë§ì€ ì†Œí”„íŠ¸ì›¨ì–´ ê³„ì¸µì„ ì˜¤ê°€ëŠ” ì¼ì´ê¸° ë•Œë¬¸ì— CPU ì‚¬ìš© ì¸¡ë©´ì—ì„œ ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ì‘ì—…ì´ê¸°ë„ í•©ë‹ˆë‹¤. ì´ ë‘˜ ê°„ì— ì¡´ì¬í•˜ëŠ” ê³„ì¸µë“¤ì€ ì»¤ë„ì˜ ë³´í˜¸ ê²½ê³„ë¥¼ ì˜¤ê°€ë©° ë°œìƒí•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ë‚˜ I/O ì¥ì¹˜ë¥¼ ì„œë¹„ìŠ¤í•˜ê¸° ìœ„í•œ ì‹œê·¸ë„ë§ì´ë‚˜ ì¸í„°ëŸ½íŠ¸ í•¸ë“¤ë§, ì»¤ë„ ë²„í¼ì™€ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ê°„ì˜ ë°ì´í„° ë³µì‚¬ ê³¼ì •ì—ì„œì˜ CPUë‚˜ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì˜ ë¶€í•˜ë¡œë¶€í„° ë°œìƒí•˜ëŠ” ì¼ì¢…ì˜ ì˜¤ë²„í—¤ë“œì…ë‹ˆë‹¤.</p>
<blockquote>
<p>I/O system calls are costly in terms of CPU consumption because of the many layers of software between a physical device and an application. These layers imply overhead from several sources: context switching to cross the kernelâ€™s protection boundary, signal and interrupt handling to service the I/O devices, and the load on the CPU and memory system to copy data between kernel buffers and application space.</p>
</blockquote>
<hr>
<h2 id="I-Oë¥¼-ì¢€-ë”-íš¨ìœ¨ì ìœ¼ë¡œ-ì²˜ë¦¬í•˜ê¸°-ìœ„í•´ì„œëŠ”"><a href="#I-Oë¥¼-ì¢€-ë”-íš¨ìœ¨ì ìœ¼ë¡œ-ì²˜ë¦¬í•˜ê¸°-ìœ„í•´ì„œëŠ”" class="headerlink" title="I/Oë¥¼ ì¢€ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ”?"></a>I/Oë¥¼ ì¢€ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ”?</h2><p>I/O ì²˜ë¦¬ ê³¼ì •ì˜ íš¨ìœ¨ì„±ì„ ë†’ì´ê¸° ìœ„í•œ ëª‡ê°€ì§€ ì´ë¡ ì ì¸ ê°€ì´ë“œë¼ì¸ì´ ìˆìŠµë‹ˆë‹¤.<br><br></p>
<ol>
<li>ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹˜ì˜ íšŸìˆ˜ë¥¼ ì¤„ì¸ë‹¤.</li>
<li>ë””ë°”ì´ìŠ¤ ì¥ì¹˜ì™€ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°„ì˜ ë°ì´í„° êµí™˜ ê³¼ì •ì—ì„œ ë°˜ë“œì‹œ ìˆ˜í–‰ë¼ì•¼ í•˜ëŠ” ë©”ëª¨ë¦¬ ìƒì˜ ë°ì´í„° ë³µì‚¬ íšŸìˆ˜ë¥¼ ì¤„ì¸ë‹¤.</li>
<li>ëŒ€ìš©ëŸ‰ ì „ì†¡, ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë¡¤, í´ë§ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì¸í„°ëŸ½íŠ¸ì˜ ë¹ˆë„ë¥¼ ì¤„ì¸ë‹¤.</li>
<li>CPUì—ì„œ ë°œìƒí•˜ëŠ” ë‹¨ìˆœ ë°ì´í„° ë³µì‚¬ ì‘ì—…ì„ ì¤„ì´ê¸° ìœ„í•´ DMA-knowledgable ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì±„ë„ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë™ì‹œì„±ì„ ë†’ì¸ë‹¤.</li>
<li>ë””ë°”ì´ìŠ¤ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œì˜ ì‘ì—…ì„ CPUì™€ Busì—ì„œì˜ ì‘ì—…ê³¼ ë™ì‹œì— ì²˜ë¦¬í•˜ê¸° ìœ„í•´ I/Oì˜ ê¸°ë³¸ì ì¸ ì²˜ë¦¬ëŠ” í•˜ë“œì›¨ì–´ë¡œ ì´ê´€í•œë‹¤.</li>
<li>CPU, ë©”ëª¨ë¦¬ ì„œë¸Œì‹œìŠ¤í…œ, Bus, I/O ìˆ˜í–‰ê°„(ì´ë“¤ ì¤‘ ì–´ëŠ í•œìª½ì— ì¼ì´ ëª°ë¦°ë‹¤ëŠ”ê±´ ë‹¤ë¥¸ ìª½ì€ ë…¸ëŠ” ì‹œê°„ì´ ë°œìƒí•œë‹¤ëŠ” ì˜ë¯¸)ì˜ ë°¸ëŸ°ìŠ¤ë¥¼ ë§ì¶˜ë‹¤.</li>
</ol>
<hr>
<h2 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h2><p>ì§€ê¸ˆê¹Œì§€ ê³µë£¡ì±…ğŸ¦•ì„ ë°”íƒ•ìœ¼ë¡œ I/O ì‹œìŠ¤í…œì— ëŒ€í•´ ê°„ëµíˆ ì •ë¦¬í•´ë³´ëŠ” ì‹œê°„ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. I/O ì²˜ë¦¬ ë‹¨ê³„ë³„ë¡œ ì¢€ ë” ì„¸ë¶€ì ì¸ ë™ì‘ ë°©ì‹ì„ ì•Œê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<br>
<br>
<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li>Abraham Silberschatz, Greg Gagne, Peter B. Galvin. (2018). Operating System Concepts, 10th Edition. Wiley</li>
</ul>
]]></content>
      <categories>
        <category>ìš´ì˜ì²´ì œ</category>
      </categories>
      <tags>
        <tag>I/O</tag>
        <tag>I/O system</tag>
      </tags>
  </entry>
  <entry>
    <title>io_context::run í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ëŠ” ê²ƒì„ ë§‰ëŠ” ë°©ë²•</title>
    <url>/2022/01/11/prevent-io-context-run-from-returning/</url>
    <content><![CDATA[<p><em><strong>ë­í•˜ëŠ” ë†ˆì¸ì§€ëŠ” ì•Œê³  ì“°ì</strong></em> ì‹œë¦¬ì¦ˆì˜ ë‘ë²ˆì§¸ ì£¼ì œëŠ” <code>boost io_context::run í•¨ìˆ˜ë¥¼ ì‹¤í–‰ ìƒíƒœë¡œ ìœ ì§€í•˜ëŠ” ë°©ë²•</code>ì…ë‹ˆë‹¤.</p>
<span id="more"></span>
<p>í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” io_contextë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ run í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼í•œë‹¤ëŠ” ì£¼ì…ì‹(?) êµìœ¡ì—ì„œ ë²—ì–´ë‚˜ê³ ì boost io_context::run í•¨ìˆ˜ì— ëŒ€í•´ ê°„ëµíˆ ì•Œì•„ë³´ê³ , ìš°ë¦¬ì˜ ìµœì¢… ëª©í‘œì¸ io_contextì— ë‹¹ì¥ì— í• ë‹¹ëœ ì‘ì—…ì´ ì—†ë”ë¼ë„ io_context::run í•¨ìˆ˜ë¥¼ ì‹¤í–‰ ìƒíƒœë¡œ ìœ ì§€í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. <a href="https://dens.website/tutorials/cpp-asio/work">Prevent io_context::run from returning</a> ì‚¬ì´íŠ¸ì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë‹ˆ ì°¸ê³ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
<br>

<!-- toc -->

<br>

<h2 id="io-context-run-í•¨ìˆ˜ë€"><a href="#io-context-run-í•¨ìˆ˜ë€" class="headerlink" title="io_context::run í•¨ìˆ˜ë€?"></a>io_context::run í•¨ìˆ˜ë€?</h2><p>ë¨¼ì € <a href="https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/reference/io_context/run/overload1.html">Boost ê³µì‹ ë§¤ë‰´ì–¼</a>ì˜ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ io_context::run í•¨ìˆ˜ì— ëŒ€í•´ ê°„ëµíˆ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<br>

<p>io_context::run í•¨ìˆ˜ëŠ” io_context ê°ì²´ì˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë£¨í”„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Run the io_context objectâ€™s event processing loop.</p>
</blockquote>
<p>run() í•¨ìˆ˜ëŠ” ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ê±°ë‚˜ ë”ì´ìƒ ì²˜ë¦¬í•  í•¸ë“¤ëŸ¬ê°€ ì—†ì„ë•Œê¹Œì§€ ë¸”ë¡ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. </p>
<blockquote>
<p>The run() function blocks until all work has finished and there are no more handlers to be dispatched, or until the io_context has been stopped.</p>
</blockquote>
<p>io_contextê°€ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³µê°„ì¸ ì“°ë ˆë“œ í’€ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ ë‹¤ì¤‘ ì“°ë ˆë“œì—ì„œë„ run() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì“°ë ˆë“œ í’€ì—ì„œ ëŒ€ê¸° ì¤‘ì¸ ì“°ë ˆë“œë“¤ì€ ëª¨ë‘ ë™ë“±í•œ ìê²©ì„ ê°€ì§€ë©° io_contextëŠ” í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸°ìœ„í•´ ì„ì˜ë¡œ ê·¸ë“¤ì¤‘ í•œê°œë¥¼ ì„ íƒí•˜ê²Œë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Multiple threads may call the run() function to set up a pool of threads from which the io_context may execute handlers. All threads that are waiting in the pool are equivalent and the io_context may choose any one of them to invoke a handler.</p>
</blockquote>
<p>run() í•¨ìˆ˜ë¡œ ë¶€í„° ë¹ ì ¸ë‚˜ì˜¤ê¸° ìœ„í•œ ì¼ë°˜ì ì¸ ë°©ë²•ì€ io_context ê°ì²´ê°€ ì¢…ë£Œë˜ë„ë¡í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. run(), run_one(), poll() ë˜ëŠ” poll_one() í•¨ìˆ˜ë¥¼ restart() í•¨ìˆ˜ í˜¸ì¶œì—†ì´ ì—°ì†í•´ì„œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì—ëŠ” ê³§ë°”ë¡œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë¹ ì ¸ë‚˜ì˜¤ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>A normal exit from the run() function implies that the io_context object is stopped (the stopped() function returns true). Subsequent calls to run(), run_one(), poll() or poll_one() will return immediately unless there is a prior call to restart().</p>
</blockquote>
<p>ì—¬ê¸°ì„œ ì €í¬ê°€ ì£¼ëª©í•  ë‚´ìš©ì€ io_context::run í•¨ìˆ˜ëŠ” (ì˜ë„ì ì¸ ì¢…ë£Œ í•¨ìˆ˜ì˜ í˜¸ì¶œì„ ì œì™¸í•˜ê³ ëŠ”) io_context ìƒì˜ ëª¨ë“  ì‘ì—…ì´ ì¢…ë£Œë˜ê³ , ë”ì´ìƒ io_contextì— í• ë‹¹(dispatch)ëœ í•¸ë“¤ëŸ¬ê°€ ì—†ì„ë•Œê¹Œì§€ë§Œ ë¸”ë¡(block)ìƒíƒœë¥¼ ìœ ì§€í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<br>

<h2 id="io-context-run-í•¨ìˆ˜ê°€-ë°˜í™˜ë˜ì§€-ì•Šë„ë¡-í•˜ëŠ”-ë°©ë²•"><a href="#io-context-run-í•¨ìˆ˜ê°€-ë°˜í™˜ë˜ì§€-ì•Šë„ë¡-í•˜ëŠ”-ë°©ë²•" class="headerlink" title="io_context::run í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ë°©ë²•"></a>io_context::run í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ë°©ë²•</h2><p>ê·¸ë ‡ë‹¤ë©´ io_contextì— ë‹¹ì¥ì— í• ë‹¹í•  ì‘ì—…ì€ ì—†ë”ë¼ë„ run í•¨ìˆ˜ë¥¼ ë¸”ë¡ìƒíƒœë¡œ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”? ì—¬ê¸°ì„œ ë¶€í„°ëŠ” ì›ë¬¸ í¬ìŠ¤íŒ…ì— ëŒ€í•œ ë²ˆì—­ ë‚´ìš©ì…ë‹ˆë‹¤.</p>
<br>

<p><strong>io_context::run</strong>ì€ ëª¨ë“  ì˜ˆì•½ëœ ì‘ì—…ì´ ì™„ë£Œë ë•Œê¹Œì§€ ì‹¤í–‰ ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œëœ ì´í›„ì— <strong>io_context::run</strong>ì€ ë°˜í™˜ë ê²ƒì´ë©°, í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì“°ë ˆë“œëŠ” ë¸”ë¡ì´ í•´ì œë  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p><strong>io_context::run</strong> runs until all scheduled tasks are completed. After that <strong>io_context::run</strong> will return and the caller thread will unblock:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line">boost::asio::io_context io_context;</span><br><span class="line"><span class="comment">// Schedule some tasks</span></span><br><span class="line">io_context.run();</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Job's done! Continue the execution\n"</span>;</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>í•˜ì§€ë§Œ ë•Œë•Œë¡œ ìˆ˜í–‰í•  ì‘ì—…ì˜ ìœ ë¬´ì— ê´€ê³„ì—†ì´ io_context::runì˜ ì‹¤í–‰ ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ ì‚´í´ë³´ì•˜ë˜ ì„œë²„ë“¤ì€ í•­ìƒ <strong>async_accept</strong>ë¥¼ ìˆ˜í–‰ì¤‘ì´ì—ˆê¸°ë•Œë¬¸ì— ì ì–´ë„ í•˜ë‚˜ì˜ ì˜ˆì•½ëœ ì‘ì—…ì„ ê³„ì†í•´ì„œ ê°€ì§€ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸°ë•Œë¬¸ì— ìš°ë¦¬ëŠ” íŠ¹ì •í•œ ë°©ë²•ì„ í™œìš©í•˜ì—¬ ê·¸ë“¤ì„ ì‹¤í–‰ì¤‘ì¸ ìƒíƒœë¡œ ìœ ì§€í•´ì•¼í•  í•„ìš”ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>However sometimes you may need to keep it running regardless if there are tasks to execute or not. Servers weâ€™ve reviewed so far were always doing <strong>async_accept</strong>, so they always had at least one task scheduled, so we didnâ€™t really need to keep them running in such a way. </p>
</blockquote>
<p>í•˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ëŠ” <strong>async_accept</strong> ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•Šìœ¼ë©°, ê·¸ê²ƒì˜ ì…ì¥ì—ì„œ ì–´ë– í•œ íŠ¹ì • ì‹œì ì— ì˜ˆì•½ëœ ì‘ì—…ì´ ì—†ë‹¤ëŠ” ê²ƒì€ ì§€ê·¹íˆ ì¼ë°˜ì ì¸ ìƒí™©ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì—ì„œ <strong>io_context::run</strong> í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ ì—¬ëŸ¬ë¶„ì€ <strong>boost::asio::executor_work_guard</strong> í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ê²ƒì˜ ì´ë¦„ì´ ë„ˆë¬´ ê¸¸ì–´ì§€ëŠ” ê´€ê³„ë¡œ ë³„ì¹­(alias)ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>However a client doesnâ€™t do <strong>async_accept</strong> and itâ€™s a normal thing for it not to have scheduled tasks at some point at all. To prevent <strong>io_context::run</strong> from returning you should use <strong>boost::asio::executor_work_guard</strong>(a former <strong>io_context::work</strong> which is currently deprecated) class instance. Its name is too long, so letâ€™s alias it right away:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> work_guard_type = boost::asio::executor_work_guard&lt;boost::asio::io_context::executor_type&gt;;</span><br><span class="line"></span><br><span class="line">boost::asio::io_context io_context;</span><br><span class="line"><span class="function">work_guard_type <span class="title">work_guard</span><span class="params">(io_context.get_executor())</span></span>;</span><br><span class="line"><span class="comment">// Schedule some tasks or not</span></span><br><span class="line">io_context.run();</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Sorry, we'll never reach this!\n"</span>;</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì—¬ëŸ¬ë¶„ì€ ì—¬ì „íˆ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°•ì œë¡œ í˜¹ì€ ìš°ì•„í•˜ê²Œ ì¢…ë£Œí•˜ê¸° ìœ„í•œ ë°©ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ <strong>io_context::stop</strong> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>You still need a way to stop your application somehow, and to stop it gracefully. You may use <strong>io_context::stop</strong> function:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line">boost::asio::io_context io_context;</span><br><span class="line"><span class="function">work_guard_type <span class="title">work_guard</span><span class="params">(io_context.get_executor())</span></span>;</span><br><span class="line"><span class="comment">// Schedule some tasks or not</span></span><br><span class="line"><span class="function"><span class="built_in">std</span>::thread <span class="title">watchdog</span><span class="params">([&amp;]</span></span></span><br><span class="line"><span class="function"><span class="params">{</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">10</span>s);</span></span></span><br><span class="line"><span class="function"><span class="params">    io_context.stop(); <span class="comment">// That's OK, io_context::stop is thread-safe</span></span></span></span><br><span class="line"><span class="function"><span class="params">})</span></span>;</span><br><span class="line">io_context.run();</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"We stopped after 10 seconds of running\n"</span>;</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ìœ„ ê²½ìš°ì— <strong>io_context::run</strong> í•¨ìˆ˜ëŠ” ê·¸ ì¦‰ì‹œ ì¢…ë£Œë˜ì§€ëŠ” ì•Šì„ ê²ƒì´ì§€ë§Œ ê°€ì¥ ì ì ˆí•œ ì‹œì ì— ì¢…ë£Œë  ê²ƒì´ë©° ë‚¨ì•„ìˆëŠ” ì˜ˆì•½ ì‘ì—…ë“¤ì€ ë²„ë ¤ì§€ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ì´ê²ƒì€ ì •í™•íˆ ìš°ë¦¬ê°€ ì›í•˜ë˜ ë™ì‘ì¼ ê²ë‹ˆë‹¤.</p>
<blockquote>
<p>In that case <strong>io_context::run</strong> wonâ€™t stop right away but do this in the nearest suitable point of time, and the rest of scheduled tasks will be discarded. And that may be exactly what youâ€™re needed.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì€ ë˜í•œ ì˜ˆì•½ëœ ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ë‹¤ ê·¸ ì´í›„ì— <strong>io_context::run</strong> í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ê¸¸ ì›í• ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ìœ„í•´ <strong>io_context::work</strong> í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ íŒŒê´´í•´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. íŒŒê´´í•˜ëŠ” ì—°ì‚° ë˜í•œ ì“°ë ˆë“œì— ì•ˆì „í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>You may also need to wait until all scheduled tasks are completed and return from <strong>io_context::run</strong> after that. To do so you just need to destroy <strong>io_context::work</strong> class instance. This operation is also thread-safe:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line">boost::asio::io_context io_context;</span><br><span class="line"><span class="keyword">auto</span> work_guard = <span class="built_in">std</span>::make_unique&lt;work_guard_type&gt;(io_context.get_executor());</span><br><span class="line"><span class="comment">// Schedule some tasks or not</span></span><br><span class="line"><span class="function"><span class="built_in">std</span>::thread <span class="title">watchdog</span><span class="params">([&amp;]</span></span></span><br><span class="line"><span class="function"><span class="params">{</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="built_in">std</span>::this_thread::sleep_for(<span class="number">10</span>s);</span></span></span><br><span class="line"><span class="function"><span class="params">    work_guard.reset(); <span class="comment">// Work guard is destroyed, io_context::run is free to return</span></span></span></span><br><span class="line"><span class="function"><span class="params">})</span></span>;</span><br><span class="line">io_context.run();</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"We stopped after 10+ seconds of running\n"</span>;</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ë§Œì•½ <strong>io_context::run</strong> í•¨ìˆ˜ê°€ ë°˜í™˜ëœ í›„ ê·¸ê²ƒì„ ë‹¤ì‹œ í˜¸ì¶œí•˜ê³  ì‹¶ë‹¤ë©´ ê·¸ ì „ì— <strong>io_context::restart</strong> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>If youâ€™re going to call <strong>io_context::run</strong> once again after it returned, then you should call <strong>io_context::restart</strong> before that.</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line">boost::asio::io_context context;</span><br><span class="line">boost::asio::post(context, [](){ <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hello boost::asio::post in context first"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; });</span><br><span class="line">temp_context.run();</span><br><span class="line">boost::asio::post(temp_context, [](){ <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hello boost::asio::post in context second"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; });</span><br><span class="line">temp_context.restart();</span><br><span class="line">temp_context.run();</span><br></pre></td></tr></tbody></table></figure></div></figure>

<br>

<h2 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h2><p>ì§€ê¸ˆê¹Œì§€ io_contextì— ë‹¹ì¥ì— í• ë‹¹ëœ ì‘ì—…ì´ ì—†ë”ë¼ë„ io_context::run í•¨ìˆ˜ë¥¼ ì‹¤í–‰ ìƒíƒœë¡œ ìœ ì§€í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì •ë¦¬í•´ë³´ë©´ì„œ í¬ìŠ¤íŒ…ì„ ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.<br><br></p>
<ul>
<li>io_contextì— í• ë‹¹ëœ ì‘ì—…ì´ ì—†ìœ¼ë©´ io_context::run í•¨ìˆ˜ëŠ” ì¦‰ì‹œ ë°˜í™˜ëœë‹¤.</li>
<li>io_contextì— ë‹¹ì¥ì— í• ë‹¹ëœ ì‘ì—…ì´ ì—†ëŠ” ìƒí™©ì—ì„œ io_context::run í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ì„œëŠ” boost::asio::executor_work_guard í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¼.</li>
<li>io_context::run í•¨ìˆ˜ê°€ ë°˜í™˜ëœ í›„ ë‹¤ì‹œ í•œë²ˆ í˜¸ì¶œí•˜ê³  ì‹¶ë‹¤ë©´ io_context::restart í•¨ìˆ˜ë¥¼ ë¨¼ì € í˜¸ì¶œí•˜ë¼.</li>
</ul>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/reference/io_context/run/overload1.html">https://www.boost.org/doc/libs/1_78_0/doc/html/boost_asio/reference/io_context/run/overload1.html</a></li>
<li><a href="https://dens.website/tutorials/cpp-asio/work">https://dens.website/tutorials/cpp-asio/work</a></li>
</ul>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>boost asio</tag>
        <tag>io_context</tag>
        <tag>io_context run</tag>
        <tag>io_context block</tag>
      </tags>
  </entry>
  <entry>
    <title>ìì£¼ ì‚¬ìš©í•˜ëŠ” GDB ëª…ë ¹ì–´</title>
    <url>/2023/02/10/tip-for-gdb-debugging/</url>
    <content><![CDATA[<p><escape><span id="more"></span></escape></p>
<!-- toc -->
<br>

<h3 id="gdbë¥¼-í†µí•´-í”„ë¡œê·¸ë¨-ì‹¤í–‰"><a href="#gdbë¥¼-í†µí•´-í”„ë¡œê·¸ë¨-ì‹¤í–‰" class="headerlink" title="gdbë¥¼ í†µí•´ í”„ë¡œê·¸ë¨ ì‹¤í–‰"></a>gdbë¥¼ í†µí•´ í”„ë¡œê·¸ë¨ ì‹¤í–‰</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gdb &#123;(ê²½ë¡œí¬í•¨)í”„ë¡œê·¸ë¨ëª…&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ë¸Œë ˆì´í¬-í¬ì¸íŠ¸-ë“±ë¡"><a href="#ë¸Œë ˆì´í¬-í¬ì¸íŠ¸-ë“±ë¡" class="headerlink" title="ë¸Œë ˆì´í¬ í¬ì¸íŠ¸ ë“±ë¡"></a>ë¸Œë ˆì´í¬ í¬ì¸íŠ¸ ë“±ë¡</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) b ì†ŒìŠ¤íŒŒì¼ëª…:ë¼ì¸ë„˜ë²„</span><br></pre></td></tr></table></figure>

<br>

<h3 id="í”„ë¡œê·¸ë¨-ì‹œì‘"><a href="#í”„ë¡œê·¸ë¨-ì‹œì‘" class="headerlink" title="í”„ë¡œê·¸ë¨ ì‹œì‘"></a>í”„ë¡œê·¸ë¨ ì‹œì‘</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) r &#123;ì¸ìë¥¼ ì¶”ê°€í•´ì•¼í•œë‹¤ë©´ ì…ë ¥&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ë¸Œë ˆì´í¬-í¬ì¸íŠ¸ì—-ê±¸ë¦°-í›„-ì´ì–´ì„œ-ì§„í–‰"><a href="#ë¸Œë ˆì´í¬-í¬ì¸íŠ¸ì—-ê±¸ë¦°-í›„-ì´ì–´ì„œ-ì§„í–‰" class="headerlink" title="ë¸Œë ˆì´í¬ í¬ì¸íŠ¸ì— ê±¸ë¦° í›„ ì´ì–´ì„œ ì§„í–‰"></a>ë¸Œë ˆì´í¬ í¬ì¸íŠ¸ì— ê±¸ë¦° í›„ ì´ì–´ì„œ ì§„í–‰</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) c</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ìì£¼-ì‚¬ìš©í•˜ëŠ”-ëª…ë ¹ì–´"><a href="#ìì£¼-ì‚¬ìš©í•˜ëŠ”-ëª…ë ¹ì–´" class="headerlink" title="ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´"></a>ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bt(=backtrace)</span><br><span class="line">p(=print)</span><br><span class="line">set print pretty on(or off)</span><br><span class="line">f(=frame)</span><br><span class="line">up</span><br><span class="line">down</span><br></pre></td></tr></table></figure>

<br>

<h3 id="print-í¬ë§·-ì¢…ë¥˜"><a href="#print-í¬ë§·-ì¢…ë¥˜" class="headerlink" title="print í¬ë§· ì¢…ë¥˜"></a>print í¬ë§· ì¢…ë¥˜</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">d decimal</span><br><span class="line">x hex</span><br><span class="line">t binary</span><br><span class="line">f floating point</span><br><span class="line">i instruction</span><br><span class="line">c character</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ì“°ë ˆë“œ-ì •ë³´-í™•ì¸"><a href="#ì“°ë ˆë“œ-ì •ë³´-í™•ì¸" class="headerlink" title="ì“°ë ˆë“œ ì •ë³´ í™•ì¸"></a>ì“°ë ˆë“œ ì •ë³´ í™•ì¸</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) info threads</span><br></pre></td></tr></table></figure>

<br>

<h3 id="info-threads-ëª…ë ¹ì–´ë¥¼-í†µí•´-ì¶œë ¥ëœ-idê°’ì„-í†µí•œ-ì“°ë ˆë“œ-ì§„ì…"><a href="#info-threads-ëª…ë ¹ì–´ë¥¼-í†µí•´-ì¶œë ¥ëœ-idê°’ì„-í†µí•œ-ì“°ë ˆë“œ-ì§„ì…" class="headerlink" title="(info threads ëª…ë ¹ì–´ë¥¼ í†µí•´ ì¶œë ¥ëœ idê°’ì„ í†µí•œ)ì“°ë ˆë“œ ì§„ì…"></a>(info threads ëª…ë ¹ì–´ë¥¼ í†µí•´ ì¶œë ¥ëœ idê°’ì„ í†µí•œ)ì“°ë ˆë“œ ì§„ì…</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) thread &#123;id&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ë ˆì§€ìŠ¤í„°-ì •ë³´-í™•ì¸"><a href="#ë ˆì§€ìŠ¤í„°-ì •ë³´-í™•ì¸" class="headerlink" title="ë ˆì§€ìŠ¤í„° ì •ë³´ í™•ì¸"></a>ë ˆì§€ìŠ¤í„° ì •ë³´ í™•ì¸</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) info registers</span><br></pre></td></tr></table></figure>

<ul>
<li>rax (eax) : ëˆ„ì‚°ê¸°(accumulator) ë ˆì§€ìŠ¤í„°. ì‚°ìˆ ì—°ì‚°(ë§ì…ˆ, ë‚˜ëˆ—ì…ˆ, ê³±ì…ˆ)ì´ë‚˜ ë…¼ë¦¬ì—°ì‚°ì„ ìˆ˜í–‰í•œ ë°˜í™˜ê°’ì´ ì €ì¥</li>
<li>rbx (ebx) : ë² ì´ìŠ¤ ë ˆì§€ìŠ¤í„°</li>
<li>rcx (ecx) : ì¹´ìš´í„° ë ˆì§€ìŠ¤í„°. ë°˜ë³µ ëª…ë ¹ì–´ ì‚¬ìš© ì‹œ ë°˜ë³µ ì¹´ìš´í„°ë¡œ ì‚¬ìš©ë˜ëŠ” ê°’ì„ ì €ì¥</li>
<li>rdx (edx) : ë°ì´í„° ë ˆì§€ìŠ¤í„°. ì‚°ìˆ ì—°ì‚°ê³¼ I/O ëª…ë ¹ì—ì„œ rax(eax)ì™€ í•¨ê»˜ ì‚¬ìš©</li>
<li>rsi (esi) : source ì¸ë±ìŠ¤ ë ˆì§€ìŠ¤í„°</li>
<li>rdi (edi) : destination ì¸ë±ìŠ¤ ë ˆì§€ìŠ¤í„°</li>
<li>rbp (ebp) : ë² ì´ìŠ¤ í¬ì¸í„° ë ˆì§€ìŠ¤í„°. ìŠ¤íƒì˜ ì‹œì‘ ì§€ì  ì£¼ì†Œë¥¼ ì €ì¥</li>
<li>rsp (esp) : ìŠ¤íƒ í¬ì¸í„° ë ˆì§€ìŠ¤í„°. ìŠ¤íƒì˜ ê°€ì¥ ë§ˆì§€ë§‰ ì§€ì  ì£¼ì†Œë¥¼ ì €ì¥</li>
<li>rip : ëª…ë ¹ í¬ì¸í„° ë ˆì§€ìŠ¤í„°ì´ë‹¤. í˜„ì¬ ëª…ë ¹ì˜ ìœ„ì¹˜ë¥¼ ê°€ë¦¬í‚´</li>
</ul>
<br>

<h3 id="ì–´ì…ˆë¸”ëŸ¬-ë¤í”„"><a href="#ì–´ì…ˆë¸”ëŸ¬-ë¤í”„" class="headerlink" title="ì–´ì…ˆë¸”ëŸ¬ ë¤í”„"></a>ì–´ì…ˆë¸”ëŸ¬ ë¤í”„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) disas</span><br></pre></td></tr></table></figure>

<br>

<h3 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) layout src</span><br><span class="line">(gdb) layout asm</span><br><span class="line">(gdb) layout reg</span><br></pre></td></tr></table></figure>

<br>

<h3 id="íŠ¹ì •-ë³€ìˆ˜-ê°’ì˜-ì£¼ì†Œ-ì¶œë ¥"><a href="#íŠ¹ì •-ë³€ìˆ˜-ê°’ì˜-ì£¼ì†Œ-ì¶œë ¥" class="headerlink" title="íŠ¹ì • ë³€ìˆ˜ ê°’ì˜ ì£¼ì†Œ ì¶œë ¥"></a>íŠ¹ì • ë³€ìˆ˜ ê°’ì˜ ì£¼ì†Œ ì¶œë ¥</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) p &amp;&#123;ë³€ìˆ˜ëª…&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="íŠ¹ì •-ë³€ìˆ˜ì˜-í—¥ì‚¬ê°’-ì¶œë ¥"><a href="#íŠ¹ì •-ë³€ìˆ˜ì˜-í—¥ì‚¬ê°’-ì¶œë ¥" class="headerlink" title="íŠ¹ì • ë³€ìˆ˜ì˜ í—¥ì‚¬ê°’ ì¶œë ¥"></a>íŠ¹ì • ë³€ìˆ˜ì˜ í—¥ì‚¬ê°’ ì¶œë ¥</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) x/&#123;ì¶œë ¥í• í¬ê¸°&#125;bx &#123;ë³€ìˆ˜ì˜ ì£¼ì†Œê°’&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="gdbì—ì„œ-ê¸´-ë¬¸ìì—´ì„-ì¤„ì´ì§€-ì•Šê³ -ê·¸ëŒ€ë¡œ-ì¶œë ¥"><a href="#gdbì—ì„œ-ê¸´-ë¬¸ìì—´ì„-ì¤„ì´ì§€-ì•Šê³ -ê·¸ëŒ€ë¡œ-ì¶œë ¥" class="headerlink" title="gdbì—ì„œ ê¸´ ë¬¸ìì—´ì„ ì¤„ì´ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ì¶œë ¥"></a>gdbì—ì„œ ê¸´ ë¬¸ìì—´ì„ ì¤„ì´ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ì¶œë ¥</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) set print elements 0</span><br></pre></td></tr></table></figure>

<br>

<h3 id="gdbì—ì„œ-ì¤‘ë³µëœ-ë¬¸ìì—´ì„-ê·¸ëŒ€ë¡œ-í’€ì–´ì„œ-ì¶œë ¥"><a href="#gdbì—ì„œ-ì¤‘ë³µëœ-ë¬¸ìì—´ì„-ê·¸ëŒ€ë¡œ-í’€ì–´ì„œ-ì¶œë ¥" class="headerlink" title="gdbì—ì„œ ì¤‘ë³µëœ ë¬¸ìì—´ì„ ê·¸ëŒ€ë¡œ í’€ì–´ì„œ ì¶œë ¥"></a>gdbì—ì„œ ì¤‘ë³µëœ ë¬¸ìì—´ì„ ê·¸ëŒ€ë¡œ í’€ì–´ì„œ ì¶œë ¥</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(gdb) set print repeats 0</span><br></pre></td></tr></table></figure>

<br>

<h3 id="px-pn"><a href="#px-pn" class="headerlink" title="px pn"></a>px pn</h3><p>Boost::shared_ptrì„ ì‚¬ìš©í•œë‹¤ë©´ gdb ë””ë²„ê¹… ì‹œ pxì™€ pnì •ë³´ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆìŒ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">element_type* px;                   <span class="comment">// contained pointer</span></span><br><span class="line">boost::detail::shared_count pn;     <span class="comment">// reference count</span></span><br></pre></td></tr></table></figure>

<br>

<h3 id="ì‹¤í–‰-ì¤‘ì¸-í”„ë¡œì„¸ìŠ¤ì˜-íŠ¹ì •-ì“°ë ˆë“œ-ì§„ì…"><a href="#ì‹¤í–‰-ì¤‘ì¸-í”„ë¡œì„¸ìŠ¤ì˜-íŠ¹ì •-ì“°ë ˆë“œ-ì§„ì…" class="headerlink" title="ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ì˜ íŠ¹ì • ì“°ë ˆë“œ ì§„ì…"></a>ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ì˜ íŠ¹ì • ì“°ë ˆë“œ ì§„ì…</h3><p>í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì—ì„œ íŠ¹ì • ì“°ë ˆë“œ idë¥¼ í†µí•´ gdb ì§„ì…ì´ ê°€ëŠ¥í•˜ë©°, ì´í›„ <code>CTRL + C</code>ë¥¼ í†µí•´ í•´ë‹¹ ì“°ë ˆë“œì˜ íë¦„ì„ ì¤‘ë‹¨í•˜ì—¬ backtrace í™•ì¸ì´ ê°€ëŠ¥í•¨(c ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰ ì¬ê°œ)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gdb -p &#123;gdbë¡œ í™•ì¸í•  ì“°ë ˆë“œ id&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="sysroot-solib-search-path-substitute-path"><a href="#sysroot-solib-search-path-substitute-path" class="headerlink" title="sysroot / solib-search-path / substitute-path"></a>sysroot / solib-search-path / substitute-path</h3><p>ì•„ë˜ commandë“¤ì€ gdb ì‹¤í–‰ ì‹œ -ex ì˜µì…˜(execute a singleÂ GDBÂ command)ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ë©´ ìœ ìš©í•¨</p>
<ul>
<li>set sysroot {path}</li>
<li>set solib-search-path {path}</li>
<li>set substitute-path {original path} {substitute path}</li>
</ul>
<br>

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://visualgdb.com/gdbreference/commands/">https://visualgdb.com/gdbreference/commands/</a></li>
<li><a href="https://visualgdb.com/gdbreference/commands/set_sysroot">https://visualgdb.com/gdbreference/commands/set_sysroot</a></li>
<li><a href="https://visualgdb.com/gdbreference/commands/set_solib-search-path">https://visualgdb.com/gdbreference/commands/set_solib-search-path</a></li>
<li><a href="https://www.irya.unam.mx/computo/sites/manuales/fce12/debugger/cl/commandref/gdb_mode/cmd_set_substitu.htm">https://www.irya.unam.mx/computo/sites/manuales/fce12/debugger/cl/commandref/gdb_mode/cmd_set_substitu.htm</a></li>
</ul>
]]></content>
      <categories>
        <category>ë””ë²„ê¹…</category>
      </categories>
      <tags>
        <tag>gdb</tag>
        <tag>gdb command</tag>
        <tag>backtrace</tag>
        <tag>bt</tag>
      </tags>
  </entry>
  <entry>
    <title>(BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œì˜ ë¬¼ë§ì— ì˜¤ë¥¸ ë£¨ì¹´ì¿  ì ì ˆí•œ ì˜¤í¼ê°€ ì˜¨ë‹¤ë©´ ì¸í„° ë°€ë€ì„ ë– ë‚˜ê¸° ì›í•´</title>
    <url>/2021/08/05/tr-lukaku-want-to-chelsea/</url>
    <content><![CDATA[<p>ì˜¤ëŠ˜ì€ ì²¼ì‹œ ì´ì ì„¤ì´ ê°€ê¹Œì›Œì ¸ê°€ê³  ìˆëŠ” ë£¨ì¹´ì¿  ê´€ë ¨ ê¸°ì‚¬ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ë² ë¥´ë„ˆì˜ ê²°ì •ë ¥ì´ ë„ˆë¬´ë‚˜ë„ ì•„ì‰¬ì› ë˜ ì§€ë‚œ ì‹œì¦Œ ì²¼ì‹œë¥¼ ìƒê°í•˜ë©´ ê¼­ í•„ìš”í•œ ì˜ì…ì´ë¼ê³  ìƒê°ë˜ë„¤ìš”ğŸ˜</p>
<span id="more"></span>
<p>ì•ìœ¼ë¡œ êµµì§í•œ ì²¼ì‹œ ì´ì  ê´€ë ¨ ê¸°ì‚¬ë“¤ì€ ê³„ì†í•´ì„œ íŒ”ë¡œìš°ì—… í•˜ë„ë¡í•˜ê² ìŠµë‹ˆë‹¤.</p>
<br>
<br>

<p>By Simon Stone BBC Sport<br>4 August 2021 | <a href="https://www.bbc.com/sport/football/european">European Football</a><br><br></p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/tr-lukaku-want-to-chelsea.jpg" alt="ë£¨ì¹´ì¿ ëŠ” 2010ë…„ ì´í›„ ì„¸ë¦¬ì—A ì²«ë²ˆì§¸ ë¦¬ê·¸ íƒ€ì´í‹€ì„ ë”°ë‚¸ ì¸í„° ë°€ë€ì˜ í•µì‹¬ ì„ ìˆ˜ ì˜€ìŠµë‹ˆë‹¤."><span class="caption">ë£¨ì¹´ì¿ ëŠ” 2010ë…„ ì´í›„ ì„¸ë¦¬ì—A ì²«ë²ˆì§¸ ë¦¬ê·¸ íƒ€ì´í‹€ì„ ë”°ë‚¸ ì¸í„° ë°€ë€ì˜ í•µì‹¬ ì„ ìˆ˜ ì˜€ìŠµë‹ˆë‹¤.</span></div>

<p>ì²¼ì‹œì˜ ì˜ì… ë¬¼ë§ì— ì˜¤ë¥¸ ë¡œë©œë£¨ ë£¨ì¹´ì¿ ëŠ” ì ì ˆí•œ ì˜¤í¼ê°€ ì˜¨ë‹¤ë©´ í´ëŸ½ì„ ë– ë‚˜ê³  ì‹¶ë‹¤ëŠ” ê²ƒì„ êµ¬ë‹¨ì¸¡ì— ì´ì•¼ê¸°í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ë²ˆì£¼ ì¸í„° ë°€ë€ì€ ì²¼ì‹œì˜ 85míŒŒìš´ë“œ(í•œí™”ë¡œ ì•½ 1354ì–µ) ì œì˜ë¥¼ ê±°ì ˆí–ˆìŠµë‹ˆë‹¤.</p>
<p>ì¸í„° ë°€ë€ì€ í´ëŸ½ì— ë‚¨ê¸°ë¥¼ ì›í•œë‹¤ëŠ” ë£¨ì¹´ì¿ ì˜ ì´ì „ ì¸í„°ë·°ë¥¼ í†µí•´ ê·¸ë¥¼ ë¶™ì¡ì„ ìˆ˜ ìˆë‹¤ëŠ” ìì‹ ê°ì´ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ ë£¨ì¹´ì¿ ëŠ” ë˜ ë‹¤ë¥¸ ìƒê°ì„ ê°–ê³  ìˆìœ¼ë©° ê·¸ê°€ 2011-2014 ì‹œì¦Œ ë›°ì—ˆë˜ ì²¼ì‹œë¡œì˜ ë³µê·€ë¥¼ ì—´ë§í•˜ê³  ìˆë‹¤ê³  ì•Œë ¤ì ¸ìˆìŠµë‹ˆë‹¤.</p>
<p>ì¬ì •ì ìœ¼ë¡œ ì–´ë ¤ìš´ ìƒí™©ì— ì³í•´ìˆëŠ” ì¸í„° ë°€ë€ê³¼ ì²¼ì‹œë¡œì˜ ì´ì ì„ ì›í•˜ê³  ìˆëŠ” ë¡œë©œë£¨ ë£¨ì¹´ì¿ ì˜ ìƒí™©ì„ ë´¤ì„ë•Œ íŒë§¤ëŠ” ë¶ˆê°€í”¼í•  ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p>
<p>ì²¼ì‹œê°€ ì´ë²ˆ ì—¬ë¦„ ë¡œë©œë£¨ ë£¨ì¹´ì¿ ë¥¼ ì˜ì…í•˜ê¸° ìœ„í•´ ê¸°êº¼ì´ ì˜¤í¼ ê¸ˆì•¡ì„ ì˜¬ë¦´ì§€ ì—¬ë¶€ë¥¼ ì£¼ëª©í•´ë´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<p>ì²¼ì‹œëŠ” ìµœì´ˆ ë¹„ë”©ì— ìŠ¤í˜ì¸ ìˆ˜ë¹„ìˆ˜ì¸ ë§ˆë¥´ì½”ìŠ¤ ì•Œë¡ ì†Œë¥¼ í¬í•¨ì‹œì¼°ë‹¤ê³  ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë£¨ì¹´ì¿ ëŠ” 2011ë…„ì—ì„œ 2014ë…„ê¹Œì§€ ì²¼ì‹œì—ì„œ ë›°ë©´ì„œ 15ê²½ê¸°ì— ì¶œì „í–ˆìœ¼ë‚˜ ì„ëŒ€ í›„ ì¸ìƒì ì¸ í™œì•½ì„ í¼ì¹˜ë©´ì„œ ì—ë²„íŠ¼ìœ¼ë¡œ ì´ì í•˜ê²Œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>2017ë…„ ë‹¤ì‹œ í•œë²ˆ ì²¼ì‹œë¡œì˜ í•©ë¥˜ê°€ ê°€ê¹Œì›Œì¡Œì—ˆìœ¼ë‚˜ 75míŒŒìš´ë“œ(í•œí™”ë¡œ ì•½ 1195ì–µ)ì— í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ ë¼ì´ë²ŒíŒ€ì¸ ë§¨ì²´ìŠ¤í„° ìœ ë‚˜ì´í‹°ë“œë¡œ ì´ì í•˜ê²Œë©ë‹ˆë‹¤.</p>
<p>2019ë…„ ì´íƒˆë¦¬ì•„ ì„¸ë¦¬ì—Aë¡œ ë„˜ì–´ì˜¤ê²Œ ëœ ë£¨ì¹´ì¿ ëŠ” ì¸í„° ë°€ë€ê³¼ 5ë…„ 80mìœ ë¡œ(74míŒŒìš´ë“œ, í•œí™”ë¡œ ì•½ 1179ì–µ) ê³„ì•½ì„ í•˜ë©° ì¸í„° ë°€ë€ì˜ í´ëŸ½ ë ˆì½”ë“œë¥¼ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.</p>
<br>
<br>

<span class="highlight-text yellow">ë²ˆì—­ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ì—­ ë° ì˜ì—­ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜
<p>ì›ë¬¸ ë§í¬: <a href="https://www.bbc.com/sport/football/58094323">Romelu Lukaku: Chelsea target wants to leave Inter Milan if suitable offer is made</a></p>
]]></content>
      <categories>
        <category>í•´ì¶•ê¸°ì‚¬ë²ˆì—­</category>
      </categories>
      <tags>
        <tag>ë£¨ì¹´ì¿ </tag>
        <tag>ë£¨ì¹´ì¿  ì²¼ì‹œ</tag>
        <tag>ë£¨ì¹´ì¿  ì´ì </tag>
      </tags>
  </entry>
  <entry>
    <title>í…œí”Œë¦¿ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•  ë•Œ ì„ ì–¸ë¶€ì™€ êµ¬í˜„ë¶€ë¥¼ ì„œë¡œ ë‹¤ë¥¸ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•</title>
    <url>/2023/01/26/seperate-header-and-impl-in-template-class/</url>
    <content><![CDATA[<p><escape><span id="more"></span></escape></p>
<p>í—¤ë” íŒŒì¼ì˜ ë§¨ í•˜ë‹¨ì— í…œí”Œë¦¿ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•œ íŒŒì¼ì„ include ì‹œì¼œì£¼ë©´ ë©ë‹ˆë‹¤. (<strong>#include</strong> ëŠ” ëŒ€ìƒì´ ë˜ëŠ” íŒŒì¼ì„ ë‹¨ìˆœíˆ ë¶™ì—¬ ë„£ì–´ì£¼ëŠ” ì—­í• ì„ í•˜ë¯€ë¡œ)</p>
<figure class="codeblock codeblock--tabbed"><figcaption><span>mytemplateclass.h</span><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MYTEMPLATECLASS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MYTEMPLATECLASS_H</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> ggultip</span><br><span class="line">{</span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">mytemplateclass</span></span></span><br><span class="line"><span class="class">	{</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		mytemplateclass();</span><br><span class="line">		~mytemplateclass();</span><br><span class="line">		</span><br><span class="line">		...</span><br><span class="line">	};</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mytemplateclass.impl.h"</span></span></span><br></pre></td></tr></tbody></table></figure></div></figure>


<figure class="codeblock codeblock--tabbed"><figcaption><span>mytemplateclass.impl.h</span><ul class="tabs"><li class="tab active">cpp</li></ul></figcaption><div class="tabs-content"><figure class="highlight cpp" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> ggultip</span><br><span class="line">{</span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">	mytemplateclass&lt;T&gt;::mytemplateclass()</span><br><span class="line">	{</span><br><span class="line">		...</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">	mytemplateclass&lt;T&gt;::~mytemplateclass()</span><br><span class="line">	{</span><br><span class="line">		...</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<br>

<p><strong>Reference</strong></p>
<ul>
<li>Michael Main, Walter Savitch. (2010). Data Structures &amp; Other Objects Using C++, 4th Edition. Pearson</li>
</ul>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>template class</tag>
        <tag>í…œí”Œë¦¿ í´ë˜ìŠ¤ êµ¬í˜„ë¶€ ë¶„ë¦¬</tag>
      </tags>
  </entry>
  <entry>
    <title>ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œ tmuxë¥¼ í™œìš©í•´ë³´ì</title>
    <url>/2021/07/22/tip-how-to-use-tmux-md/</url>
    <content><![CDATA[<p>ì´ë²ˆì—” ìµìˆ™í•´ì§€ë©´ ì •ë§ ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œì¸ tmuxì— ëŒ€í•´ ì†Œê°œí•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<span id="more"></span>

<!-- toc -->
<br>

<h2 id="tmuxë€"><a href="#tmuxë€" class="headerlink" title="tmuxë€?"></a>tmuxë€?</h2><p>tmuxëŠ” ë§ê·¸ëŒ€ë¡œ <em>ë©€í‹°í”Œë ‰ì„œ</em> ì´ê¸°ë•Œë¬¸ì— í•˜ë‚˜ì˜ í„°ë¯¸ë„ í™”ë©´ì— ì—¬ëŸ¬ ê°œì˜ í„°ë¯¸ë„ì„ ê°ê° ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. tmuxë¥¼ ì‚¬ìš©í•˜ë©´ Ctrl + Tabì„ ëˆ„ë¥´ë©´ì„œ ì°½ì„ ì˜®ê²¨ ë‹¤ë‹ í•„ìš”ì—†ì´ í•œ ëˆˆì— ì—¬ëŸ¬ í„°ë¯¸ë„ì„ ë³¼ ìˆ˜ ìˆê³ , ë‹¤ì–‘í•œ ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ì¢€ ë” íš¨ìœ¨ì ìœ¼ë¡œ í„°ë¯¸ë„ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<hr>
<h2 id="tmuxì˜-êµ¬ì¡°"><a href="#tmuxì˜-êµ¬ì¡°" class="headerlink" title="tmuxì˜ êµ¬ì¡°"></a>tmuxì˜ êµ¬ì¡°</h2><p>tmuxì—ëŠ” ëª‡ê°€ì§€ ë…¼ë¦¬ì ì¸ ê°œë…ì„ ë„ì…í•˜ì—¬ ë©€í‹°í”Œë ‰ì‹± ê¸°ëŠ¥ì„ êµ¬ì¡°í™”í•˜ì˜€ìŠµë‹ˆë‹¤. <a href="http://man.openbsd.org/OpenBSD-current/man1/tmux.1">tmuxì˜ ê³µì‹ ë§¤ë‰´ì–¼</a>ì„ ì°¸ì¡°í•˜ì—¬ ì´ ê°œë…ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>tmuxë¥¼ ì‹¤í–‰í•˜ë©´ í•˜ë‚˜ì˜ ìœˆë„ìš°(window)ë¥¼ ê°–ëŠ” ìƒˆë¡œìš´ ì„¸ì…˜(session)ë§Œë“¤ê³  ì´ ê²ƒì„ í™”ë©´ì— ì¶œë ¥í•©ë‹ˆë‹¤. í™”ë©´ í•˜ë‹¨ì—ëŠ” í˜„ì¬ ì„¸ì…˜ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìˆëŠ” ìƒíƒœ í‘œì‹œì¤„ì´ ìˆìœ¼ë©° ì´ëŠ” ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>When tmux is started it creates a new session with a single window and displays it on screen. A status line at the bottom of the screen shows information on the current session and is used to enter interactive commands.</p>
</blockquote>
<p>ì„¸ì…˜(session)ì€ tmuxê°€ ê´€ë¦¬í•˜ëŠ” ê°€ìƒì˜ í„°ë¯¸ë„ ì§‘í•©ì…ë‹ˆë‹¤. ê°ê°ì˜ ì„¸ì…˜ì€ ê·¸ê²ƒê³¼ ì—°ê²°ëœ í•˜ë‚˜ ë˜ëŠ” 2ê°œ ì´ìƒì˜ ìœˆë„ìš°(window)ë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ëª¨ë‹ˆí„° í™”ë©´ ì „ì²´ë¥¼ ì°¨ì§€í•˜ê³  ìˆëŠ” ê²ƒì´ ìœˆë„ìš°(window)ì´ê³ , ì´ ìœˆë„ìš°(window)ëŠ” ëª‡ ê°œì˜ ì‚¬ê° íŒ(pane)ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê°ê°ì˜ ì‚¬ê° íŒ(pane)ì€ ë¶„ë¦¬ëœ ê°€ìƒì˜ í„°ë¯¸ë„ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>A session is a single collection of pseudo terminals under the management of tmux. Each session has one or more windows linked to it. A window occupies the entire screen and may be split into rectangular panes, each of which is a separate pseudo terminal.</p>
</blockquote>
<p>ìœ„ì—ì„œ ì„¤ëª…í•œ ê°œë…ë“¤ì„ ê°„ëµíˆ ë„ì‹í™”í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ì„¸ì…˜(session) ë‚´ë¶€ì—ëŠ” ìœˆë„ìš°(window)ë¼ëŠ” ê²ƒì´ 1ê°œ ì´ìƒ ì¡´ì¬í•  ìˆ˜ ìˆê³ , ìœˆë„ìš°(window)ë¼ëŠ” ê²ƒì€ 1ê°œ ì´ìƒì˜ íŒ(pane)ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ ê°ê°ì˜ íŒ(pane)ì´ í„°ë¯¸ë„ í•˜ë‚˜ë¼ê³  ë³´ì‹œë©´ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì„¸ì…˜(session) ë˜í•œ 1ê°œ ì´ìƒ ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/tmux-figure-1.png" alt="tmuxì˜ ë…¼ë¦¬ êµ¬ì¡° ë„ì‹í™”"><span class="caption">tmuxì˜ ë…¼ë¦¬ êµ¬ì¡° ë„ì‹í™”</span></div>

<hr>
<h2 id="tmux-êµ¬ì¡°ë³„-ëª…ë ¹ì–´-ì •ë¦¬"><a href="#tmux-êµ¬ì¡°ë³„-ëª…ë ¹ì–´-ì •ë¦¬" class="headerlink" title="tmux êµ¬ì¡°ë³„ ëª…ë ¹ì–´ ì •ë¦¬"></a>tmux êµ¬ì¡°ë³„ ëª…ë ¹ì–´ ì •ë¦¬</h2><p>tmuxì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ëª…ë ¹ì–´ë“¤ì„ ì•ì„œ ì‚´í´ë´¤ë˜ tmuxì˜ êµ¬ì¡° ë³„ë¡œ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì œê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ë“¤ë§Œ ë‚˜ì—´í•´ë³´ì•˜ìœ¼ë‹ˆ ë” ë§ì€ ëª…ë ¹ì–´ ì •ë³´ë“¤ì€ tmux ê³µì‹ ë§¤ë‰´ì–¼ì´ë‚˜ êµ¬ê¸€ë§ì„ í†µí•´ ì°¾ì•„ë³´ì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.ğŸ˜</p>
<p>ê¸°ë³¸ì ìœ¼ë¡œ tmux ëª…ë ¹ì–´ëŠ” tmux ì„¸ì…˜ ë‚´ì— ì§„ì…í•˜ì˜€ì„ ë•Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë©° ctrl + bëŠ” tmux ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì…ë ¥ ê°’ì…ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ ë¦¬ìŠ¤íŠ¸ì— ctrl + bê°€ í¬í•¨ëœ ê²ƒë“¤ì€ ëª¨ë‘ tmux session ë‚´ì—ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ë¼ê³  ë³´ë©´ë©ë‹ˆë‹¤.<br><br></p>
<ul>
<li><p>Session</p>
<ul>
<li><strong>tmux</strong> : ìƒˆë¡œìš´ ì„¸ì…˜ ìƒì„±</li>
<li><strong>tmux ls</strong> : í˜„ì¬ ìƒì„±ë˜ì–´ ìˆëŠ” tmux ì„¸ì…˜ ëª©ë¡ í™•ì¸</li>
<li><strong>tmux a -t ì„¸ì…˜ë²ˆí˜¸(ë˜ëŠ” ì„¸ì…˜ì´ë¦„)</strong> : í•´ë‹¹ ì„¸ì…˜ìœ¼ë¡œ ì´ë™</li>
<li><strong>tmux kill-session -t ì„¸ì…˜ë²ˆí˜¸(ë˜ëŠ” ì„¸ì…˜ì´ë¦„)</strong> : í•´ë‹¹ ì„¸ì…˜ ì¢…ë£Œ</li>
<li><strong>(ctrl + b) + $</strong> : í˜„ì¬ ì„¸ì…˜ ëª… ë³€ê²½</li>
<li><strong>(ctrl + b) + d</strong> : tmux ì„¸ì…˜ ë¹ ì ¸ë‚˜ì˜¤ê¸°(ì¢…ë£ŒëŠ” ì•„ë‹˜)</li>
</ul>
</li>
<li><p>Window</p>
<ul>
<li><strong>(ctrl + b) + c</strong> : ìƒˆë¡œìš´ ìœˆë„ìš° ìƒì„±</li>
<li><strong>(ctrl + b) + &amp;</strong> : í˜„ì¬ ìœˆë„ìš° ì‚­ì œ</li>
<li><strong>(ctrl + b) + ,</strong> : í˜„ì¬ ìœˆë„ìš° ëª… ë³€ê²½</li>
<li><strong>(ctrl + b) + ìœˆë„ìš°ë²ˆí˜¸</strong> : í•´ë‹¹ ìœˆë„ìš°ë¡œ ì´ë™</li>
<li><strong>(ctrl + b) + n</strong> : ë‹¤ìŒ(next) ìœˆë„ìš°ë¡œ ì´ë™</li>
<li><strong>(ctrl + b) + p</strong> : ì´ì „(previous) ìœˆë„ìš°ë¡œ ì´ë™</li>
<li><strong>(ctrl + b) + w</strong> : ìƒì„±ëœ ìœˆë„ìš° ë¦¬ìŠ¤íŠ¸ ì •ë³´</li>
</ul>
</li>
<li><p>Pane</p>
<ul>
<li><strong>(ctrl + b) + %</strong> : ì—´ ë¶„í• </li>
<li><strong>(ctrl + b) + â€œ</strong> : í–‰ ë¶„í• </li>
<li><strong>(ctrl + b) + ë°©í–¥í‚¤</strong> : ë¶„í• ëœ pane ê°„ì˜ ì´ë™</li>
<li><strong>(ctrl + b) + z</strong> : í˜„ì¬ paneë§Œ ì „ì²´ í¬ê¸°ë¡œ ë³´ê¸°(ì „ì²´ í¬ê¸°ì—ì„œ ë™ì¼í•œ ì»¤ë§¨ë“œë¥¼ ë‹¤ì‹œ ì…ë ¥í•  ê²½ìš° ì›ë˜ ë¶„í• ëœ ì°½ìœ¼ë¡œ ëŒì•„ê°„ë‹¤)</li>
<li><strong>(ctrl + b) + x</strong> : í˜„ì¬ pane ì¢…ë£Œ</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h2><p>ì§€ê¸ˆê¹Œì§€ ê°•ë ¥í•œ í„°ë¯¸ë„ ë©€í‹°í”Œë ‰ì„œ tmuxì˜ êµ¬ì¡°ì™€ ëª‡ê°€ì§€ ëª…ë ¹ì–´ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œëŠ” tmuxì™€ í•¨ê»˜ í„°ë¯¸ë„ì„ ììœ ë¡­ê²Œ ë„˜ë‚˜ë“¤ì–´ ë´…ì‹œë‹¤ğŸ˜</p>
<br>
<br>
<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="http://man.openbsd.org/OpenBSD-current/man1/tmux.1">http://man.openbsd.org/OpenBSD-current/man1/tmux.1</a></li>
<li><a href="https://github.com/tmux/tmux/wiki">https://github.com/tmux/tmux/wiki</a></li>
</ul>
]]></content>
      <categories>
        <category>ìœ ìš©í•œ íŒ</category>
      </categories>
      <tags>
        <tag>tmux</tag>
        <tag>terminal multiplexer</tag>
      </tags>
  </entry>
  <entry>
    <title>(BBC ìŠ¤í¬ì¸ ) í† íŠ¸ë„˜ ê³µê²©ìˆ˜ ì†í¥ë¯¼ 4ë…„ ì¬ê³„ì•½ ì„±ì‚¬</title>
    <url>/2021/08/12/tr-son-new-contract/</url>
    <content><![CDATA[<p>ì˜¤ëŠ˜ì€ í˜„ì¬ í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ í† íŠ¸ë„˜ í•«ìŠ¤í¼ì—ì„œ í™œì•½ ì¤‘ì¸ ì†í¥ë¯¼ ì„ ìˆ˜ì˜ ì¬ê³„ì•½ ê´€ë ¨ ê¸°ì‚¬ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ë‹¤ìŒ ì‹œì¦Œ ëˆ„ëˆ„ê°ë…ì´ ì´ëŒê²Œ ë˜ëŠ” í† íŠ¸ë„˜, ìŒ‰ì›”í´ğŸ‘ ì†í¥ë¯¼ì„ ìˆ˜ì™€ í•¨ê»˜ ì¢‹ì€ ì„±ì  ê±°ë’€ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>
<p>ì•„, ì°¸ê³ ë¡œ ì €ëŠ” <span class="highlight-text primary">ì²¼ì‹œíŒ¬</span>ì…ë‹ˆë‹¤ğŸ˜</p>
<br>
<br>

<p>23 July 2021 | <a href="https://www.bbc.com/sport/football/teams/tottenham-hotspur">Tottenham</a><br><br></p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/tr-son-new-contract-figure1.jpg" alt="ì†í¥ë¯¼ì€ ì§€ë‚œ ì‹œì¦Œ í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ 17ê³¨ì„ ê¸°ë¡í–ˆê³  íŒ€ì„±ì  7ìœ„ì™€ ìœ ë¡œíŒŒ ì»¨í¼ëŸ°ìŠ¤ ë¦¬ê·¸ ì§„ì¶œì— ê¸°ì—¬í–ˆë‹¤"><span class="caption">ì†í¥ë¯¼ì€ ì§€ë‚œ ì‹œì¦Œ í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ 17ê³¨ì„ ê¸°ë¡í–ˆê³  íŒ€ì„±ì  7ìœ„ì™€ ìœ ë¡œíŒŒ ì»¨í¼ëŸ°ìŠ¤ ë¦¬ê·¸ ì§„ì¶œì— ê¸°ì—¬í–ˆë‹¤</span></div>

<p>í† íŠ¸ë„˜ì˜ ê³µê²©ìˆ˜ ì†í¥ë¯¼ì€ 4ë…„ì§œë¦¬ ìƒˆë¡œìš´ ê³„ì•½ì„ ë§ˆë¬´ë¦¬ ì§€ì—ˆê³  ì´ë¡œì¨ 2025ë…„ê¹Œì§€ í† íŠ¸ë„˜ ìœ ë‹ˆí¼ì„ ì…ê²Œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>2015ë…„ ë ˆë²„ì¿ ì  ì—ì„œ ì´ì í•´ì˜¨ 29ì‚´ ì†í¥ë¯¼ì€ 280ê²½ê¸°ì—ì„œ 107ê³¨ì„ ê¸°ë¡í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ì†í¥ë¯¼ì€ ì§€ê¸ˆê¹Œì§€ 93ë²ˆ ëŒ€í•œë¯¼êµ­ AëŒ€í‘œíŒ€ ì„ ìˆ˜ë¡œ ì°¨ì¶œë¼ 27ê³¨ì„ ê¸°ë¡í–ˆìœ¼ë©° 2ë²ˆì˜ ì›”ë“œì»µì— ì°¸ê°€í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì†í¥ë¯¼ì€ ì¸í„°ë·°ì—ì„œ â€œí† íŠ¸ë„˜ê³¼ì˜ ì¬ê³„ì•½ì€ íŠ¹ë³„í•œ ê²°ë‹¨ì´ í•„ìš”ì¹˜ ì•Šì€ ì•„ì£¼ ì‰¬ìš´ì¼ì´ì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” í˜„ì¬ í† íŠ¸ë„˜ì—ì„œ ë„ˆë¬´ í–‰ë³µí•˜ê³  ì¡°ë§Œê°„ íŒ¬ë“¤ì„ ë‹¤ì‹œ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì— ë„ˆë¬´ ê¸°ì©ë‹ˆë‹¤â€</p>
<p>â€œ6ë…„ ë™ì•ˆ ì´ê³³ì—ì„œ ë›°ê³ ìˆë‹¤ê²ƒì´ ì´ë¯¸ ì €ì—ê² í° ì˜ê´‘ì…ë‹ˆë‹¤. í† íŠ¸ë„˜ì€ ì €ì—ê²Œ ì—„ì²­ë‚œ ì¡´ì¤‘ì„ ë³´ì—¬ì£¼ì—ˆê³  ì œê°€ ì´ê³³ì— ìˆë‹¤ëŠ”ê²Œ ë„ˆë¬´ë‚˜ ê¸°ì©ë‹ˆë‹¤.â€ ë¼ê³  ì´ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤.</p>
<p>í† íŠ¸ë„˜ì˜ í’‹ë³¼ë””ë ‰í„°ì¸ íŒŒë¸”ë¡œ íŒŒë¼í‹°ì¹˜ëŠ” ì´ì™€ ê°™ì´ ë§ë¶™ì˜€ìŠµë‹ˆë‹¤. â€œìš°ë¦¬ ëª¨ë‘ ì†í¥ë¯¼ ì„ ìˆ˜ê°€ í•„ë“œ ì•ˆíŒì—ì„œ í† íŠ¸ë„˜ì—ê²Œ ë§¤ìš° ê¸ì •ì ì¸ ì˜í–¥ì„ ë¼ì¹œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ê°€ì˜¤ëŠ” ì‹œì¦Œì— ìš°ë¦¬ê°€ ì´ë£¨ê³ ì í•˜ëŠ” ëª©í‘œì— ê·¸ê°€ í•¨ê»˜í•œë‹¤ëŠ” ê²ƒì— ìš°ë¦¬ëŠ” ë§¤ìš° ê¸°ì©ë‹ˆë‹¤.â€</p>
<p>ì†í¥ë¯¼ì€ í† íŠ¸ë„˜ì˜ 2019ë…„ ì±”í”¼ì–¸ìŠ¤ ë¦¬ê·¸ ê²°ìŠ¹ ì§„ì¶œ ë©¤ë²„ì˜ ì¼ì›ì´ì—ˆìœ¼ë©°, 8ê°• ë§¨ì²´ìŠ¤í„° ì‹œí‹°ì™€ì˜ 2ì°¨ì „ì—ì„œ ì†í¥ë¯¼ì˜ 2ê³¨ì€ ì›ì • ë‹¤ë“ì ìœ¼ë¡œ í† íŠ¸ë„˜ì„ 4ê°•ì— ì§„ì¶œí•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì†í¥ë¯¼ì€ ì§€ë‚œ ì‹œì¦Œ 51ê²½ê¸°ì—ì„œ 22ê³¨ì„ ê¸°ë¡í–ˆìœ¼ë©° íŒ€ ë™ë£Œì¸ í•´ë¦¬ ì¼€ì¸ê³¼ ì—„ì²­ë‚œ ê³¨ë“¤ì„ í•©ì‘í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì†ì¼€ ë“€ì˜¤ëŠ” 20-21ì‹œì¦Œ ë¦¬ê·¸ 14ê³¨ì„ í•©ì‘í–ˆìœ¼ë©° ì´ëŠ” í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ ë ˆì½”ë“œì˜€ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‘ ì„ ìˆ˜ ëª¨ë‘ PFA(Professional Footballersâ€™ Association)ì˜ ì˜¬í•´ì˜ íŒ€ ì„ ìˆ˜ì— ì„ ì •ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ ì´ë²ˆ ì—¬ë¦„ í´ëŸ½ì„ ë– ë‚˜ê³ ì í•˜ëŠ” ì˜ì‚¬ë¥¼ ë°íŒ ì‰ê¸€ëœë“œì˜ ì£¼ì¥ í•´ë¦¬ ì¼€ì¸ì˜ ê±°ì·¨ëŠ” ë¶ˆíˆ¬ëª…í•˜ë©° ì§€ë‚œ ì‹œì¦Œ í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ ìš°ìŠ¹íŒ€ì¸ ë§¨ì²´ìŠ¤í„° ì‹œí‹°ê°€ ë¹„ë“œì— ì°¸ì—¬í•  ê²ƒì´ë¼ëŠ” ë³´ë„ë“¤ì´ ë‚˜ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>í† íŠ¸ë„˜ì€ ì§€ë‚œ ì‹œì¦Œ 7ìœ„ë¡œ ë§ˆê°í•˜ë©° ìœ ë¡œíŒŒ ì»¨í¼ëŸ°ìŠ¤ ë¦¬ê·¸ì— ì°¸ê°€í•  ìˆ˜ ìˆê²Œë˜ì—ˆìŠµë‹ˆë‹¤. í† íŠ¸ë„˜ì€ ì§€ë‚œ 4ì›” ë§¨ì²´ìŠ¤í„° ì‹œí‹°ì™€ì˜ ì¹´ë¼ë°”ì˜¤ ì»µ ê²°ìŠ¹ì „ì—ì„œ íŒ¨í•˜ê¸° 6ì¼ ì „ ì¡°ì„¸ ë¬´ë¦¬ë‰´ ê°ë…ì„ ê²½ì§ˆí•˜ê³  ìœ ìŠ¤íŒ€ ì½”ì¹˜ì¸ ë¼ì´ì–¸ ë©”ì´ìŠ¨ì„ ê°ë… ëŒ€í–‰ìœ¼ë¡œ ì„ ì„í•˜ë©° 20-21 ì‹œì¦Œì„ ë§ˆê°í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì§€ë‚œë‹¬ ìš¸ë¸ŒìŠ¤ì˜ ì „ ê°ë…ì¸ ëˆ„ëˆ„ ì‚°íˆ¬ë¥¼ ë¬´ë¦¬ë‰´ ë‹¤ìŒ ê°ë…ìœ¼ë¡œ ì„ ì„(2ë…„ ê³„ì•½)í•˜ì˜€ìœ¼ë©° ë©”ì´ìŠ¨ì€ ê¸°ì¡´ ìœ ìŠ¤íŒ€ ì½”ì¹˜ì§ìœ¼ë¡œ ë³µê·€í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<br>
<br>

<span class="highlight-text yellow">ë²ˆì—­ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ì—­ ë° ì˜ì—­ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜
<p>ì›ë¬¸ ë§í¬: <a href="https://www.bbc.co.uk/sport/football/57941327">Son Heung-min: Tottenham forward signs new four-year contract</a></p>
]]></content>
      <categories>
        <category>í•´ì¶•ê¸°ì‚¬ë²ˆì—­</category>
      </categories>
      <tags>
        <tag>ì˜ë‹ˆ</tag>
        <tag>ì†í¥ë¯¼ í† íŠ¸ë„˜</tag>
        <tag>ì†í¥ë¯¼ ì¬ê³„ì•½</tag>
      </tags>
  </entry>
  <entry>
    <title>ê·¸ë£¹ì´ ì•„ë‹Œ ê³„ì¸µìœ¼ë¡œì„œì˜ Go íŒ¨í‚¤ì§€</title>
    <url>/2022/12/01/translate-packages-as-layers/</url>
    <content><![CDATA[<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì€ ì§€ë‚œë²ˆ <a href="https://chelseafandev.github.io/2022/09/06/translate-standard-package-layout-in-go/">ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ Goì½”ë“œë¥¼ êµ¬ì¡°í™”í•´ì•¼ í•˜ëŠ”ê°€?</a> í¬ìŠ¤íŒ…ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ Go ì†ŒìŠ¤ ì½”ë“œì˜ êµ¬ì¡°í™”ì— ëŒ€í•œ ê³ ë¯¼ì˜ ì—°ì¥ì„ ì…ë‹ˆë‹¤.</p>
<span id="more"></span>

<p>ì´ë²ˆì— ë²ˆì—­í•´ ë³¸ ê¸€ë„ ì§€ë‚œë²ˆ í¬ìŠ¤íŒ…ê³¼ ë™ì¼í•œ ì €ìê°€ ì‘ì„±í•œ ê¸€ì´ë©° Go ì†ŒìŠ¤ ì½”ë“œì˜ êµ¬ì¡°í™”ì— ê´€ë ¨ëœ ê¸€ì„ 4ë…„ì´ ì§€ë‚œ í›„ì— ë‹¤ì‹œ í•œë²ˆ ê²Œì‹œí•´ì£¼ì…¨ë”ë¼ê³ ìš”. Go ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì œì‘í•  ë•Œ íŒ¨í‚¤ì§€ë“¤ ê°„ì˜ ê´€ê³„ë¥¼ ì–´ë–»ê²Œ ë°”ë¼ë³¼ ê²ƒì¸ê°€ì— ëŒ€í•´ í•œ ë²ˆ ë” ê³ ë¯¼í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì›ë¬¸ì„ ì°¸ê³ í•˜ì‹¤ ë¶„ë“¤ì€ <a href="https://www.gobeyond.dev/packages-as-layers/">í•´ë‹¹ ë§í¬</a>ë¥¼ í™•ì¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<br>

<!-- toc -->

<br>

<h1 id="ê·¸ë£¹ì´-ì•„ë‹Œ-ê³„ì¸µìœ¼ë¡œì„œì˜-Go-íŒ¨í‚¤ì§€"><a href="#ê·¸ë£¹ì´-ì•„ë‹Œ-ê³„ì¸µìœ¼ë¡œì„œì˜-Go-íŒ¨í‚¤ì§€" class="headerlink" title="ê·¸ë£¹ì´ ì•„ë‹Œ ê³„ì¸µìœ¼ë¡œì„œì˜ Go íŒ¨í‚¤ì§€"></a>ê·¸ë£¹ì´ ì•„ë‹Œ ê³„ì¸µìœ¼ë¡œì„œì˜ Go íŒ¨í‚¤ì§€</h1><p>ìˆ™ë ¨ëœ Go ê°œë°œìë“¤ì—ê²Œë„ ê°€ì¥ ì–´ë ¤ìš´ ì£¼ì œì¤‘ í•˜ë‚˜ì¸ <code>package layout</code>ì— ëŒ€í•´ ë‹¤ë£¨ì–´ë³´ê³ ì 4ë…„ì „ì— <a href="https://www.gobeyond.dev/standard-package-layout/">Standard Package Layout</a>ì´ë¼ëŠ” ê¸€ì„ ê²Œì‹œí–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ Go ê°œë°œìë“¤ì€ ì—¬ì „íˆ ê·¸ë“¤ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•¨ê»˜ ë°©ëŒ€í•´ì ¸ê°ˆ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¡œ ì •ë¦¬í•˜ëŠ”ê²ƒì— ëŒ€í•´ ì–´ë ¤ì›€ì„ ê²ªê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Four years ago, I wrote an article called <a href="https://www.gobeyond.dev/standard-package-layout/">Standard Package Layout</a> that tried to address one of the most difficult topics for even advanced Go developers: package layout. However, most developers still struggle with organizing their code into a directory structure that will grow gracefully with their application.</p>
</blockquote>
<p>ê±°ì˜ ëª¨ë“  í”„ë¡œê·¸ë˜ë° ì–¸ì–´ëŠ” ê´€ë ¨ëœ ê¸°ëŠ¥ë“¤ì„ í•¨ê»˜ ê·¸ë£¹í™”í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. RubyëŠ” gems, JavaëŠ” pacakagesë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì–¸ì–´ë“¤ì€ ì½”ë“œë¥¼ ê·¸ë£¹í™” í•˜ëŠ” ì¼ë°˜ì ì¸ ê·œì•½ì„ ê°–ê³  ìˆì§€ ì•ŠëŠ”ë° ì†”ì§íˆ ì´ê²ƒì´ í¬ê²Œ ì¤‘ìš”í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì…ë‹ˆë‹¤. ì½”ë“œë¥¼ ê·¸ë£¹í™”í•˜ëŠ” ê²ƒì€ ì „ì ìœ¼ë¡œ ê°œì¸ì˜ ì·¨í–¥ì— ë‹¬ë ¤ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Nearly all programming languages have a mechanism for grouping related functionality together. Ruby has gems, Java has packages. Those languages donâ€™t have a standard convention for grouping code because, honestly, it doesnâ€™t matter. It all comes down to personal preference.</p>
</blockquote>
<p>í•˜ì§€ë§Œ Goì–¸ì–´ë¡œ ì „í™˜í•˜ëŠ” ê°œë°œìë“¤ì€ ë§¤ìš° ë¹ˆë²ˆí•˜ê²Œ ê·¸ë“¤ì˜ íŒ¨í‚¤ì§€ êµ¬ì¡°í™”ê°€ ê·¸ë“¤ì„ ë‹¤ì‹œ ê´´ë¡­íˆê²Œ ëœë‹¤ëŠ” ê²ƒì— ë†€ë¼ê²Œ ë©ë‹ˆë‹¤. Goì˜ íŒ¨í‚¤ì§€ëŠ” ë‹¤ë¥¸ ì–¸ì–´ì˜ íŒ¨í‚¤ì§€ì˜ ê°œë…ê³¼ ì™œ ì´ë ‡ê²Œ ë‹¤ë¥¸ê±¸ê¹Œìš”? ê·¸ê²ƒì€ ë°”ë¡œ Goì—ì„œ íŒ¨í‚¤ì§€ ê°œë…ì€ ê·¸ë£¹ì´ ì•„ë‹Œ ê³„ì¸µì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>However, developers that transition to Go are surprised by how often their package organization comes back to bite them. Why are Go packages so different from other languages? Itâ€™s because theyâ€™re not groupsâ€”theyâ€™re layers.</p>
</blockquote>
<br>

<h2 id="ìˆœí™˜-ì°¸ì¡°-ì´í•´í•˜ê¸°"><a href="#ìˆœí™˜-ì°¸ì¡°-ì´í•´í•˜ê¸°" class="headerlink" title="ìˆœí™˜ ì°¸ì¡° ì´í•´í•˜ê¸°"></a>ìˆœí™˜ ì°¸ì¡° ì´í•´í•˜ê¸°</h2><p>Go ì–¸ì–´ì˜ íŒ¨í‚¤ì§€ì™€ ë‹¤ë¥¸ ì–¸ì–´ë“¤ì—ì„œì˜ ê·¸ë£¹í™”ê°„ì˜ ì£¼ìš”í•œ ì°¨ì´ëŠ” Go ì–¸ì–´ì—ì„œëŠ” íŒ¨í‚¤ì§€ê°„ì˜ ìˆœí™˜ ì˜ì¡´ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì— ìˆìŠµë‹ˆë‹¤. íŒ¨í‚¤ì§€ Aê°€ íŒ¨í‚¤ì§€ Bì— ì˜ì¡´í•  ìˆ˜ ìˆì§€ë§Œ ì´ì™€ ë™ì‹œì— íŒ¨í‚¤ì§€ Bê°€ íŒ¨í‚¤ì§€ Aì— ì˜ì¡´ì ì¼ ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The primary difference between Go packages and grouping in other languages is that Go doesnâ€™t allow for circular dependencies. Package A can depend on package B, but then package B cannot depend back on package A.</p>
</blockquote>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/figure1.png" alt="Package dependencies can only go one way"><span class="caption">Package dependencies can only go one way</span></div>

<p>ì´ëŸ¬í•œ ì œì•½ì€ ë‚˜ì¤‘ì— ê°œë°œìë“¤ì´ Aì™€ B íŒ¨í‚¤ì§€ ëª¨ë‘ì—ì„œ ê³µí†µëœ ì½”ë“œë¥¼ ê³µìœ í•˜ê²Œ í•˜ê³ ì í•  ë•Œ ë¬¸ì œë¥¼ ì•¼ê¸°í•˜ê²Œ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œì— ëŒ€í•œ 2ê°€ì§€ ì •ë„ì˜ ì†”ë£¨ì…˜ì´ ìˆìŠµë‹ˆë‹¤. ë‘ íŒ¨í‚¤ì§€ë¥¼ ë‹¨ì¼ íŒ¨í‚¤ì§€ë¡œ í•©ì¹˜ê±°ë‚˜ ë˜ ë‹¤ë¥¸ ì„¸ë²ˆì§¸ íŒ¨í‚¤ì§€ë¥¼ ë„ì…í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>This restriction causes issues for developers later on when they need to have both packages share common code. There are typically two solutions: either combine both packages into a single package or introduce a third package.</p>
</blockquote>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/figure2.png" alt=""></div>

<p>í•˜ì§€ë§Œ ë” ë§ì€ íŒ¨í‚¤ì§€ë“¤ë¡œ ë¶„í• í•´ê°€ëŠ” ê²ƒì€ ë¬¸ì œë¥¼ ë” í‚¤ìš°ëŠ” ê¼´ì…ë‹ˆë‹¤. ê²°êµ­ì—” ì‹¤ì œ êµ¬ì¡°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê±°ëŒ€í•œ íŒ¨í‚¤ì§€ë“¤ì˜ ì§‘í•©ìœ¼ë¡œ ê·€ê²°ë  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>However, splitting out into more and more packages only pushes the problem down the road. Eventually, you end up with a large mess of packages and no real structure.</p>
</blockquote>
<br>

<h2 id="ìŠ¤íƒ ë‹¤ë“œ-ë¼ì´ë¸ŒëŸ¬ë¦¬-ì°¨ìš©í•˜ê¸°"><a href="#ìŠ¤íƒ ë‹¤ë“œ-ë¼ì´ë¸ŒëŸ¬ë¦¬-ì°¨ìš©í•˜ê¸°" class="headerlink" title="ìŠ¤íƒ ë‹¤ë“œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¨ìš©í•˜ê¸°"></a>ìŠ¤íƒ ë‹¤ë“œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¨ìš©í•˜ê¸°</h2><p>Go í”„ë¡œê·¸ë˜ë° ì‹œì— í™œìš©ë˜ëŠ” ê°€ì¥ ìœ ìš©í•œ íŒë“¤ ì¤‘ì— í•˜ë‚˜ëŠ” ì—¬ëŸ¬ë¶„ì´ ê°€ì´ë“œê°€ í•„ìš”í•  ë•ŒëŠ” Goì˜ ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¸ê³ í•˜ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ì„¸ìƒì— ì™„ë²½í•œ ì½”ë“œë¼ëŠ” ê²ƒì€ ì—†ì§€ë§Œ Goì˜ ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í•´ë‹¹ ì–¸ì–´ë¥¼ ì„¤ê³„í•œ ì‚¬ëŒë“¤ì´ ì´ìƒì ì´ë¼ê³  ìƒê°í•˜ëŠ” ë‚´ìš©ë“¤ì„ ì••ì¶•í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>One of the most useful tips when programming Go is to look to the standard library when you need guidance. No code is perfect, but the Go standard library encapsulates many of the ideals of the creators of the language.</p>
</blockquote>
<p>ì˜ˆë¥¼ ë“¤ì–´, net/http íŒ¨í‚¤ì§€ëŠ” ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ net íŒ¨í‚¤ì§€ì˜ ì¶”ìƒì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ë©° net íŒ¨í‚¤ì§€ëŠ” io ë ˆì´ì–´ì˜ ì¶”ìƒì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. net íŒ¨í‚¤ì§€ê°€ net/http íŒ¨í‚¤ì§€ì— ì˜ì¡´ì ì¼ ìˆ˜ ìˆë‹¤ê³  ê°€ì •í•˜ëŠ” ê²ƒì€ ë‹¤ì†Œ ë¬´ì˜ë¯¸í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ íŒ¨í‚¤ì§€ êµ¬ì¡°ëŠ” ê½¤ ì˜ ë™ì‘í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>For example, the net/http package builds on top of the abstractions of the net package, which, in turn, builds on the abstractions of the io layer below it. This package structure works well because it would be nonsensical to imagine the net package needing to somehow depend on net/http.</p>
</blockquote>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/figure3.png" alt=""></div>

<p>Goì˜ ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì˜ ë™ì‘í•˜ëŠ” ê²ƒê³¼ëŠ” ë³„ê°œë¡œ ì´ê²ƒì„ Go ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— ì ìš©í•˜ëŠ” ê²ƒì€ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>While this works well in the standard library but can be difficult to translate to application development.</p>
</blockquote>
<br>

<h2 id="ì–´í”Œë¦¬ì¼€ì´ì…˜-ê°œë°œì—-ê³„ì¸µ-ê°œë…-ì ìš©í•˜ê¸°"><a href="#ì–´í”Œë¦¬ì¼€ì´ì…˜-ê°œë°œì—-ê³„ì¸µ-ê°œë…-ì ìš©í•˜ê¸°" class="headerlink" title="ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— ê³„ì¸µ ê°œë… ì ìš©í•˜ê¸°"></a>ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— ê³„ì¸µ ê°œë… ì ìš©í•˜ê¸°</h2><p><code>WTF Dial</code>ì´ë¼ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì˜ˆë¡œ ë“¤ì–´ ì‚´í´ë³¼ ì˜ˆì •ì´ë¯€ë¡œ ì´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•´ ì¢€ ë” ì‚´í´ë³´ê³ ì í•˜ì‹œëŠ” ë¶„ë“¤ì€ <a href="https://www.gobeyond.dev/wtf-dial/">í•´ë‹¹ í¬ìŠ¤íŒ…</a>ì„ ì½ì–´ ë³´ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Weâ€™ll be looking at an example application called WTF Dial, so you can read the <a href="https://www.gobeyond.dev/wtf-dial/">introductory post</a> to understand more about it.</p>
</blockquote>
<p>ì´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ 2ê°œì˜ ë…¼ë¦¬ì  ê³„ì¸µì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>In this application, we have two logical layers:</p>
</blockquote>
<blockquote>
<ol>
<li>An SQLite database</li>
<li>An HTTP server</li>
</ol>
</blockquote>
<p>ìš°ë¦¬ëŠ” sqliteì™€ http íŒ¨í‚¤ì§€ë¥¼ ê°ê° ìƒì„±í•©ë‹ˆë‹¤. ë§ì€ ì‚¬ëŒë“¤ì´ Goì˜ ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒ¨í‚¤ì§€ì™€ ë™ì¼í•œ í˜•íƒœì˜ íŒ¨í‚¤ì§€ ì´ë¦„ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ êº¼ë ¤í•  ê²ƒ ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìš°ë ¤ëŠ” ìœ íš¨í•œ ì§€ì ì´ê³  ì—¬ëŸ¬ë¶„ì€ http ëŒ€ì‹ ì— wtfhttpë¼ê³  ë„¤ì´ë°í•  ìˆ˜ë„ ìˆì„ê²ë‹ˆë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ì˜ HTTP íŒ¨í‚¤ì§€ëŠ” net/http íŒ¨í‚¤ì§€ë¥¼ ì™„ì „íˆ ìº¡ìŠí™”í•˜ê¸° ë•Œë¬¸ì— ë™ì¼í•œ íŒŒì¼ ë‚´ì—ì„œ ìš°ë¦¬ì˜ HTTP íŒ¨í‚¤ì§€ì™€ net/http íŒ¨í‚¤ì§€ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ê²°ì½” ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì €ëŠ” ëª¨ë“  íŒ¨í‚¤ì§€ ì´ë¦„ì— ì ‘ë‘ì–´ë¥¼ ë¶™ì´ëŠ” ì‘ì—…ì€ ì§€ë£¨í•˜ê³  ë³´ê¸°ì‹«ë‹¤ë¼ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì— ê·¸ ì§“ì€ í•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>We create a package for each of these â€” sqlite &amp; http. Many people will balk at naming a package the same name as a standard library package. Thatâ€™s a valid criticism and you could name it wtfhttp instead, however, our HTTP package fully encapsulates the net/http package so we never use them both in the same file. I find that prefixing every package is tedious and ugly, so I donâ€™t do it.</p>
</blockquote>
<br>

<h3 id="ë‹¨ìˆœí•œ-ì ‘ê·¼"><a href="#ë‹¨ìˆœí•œ-ì ‘ê·¼" class="headerlink" title="ë‹¨ìˆœí•œ ì ‘ê·¼"></a>ë‹¨ìˆœí•œ ì ‘ê·¼</h3><p>ìš°ë¦¬ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¡°í™”í•˜ëŠ” í•œê°€ì§€ ë°©ë²•ì€ ë°ì´í„° íƒ€ì…(Userë‚˜ Dialê³¼ ê°™ì€)ê³¼ í•¨ìˆ˜(FindUser()ë‚˜ CreateDial()ê³¼ ê°™ì€)ë¥¼ sqlite íŒ¨í‚¤ì§€ì— í¬í•¨ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤. http íŒ¨í‚¤ì§€ëŠ” sqlite íŒ¨í‚¤ì§€ì— ì§ì ‘ì ìœ¼ë¡œ ì˜ì¡´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>One way to structure our application would be to have our data types (e.g., User, Dial) and our functionality (e.g., FindUser(), CreateDial()) inside sqlite. Our http package could depend directly on it:</p>
</blockquote>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/figure4.png" alt=""></div>

<p>ì´ê²ƒì€ ê·¸ë¦¬ ë‚˜ìœ ì ‘ê·¼ ë°©ì‹ì´ ì•„ë‹ˆë©° ë‹¨ìˆœí•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ê½¤ ì˜ ë™ì‘í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ëª‡ê°€ì§€ ë¬¸ì œë“¤ì— ì§ë©´í•˜ê²Œ ë ê²ë‹ˆë‹¤. ì²«ì§¸ë¡œ ë°ì´í„° íƒ€ì…ì€ sqlite.Userì™€ sqlite.Dialë¡œ ë„¤ì´ë°ë˜ëŠ”ë° ë°ì´í„° íƒ€ì…ì´ë¼ëŠ” ê²ƒì€ SQLiteê°€ ì•„ë‹ˆë¼ ìš°ë¦¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì†í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ì´ëŸ¬í•œ ë„¤ì´ë°ì€ ì¢€ ì´ìƒí•´ë³´ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>This is not a bad approach, and it works for simple applications. We end up with a few issues though. First, our data types are named sqlite.User and sqlite.Dial. That sounds odd as our data types belong to our applicationâ€”not SQLite.</p>
</blockquote>
<p>ë‘˜ì§¸ë¡œ ìœ„ êµ¬ì¡°ìƒ HTTP ê³„ì¸µì—ì„œëŠ” ì˜¤ë¡œì§€ SQLiteì— ëŒ€í•œ ë°ì´í„°ë§Œì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì´ ë‘ ê³„ì¸µ ì‚¬ì´ì— ìºì‹± ê³„ì¸µì„ í•˜ë‚˜ ì¶”ê°€í•œë‹¤ê³  í•˜ë©´ ì–´ë–¤ì¼ì´ ë²Œì–´ì§ˆê¹Œìš”? ë˜ SQLiteê°€ ì•„ë‹Œ PostgreSQL í˜¹ì€ ë””ìŠ¤í¬ì— ì¡´ì¬í•˜ëŠ” JSON í˜•ì‹ì˜ ë°ì´í„°ì™€ ê°™ì€ ë‹¤ë¥¸ í˜•íƒœì˜ íƒ€ì…ë“¤ì€ ì–´ë–»ê²Œ ì§€ì›í• ê¹Œìš”?</p>
<blockquote>
<p>Second, our HTTP layer can only serve data from SQLite now. What happens if we need to add a caching layer in between? Or how do we support other types of data storage such as Postgres or even storing as JSON on disk?</p>
</blockquote>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ SQLiteë¥¼ ì¶”ìƒí™”í•˜ëŠ” ê³„ì¸µì´ ì¡´ì¬í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— ëª¨ë“  HTTP í…ŒìŠ¤íŠ¸ì—ì„œ SQLite ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ë™í•´ì•¼ë§Œ í•©ë‹ˆë‹¤. </p>
<blockquote>
<p>Finally, we need to run an SQLite database for every HTTP test since thereâ€™s no abstraction layer to mock it out. I generally support doing end-to-end testing as much as you can, but there are valid use cases for introducing unit tests in your higher layers. This is especially true once you introduce cloud services that you wouldnâ€™t want to run on every test invocation.</p>
</blockquote>
<br>

<h3 id="ë¹„ì¦ˆë‹ˆìŠ¤-ë„ë©”ì¸-ê³ ë¦½ì‹œí‚¤ê¸°"><a href="#ë¹„ì¦ˆë‹ˆìŠ¤-ë„ë©”ì¸-ê³ ë¦½ì‹œí‚¤ê¸°" class="headerlink" title="ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ê³ ë¦½ì‹œí‚¤ê¸°"></a>ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ê³ ë¦½ì‹œí‚¤ê¸°</h3><p>ìš°ë¦¬ê°€ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ì²«ë²ˆì§¸ ì‚¬í•­ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ì„ ê·¸ë“¤ ìì²´ì ì¸ íŒ¨í‚¤ì§€ë¡œ ì´ë™ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë„ë©”ì¸ì„ â€œì–´í”Œë¦¬ì¼€ì´ì…˜ ë„ë©”ì¸â€ì´ë¼ê³  ì¹­í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— íŠ¹í™”ëœ ë°ì´í„° íƒ€ì…ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The first thing we can change is moving our business domain to its own package. This can also be called the â€œapplication domainâ€. Itâ€™s the data types specific to your applicationâ€”e.g., User, Dial in the case of WTF Dial.</p>
</blockquote>
<p>ì €ëŠ” ì´ëŸ¬í•œ ëª©ì ìœ¼ë¡œ root íŒ¨í‚¤ì§€(wtf)ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ì´ëŠ” ì´ë¯¸ ì œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„ì— ë”°ë¼ í¸ë¦¬í•˜ê²Œ ë„¤ì´ë°ë˜ì–´ìˆê³ , ìƒˆë¡œìš´ ê°œë°œìê°€ ì½”ë“œ ë² ì´ìŠ¤ë¥¼ ì—´ì–´ ë³¼ ë•Œ ê°€ì¥ ë¨¼ì € ë³´ëŠ” ê³³ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ì œ ë°ì´í„° íƒ€ì…ì˜ ì´ë¦„ì€ wtf.User, wtf.Dialë¡œ ìœ„ì—ì„œ ë‚˜ì˜¨ ì´ë¦„ë³´ë‹¤ëŠ” ë” ì ì ˆí•´ ë³´ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>I use the root package (wtf) for this purpose as itâ€™s already conveniently named after my application, and itâ€™s the first place new developers look when they open the code base. Our types are now named more appropriately as wtf.User and wtf.Dial.</p>
</blockquote>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/figure5.png" alt=""></div>

<p>ì—¬ëŸ¬ë¶„ì€ ì•„ë˜ ì˜ˆì‹œì—ì„œ wtf.Dial íƒ€ì…ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>You can see an example of this with the wtf.Dial type:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Dial <span class="keyword">struct</span> {</span><br><span class="line">	ID <span class="keyword">int</span> <span class="string">`json:"id"`</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Owner of the dial. Only the owner may delete the dial.</span></span><br><span class="line">	UserID <span class="keyword">int</span>   <span class="string">`json:"userID"`</span></span><br><span class="line">	User   *User <span class="string">`json:"user"`</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Human-readable name of the dial.</span></span><br><span class="line">	Name <span class="keyword">string</span> <span class="string">`json:"name"`</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Code used to share the dial with other users.</span></span><br><span class="line">	<span class="comment">// It allows the creation of a shareable link without</span></span><br><span class="line">	<span class="comment">// explicitly inviting users.</span></span><br><span class="line">	InviteCode <span class="keyword">string</span> <span class="string">`json:"inviteCode,omitempty"`</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Aggregate WTF level for the dial.</span></span><br><span class="line">	Value <span class="keyword">int</span> <span class="string">`json:"value"`</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Timestamps for dial creation &amp; last update.</span></span><br><span class="line">	CreatedAt time.Time <span class="string">`json:"createdAt"`</span></span><br><span class="line">	UpdatedAt time.Time <span class="string">`json:"updatedAt"`</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// List of associated members and their contributing WTF level.</span></span><br><span class="line">	<span class="comment">// This is only set when returning a single dial.</span></span><br><span class="line">	Memberships []*DialMembership <span class="string">`json:"memberships,omitempty"`</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ìœ„ ì½”ë“œì—ì„œëŠ” ì„¸ë¶€ êµ¬í˜„ì— ëŒ€í•œ ì–´ë– í•œ ì°¸ì¡°ë„ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨ì§€ Goì˜ ë‚´ì¥ íƒ€ì…ë“¤ê³¼ time.Timeë§Œ ì¡´ì¬í•©ë‹ˆë‹¤. JOSN íƒœê·¸ëŠ” í¸ì˜ë¥¼ ìœ„í•´ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>In this code, there is no reference to any implementation detailsâ€”just primitive types &amp; time.Time. JSON tags are added for convenience.</p>
</blockquote>
<br>

<h3 id="ì¶”ìƒí™”-ì„œë¹„ìŠ¤ë¥¼-í†µí•œ-ì˜ì¡´ì„±-ì œê±°"><a href="#ì¶”ìƒí™”-ì„œë¹„ìŠ¤ë¥¼-í†µí•œ-ì˜ì¡´ì„±-ì œê±°" class="headerlink" title="ì¶”ìƒí™” ì„œë¹„ìŠ¤ë¥¼ í†µí•œ ì˜ì¡´ì„± ì œê±°"></a>ì¶”ìƒí™” ì„œë¹„ìŠ¤ë¥¼ í†µí•œ ì˜ì¡´ì„± ì œê±°</h3><p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ê°€ ì¡°ê¸ˆì€ ë” ë‚˜ì•„ì§„ê²ƒ ê°™ì•„ ë³´ì´ì§€ë§Œ HTTPê°€ SQLiteì— ì˜ì¡´ì ì´ë¼ëŠ” ê²ƒì€ ì—¬ì „íˆ ì–´ìƒ‰í•©ë‹ˆë‹¤. ìš°ë¦¬ì˜ HTTP ì„œë²„ëŠ” ë°ì´í„° ì €ì¥ ê³µê°„ì´ SQLiteì¸ì§€ ì•„ë‹Œì§€ëŠ” ì‹ ê²½ì“°ì§€ ì•Šê³  ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê¸°ë¥¼ ì›í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Our application structure is looking better, but itâ€™s still odd that HTTP depends on SQLite. Our HTTP server wants to fetch data from an underlying data storageâ€”it doesnâ€™t specifically care if itâ€™s SQLite or not.</p>
</blockquote>
<p>ì´ ë¶€ë¶„ì„ ìˆ˜ì •í•˜ê¸° ìœ„í•´, ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ë‚´ì— ì„œë¹„ìŠ¤ë“¤ì„ ì œê³µí•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±í• ê²ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ë“¤ì€ ì „í˜•ì ì¸ CRUD ì´ì§€ë§Œ ë˜ ë‹¤ë¥¸ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í™•ì¥í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>To fix this, weâ€™ll create interfaces for the services in our business domain. These services are typically Create/Read/Update/Delete (CRUD) but can extend to other operations.</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// DialService represents a service for managing dials.</span></span><br><span class="line"><span class="keyword">type</span> DialService <span class="keyword">interface</span> {</span><br><span class="line">	<span class="comment">// Retrieves a single dial by ID along with associated memberships. Only</span></span><br><span class="line">	<span class="comment">// the dial owner &amp; members can see a dial. Returns ENOTFOUND if dial does</span></span><br><span class="line">	<span class="comment">// not exist or user does not have permission to view it.</span></span><br><span class="line">	FindDialByID(ctx context.Context, id <span class="keyword">int</span>) (*Dial, error)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Retrieves a list of dials based on a filter. Only returns dials that</span></span><br><span class="line">	<span class="comment">// the user owns or is a member of. Also returns a count of total matching</span></span><br><span class="line">	<span class="comment">// dials which may different from the number of returned dials if the</span></span><br><span class="line">	<span class="comment">// "Limit" field is set.</span></span><br><span class="line">	FindDials(ctx context.Context, filter DialFilter) ([]*Dial, <span class="keyword">int</span>, error)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Creates a new dial and assigns the current user as the owner.</span></span><br><span class="line">	<span class="comment">// The owner will automatically be added as a member of the new dial.</span></span><br><span class="line">	CreateDial(ctx context.Context, dial *Dial) error</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Updates an existing dial by ID. Only the dial owner can update a dial.</span></span><br><span class="line">	<span class="comment">// Returns the new dial state even if there was an error during update.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Returns ENOTFOUND if dial does not exist. Returns EUNAUTHORIZED if user</span></span><br><span class="line">	<span class="comment">// is not the dial owner.</span></span><br><span class="line">	UpdateDial(ctx context.Context, id <span class="keyword">int</span>, upd DialUpdate) (*Dial, error)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Permanently removes a dial by ID. Only the dial owner may delete a dial.</span></span><br><span class="line">	<span class="comment">// Returns ENOTFOUND if dial does not exist. Returns EUNAUTHORIZED if user</span></span><br><span class="line">	<span class="comment">// is not the dial owner.</span></span><br><span class="line">	DeleteDial(ctx context.Context, id <span class="keyword">int</span>) error</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ì œ ìš°ë¦¬ì˜ ë„ë©”ì¸ íŒ¨í‚¤ì§€(wtf)ëŠ” ë°ì´í„° êµ¬ì¡°ë¿ë§Œ ì•„ë‹ˆë¼ ê³„ì¸µ ê°„ì˜ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë°©ì‹ì„ ì •ì˜í•œ ì¸í„°í˜ì´ìŠ¤ë„ êµ¬ì²´í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ìš°ë¦¬ì˜ íŒ¨í‚¤ì§€ ê³„ì¸µ êµ¬ì¡°ë¥¼ ìˆ˜í‰ì ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ì—ˆìœ¼ë©° ì´ë¥¼ í†µí•´ ì´ì œ ëª¨ë“  íŒ¨í‚¤ì§€ë“¤ì€ ë„ë©”ì¸ íŒ¨í‚¤ì§€ì— ì˜ì¡´í•˜ê²Œë©ë‹ˆë‹¤. ì´ê²ƒì€ íŒ¨í‚¤ì§€ê°„ì˜ ì§ì ‘ì ì¸ ì˜ì¡´ ê´€ê³„ë¥¼ ê¹° ìˆ˜ ìˆë„ë¡ í•´ì£¼ë©° mock íŒ¨í‚¤ì§€ì™€ ê°™ì€ ë¶€ê°€ì ì¸ êµ¬í˜„ë“¤ë„ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Now our domain package (wtf) specifies not just the data structures but also the interface contracts for how our layers can communicate with one another. This flattens our package hierarchy so that all packages now depend on the domain package. This lets us break direct dependencies between packages and introduce alternate implementations such as a mock package.</p>
</blockquote>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/figure6.png" alt=""></div>

<br>

<h3 id="íŒ¨í‚¤ì§€ì˜-ì¬íŒ¨í‚¤ì§€í™”"><a href="#íŒ¨í‚¤ì§€ì˜-ì¬íŒ¨í‚¤ì§€í™”" class="headerlink" title="íŒ¨í‚¤ì§€ì˜ ì¬íŒ¨í‚¤ì§€í™”"></a>íŒ¨í‚¤ì§€ì˜ ì¬íŒ¨í‚¤ì§€í™”</h3><p>íŒ¨í‚¤ì§€ê°„ì˜ ì˜ì¡´ì„±ì„ ê¹¨ëŠ”ê²ƒì€ ìš°ë¦¬ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ìœ ì—°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤. ìš°ë¦¬ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë°”ì´ë„ˆë¦¬ì¸ wtfdì— ëŒ€í•´ì„  ì—¬ì „íˆ http íŒ¨í‚¤ì§€ê°€ sqliteì— ì˜ì¡´ì ì´ì§€ë§Œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ http íŒ¨í‚¤ì§€ê°€ ìƒˆë¡œìš´ mock íŒ¨í‚¤ì§€ì— ì˜ì¡´í•˜ë„ë¡ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Breaking the dependency between packages allows us flexibility in how we use our code. For our application binary, wtfd, we still want http to depend on sqlite (see wtf/main.go) but for our tests we can change http to depend on our new mock package (see http/server_test.go):</p>
</blockquote>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/figure7.png" alt=""></div>

<p>ì´ê²ƒì€ WTF Dialê³¼ ê°™ì€ ì‘ì€ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì¡°ê¸ˆ ì§€ë‚˜ì¹œ ì‘ì—…ì¼ ìˆ˜ ìˆìœ¼ë‚˜ ìš°ë¦¬ê°€ ì†ŒìŠ¤ ì½”ë“œë¥¼ ëŠ˜ë ¤ ë‚˜ê°ì— ìˆì–´ì„œëŠ” ì ì°¨ ì¤‘ìš”í•œ ë¬¸ì œê°€ ë  ê²ë‹ˆë‹¤.</p>
<blockquote>
<p>This may be overkill for our small web application, WTF Dial, but it becomes increasingly important as we grow our codebase.</p>
</blockquote>
<br>

<h2 id="ê²°ë¡ "><a href="#ê²°ë¡ " class="headerlink" title="ê²°ë¡ "></a>ê²°ë¡ </h2><p>íŒ¨í‚¤ì§€ëŠ” Go ì–¸ì–´ì—ì„œ ë§¤ìš° ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ëŸ¬ë¶„ì´ íŒ¨í‚¤ì§€ë¥¼ ê³„ì¸µì´ ì•„ë‹Œ ê·¸ë£¹ìœ¼ë¡œ ë°”ë¼ë³¸ë‹¤ë©´ ëì—†ëŠ” í˜¼ë€ì˜ ì›ì²œì´ê¸°ë„ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë…¼ë¦¬ì ì¸ ê³„ì¸µì„ ì´í•´í•œ í›„ì— ë°ì´í„° íƒ€ì…ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¶”ì¶œí•´ë‚¼ ìˆ˜ ìˆìœ¼ë©° ì´ê²ƒë“¤ì„ ë‚˜ë¨¸ì§€ ëª¨ë“  ì„œë¸Œ íŒ¨í‚¤ì§€ë“¤ì´ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë²”ìš©ì ì¸ ë„ë©”ì¸ ì–¸ì–´ë¥¼ ì œê³µí•˜ê¸° ìœ„í•œ ë£¨íŠ¸ íŒ¨í‚¤ì§€ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë„ë©”ì¸ ì–¸ì–´ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒì€ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê·œëª¨ë¥¼ í‚¤ì›Œë‚˜ê°€ëŠ”ë° í•„ìˆ˜ì ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Packages are a powerful tool in Go but are the source of endless frustration if you view them as groups instead of layers. After understanding the logical layers of your application, you can extract data types &amp; interface contracts for your business domain and move them into your root package to serve as a common domain language for all subpackages. Defining this domain language is essential to growing your application over time.</p>
</blockquote>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>reference</strong></p>
<ul>
<li><a href="https://www.gobeyond.dev/packages-as-layers/">https://www.gobeyond.dev/packages-as-layers/</a></li>
</ul>
]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>go</tag>
        <tag>golang</tag>
        <tag>package layer</tag>
        <tag>go layout</tag>
        <tag>organize go code</tag>
      </tags>
  </entry>
  <entry>
    <title>CMakeì— ëŒ€í•´ ì•Œì•„ë³´ì</title>
    <url>/2022/03/05/cmake-tutorial/</url>
    <content><![CDATA[<p><em><strong>ë­í•˜ëŠ” ë†ˆì¸ì§€ëŠ” ì•Œê³  ì“°ì</strong></em> ì‹œë¦¬ì¦ˆì˜ ì„¸ë²ˆì§¸ ì£¼ì œëŠ” <code>CMake</code>ì…ë‹ˆë‹¤.</p>
<span id="more"></span>

<p>í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” <a href="https://cmake.org/cmake/help/v3.22/guide/tutorial/index.html">CMake ê³µì‹ í™ˆí˜ì´ì§€</a>ì˜ íŠœí† ë¦¬ì–¼ ë‚´ìš©ì„ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤. <a href="https://github.com/Kitware/CMake">CMake ê³µì‹ github</a>ì—ì„œ ì œê³µí•´ì£¼ëŠ” í”„ë¡œì íŠ¸ í´ë” êµ¬ì„±ê³¼ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì°¸ì¡°í•˜ì—¬ ì¢€ ë” ìƒì„¸íˆ CMakeì˜ ì‚¬ìš©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. (íŠœí† ë¦¬ì–¼ ê´€ë ¨ ì†ŒìŠ¤ ì½”ë“œëŠ” <a href="https://github.com/Kitware/CMake/tree/master/Help/guide/tutorial">ì´ê³³</a>ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.)</p>
<p>í•œêµ­ì–´ë¡œ ëœ CMake ê´€ë ¨ ì„¤ëª…ì´ í•„ìš”í•˜ì‹œë‹¤ë©´ <a href="https://gist.github.com/luncliff/6e2d4eb7ca29a0afd5b592f72b80cb5c">CMake í• ë•Œ ìª¼ì˜¤ì˜¤ê¸ˆ ë„ì›€ì´ ë˜ëŠ” ë¬¸ì„œ</a>ë„ êµ‰ì¥íˆ ì˜ ì •ë¦¬ë˜ì–´ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<br>

<!-- toc -->

<br>

<hr>
<h1 id="CMake-Tutorial"><a href="#CMake-Tutorial" class="headerlink" title="CMake Tutorial"></a>CMake Tutorial</h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>CMake íŠœí† ë¦¬ì–¼ì€ ì¼ë°˜ì ì¸ ë¹Œë“œ ì‹œìŠ¤í…œ ì´ìŠˆë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë‹¨ê³„ë³„ ê°€ì´ë“œë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤. ì˜ˆì‹œë¡œ ì œê³µë˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ì–‘í•œ ì£¼ì œë“¤ì´ í•¨ê»˜ ì²˜ë¦¬ë˜ëŠ” ë°©ì‹ì„ ì‚´í´ë³´ëŠ” ê²ƒì€ ì•„ì£¼ í° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The CMake tutorial provides a step-by-step guide that covers common build system issues that CMake helps address. Seeing how various topics all work together in an example project can be very helpful.</p>
</blockquote>
<hr>
<h2 id="Step-1-A-Basic-Starting-Point"><a href="#Step-1-A-Basic-Starting-Point" class="headerlink" title="Step 1: A Basic Starting Point"></a>Step 1: A Basic Starting Point</h2><p>ê°€ì¥ ê¸°ë³¸ì ì¸ í”„ë¡œì íŠ¸ëŠ” ì†ŒìŠ¤ ì½”ë“œë¡œë¶€í„° ë¹Œë“œë˜ëŠ” ì‹¤í–‰ íŒŒì¼ì…ë‹ˆë‹¤. ì´ ê°„ë‹¨í•œ í”„ë¡œì íŠ¸ì—ì„œëŠ” <code>CMakeLists.txt</code> íŒŒì¼ì— ë‹¨ 3ì¤„ë§Œì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ê²ƒì´ ìš°ë¦¬ì˜ íŠœí† ë¦¬ì–¼ ì‹œì‘ ì§€ì ì´ ë  ê²ƒì…ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‘ì„±ëœ <code>CMakeLists.txt</code> íŒŒì¼ì„ <code>Step1</code> ë””ë ‰í† ë¦¬ì•ˆì— ìƒì„±í•´ë´…ì‹œë‹¤.</p>
<blockquote>
<p>The most basic project is an executable built from source code files. For simple projects, a three line <code>CMakeLists.txt</code> file is all that is required. This will be the starting point for our tutorial. Create a <code>CMakeLists.txt</code> file in the <code>Step1</code> directory that looks like:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.10)</span><br><span class="line"></span><br><span class="line"># set the project name</span><br><span class="line">project(Tutorial)</span><br><span class="line"></span><br><span class="line"># add the executable</span><br><span class="line">add_executable(Tutorial tutorial.cxx)</span><br></pre></td></tr></table></figure>

<p>ì´ ì˜ˆì œì—ì„œëŠ” <code>CMakeLists.txt</code> íŒŒì¼ì— ì†Œë¬¸ìë¡œ ì´ë£¨ì–´ì§„ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì— ì£¼ëª©í•˜ê¸°ë°”ëë‹ˆë‹¤. CMakeì—ì„œëŠ” ëŒ€ë¬¸ì, ì†Œë¬¸ì ê·¸ë¦¬ê³  ì´ ë‘˜ì´ í˜¼í•©ëœ ëª…ë ¹ì–´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. <code>tutorial.cxx</code>ì˜ ì†ŒìŠ¤ ì½”ë“œëŠ” <code>Step1</code> ë””ë ‰í† ë¦¬ì—ì„œ í™•ì¸ê°€ëŠ¥í•˜ë©° ì´ ì½”ë“œëŠ” ì œê³±ê·¼ì„ ê³„ì‚°í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Note that this example uses lower case commands in the <code>CMakeLists.txt</code> file. Upper, lower, and mixed case commands are supported by CMake. The source code for <code>tutorial.cxx</code> is provided in the <code>Step1</code> directory and can be used to compute the square root of a number.</p>
</blockquote>
<h3 id="Build-and-Run"><a href="#Build-and-Run" class="headerlink" title="Build and Run"></a>Build and Run</h3><p>ì´ê²ƒì´ í•„ìš”í•œ ëª¨ë“ ê²ƒì…ë‹ˆë‹¤ - ì§€ê¸ˆ ë‹¹ì¥ì— ìš°ë¦¬ì˜ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ë¨¼ì €, í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ <code>cmake</code> ì‹¤í–‰ íŒŒì¼ ë˜ëŠ” <code>cmake-gui</code> ì‹¤í–‰í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ ì—¬ëŸ¬ë¶„ì´ ì„ íƒí•œ ë¹Œë“œ íˆ´ì„ ê°€ì§€ê³  ë¹Œë“œí•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Thatâ€™s all that is needed - we can build and run our project now! First, run the <code>cmake</code> executable or the <code>cmake-gui</code> to configure the project and then build it with your chosen build tool.</p>
</blockquote>
<p>ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ë¶„ì€ ì»¤ë§¨ë“œ ë¼ì¸ì—ì„œ CMake ì†ŒìŠ¤ ì½”ë“œ íŠ¸ë¦¬ì˜ <code>Help/guide/tutorial</code> ê²½ë¡œë¡œ ì´ë™í•  ìˆ˜ ìˆê³  ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ë¹Œë“œ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>For example, from the command line we could navigate to the <code>Help/guide/tutorial</code> directory of the CMake source code tree and create a build directory:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir Step1_build</span><br></pre></td></tr></table></figure>

<p>ë‹¤ìŒìœ¼ë¡œ, ìƒì„±í•œ ë¹Œë“œ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œ ë’¤ í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê³  ë„¤ì´í‹°ë¸Œ ë¹Œë“œ ì‹œìŠ¤í…œì„ ìƒì„±í•˜ê¸° ìœ„í•´ CMakeë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤:</p>
<blockquote>
<p>Next, navigate to the build directory and run CMake to configure the project and generate a native build system:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd Step1_build</span><br><span class="line">cmake ../Step1</span><br></pre></td></tr></table></figure>

<p>ê·¸ë¦¬ê³ ë‚˜ì„œ ì‹¤ì§ˆì ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì»´íŒŒì¼í•˜ê³  ë§í¬í•˜ê¸° ìœ„í•´ ë¹Œë“œ ì‹œìŠ¤í…œì„ í˜¸ì¶œí•©ë‹ˆë‹¤:</p>
<blockquote>
<p>Then call that build system to actually compile/link the project:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmake --build</span><br></pre></td></tr></table></figure>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, ì•„ë˜ ëª…ë ¹ì–´ë“¤ì„ í†µí•´ ë¹Œë“œëœ <code>Tutorial</code>ì„ ì‚¬ìš©í•´ë´…ì‹œë‹¤:</p>
<blockquote>
<p>Finally, try to use the newly built <code>Tutorial</code> with these commands:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Tutorial 4294967296</span><br><span class="line">Tutorial 10</span><br><span class="line">Tutorial</span><br></pre></td></tr></table></figure>

<h3 id="Adding-a-Version-Number-and-Configured-Header-File"><a href="#Adding-a-Version-Number-and-Configured-Header-File" class="headerlink" title="Adding a Version Number and Configured Header File"></a>Adding a Version Number and Configured Header File</h3><p>ìš°ë¦¬ê°€ ì¶”ê°€í•˜ê²Œ ë  ì²«ë²ˆì§¸ ê¸°ëŠ¥ì€ ìš°ë¦¬ì˜ ì‹¤í–‰ íŒŒì¼ê³¼ í”„ë¡œì íŠ¸ì— ë²„ì „ ë²ˆí˜¸ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë²„ì „ ë²ˆí˜¸ë¥¼ ì†ŒìŠ¤ ì½”ë“œ ìƒì— ì¶”ê°€í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•ì´ì§€ë§Œ <code>CMakeLists.txt</code>ì˜ ì‚¬ìš©ì€ ì´ë¥¼ ì¢€ ë” ìœ ì—°í•˜ê²Œ í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>The first feature we will add is to provide our executable and project with a version number. While we could do this exclusively in the source code, using <code>CMakeLists.txt</code> provides more flexibility.</p>
</blockquote>
<p>ë¨¼ì €, í”„ë¡œì íŠ¸ì˜ ì´ë¦„ê³¼ ë²„ì „ ë²ˆí˜¸ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ì¸ project()ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ <code>CMakeLists.txt</code> íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>First, modify the <code>CMakeLists.txt</code> file to use the project() command to set the project name and version number.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.10)</span><br><span class="line"></span><br><span class="line"># set the project name and version</span><br><span class="line">project(Tutorial VERSION 1.0)</span><br></pre></td></tr></table></figure>

<p>ê·¸ë¦¬ê³ ë‚˜ì„œ, ë²„ì „ ë²ˆí˜¸ë¥¼ ì†ŒìŠ¤ ì½”ë“œë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ í—¤ë” íŒŒì¼ì„ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Then, configure a header file to pass the version number to the source code:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">configure_file(TutorialConfig.h.in TutorialConfig.h)</span><br></pre></td></tr></table></figure>

<p>ì„¤ì •ëœ íŒŒì¼ì€ ë°”ì´ë„ˆë¦¬ íŠ¸ë¦¬ ì•ˆì— ì‘ì„±ë  ê²ƒì´ê¸°ë•Œë¬¸ì— í¬í•¨ íŒŒì¼ì„ ì°¾ê¸° ìœ„í•´ ê²½ë¡œ ë¦¬ìŠ¤íŠ¸ì— í•´ë‹¹ ë””ë ‰í† ë¦¬ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤. <code>CMakeLists.txt</code> íŒŒì¼ì˜ ëì— ì•„ë˜ ë¼ì¸ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Since the configured file will be written into the binary tree, we must add that directory to the list of paths to search for include files. Add the following lines to the end of the <code>CMakeLists.txt</code> file:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">target_include_directories(Tutorial PUBLIC &quot;$&#123;PROJECT_BINARY_DIR&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p>ì—¬ëŸ¬ë¶„ì´ ì„ í˜¸í•˜ëŠ” í¸ì§‘ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ ë‚´ìš©ì„ í¬í•¨í•˜ê³  ìˆëŠ” <code>TutorialConfig.h.in</code> íŒŒì¼ì„ ì†ŒìŠ¤ ë””ë ‰í† ë¦¬ì— ìƒì„±í•´ì¤ì‹œë‹¤.</p>
<blockquote>
<p>Using your favorite editor, create <code>TutorialConfig.h.in</code> in the source directory with the following contents:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// the configured options and settings for Tutorial</span><br><span class="line">#define Tutorial_VERSION_MAJOR @Tutorial_VERSION_MAJOR@</span><br><span class="line">#define Tutorial_VERSION_MINOR @Tutorial_VERSION_MINOR@</span><br></pre></td></tr></table></figure>

<p>CMakeê°€ ì´ í—¤ë” íŒŒì¼ì„ ì„¤ì •í•˜ëŠ” ë™ì•ˆ <code>@Tutorial_VERSION_MAJOR@</code>ì™€ <code>@Tutorial_VERSION_MINOR@</code> ê°’ì€ ëŒ€ì²´ë  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>When CMake configures this header file the values for <code>@Tutorial_VERSION_MAJOR@</code> and <code>@Tutorial_VERSION_MINOR@</code> will be replaced.</p>
</blockquote>
<p>ë‹¤ìŒìœ¼ë¡œ ì„¤ì •ëœ í—¤ë” íŒŒì¼ì¸ <code>TutorialConfig.h</code>ë¥¼ í¬í•¨í•˜ê¸° ìœ„í•´ <code>tutorial.cxx</code> íŒŒì¼ì„ ìˆ˜ì •í•©ì‹œë‹¤.</p>
<blockquote>
<p>Next modify <code>tutorial.cxx</code> to include the configured header file, <code>TutorialConfig.h</code>.</p>
</blockquote>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, ì•„ë˜ì™€ ê°™ì´ <code>tutorial.cxx</code> íŒŒì¼ì„ ìˆ˜ì •í•´ì„œ ì‹¤í–‰ íŒŒì¼ì˜ ì´ë¦„ê³¼ ë²„ì „ ë²ˆí˜¸ë¥¼ ì¶œë ¥í•´ë´…ì‹œë‹¤.</p>
<blockquote>
<p>Finally, letâ€™s print out the executable name and version number by updating <code>tutorial.cxx</code> as follows:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if (argc &lt; 2) &#123;</span><br><span class="line">    // report version</span><br><span class="line">    std::cout &lt;&lt; argv[0] &lt;&lt; &quot; Version &quot; &lt;&lt; Tutorial_VERSION_MAJOR &lt;&lt; &quot;.&quot;</span><br><span class="line">              &lt;&lt; Tutorial_VERSION_MINOR &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; number&quot; &lt;&lt; std::endl;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Specify-the-C-Standard"><a href="#Specify-the-C-Standard" class="headerlink" title="Specify the C++ Standard"></a>Specify the C++ Standard</h3><p>ë‹¤ìŒìœ¼ë¡œ <code>tutorial.cxx</code> ì†ŒìŠ¤ ë‚´ì— <code>atof</code>ë¥¼ <code>std::stod</code>ë¡œ ë³€ê²½í•¨ìœ¼ë¡œì¨ C++11 ê¸°ëŠ¥ì„ ìš°ë¦¬ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•´ë´…ì‹œë‹¤. ë™ì‹œì— <code>#include &lt;cstdlib&gt;</code> ì„ ì–¸ë„ ì œê±°í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Next letâ€™s add some C++11 features to our project by replacing <code>atof</code> with <code>std::stod</code> in <code>tutorial.cxx</code>. At the same time, remove <code>#include &lt;cstdlib&gt;</code>.</p>
</blockquote>
<p>ìš°ë¦¬ëŠ” ì˜¬ë°”ë¥¸ í”Œë˜ê·¸ ê°’ì„ ì‚¬ìš©í•˜ë„ë¡ CMake ì½”ë“œì— ëª…ì‹œì ìœ¼ë¡œ ì–¸ê¸‰í•  í•„ìš”ê°€ ìˆì„ê²ƒì…ë‹ˆë‹¤. CMakeì—ì„œ íŠ¹ì • C++ ë²„ì „ì„ ì§€ì›í•˜ë„ë¡ í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ CMAKE_CXX_STANDARD ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” <code>CMakeLists.txt</code> íŒŒì¼ì˜ CMAKE_CXX_STANDARD ë³€ìˆ˜ë¥¼ <code>11</code>ë¡œ ì„¤ì •í•˜ê³ , CMAKE_CXX_STANDARD_REQUIRED ë³€ìˆ˜ë¥¼ <code>True</code>ë¡œ ì„¤ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. <code>CMAKE_CXX_STANDARD</code>ëŠ” <code>add_executable</code> ëª…ë ¹ì–´ í˜¸ì¶œ ì´ì „ì— ì„ ì–¸ë˜ì–´ì•¼í•œë‹¤ëŠ” ê²ƒì„ ìŠì§€ë§ê¸° ë°”ëë‹ˆë‹¤.</p>
<blockquote>
<p>We will need to explicitly state in the CMake code that it should use the correct flags. The easiest way to enable support for a specific C++ standard in CMake is by using the CMAKE_CXX_STANDARD variable. For this tutorial, set the CMAKE_CXX_STANDARD variable in the <code>CMakeLists.txt</code> file to <code>11</code> and CMAKE_CXX_STANDARD_REQUIRED to <code>True</code>. Make sure to add the <code>CMAKE_CXX_STANDARD</code> declarations above the call to <code>add_executable</code>.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.10)</span><br><span class="line"></span><br><span class="line"># set the project name and version</span><br><span class="line">project(Tutorial VERSION 1.0)</span><br><span class="line"></span><br><span class="line"># specify the C++ standard</span><br><span class="line">set(CMAKE_CXX_STANDARD 11)</span><br><span class="line">set(CMAKE_CXX_STANDARD_REQUIRED True)</span><br></pre></td></tr></table></figure>

<h3 id="Rebuild"><a href="#Rebuild" class="headerlink" title="Rebuild"></a>Rebuild</h3><p>ìš°ë¦¬ì˜ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ì‹œ ë¹Œë“œí•´ë´…ì‹œë‹¤. ìš°ë¦¬ëŠ” ì´ë¯¸ ë¹Œë“œ ë””ë ‰í† ë¦¬ ìƒì„±í–ˆê³  CMakeë¥¼ ì‹¤í–‰í–ˆê¸°ë•Œë¬¸ì— ë¹Œë“œ ê³¼ì •ìœ¼ë¡œ ê±´ë„ˆë›¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>Letâ€™s build our project again. We already created a build directory and ran CMake, so we can skip to the build step:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd Step1_build</span><br><span class="line">cmake --build .</span><br></pre></td></tr></table></figure>

<p>ì´ì œ ì´ì „ê³¼ ë™ì¼í•œ ëª…ë ¹ì–´ë¥¼ í†µí•´ ìƒˆë¡­ê²Œ ë¹Œë“œëœ <code>Tutorial</code>ì„ ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Now we can try to use the newly built <code>Tutorial</code> with same commands as before:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Tutorial 4294967296</span><br><span class="line">Tutorial 10</span><br><span class="line">Tutorial</span><br></pre></td></tr></table></figure>

<p>ì¸ì ì—†ì´ ì‹¤í–‰ íŒŒì¼ì„ êµ¬ë™ í• ë•Œ ë²„ì „ ë²ˆí˜¸ê°€ ì¶œë ¥ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.</p>
<blockquote>
<p>Check that the version number is now reported when running the executable without any arguments.</p>
</blockquote>
<hr>
<h2 id="Step-2-Adding-a-Library"><a href="#Step-2-Adding-a-Library" class="headerlink" title="Step 2: Adding a Library"></a>Step 2: Adding a Library</h2><p>ì´ì œ ìš°ë¦¬ì˜ í”„ë¡œì íŠ¸ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ë³¼ ê²ƒì…ë‹ˆë‹¤. ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì œê³±ê·¼ ê³„ì‚°ì„ ì§ì ‘ êµ¬í˜„í•œ ë‚´ìš©ì´ í¬í•¨ë˜ì–´ ìˆì„ ê²ƒì…ë‹ˆë‹¤. í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•œ ì´í›„ì—ëŠ” ì‹¤í–‰ íŒŒì¼ì´ ì»´íŒŒì¼ëŸ¬ê°€ ì œê³µí•˜ëŠ” ì¼ë°˜ì ì¸ ì œê³±ê·¼ í•¨ìˆ˜ ëŒ€ì‹ ì— ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Now we will add a library to our project. This library will contain our own implementation for computing the square root of a number. The executable can then use this library instead of the standard square root function provided by the compiler.</p>
</blockquote>
<p>ì´ë²ˆ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ <code>MathFunctions</code>ì´ë¼ëŠ” í•˜ìœ„ ë””ë ‰í† ë¦¬ì— í¬í•¨ì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤. ì´ ë””ë ‰í† ë¦¬ì—ëŠ” í—¤ë” íŒŒì¼ì¸ <code>MathFunctions.h</code>ì™€ ì†ŒìŠ¤ íŒŒì¼ì¸ <code>mysqrt.cxx</code>ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì†ŒìŠ¤ íŒŒì¼ì—ëŠ” ì»´íŒŒì¼ëŸ¬ì˜ sqrt í•¨ìˆ˜ì™€ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” <code>mysqrt</code>ë¼ëŠ” í•¨ìˆ˜ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>For this tutorial we will put the library into a subdirectory called <code>MathFunctions</code>. This directory already contains a header file, <code>MathFunctions.h</code>, and a source file <code>mysqrt.cxx</code>. The source file has one function called <code>mysqrt</code> that provides similar functionality to the compilerâ€™s sqrt function.</p>
</blockquote>
<p><code>MathFunctions</code> ë””ë ‰í† ë¦¬ì˜ <code>CMakeLists.txt</code> íŒŒì¼ì— ì•„ë˜ì™€ ê°™ì´ í•œ ì¤„ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Add the following one line <code>CMakeLists.txt</code> file to the <code>MathFunctions</code> directory:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_library(MathFunctions mysqrt.cxx)</span><br></pre></td></tr></table></figure>

<p>ìƒˆë¡­ê²Œ ì¶”ê°€í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ <U>â‘ ìµœìƒìœ„ <code>CMakeLists.txt</code> íŒŒì¼ì— <strong>add_subdirectory()</strong> í˜¸ì¶œì„ ì¶”ê°€</U>í•  ê²ƒì´ë©°, ì´ í˜¸ì¶œì„ í†µí•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¹Œë“œë  ê²ƒ ì…ë‹ˆë‹¤. <U>â‘¡ì‹¤í–‰ íŒŒì¼ì— ìƒˆë¡œìš´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€</U>í•˜ê³  <code>mysqrt.h</code> <U>â‘¢í—¤ë” íŒŒì¼ì„ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ <code>MathFunctions</code>ë¥¼ í¬í•¨ ë””ë ‰í† ë¦¬ë¡œ ì¶”ê°€</U>í•©ë‹ˆë‹¤. ì´ì œ ìµœìƒìœ„ <code>CMakeLists.txt</code> íŒŒì¼ì˜ ë§ˆì§€ë§‰ ëª‡ ê°œì˜ ë¼ì¸ì€ ì•„ë˜ì™€ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:</p>
<blockquote>
<p>To make use of the new library we will add an <strong>add_subdirectory()</strong> call in the top-level <code>CMakeLists.txt</code> file so that the library will get built. We add the new library to the executable, and add <code>MathFunctions</code> as an include directory so that the <code>mysqrt.h</code> header file can be found. The last few lines of the top-level <code>CMakeLists.txt</code> file should now look like:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># â‘  add the MathFunctions library</span><br><span class="line">add_subdirectory(MathFunctions)</span><br><span class="line"></span><br><span class="line"># add the executable</span><br><span class="line">add_executable(Tutorial tutorial.cxx)</span><br><span class="line"></span><br><span class="line"># â‘¡ add the new library(= MathFUnction) to the executable</span><br><span class="line">target_link_libraries(Tutorial PUBLIC MathFunctions)</span><br><span class="line"></span><br><span class="line"># â‘¢ add the binary tree to the search path for include files so that we will find TutorialConfig.h</span><br><span class="line">target_include_directories(Tutorial PUBLIC </span><br><span class="line">                           &quot;$&#123;PROJECT_BINARY_DIR&#125;&quot;</span><br><span class="line">                           &quot;$&#123;PROJECT_SOURCE_DIR&#125;/MathFunctions&quot;</span><br><span class="line">                          )</span><br></pre></td></tr></table></figure>

<p>ì´ë²ˆì—” <code>MathFunctions</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì˜µì…˜í™”í•´ë´…ì‹œë‹¤. ì´ë²ˆ íŠœí† ë¦¬ì–¼ì„ ì§„í–‰í•˜ëŠ”ë° ìˆì–´ì„œ ì´ ì‘ì—…ì´ ë°˜ë“œì‹œ í•„ìš”í•œ ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ê·œëª¨ê°€ ë” í° í”„ë¡œì íŠ¸ë“¤ì—ì„œ ì´ëŸ¬í•œ ì˜µì…˜í™” ì‘ì—…ì€ ì¼ë°˜ì ì…ë‹ˆë‹¤. ê°€ì¥ ë¨¼ì € ìµœìƒìœ„ <code>CMakeLists.txt</code> íŒŒì¼ì— optionì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Now let us make the <code>MathFunctions</code> library optional. While for the tutorial there really isnâ€™t any need to do so, for larger projects this is a common occurrence. The first step is to add an option to the top-level <code>CMakeLists.txt</code> file.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">option(USE_MYMATH &quot;Use tutorial provided math implementation&quot; ON)</span><br><span class="line"></span><br><span class="line"># configure a header file to pass some of the CMake settings</span><br><span class="line"># to the source code</span><br><span class="line">configure_file(TutorialConfig.h.in TutorialConfig.h)</span><br></pre></td></tr></table></figure>

<p>ì´ ì˜µì…˜ì€ <strong>cmake-gui</strong>ì™€ <strong>ccmake</strong>ì—ì„œ ê¸°ë³¸ ê°’ì¸ <code>ON</code>ìœ¼ë¡œ ë³´ì—¬ì§€ê²Œ ë  ê²ƒì´ë©° ì´ ê°’ì€ ì‚¬ìš©ìê°€ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì„¤ì •ì€ ìºì‹œì— ì €ì¥ë  ê²ƒì´ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìëŠ” ë¹Œë“œ ë””ë ‰í† ë¦¬ì—ì„œ CMakeë¥¼ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ì´ ê°’ì„ ì„¤ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>This option will be displayed in the <strong>cmake-gui</strong> and <strong>ccmake</strong> with a default value of <code>ON</code> that can be changed by the user. This setting will be stored in the cache so that the user does not need to set the value each time they run CMake on a build directory.</p>
</blockquote>
<p>ë‹¤ìŒ ë³€í™”ëŠ” <code>MathFunctions</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¡°ê±´ì— ë”°ë¼ ë¹Œë“œí•˜ê³  ë§í‚¹í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì˜µì…˜ ê°’ì„ ì²´í¬í•˜ëŠ” if êµ¬ë¬¸ì„ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. if ë¸”ë¡ ë‚´ë¶€ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§í¬í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  í•˜ìœ„ ë””ë ‰í† ë¦¬ë¥¼ íŠœí† ë¦¬ì–¼ íƒ€ê²Ÿì˜ í¬í•¨ ë””ë ‰í† ë¦¬ë¡œ ì¶”ê°€í•˜ê¸° ìœ„í•œ list ëª…ë ¹ì–´ì™€ í•¨ê»˜  <strong>add_subdirectory()</strong> ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•©ì‹œë‹¤.</p>
<blockquote>
<p>The next change is to make building and linking the <code>MathFunctions</code> library conditional. To do this, we will create an <code>if</code> statement which checks the value of the option. Inside the if block, put the <strong>add_subdirectory()</strong> command from above with some additional list commands to store information needed to link to the library and add the subdirectory as an include directory in the <code>Tutorial</code> target. The end of the top-level <code>CMakeLists.txt</code> file will now look like the following:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if(USE_MYMATH)</span><br><span class="line">  add_subdirectory(MathFunctions)</span><br><span class="line">  list(APPEND EXTRA_LIBS MathFunctions)</span><br><span class="line">  list(APPEND EXTRA_INCLUDES &quot;$&#123;PROJECT_SOURCE_DIR&#125;/MathFunctions&quot;)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"># add the executable</span><br><span class="line">add_executable(Tutorial tutorial.cxx)</span><br><span class="line"></span><br><span class="line">target_link_libraries(Tutorial PUBLIC $&#123;EXTRA_LIBS&#125;)</span><br><span class="line"></span><br><span class="line"># add the binary tree to the search path for include files</span><br><span class="line"># so that we will find TutorialConfig.h</span><br><span class="line">target_include_directories(Tutorial PUBLIC </span><br><span class="line">                           &quot;$&#123;PROJECT_BINARY_DIR&#125;&quot;</span><br><span class="line">                           $&#123;EXTRA_INCLUDES&#125;</span><br><span class="line">                          )</span><br></pre></td></tr></table></figure>

<p>ë‚˜ì¤‘ì— ì‹¤í–‰íŒŒì¼ì— ë§í¬ë˜ëŠ” ì˜µì…˜í™”ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ëª¨ìœ¼ê¸° ìœ„í•´ <code>EXTRA_LIBS</code> ë¼ëŠ” ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì£¼ëª©í•˜ê¸° ë°”ëë‹ˆë‹¤. <code>EXTRA_INCLUDES</code> ë³€ìˆ˜ëŠ” ì˜µì…˜í™”ëœ í—¤ë” íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ ì´ì™€ ìœ ì‚¬í•˜ê²Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ê²ƒì€ ë§ì€ ì˜µì…˜ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê³ ì „ì ì¸ ë°©ì‹ì´ë©°, ë‹¤ìŒ ë‹¨ê³„ì—ì„œ í˜„ëŒ€ì ì¸ ì ‘ê·¼ ë°©ì‹ì— ëŒ€í•´ ì‚´í´ë³¼ ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Note the use of the variable <code>EXTRA_LIBS</code> to collect up any optional libraries to later be linked into the executable. The variable <code>EXTRA_INCLUDES</code> is used similarly for optional header files. This is a classic approach when dealing with many optional components, we will cover the modern approach in the next step.</p>
</blockquote>
<p>ìœ„ ì‘ì—…ì— ë”°ë¥¸ ì†ŒìŠ¤ ì½”ë“œ ìƒì˜ ë³€ê²½ì ì€ ê½¤ ê°„ë‹¨í•©ë‹ˆë‹¤. ë¨¼ì €, í•„ìš” ì‹œì— <code>tutorial.cxx</code>ì—ì„œ <code>MathFunctions.h</code>ë¥¼ í¬í•¨ì‹œì¼œì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>The corresponding changes to the source code are fairly straightforward. First, in <code>tutorial.cxx</code>, include the <code>MathFunctions.h</code> header if we need it:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef USE_MYMATH</span><br><span class="line">#  include &quot;MathFunctions.h&quot;</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>

<p>ê·¸ë¦¬ê³  ë‚˜ì„œ, <code>USE_MYMATH</code>ë¥¼ ì œê³±ê·¼ í•¨ìˆ˜ê°€ ì‚¬ìš©ë˜ëŠ” ì¡°ê±´ìœ¼ë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Then, in the same file, make <code>USE_MYMATH</code> control which square root function is used:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#ifdef USE_MYMATH</span><br><span class="line">  const double outputValue = mysqrt(inputValue);</span><br><span class="line">#else</span><br><span class="line">  const double outputValue = sqrt(inputValue);</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>

<p>ì´ì œ ì†ŒìŠ¤ ì½”ë“œì—ì„œ <code>USE_MYMATH</code> ë³€ìˆ˜ë¥¼ ìš”êµ¬í•˜ê³  ìˆê¸°ë•Œë¬¸ì— ì´ ê°’ì„ <code>TutorialConfig.h.in</code> íŒŒì¼ì— ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>Since the source code now requires <code>USE_MYMATH</code> we can add it to <code>TutorialConfig.h.in</code> with the following line:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#cmakedefine USE_MYMATH</span><br></pre></td></tr></table></figure>

<p>í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •(configure)í•˜ê¸° ìœ„í•´ <strong>cmake</strong> ì‹¤í–‰ íŒŒì¼ ë˜ëŠ” <strong>cmake-gui</strong>ë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ì—¬ëŸ¬ë¶„ì˜ ë¹Œë“œ ë„êµ¬ì— ë§ê²Œ ë¹Œë“œí•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë¹Œë“œëœ Tutorial ì‹¤í–‰ íŒŒì¼ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Run the <strong>cmake</strong> executable or the <strong>cmake-gui</strong> to configure the project and then build it with your chosen build tool. Then run the built Tutorial executable.</p>
</blockquote>
<p>ì´ì œ <code>USE_MYMATH</code> ê°’ì„ ì—…ë°ì´íŠ¸ í•´ë´…ì‹œë‹¤. ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ <strong>cmake-gui</strong>ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ í„°ë¯¸ë„ í™˜ê²½ì´ë¼ë©´ <strong>ccmake</strong>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜ëŠ” command-lineì˜ ì˜µì…˜ì„ ë³€ê²½í•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì‹œë„í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤:</p>
<blockquote>
<p>Now letâ€™s update the value of <code>USE_MYMATH</code>. The easiest way is to use the <strong>cmake-gui</strong> or <strong>ccmake</strong> if youâ€™re in the terminal. Or, alternatively, if you want to change the option from the command-line, try:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmake ../Step2 -DUSE_MYMATH=OFF</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Step-3-Adding-Usage-Requirements-for-a-Library"><a href="#Step-3-Adding-Usage-Requirements-for-a-Library" class="headerlink" title="Step 3: Adding Usage Requirements for a Library"></a>Step 3: Adding Usage Requirements for a Library</h2><p>ì‚¬ìš© ìš”êµ¬ ì‚¬í•­ì„ í†µí•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜ëŠ” ì‹¤í–‰ íŒŒì¼ì˜ ë§í¬ ë° í¬í•¨ ë¼ì¸ì„ í›¨ì”¬ ë” ì˜ ì œì–´í•  ìˆ˜ ìˆìœ¼ë©° CMake ë‚´ ëŒ€ìƒì˜ ì „ì´ ì†ì„±ì„ ë” ë§ì´ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš© ìš”êµ¬ ì‚¬í•­ì„ í™œìš©í•˜ëŠ” ê¸°ë³¸ ëª…ë ¹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>Usage requirements allow for far better control over a library or executableâ€™s link and include line while also giving more control over the transitive property of targets inside CMake. The primary commands that leverage usage requirements are:</p>
<ul>
<li>target_compile_definitions()</li>
<li>target_compile_options()</li>
<li>target_include_directories()</li>
<li>target_link_libraries()</li>
</ul>
</blockquote>
<p>ì‚¬ìš© ìš”êµ¬ ì‚¬í•­ì˜ í˜„ëŒ€ì ì¸ CMake ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì•ì„  ì±•í„°ì˜€ë˜ <strong>Adding a Library</strong>ì—ì„œ ì‚¬ìš©í•œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§ í•´ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì € <code>MathFunctions</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§í‚¹í•˜ê³ ì í•œë‹¤ë©´ í˜„ì¬ ì†ŒìŠ¤ ë””ë ‰í† ë¦¬ë¥¼ í¬í•¨í•´ì•¼í•˜ì§€ë§Œ <code>MathFunctions</code> ìì²´ëŠ” í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ê²ƒì¸ <code>INTERFACE</code> ì‚¬ìš© ìš”êµ¬ì‚¬í•­ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Letâ€™s refactor our code from <strong>Adding a Library</strong> to use the modern CMake approach of usage requirements. We first state that anybody linking to <code>MathFunctions</code> needs to include the current source directory, while <code>MathFunctions</code> itself doesnâ€™t. So this can become an <code>INTERFACE</code> usage requirement.</p>
</blockquote>
<p><code>INTERFACE</code>ëŠ” ì†Œë¹„ìê°€ í•„ìš”ë¡œ í•˜ì§€ë§Œ ìƒì‚°ìëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ê¸° ë°”ëë‹ˆë‹¤. <code>MathFunctions/CMakeLists.txt</code> íŒŒì¼ì˜ ëì— ì•„ë˜ ë¼ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Remember <code>INTERFACE</code> means things that consumers require but the producer doesnâ€™t. Add the following lines to the end of <code>MathFunctions/CMakeLists.txt</code>:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">target_include_directories(MathFunctions</span><br><span class="line">          INTERFACE $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span><br><span class="line">          )</span><br></pre></td></tr></table></figure>

<p>ì´ì œ <code>MathFunctions</code>ì— ëŒ€í•œ ì‚¬ìš© ìš”êµ¬ ì‚¬í•­ì„ ëª…ì‹œí–ˆìœ¼ë¯€ë¡œ ìµœìƒìœ„ <code>CMakeLists.txt</code>ì—ì„œ <code>EXTRA_INCLUDES</code>ë³€ìˆ˜ ì‚¬ìš©ì„ ì•ˆì „í•˜ê²Œ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>Now that weâ€™ve specified usage requirements for <code>MathFunctions</code> we can safely remove our uses of the <code>EXTRA_INCLUDES</code> variable from the top-level <code>CMakeLists.txt</code>, here:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if(USE_MYMATH)</span><br><span class="line">  add_subdirectory(MathFunctions)</span><br><span class="line">  list(APPEND EXTRA_LIBS MathFunctions)</span><br><span class="line">endif()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>And here:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">target_include_directories(Tutorial PUBLIC</span><br><span class="line">                           &quot;$&#123;PROJECT_BINARY_DIR&#125;&quot;</span><br><span class="line">                           )</span><br></pre></td></tr></table></figure>

<p>ìœ„ì™€ ê°™ì´ ìˆ˜ì •ì„ ì™„ë£Œí•˜ì˜€ë‹¤ë©´ í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •(configure)í•˜ê¸° ìœ„í•´ <strong>cmake</strong> ì‹¤í–‰ íŒŒì¼ ë˜ëŠ” <strong>cmake-gui</strong>ë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ì—¬ëŸ¬ë¶„ì˜ ë¹Œë“œ ë„êµ¬ì— ë§ê²Œ ë¹Œë“œí•˜ê±°ë‚˜ ë¹Œë“œ ë””ë ‰í† ë¦¬ì—ì„œ <code>cmake --build</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹Œë“œí•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Once this is done, run the <strong>cmake</strong> executable or the <strong>cmake-gui</strong> to configure the project and then build it with your chosen build tool or by using <code>cmake --build .</code> from the build directory.</p>
</blockquote>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>reference</strong></p>
<ul>
<li><a href="https://cmake.org/cmake/help/v3.22/guide/tutorial/index.html">https://cmake.org/cmake/help/v3.22/guide/tutorial/index.html</a></li>
<li><a href="https://github.com/Kitware/CMake/tree/master/Help/guide/tutorial">https://github.com/Kitware/CMake/tree/master/Help/guide/tutorial</a></li>
<li><a href="https://gist.github.com/luncliff/6e2d4eb7ca29a0afd5b592f72b80cb5c">https://gist.github.com/luncliff/6e2d4eb7ca29a0afd5b592f72b80cb5c</a></li>
</ul>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>cmake</tag>
        <tag>CMakeFile.txt</tag>
        <tag>CMake tutorial</tag>
      </tags>
  </entry>
  <entry>
    <title>(BBC ìŠ¤í¬ì¸ ) ì²¼ì‹œ ë£¨ë“œ êµ´ë¦¬íŠ¸ 25ë…„ì´ ì§€ë‚œ ì§€ê¸ˆ ê·¸ì˜ í”„ë¦¬ë¯¸ì–´ê·¸ë¦¬ ì§„ì¶œì„ ì• ì •ì–´ë¦° ì‹œì„ ìœ¼ë¡œ ë˜ëŒì•„ ë³´ë‹¤</title>
    <url>/2021/07/10/tr-ruud-gullit/</url>
    <content><![CDATA[<p>í”¼íŒŒ ì¢€ í•œë‹¤ëŠ” ì‚¬ëŒì´ë¼ë©´ ëª¨ë‘ê°€ ë‹¤ ì•Œë§Œí•œ ê·¸ ë¶„, Xì‚¬ê¸°ìº êµ´ë¦¬íŠ¸ğŸ˜¬<br>ì»¤ë¦¬ì–´ ë§‰ë°”ì§€ì— ì²¼ì‹œì—ì„œë„ ì ê¹ í™œì•½í–ˆì—ˆë„¤ìš”.<br><a href="https://www.bbc.com/sport/football/52904670">BBC Sportì— êµ´ë¦¬íŠ¸ê°€ ì§ì ‘ ê¸°ê³ í•œ íšŒê³ ë¡ ëŠë‚Œì˜ ê¸€</a>ì„ í•œë²ˆ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<br>
<br>

<p>By Ruud Gullit MOTD pundit and ex-Chelsea manager<br>04 June 2020 | <a href="https://www.bbc.com/sport/football">Football</a><br><br></p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/tr_ruud_gullit_picture_1.png" alt="ì…”ì¸ ì™€ íƒ€ì´ìœ„ë¡œ ì²¼ì‹œ ìœ ë‹ˆí¼ì„ ì…ì€ ë£¨ë“œ êµ´ë¦¬íŠ¸ê°€ 1995ë…„ 6ì›” ì‰ê¸€ëœë“œ ì¶•êµ¬ì— ë“±ì¥í•œë‹¤."><span class="caption">ì…”ì¸ ì™€ íƒ€ì´ìœ„ë¡œ ì²¼ì‹œ ìœ ë‹ˆí¼ì„ ì…ì€ ë£¨ë“œ êµ´ë¦¬íŠ¸ê°€ 1995ë…„ 6ì›” ì‰ê¸€ëœë“œ ì¶•êµ¬ì— ë“±ì¥í•œë‹¤.</span></div>

<p><strong>ì €ëŠ” ì‘ë³„ì˜ ë°©ì‹ì— ëŒ€í•´ì„œëŠ” ì—¬ì „íˆ ê°€ìŠ´ì´ ì•„í”•ë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ì˜ ì²¼ì‹œì—ì„œì˜ ì‹œê°„ì€ ì–¸ì œë‚˜ ê°€ì¥ í–‰ë³µí–ˆë˜ ìˆœê°„ì¼ ê²ë‹ˆë‹¤. ì €ì—ê²Œ ê·¸ê³³ì€ ì²œêµ­ì´ì—ˆìŠµë‹ˆë‹¤.</strong></p>
<p>ì œê°€ ì‰ê¸€ëœë“œì— ì˜¨ì§€ 25ë…„ì´ í˜ë €ë‹¤ëŠ” ì‚¬ì‹¤ì€ ì œê°€ ë§¤ìš° ëŠ™ì–´ë²„ë ¸ë‹¤ëŠ” ëŠë‚Œì„ ë“¤ê²Œí•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë•Œë•Œë¡œ ê·¸ê²ƒì€ ë§ˆì¹˜ ì–´ì œ ì¼ì²˜ëŸ¼ ëŠê»´ì§‘ë‹ˆë‹¤. ê°’ì„ ë§¤ê¸¸ìˆ˜ ì—†ëŠ” ììœ ì™€ ê°™ì€ ë¬´ì–¸ê°€ë¥¼ ë°œê²¬í–ˆê¸°ì— ì €ëŠ” ëŸ°ë˜ê³¼ ê³§ì¥ ì‚¬ë‘ì— ë¹ ì¡ŒìŠµë‹ˆë‹¤. ê·¸ê³³ì€ ì €ì˜ í–‰ë³µí•œ ê³µê°„ì´ì—ˆê³  ì²¼ì‹œ ì„ ìˆ˜ë“¤ì€ ì €ì˜ â€˜ì‚¬ë‘ìŠ¤ëŸ¬ìš´ ë™ë£Œë“¤â€™ - ê·¸ ì´ìœ ì— ëŒ€í•´ ì„¤ëª…í•˜ë„ë¡ ë…¸ë ¥í•´ë³´ê² ìŠµë‹ˆë‹¤ - ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<hr>
<p>1995ë…„ ì œê°€ ì²¼ì‹œì— í•©ë¥˜í–ˆì„ë•Œ, í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ëŠ” ì§€ê¸ˆê³¼ëŠ” ë§¤ìš° ë‹¬ëìŠµë‹ˆë‹¤. ì €ëŠ” ì´ ë¦¬ê·¸ì— ì˜¨ ì²«ë²ˆì§¸ ì™¸êµ­ì¸ ì„ ìˆ˜ê°€ ì•„ë‹ˆì—ˆì§€ë§Œ ì„¸ë¦¬ì— Aì™€ ê°™ì´ ë³´ë‹¤ í° ë¦¬ê·¸ì—ì„œ ì˜¨ ì´ë¦„ ìˆëŠ” ì„ ìˆ˜ì¤‘ì—ëŠ” ì²«ë²ˆì§¸ ì˜€ìŠµë‹ˆë‹¤.</p>
<p>ë˜ëŒì•„ ë³´ë©´, ì•„ë§ˆë„ ê·¸ë•Œ ì—¬ë¦„ì´ í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ê°€ ì§€ê¸ˆê³¼ ê°™ì€ ê²½ìŸ ì²´ì œë¡œ ë³€í™”í•˜ëŠ” ì‹œì‘ì ì´ì—ˆì—ˆê³ , ê·¸ë˜ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤. ì´íƒˆë¦¬ì•„ëŠ” ê·¸ë•Œ ë‹¹ì‹œ ìµœê³ ì˜€ìŠµë‹ˆë‹¤. - ìµœê³ ì˜ ì„ ìˆ˜ë“¤ì´ ê·¸ê³³ì— ìˆì—ˆìŠµë‹ˆë‹¤. ì´ì™€ ë¹„êµ í–ˆì„ë•Œ ì˜êµ­ ì¶•êµ¬ëŠ” ë§¤ìš° ê¸°ì´ˆì ì¸ ìˆ˜ì¤€ì´ì—ˆê³  ê·¸ë“¤ì˜ ë¦¬ê·¸ ìˆ˜ì¤€ì„ ìœ ëŸ½ ìµœê³  ë ˆë²¨ë¡œ ë˜ëŒë¦¬ê¸° ìœ„í•´ íƒ€ ë¦¬ê·¸ì—ì„œ ì˜¤ëŠ” ì„ ìˆ˜ë“¤ì„ í™•ë³´í•˜ê¸¸ ì›í–ˆìŠµë‹ˆë‹¤.</p>
<p>ë°ë‹ˆìŠ¤ ë² ë¥´ìº„í”„, ë‹¤ë¹„ë“œ ì§€ë†€ë¼, ì£¼ë‹ìš”. ê·¸ë“¤ ëª¨ë‘ ì €ì™€ ë¹„ìŠ·í•œ ì‹œê¸°ì— í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ì— ì™”ìŠµë‹ˆë‹¤. ì œê°€ ê·¸ê²ƒì„ ë°”ë¼ë³¸ ë°©ì‹ì€ ì¼ì¢…ì˜ ëª¨í—˜ì´ì—ˆìŠµë‹ˆë‹¤. ê°œì¸ì ìœ¼ë¡œë‚˜ ì§ì—…ì ìœ¼ë¡œ, ì €ëŠ” AC ë°€ë€ê³¼ ì‚¼í”„ë„ë¦¬ì•„ì—ì„œì˜ 8ë…„ê°„ì˜ ìƒí™œ í›„ ì´íƒˆë¦¬ì•„ë¥¼ ë– ë‚  í•„ìš”ê°€ ìˆì—ˆê³ , í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ì˜ ë„ì•½ê³¼ í•¨ê»˜ ì˜êµ­ì€ ìƒˆë¡œìš´ ì‹œì‘ì„ ìœ„í•´ ê°€ì¥ ì í•©í•œ ì¥ì†Œì˜€ìœ¼ë©° ìƒˆë¡œìš´ ë¬´ì–¸ê°ˆ í•˜ê³ ìí•˜ëŠ” ì €ì—ê²Œ ì ì ˆí•œ ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì €ëŠ” 32ì‚´, ê±°ì˜ 33ì‚´ì— ê°€ê¹Œìš´, ì´ì—ˆê³  ì˜¤ëœ ê¸°ê°„ë™ì•ˆ ìµœê³ ì˜ ìë¦¬ì— ìˆì–´ì™”ìœ¼ë©° ë§ì€ ê²½ê¸°ì—ì„œ ìŠ¹ë¦¬í•´ì™”ë‹¤. ëª‡ëª‡ ì‚¬ëŒë“¤ì€ ì €ì˜ ê¸°ëŸ‰ì´ ë§ì´ ë–¨ì–´ì ¸ ìˆë‹¤ê³  ìƒê°í–ˆê³  ë‹¨ì§€ ëˆì„ ë²Œê³  ì€í‡´ë¥¼ ì¤€ë¹„í•˜ê¸° ìœ„í•´ ì´ê³³ì— ì™”ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê·¸ë“¤ì€ í‹€ë ¸ìŠµë‹ˆë‹¤.<br><br></p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/tr_ruud_gullit_picture_2.png" alt="ë„¤ëœë€ë“œì˜ ê³µê²©ìˆ˜ ë² ë¥´ìº„í”„ ë˜í•œ 1995ë…„ì— ì¸í„° ë°€ë€ì—ì„œ ì•„ìŠ¤ë‚ ë¡œ ì´ì í•˜ë©° í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ì— í•©ë¥˜í–ˆë‹¤."><span class="caption">ë„¤ëœë€ë“œì˜ ê³µê²©ìˆ˜ ë² ë¥´ìº„í”„ ë˜í•œ 1995ë…„ì— ì¸í„° ë°€ë€ì—ì„œ ì•„ìŠ¤ë‚ ë¡œ ì´ì í•˜ë©° í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ì— í•©ë¥˜í–ˆë‹¤.</span></div>

<p>ì œê°€ ì²¼ì‹œë¥¼ ì„ íƒí•œ ì´ìœ ì— ëŒ€í•´ ì´í•´í–ˆë˜ ì‚¬ëŒì€ ì•„ë¬´ë„ ì—†ì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” ì œê°€ ì²¼ì‹œë¡œ ê°”ì„ë•Œ ê·¸ í´ëŸ½ì— ëŒ€í•´ ì‹¬ì§€ì–´ëŠ” ì§€ì—­ì˜ ì¼ë¶€ì— ëŒ€í•´ ë§ì´ ì•Œì§€ ëª»í–ˆë‹¤ë¼ê³  ë¶„ëª…í•˜ê²Œ ì´ì•¼ê¸° í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸€ë Œ í˜¸ë“¤ì´ ê°ë…ìœ¼ë¡œ ìˆì—ˆë‹¤ëŠ” ì‚¬ì‹¤ ë§Œìœ¼ë¡œ ì œê°€ ê·¸ê³³ì— ê°„ ì´ìœ ë¥¼ ì¶©ë¶„íˆ ì„¤ëª…í•  ìˆ˜ ìˆì—ˆìœ¼ë‹ˆê¹Œìš”.</p>
<p>ìŠ¤íƒ¬í¬íŠ¸ ë¸Œë¦¿ì§€ë¥¼ ë³´ê¸° ìœ„í•´ ì²˜ìŒìœ¼ë¡œ ë°©ë¬¸í–ˆì„ë•Œ, â€˜ë¬´ìŠ¨ ê²½ê¸°ì¥ì´ ì´ë˜?â€™ë¼ëŠ” ìƒê°ì„ í–ˆì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” ì´ì „ì— ìµœê³ ì˜ ê²½ê¸°ì¥ë“¤ì—ì„œ ë›°ì–´ì™”ì§€ë§Œ ê·¸ê³³ì—” ë‹¨ 2ê°œì˜ ìŠ¤íƒ ë“œë§Œì´ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤. ê·¸ê³³ì€ ë‹¨ì§€ ê±´ì¶• ë¶€ì§€ê°€ ì•„ë‹Œ ë‹¤ ë§ê°€ì ¸ê°€ëŠ” ì¥ì†Œ ê°™ì•˜ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€ ë‚˜ë¬´ë¡œëœ ë„ë¹¤ì§€ ì£¼ìœ„ë¥¼ ê±¸ì–´ì•¼ë§Œ í–ˆì„ê²ë‹ˆë‹¤.</p>
<p>í›ˆë ¨ ì‹œì„¤ ë˜í•œ ì œê°€ ì´ì „ì— ì‚¬ìš©í•˜ë˜ ê²ƒë“¤ê³¼ëŠ” ë§ì´ ë‹¬ëìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ë‚  ì²¼ì‹œì˜ ì„¤ë¹„ëŠ” ì›”ë“œ í´ë˜ìŠ¤ì´ì§€ë§Œ ê·¸ ë‹¹ì‹œ ê·¸ë“¤ì€ í• ë§í„´ì˜ í•œ í•™êµë¥¼ ê¸°ë°˜ìœ¼ë¡œí•œ ì‹œì„¤ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ê·¸ê³³ì—” ì•„ë¬´ê²ƒë„ ì—†ì—ˆì£ . ë‹¨ì§€ ë‚˜ë¬´ ë²¤ì¹˜ì™€ ì˜·ê±¸ì´ ë¿ì¸  ë‹¤ì„¯ê°œì˜ ì‘ì€ ë¼ì»¤ë£¸ì´ ìˆì„ ë¿ì´ì—ˆì£ .</p>
<p>í•˜ì§€ë§Œ ì €ëŠ” ê·¸ê³³ì„ ì‚¬ë‘í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬í•œ ê³µê°„ì€ ì œê°€ ì²˜ìŒìœ¼ë¡œ ìš´ë™ì„ ì‹œì‘í•œ 9ì‚´ë¡œ ë˜ëŒì•„ê°€ëŠ”ë“¯í•œ ê¸°ë¶„ì„ ì£¼ì—ˆìŠµë‹ˆë‹¤. í™˜ìƒì ì´ì—ˆì£ .</p>
<p>ë¬¼ë¡  ì œê°€ í•©ë¥˜í–ˆì„ ì‹œì ì˜ ì²¼ì‹œëŠ” íƒ€ì´í‹€ ê²½ìŸì´ ì‰½ì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ì•Œê³ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë‹¹ì‹œ ê·¸ë“¤ì—ê²Œ ì±”í”¼ì–¸ìŠ¤ ë¦¬ê·¸ëŠ” ì—†ì—ˆì£ . ê·¸ë“¤ì€ ìœ ëŸ½ì€ ì»¤ë…• ì‰ê¸€ëœë“œ ë¦¬ê·¸ì—ì„œ ì„ ë‘ê¶Œì— ìˆëŠ” íŒ€ë„ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ëŠ” ê·¸ í´ëŸ½ì´ ê°€ê³ ì í•˜ëŠ” ê³³, ì‰ê¸€ëœë“œ ì¶•êµ¬ì— ì¼ì–´ë‚  ì¼ë“¤ì— ëŒ€í•´ ì•Œê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì €ëŠ” ë„ì „ì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ê·¸ê²ƒì€ AC ë°€ë€ìœ¼ë¡œ ê°€ê¸° ìœ„í•´ ë„¤ëœë€ë“œë¥¼ ë– ë‚ ë•Œì™€ ê°™ì•˜ìŠµë‹ˆë‹¤. 1987ë…„ AC ë°€ë€ì— ì™”ì„ë•Œ, ê·¸ë“¤ì€ ìœ ë¡œí”¼ì–¸ íŠ¸ë¡œí”¼ë¥¼ 14ë…„ê°„ ë“¤ì–´ì˜¬ë¦¬ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì œê°€ ê·¸ê³³ì„ ë– ë‚ ì˜¬ë•ŒëŠ” 2ê°œì˜ ìœ ë¡œí”¼ì–¸ ì»µì„ ê±°ë¨¸ì¥” í›„ ì˜€ì£ .</p>
<p>ê¸€ë Œì€ ì €ì—ê²Œ ì²¼ì‹œì™€ ê·¸ë“¤ì˜ ì•¼ë§ì„ ë‚©ë“ì‹œì¼œì•¼ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŠ” ê·¸ë“¤ ë˜í•œ ì—¬ì •ì˜ ì‹œì‘ì— ìˆë‹¤ë¼ê³  ë§í–ˆì£ . í•˜ì§€ë§Œ ë¬´ì—‡ ë³´ë‹¤ ê°€ì¥ ì¤‘ìš”í–ˆë˜ ê²ƒì€ ê¸€ë Œì´ì—ˆë‹¤ëŠ” ì‚¬ì‹¤ì´ì—ˆìŠµë‹ˆë‹¤. ë„¤ëœë€ë“œì¸ì˜ ê´€ì ì—ì„œ ê·¸ëŠ” ìµœê³ ì˜ ì˜êµ­ ì¶•êµ¬ì„ ìˆ˜ì˜€ì§€ë§Œ ì˜êµ­ì—ì„œ ê·¸ëŠ” ê·¸ë¦¬ í™˜ì˜ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë„¤ëœë€ë“œì—ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì´ì•¼ê¸° í–ˆë‹¤. â€˜ì˜¤ í•˜ëŠë‹˜, ê·¸ëŠ” ë‹¹ì‹ ì´ ì•„ë‹Œ ìš°ë¦¬ì˜ ìš´ëª…ì„ íƒ€ê³ ë‚œ ì„ ìˆ˜ì˜€ìŠµë‹ˆë‹¤.â€™</p>
<p>ê·¸ëŠ” ê³„ì•½ í•˜ê¸° ëª‡ ë‹¬ ì „ì— ì €ì™€ì˜ ê³„ì•½ì„ ì›í•œë‹¤ë©° ì „í™”ë¥¼ í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì €ëŠ” ê·¸ë¥¼ ìŠ¤í‚¬ì´ ì¶œì¤‘í•œ ì„ ìˆ˜ë¡œì„œ ë´ì™”ê¸° ë•Œë¬¸ì— ê·¸ê°€ ë¡± ë³¼ì„ êµ¬ì‚¬í•˜ëŠ” ê°ë…ì€ ì•„ë‹ ê±°ë¼ëŠ” í™•ì‹ ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì´ ì €ì˜ ì²¼ì‹œë¡œ ì´ì  ê²°ì •ì˜ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì¸ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì–¸ë¡ ì—ì„œ ì €ëŠ” ë‹¤ì–‘í•œ êµ­ê°€ì˜ ë‹¤ì–‘í•œ íŒ€ë“¤ê³¼ì˜ ë§í¬ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ë°”ì´ì—ë¥¸ ë®Œí—¨ì´ë‚˜ ê°ˆë½íƒ€ì‚¬ì´ê°€ ê·¸ëŸ¬í•œ íŒ€ë“¤ì´ì—ˆì£ . ê·¸ë‹¹ì‹œì— ëª¨ë‚˜ì½”ì™€ í˜ì˜ˆë…¸ë¥´íŠ¸, ì‹¬ì§€ì–´ëŠ” ì¼ë³¸ì˜ íŒ€ê³¼ë„ ë§í¬ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ë“¤ ì¤‘ ì–´ëŠ íŒ€ê³¼ë„ ì´ì•¼ê¸° í•œì ì´ ì—†ì—ˆê³ , 1995ë…„ 5ì›” ë°€ë€ì—ì„œ ê¸€ë Œì„ ë§Œë‚˜ ê³„ì•½í•  ì¤€ë¹„ë¥¼ í•˜ì˜€ìŠµë‹ˆë‹¤. ì²¼ì‹œ, ì´ê³³ì— ì œê°€ ì™”ìŠµë‹ˆë‹¤.<br><br></p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/tr_ruud_gullit_picture_3.png" alt="êµ´ë¦¬íŠ¸ëŠ” 1989ë…„ê³¼ 1990ë…„ì— AC ë°€ë€ì—ì„œ ë‘ë²ˆì˜ ìœ ë¡œí”¼ì–¸ ì»µ íƒ€ì´í‹€ì„ ì°¨ì§€í–ˆë‹¤."><span class="caption">êµ´ë¦¬íŠ¸ëŠ” 1989ë…„ê³¼ 1990ë…„ì— AC ë°€ë€ì—ì„œ ë‘ë²ˆì˜ ìœ ë¡œí”¼ì–¸ ì»µ íƒ€ì´í‹€ì„ ì°¨ì§€í–ˆë‹¤.</span></div>

<p>ì €ëŠ” ì‰ê¸€ëœë“œ ë¦¬ê·¸ì—ì„œì˜ ê²½í—˜ì´ ì „ë¬´í–ˆì—ˆì§€ë§Œ í”¼ì§€ì»¬ì ì¸ ëŠ¥ë ¥ì„ ìš”êµ¬í•˜ëŠ” ë¦¬ê·¸ë¡œì„œì˜ ëª…ì„±ì— ëŒ€í•´ì„œëŠ” ì˜ ì•Œê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ ë‹¹ì‹œì—, ê²½ê¸°ë¥¼ ë›°ëŠ” ì–´ëŠê³³ì—ì„œë‚˜, ì„ ìˆ˜ë“¤ì´ ì‹¬íŒìœ¼ë¡œë¶€í„° í•­ìƒ ë™ì¼í•œ ë³´í˜¸ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ ì œê°€ ì²¼ì‹œ ì„ ìˆ˜ë¡œ ê°–ëŠ” ì²«ë²ˆì§¸ ê¸°ì íšŒê²¬ ì´í›„ë¶€í„° ì €ëŠ” ë§Œë°˜ì˜ ì¤€ë¹„ë¥¼ ìœ„í•´ ì—´ì‹¬íˆ í›ˆë ¨í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p>ì œê°€ AC ë°€ë€ì— ìˆì„ë•Œ ì¢…ì¢… ìŠ¤í¬íŠ¸ë¼ì´íŠ¸ë¥¼ ë°›ì•˜ì—ˆê³ , ìŠ¤í¬íŠ¸ë¼ì´íŠ¸ë¥¼ ë°›ê²Œëœë‹¤ëŠ”ê±´ ì´ì „ë³´ë‹¤ ë” ì¢‹ì€ ê¸°ëŸ‰ì„ ë³´ì—¬ ì£¼ì–´ì•¼í•œë‹¤ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ë§Œì•½ ê·¸ë ‡ì§€ ëª»í•˜ë©´, ë¹„ë‚œì„ ë°›ê²Œ ë˜ê² ì£ . ì €ëŠ” 2ë²ˆì˜ ì˜¬í•´ì˜ ì„ ìˆ˜ìƒì„ ë°›ì•˜ê³ , ê°€ëŠ¥í•œí•œ ìµœê³ ì˜ í”Œë ˆì´ë¥¼ ë³´ì—¬ì£¼ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ ì €ì˜ ì¼ê´€ëœ íƒœë„ì˜€ìŠµë‹ˆë‹¤. ì €ëŠ” ë‹¤ì‹œ í•œë²ˆ ì œ ìì‹ ì„ ì¦ëª…í•˜ê¸°ë¥¼ ì›í–ˆê³ , ê·¸ê²ƒì„ ëª¸ì†Œ ì‹¤ì²œí•˜ê¸° ìœ„í•´ í¬ë¥´íˆ¬ê°ˆë¡œ ë– ë‚˜ ê³¨í”„ ì½”ìŠ¤ ì˜†ì— ìˆëŠ” ì§‘ì„ ë¹Œë ¤ ê·¸ ì£¼ë³€ì„ ë›°ë©° ë§¤ì¼ ë§¤ì¼ ì—´ì‹¬íˆ í›ˆë ¨í–ˆìŠµë‹ˆë‹¤.</p>
<p>ëª‡ ì£¼ í›„ í”„ë¦¬ ì‹œì¦Œ í›ˆë ¨ì„ ìœ„í•´ í• ë§í„´ìœ¼ë¡œ ëŒì•„ì™”ì„ë•Œ, ì €ëŠ” ì¢‹ì€ í¼ì´ì—ˆìŠµë‹ˆë‹¤. ì œê°€ ì²˜ìŒìœ¼ë¡œ ì¸ì§€í•˜ê³ , ëŠê¼ˆë˜ ê²ƒì€ ì²¼ì‹œ ì„ ìˆ˜ë“¤ì´ ë¨¹ëŠ” ìŒì‹ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì€ ì¢‹ì€ ì¶•êµ¬ë¥¼ í•˜ê¸°ìœ„í•´ ë¨¹ëŠ” ìŒì‹ì´ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤. - ê·¸ê²ƒì€ ê·¸ë ˆì´ë¹„ì™€ ê°ìì¹©ì´ ê³ë“¤ì—¬ì§„ ìŠ¤í…Œì´í¬ì™€ ì†Œì‹œì§€ì˜€ê³ , ëª¨ë“ ê²ƒì´ ì¼ì¢…ì˜ íŠ€ê¹€ë¥˜ì˜€ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€ ê²°ì½” ì¢‹ì€ ì¶•êµ¬ë¥¼ í•  ìˆ˜ ì—†ì„ ê²ë‹ˆë‹¤.</p>
<p>ìŒì‹ì€ ì´íƒˆë¦¬ì•„ì™€ ê°€ì¥ í° ì°¨ì´ ì¤‘ í•˜ë‚˜ì˜€ê³ , ë˜ë‹¤ë¥¸ ì°¨ì´ëŠ” ì¶•êµ¬ì˜ ìŠ¤íƒ€ì¼ì´ì—ˆìŠµë‹ˆë‹¤. ì‰ê¸€ëœë“œì˜ ì¶•êµ¬ëŠ” ë„ˆë¬´ ì •ì§í–ˆìŠµë‹ˆë‹¤. ì§€ê¸ˆ í˜„ì¬ëŠ” ë‚´ê°€ ê²½ê³ í•´ì™”ë˜ ê±°ì¹œ íƒœí´ë“¤ì´ ë‚œë¬´í•˜ëŠ”ë° ì´ì œ ì™€ì„œ ê·¸ê²ƒì— ëŒ€í•´ ìƒê°í•˜ëŠ”ê²ƒì´ ì°¸ ì›ƒê¸´ì¼ì´ì§€ë§Œ, ê·¸ê²ƒì€ ì—¬ëŸ¬ë¶„ì´ ê·¸ë“¤ì„ 1ë§ˆì¼ ë–¨ì–´ì§„ ê³³ì—ì„œ ë³¼ìˆ˜ìˆê¸°ë•Œë¬¸ì— ë¬¸ì œê°€ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì„¸ë¦¬ì—Aì—ì„œì˜ ê²½í—˜ì´ ìˆë˜ ì €ì—ê²ŒëŠ” ê·¸ê²ƒì€ ì˜ˆìƒí•  ìˆ˜ ìˆì—ˆê¸°ì— ëŒ€ì‘í•˜ê¸° ì‰¬ì› ìŠµë‹ˆë‹¤. ì´íƒˆë¦¬ì—ì„œ ê·¸ë“¤ì€ ë„ˆë¬´ë‚˜ ê°•í•˜ê²Œ ë°€ì–´ë¶™ì´ëŠ” ê²ƒ ê°™ì•„ë³´ì¼ì§€ë¼ë„ ê·¸ë“¤ì€ ê·¸ê²ƒì— ëŒ€í•´ ë” ì˜ë¦¬í•˜ê²Œ ëŒ€ì²˜í–ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ê·¸ê²ƒì„ ê¸°ëŒ€í•˜ì§€ ì•Šì„ë•ŒëŠ” ì•„ì‰¬ìš¸ ê²ƒì…ë‹ˆë‹¤.</p>
<p>ë¬¼ë¡  ì œê°€ ì‰ê¸€ëœë“œë¡œ ì™”ì„ë•Œ ì €ëŠ” ì´ë¦„ì´ ìˆëŠ” ì„ ìˆ˜ì˜€ê³  ëª‡ëª‡ ì„ ìˆ˜ë“¤ì€ ê·¸ë“¤ì´ ì €ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ ì‚¼ì•˜ì„ê±°ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ì¼ì¢…ì˜ â€˜í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ì— ì˜¨ê±¸ í™˜ì˜í•´â€™ ê°™ì€ê±°ë„ê¹Œìš”. ê°€ì¥ ì›ƒê¸´ ê±´ ìš°ë¦¬ê°€ ìœ”ë¸”ë˜ì—ì„œ ê²½ê¸°í–ˆì„ë•Œ ë¹„ë‹ˆ ì¡´ìŠ¤ê°€ ê·¸ì™€ê°™ì´ í•˜ë ¤ê³  ë…¸ë ¥ í–ˆì„ë•Œì…ë‹ˆë‹¤.</p>
<p>ì €ëŠ” ì‹¬ì§€ì–´ ê²Œì„ ì „ë¶€í„° ë¹„ë‹ˆê°€ ì €ë¥¼ ì••ì‚´í•˜ëŠ” ê²ƒìœ¼ë¡œ ì´ë¦„ì„ ë–¨ì¹˜ê¸¸ ì›í•˜ëŠ” ê²ƒì„ ì•Œê³ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ëŠ” ê·¸ì— ëŒ€ë¹„í–ˆê³ , ì–´ëŠ ìˆœê°„ì—” ê·¸ì™€ ê°™ì€ ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆì—ˆìœ¼ë©°, ì‹¤ì œë¡œ ë°œìƒí–ˆì£ . í›„ë°˜ì „ì´ ì‹œì‘í–ˆì„ ë•Œ, ì €ëŠ” ë°œëª©ìœ¼ë¡œ ê³µì„ ë°›ì•˜ê³ , ê·¸ì—ê²Œ ë“±ì§€ê³  ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ëŠ” ê·¸ê°€ ì €ì—ê²Œ ë‹¤ê°€ ì˜¤ê³ ìˆë‹¤ëŠ”ê±¸ ê±°ì˜ ë“¤ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ ê·¸ê°€ íƒœí´ì„í•˜ëŠ” ìˆœê°„ ì €ëŠ” ê·¸ë¼ìš´ë“œì—ì„œ ì‚´ì§ ë›°ì–´ì˜¬ëìŠµë‹ˆë‹¤. ë„¤ ë§ì•„ìš”, ê·¸ê°€ ì €ë¥¼ ì¡ê¸°ë¥¼ ì›í–ˆì—ˆì§€ë§Œ ê·¸ê°€ ì›í•˜ë˜ ë°©ì‹ì€ ì•„ë‹ˆì—ˆì£ .</p>
<p>ê·¸ë•Œ ì €ëŠ” ê·¸ë¼ìš´ë“œì— êµ´ë €ê³  ê·¸ëŠ” ë ˆë“œ ì¹´ë“œë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤. - ê·¸ëŠ” ì´ë¯¸ ì˜ˆì•½ì´ ë˜ì–´ìˆì—ˆìŠµë‹ˆë‹¤. - ê·¸ë¦¬ê³  ì œê°€ ì¼ì–´ë‚˜ ê·¸ì—ê²Œ ë§í–ˆìŠµë‹ˆë‹¤: â€œë¹„ë‹ˆ, ì´ì œë¶€í„° ìš°ë¦¬ ì¶•êµ¬í•  ìˆ˜ ìˆê² ë‹¤.â€ ê·¸ëŠ” ì‰¬ì§€ ì•Šê³  ì €ì—ê²Œ ìš•ì„¤ì„ í¼ë¶€ì—ˆê³  ë‹¤ìŒë‚  ì‹ ë¬¸ì— ê¸°ì‚¬ê°€ ë‚¬ì£ . ê·¸ëŠ” ì œê°€ ìƒˆë¼ ë¼ì§€ ì²˜ëŸ¼ ê½¤ì•¡ ì†Œë¦¬ë¥¼ ì§ˆë €ë‹¤ë¼ê³  ì´ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ëŠ” â€˜ê¸€ì„, ê±°ê¸°ì„œ ë‚˜ëŠ” ë„ˆë¥¼ ì¡ì•˜ì§€. ë‚´ê°€ ë„ˆë¥¼ ì¡ì•˜ì§€â€™ë¼ê³  ìƒê°í–ˆì£ .<br><br></p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/tr_ruud_gullit_picture_4.png" alt="1996ë…„ 3ì›” ì…€í—ˆìŠ¤íŠ¸ íŒŒí¬ì—ì„œ ì—´ë¦° ì§„í™íƒ•ì† FA 6ë¼ìš´ë“œ ì¬ê²½ê¸°ì—ì„œ ë¹„ë‹ˆ ì¡´ìŠ¤ê°€ êµ´ë¦¬íŠ¸ì—ê²Œ ë„ì „í•˜ê³  ìˆë‹¤."><span class="caption">1996ë…„ 3ì›” ì…€í—ˆìŠ¤íŠ¸ íŒŒí¬ì—ì„œ ì—´ë¦° ì§„í™íƒ•ì† FA 6ë¼ìš´ë“œ ì¬ê²½ê¸°ì—ì„œ ë¹„ë‹ˆ ì¡´ìŠ¤ê°€ êµ´ë¦¬íŠ¸ì—ê²Œ ë„ì „í•˜ê³  ìˆë‹¤.</span></div>

<p>ì¬ë°ŒëŠ” ì‚¬ì‹¤ì€ ê·¸ ì´í›„ë¡œ ìš°ë¦¬ê°€ ì¹œêµ¬ê°€ ë˜ì—ˆë‹¤ëŠ” ê²ë‹ˆë‹¤. ê·¸ë¦¬ê³  ìš°ë¦¬ëŠ” ê·¸ ë‚ ì¼ì— ëŒ€í•´ ëŒ€í•´ ì›ƒìœ¼ë©° ì´ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ê²ƒì€ ëª‡ëª‡ ì™¸êµ­ ì„ ìˆ˜ê°€ í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ë¡œ ì™”ì„ë•Œ ëŠë‚„ ìˆ˜ ìˆëŠ” ì¥ë²½ì˜ ì˜ˆì‹œì´ë©° ì €ì—ê²ŒëŠ” ë¬¸ì œê°€ ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì €ëŠ” ì´íƒˆë¦¬ì—ì„œ ë§ì€ ê²ƒì„ ë°°ì› ê³ , ì œê°€ í•˜ê³ ìí•˜ëŠ” ì›ë˜ì˜ ê³„íšì´ ê½¤ ë“¤ì–´ ë§ì§€ ì•Šë”ë¼ë„ ê·¸ê²ƒì€ ì €ì—ê²Œ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì‰ê¸€ëœë“œì—ì„œì˜ ì´ì ì„ ì œê³µí–ˆìŠµë‹ˆë‹¤.</p>
<hr>
<p>ì²˜ìŒìœ¼ë¡œ ì²¼ì‹œì—ì„œ ìŠ¤ìœ„í¼ ì—­í• ë¡œ ë›°ê¸¸ ì œì•ˆí•œ ì‚¬ëŒì´ ê¸€ë Œì€ ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤. - ê°€ëŠ¥í•˜ë‹¤ë©´ ì´íƒˆë¦¬ì•„ì—ì„œ ì²˜ëŸ¼ ê³µê²©í˜• ë¯¸ë“œí•„ë”ê°€ ì•„ë‹Œ ìŠ¤ìœ„í¼ ì—­í• ë¡œ ë›°ê³  ì‹¶ë‹¤ë¼ê³  ë§í•œê²ƒì€ ì €ì˜€ìŠµë‹ˆë‹¤. ì €ëŠ” ìˆ˜ë¹„ìª½ í¬ì§€ì…˜ìœ¼ë¡œì„œì˜ ì €ì˜ ì»¤ë¦¬ì–´ë¥¼ ì‹œì‘í•˜ê³ ì í–ˆê³ , ê·¸ê²ƒì€ ì œê°€ ì‚¬ë‘í•œ ì—­í• ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ ì €ëŠ” í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ì—ì„œ ê·¸ í¬ì§€ì…˜ì—ì„œ ë›°ëŠ” ìˆ˜ë§ì€ ì„ ìˆ˜ì¤‘ í•˜ë‚˜ì˜€ê³ , ë¬¸ì œëŠ” ê·¸ ë‹¹ì‹œì˜ ë°©ì‹ì´ì—ˆìŠµë‹ˆë‹¤. í˜ë„í‹° ë°•ìŠ¤ ì•ˆì—ì„œ ê¸´ ë³¼ì´ ë„˜ì–´ì™”ì„ë•Œ, ì €ëŠ” ê·¸ ë³¼ì„ ì œ ê°€ìŠ´ì— ë‚´ë ¤ ë‘ê³ ë‚˜ì„œ ê±°ê¸°ì„œ ë¶€í„° í”Œë ˆì´í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤. ê¸€ë Œì€ ë‹¤ìŒê³¼ ê°™ì´ ì´ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤: â€œë£¨ë””, ì•„ë‹ˆ ì•„ë‹ˆ. ë­˜ í•˜ë ¤ëŠ”ì§€ëŠ” ì´í•´í•˜ê² ëŠ”ë° ë„ˆëŠ” ìš°ë¦¬íŒ€ ìˆ˜ë¹„ìˆ˜ë“¤ì„ ê·¸ì™€ ê°™ì´ ê³¤ë€í•œ ìƒí™©ì— ë¹ ì§€ê²Œ í•˜ê³ ìˆì–´.â€</p>
<p>ìš”ì¦˜ì€ ê·¸ê²ƒì´ íš¨ê³¼ì ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. - ì–¼ë§ˆë‚˜ ë§ì€ í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ íŒ€ë“¤ì´ ìˆ˜ë¹„ìˆ˜ë“¤ë¡œë¶€í„° í”Œë ˆì´ë¥¼ ì‹œì‘í•´ë‚˜ê°€ëŠ”ì§€ ë³´ì„¸ìš”. ê·¸ë•Œ ë‹¹ì‹œì— ìˆ˜ë¹„ìˆ˜ë“¤ì€ í•­ìƒ í—¤ë”©ì„ í•˜ê±°ë‚˜ ê°€ëŠ¥í•œí•œ ë©€ë¦¬ ë³¼ì„ í´ë¦¬ì–´ë§í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì €ëŠ” í›„ë°©ì—ì„œ ê·¸ë“¤ ì£¼ìœ„ë¡œ íŒ¨ìŠ¤ í•˜ê¸¸ ì›í–ˆìŠµë‹ˆë‹¤. ê·¸ë“¤ì€ ê·¸ì™€ ê°™ì€ íŒ¨ìŠ¤ë¥¼ ì›ì¹˜ì•Šì•˜ê³ , ê·¸ë˜ì„œ ê¸€ë Œì€ ì•„ë‹ˆë¼ê³  ë§í–ˆë˜ ê²ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ëŠ” ì €ì—ê²Œ ì¡°ê¸ˆ ë” ì•ìª½ìœ¼ë¡œ í¬ì§€ì…˜ì„ ì´ë™í•˜ëŠ” ê²ƒì´ ì–´ë–»ê² ëƒê³  ì œì•ˆí–ˆìŠµë‹ˆë‹¤.</p>
<p>ì €ëŠ” ë³€í™”ê°€ ë§Œë“¤ì–´ì§„ ê²Œì„ì„ ê¸°ì–µí•˜ì§„ ì•Šì§€ë§Œ ë‚˜ì˜ ë™ë£Œì˜€ë˜ ê°€ë¹ˆ í”¼ì½•ì€ ê¸°ì–µì— ë‚¨ìŠµë‹ˆë‹¤. ê·¸ëŠ” ì œê°€ ë¯¸ë“œí•„ë”ë¡œ ë›°ì—ˆë˜ ì‹œê¸°ì— ì €ì—ê²Œ ë‹¤ê°€ì™€ ì´ë ‡ê²Œ ë§í–ˆìŠµë‹ˆë‹¤. â€œë£¨ë“œ, ë„Œ ì–´ë–»ê²Œ í•­ìƒ ê³µê°„ì„ ë§Œë“¤ì–´ ë‚´ëŠ”ê±°ì•¼?â€ ê·¸ê²ƒì€ ë‹¨ì§€ ê²½í—˜ì—ì„œ ë‚˜ì˜¤ëŠ” ê²ƒì´ì—ˆê¸°ë•Œë¬¸ì— ê·¸ì—ê²Œ ëª…í™•íˆ ì„¤ëª…í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. - ë‹¹ì‹ ì€ ë‹¨ì§€ íŠ¹ì • ìƒí™©ì—ì„œ ë³¼ì´ ì–´ë–»ê²Œ í˜ëŸ¬ ë‚˜ì˜¤ëŠ”ì§€ë¥¼ ë°°ìš°ë©´ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¹ì‹ ì´ íŠ¹ì •í•œ ê³³ì— ë¨¸ë¬´ë¥´ê³  ìˆë‹¤ë©´ ê³µê°„ì´ ìƒê¸¸ ê²ƒì…ë‹ˆë‹¤. ì„¸ë¦¬ì—Aì—ì„œ ë³´ë‹¤ ì˜êµ­ì—ì„œ ê·¸ëŸ¬í•œ ê³µê°„ ì°½ì¶œì˜ ê¸°íšŒê°€ ë” ë§ì•˜ë˜ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë¦¬ìš´ë“œ ë°–ì—ì„œ ì €ëŠ” ë” ë§ì€ ììœ ë¡œì›€ì„ ëŠê¼ˆìŠµë‹ˆë‹¤. ì´íƒˆë¦¬ì—ì„œ ì§€ëƒˆë˜ ì‹œê°„ë‚´ë‚´ ëª¨ë“ ê²ƒì´ ë„ˆë¬´ë‚˜ ì¹˜ì—´í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ë°€ë€ì—ì„œ ì €ë¥¼ ì·¨ì¬í•˜ë ¤ëŠ” ìˆ˜ë§ì€ ê¸°ìë“¤ ë–„ë¬¸ì— ì™¸ì¶œí•˜ëŠ” ê²ƒì´ ë§¤ìš° ì–´ë ¤ì› ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê³³ì—ì„  ì €ë¥¼ ì«“ì•„ë‹¤ë‹ˆê±°ë‚˜ ì €ì—ê²Œ ë¬´ì–¸ê°ˆ ì›í•˜ëŠ” ì‚¬ëŒì´ ì—†ìŠµë‹ˆë‹¤. ì €ëŠ” ë‹¤ì‹œ í•œë²ˆ ìˆ¨í†µì„ í‹”ìš¸ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<p>ë°€ë€ê³¼ ì‚¼í”„ë„ë¦¬ì•„ì—ì„œ ì €ëŠ” ë§¤ ê²½ê¸° ì´ì „ì— íŠ¸ë ˆì´ë‹ ìº í”„ì— ì°¸ì—¬í•˜ê³¤í–ˆìŠµë‹ˆë‹¤. ìƒìƒì´ ë˜ì‹œë‚˜ìš”? ì§€ê¸ˆì€ ëŒ€ë¶€ë¶„ì˜ ë‚ ì— í•˜ë‚˜ì˜ í›ˆë ¨ ì„¸ì…˜ë§Œ ìˆì„ë¿ì´ê³ , ì‹¬ì§€ì–´ ì¼ìš”ì¼ì€ ì‰¬ì£ . ê·¸ë ‡ê¸°ì— ì €ëŠ” ì‚¬ëŒë“¤ì„ ë§Œë‚˜ë©° ì´ê³³ ì €ê³³ì„ ëŒì•„ ë‹¤ë‹ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì¼ìƒ ìƒí™œì´ ìˆì—ˆë˜ê±°ì£ .<br><br></p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/tr_ruud_gullit_picture_5.png" alt="ì²¼ì‹œì˜ 95-96ì‹œì¦Œ ë™ì•ˆ êµ´ë¦¬íŠ¸ëŠ” ìŠ¤ìœ„í¼, ë¯¸ë“œí•„ë” ë˜ëŠ ê³µê²©ìˆ˜ë¡œ ê²½ê¸°ì— ì°¸ì—¬í–ˆë‹¤."><span class="caption">ì²¼ì‹œì˜ 95-96ì‹œì¦Œ ë™ì•ˆ êµ´ë¦¬íŠ¸ëŠ” ìŠ¤ìœ„í¼, ë¯¸ë“œí•„ë” ë˜ëŠ ê³µê²©ìˆ˜ë¡œ ê²½ê¸°ì— ì°¸ì—¬í–ˆë‹¤.</span></div>

<p>ì²˜ìŒì— ì €ëŠ” í˜¸í…”ì—ë§Œ ë¨¸ë¬¼ë €ìŠµë‹ˆë‹¤. - ì €ëŠ” ì‹¬ì§€ì–´ ì´ê³³ì´ ì–´ë”˜ì§€ë„ ëª°ëìŠµë‹ˆë‹¤. ë„ì‹¬ë‚´ì— ìˆëŠ” ê²ƒë„ ì•„ë‹ˆì—ˆê³  ê³µí•­ ê·¼ì²˜ì˜€ìŠµë‹ˆë‹¤. ëŸ°ë˜ ì¤‘ì‹¬ê°€ë¡œ ë“œë¼ì´ë¸Œí•˜ê¸°ë¡œ ê²°ì‹¬í–ˆë˜ ê¸°ì–µì´ ìˆìŠµë‹ˆë‹¤. ëŸ°ë˜ì€ ìš´ì „ì„ê³¼ ë°©í–¥ì´ ì •ë°˜ëŒ€ì˜€ê¸°ë•Œë¬¸ì— ë“œë¼ì´ë¸Œë¥¼ í•œë‹¤ëŠ” ê²ƒì€ ë§¤ìš° ì–´ë ¤ìš´ ì¼ì´ì—ˆìŠµë‹ˆë‹¤. ë§¤ìš° ë³µì¡í•˜ê¸°ë„ í–ˆêµ¬ìš”. í•˜ì§€ë§Œ í”¼ì¹´ë”œë¦¬ ì„œì»¤ìŠ¤ë¡œ ë“œë¼ì´ë¸Œë¥¼ ê°”ì„ë•Œ, ì œ ìŠ¤ìŠ¤ë¡œì—ê²Œ ì´ë ‡ê²Œ ë§í–ˆìŠµë‹ˆë‹¤. â€˜ì´ê³³ì€ ë‚˜ë¥¼ ìœ„í•œ ê³³ì´ë‹¤.â€™ ì—­ì‹œë‚˜ ì œ ìƒê°ì´ ë§ì•˜ìŠµë‹ˆë‹¤.</p>
<hr>
<p>ì˜êµ­ ì¶•êµ¬ê°€ ì´íƒˆë¦¬ì•„ì™€ ë‹¤ë¥¸ ë˜ í•˜ë‚˜ì˜ ë¬´ì–¸ê°€ê°€ ìˆì—ˆê³  ê·¸ê²ƒì€ ê¸ì •ì ì´ì—ˆìŠµë‹ˆë‹¤. - ê´€ì¤‘, ê·¸ë¦¬ê³  ê´€ì¤‘ì„ì—ì„œì˜ íƒœë„ì…ë‹ˆë‹¤. ì €ëŠ” ì²¼ì‹œ íŒ¬ë“¤ë¿ë§Œ ì•„ë‹ˆë¼ ê´€ì¤‘ë“¤ê³¼ ë‹¤ë¥¸ í˜•íƒœì˜ ìœ ëŒ€ê°ì„ ëŠê¼ˆìŠµë‹ˆë‹¤. í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ì—ì„œ, ê·¸ë“¤ì€ ì„ ìˆ˜ë“¤ì´ ë³´ì—¬ì£¼ëŠ” í”Œë ˆì´ì— ë”ìš± í™˜í˜¸í•©ë‹ˆë‹¤. - ë§Œì•½ ë‹¹ì‹ ì´ ê·¸ë¼ìš´ë“œìœ„ì—ì„œ íŠ¹ë³„í•œ ë¬´ì–¸ê°€ë¥¼ ë³´ì—¬ì¤€ë‹¤ë©´, ê´€ì¤‘ë“¤ì€ ì—´ê´‘í• ê²ë‹ˆë‹¤. ë¬¼ë¡  ì´íƒˆë¦¬ì•„ì—ì„œë„ ê´€ì¤‘ë“¤ì€ ì—´ì •ì ì´ì—ˆê³ , ê²½ê¸°ì¥ì€ ëŠ˜ ê°€ë“ì°¼ì§€ë§Œ ê·¸ë“¤ì€ ëŒ€ë‹¤ìˆ˜ì˜ ì„ ìˆ˜ë“¤ì´ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œëŠ” ê²°ì½” ë°˜ì‘í•˜ì§€ì•ŠëŠ” ê²ƒë“¤ì„ ë³´ëŠ”ê²ƒì— ìµìˆ™í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì €ëŠ” ê³§ì¥ ì²¼ì‹œíŒ¬ë“¤ê³¼ í•¨ê»˜í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì²¼ì‹œì—ì„œì˜ ì²«ë²ˆì§¸ ê²½ê¸°ì— ë“œë ˆë“œë½ ê°€ë°œì„ ì“´ ê·¸ë“¤ì„ ê¸°ì–µí•©ë‹ˆë‹¤. ì²¼ì‹œì˜ ì„œí¬í„°ë“¤ì€ ì–¸ì œë‚˜ í™˜ìƒì ì´ì—ˆê³  ì‹¬ì§€ì–´ ì œê°€ ì²¼ì‹œë¥¼ ë– ë‚ ë•Œì—ë„ ê·¸ëŸ¬í–ˆìŠµë‹ˆë‹¤. ê·¸ë“¤ì€ ì§€ê¸ˆë„ ì—¬ì „í•©ë‹ˆë‹¤. ì €ëŠ” ê·¸ë“¤ì„ ì‚¬ë‘í•˜ê³  ê·¸ë“¤ì´ ì €ì™€ í•¨ê»˜í•œ ë°©ì‹ì„ ì‚¬ë‘í•©ë‹ˆë‹¤. ê·¸ë“¤ì€ ì €ì—ê²Œ ì–¸ì œë‚˜ ë³´ë¬¼ê³¼ ê°™ì€ ê²ƒì¼ê²ë‹ˆë‹¤.</p>
<p>ì²¼ì‹œ ì„ ìˆ˜ë“¤ê³¼ ì¹œêµ¬ë¥¼ ë§Œë“œëŠ” ì¼ ë˜í•œ ê·¸ë¦¬ ì˜¤ë˜ ê±¸ë¦¬ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì €ëŠ” ì²¼ì‹œì—ì„œì˜ ìƒí™œì„ ì‹œì‘í•œ ìˆœê°„ë¶€í„° ê·¸ë“¤ì„ í•­ìƒ â€˜ì‚¬ë‘ìŠ¤ëŸ° ì•„ì´ë“¤â€™ ì´ë¼ ë¶ˆë €ìŠµë‹ˆë‹¤. ì™œ â€˜ì‚¬ë‘ìŠ¤ëŸ° ì•„ì´ë“¤â€™ì´ë¼ê³  í–ˆì„ê¹Œìš”? ê¸€ì„ìš”, ì €ëŠ” ì˜êµ­ì˜ TV ì‡¼ì¸ â€˜It Ainâ€™t Half Hot, Mumâ€™ì˜ ê´‘íŒ¬ì´ì—ˆê³ , â€˜ì‚¬ë‘ìŠ¤ëŸ° ì•„ì´ë“¤â€™ì´ë¼ëŠ” ë‹¨ì–´ëŠ” ê·¸ í”„ë¡œì—ì„œ ë¶€ëŒ€ì„ ì„í•˜ì‚¬ê´€ìœ¼ë¡œ ì¶œí˜„í•˜ëŠ” ìœˆì ¸ ë°ì´ë¹„ìŠ¤ê°€ ê·¸ì˜ ë¶€ëŒ€ì›ì—ê²Œ ì‚¬ìš©í–ˆë˜ ë§ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì œê°€ ì²¼ì‹œì— í•©ë¥˜í–ˆì„ë•Œ, ì²¼ì‹œ ì„ ìˆ˜ë“¤ì€ ì œê°€ ì˜êµ­ì˜ ìœ ë¨¸ë¥¼ ì¢‹ì•„í•œë‹¤ëŠ” ê²ƒì— ëŒ€í•´ ë†€ë¼ì› í–ˆë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. - Mr Coolì´ ë˜ê³ ì í–ˆìŠµë‹ˆë‹¤. - í•˜ì§€ë§Œ ì €ëŠ” 1907ë…„ëŒ€ ë„¤ëœë€ë“œ TVì—ì„œ ë°©ì˜í•˜ëŠ” ì´ëŸ¬í•œ í”„ë¡œê·¸ë¨ë“¤ì„ ë³´ë©° ìë¼ì™”ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë¼ì»¤ë£¸ì—ì„œ í”„ë­í¬ ìŠ¤íœì„œë‚˜ â€˜Fawlty Towersâ€™, â€˜Are You Being Servedâ€™, â€˜George and Mildredâ€™ ì—ëŒ€í•´ ì´ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤. ì €ëŠ” ê·¸ ëª¨ë“ ê±¸ ì‚¬ë‘í–ˆì—ˆì£ .</p>
<p>ê·¸ê²ƒì€ ì œê°€ ì ì‘ í•˜ë„ë¡ ë„ì™€ì£¼ì› ìŠµë‹ˆë‹¤. ë„¤ëœë€ë“œì˜ ë½ì»¤ë£¸ì—ì„œëŠ” ëª¨ë‘ê°€ ê·¸ë¥¼ ìµœê³ ë¼ê³  ì•Œê³  ìˆìœ¼ë©° ê·¸ë ‡ê²Œ ì´ì•¼ê¸°í•©ë‹ˆë‹¤. ì´íƒˆë¦¬ì•„ì—ì„œë„ ë§ˆì°¬ê°€ì§€ì˜€ì´ë§Œ ê°ë…ì—ê²Œ ì´ì•¼ê¸°í•˜ëŠ” ê²ƒì€ ë‘ë ¤ì›Œí–ˆìŠµë‹ˆë‹¤. ê·¸ë‹¹ì‹œ ì˜êµ­ì—ì„œëŠ” ëª¨ë‘ê°€ ì›ƒê¸°ë¥¼ ì›í–ˆìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ ê·¸ê²ƒì´ ì €ì˜ ìƒˆë¡œìš´ íŒ€ ë™ë£Œë“¤ê³¼ ì˜ ì§€ë‚¼ ìˆ˜ ìˆì—ˆë˜ ìœ ì¼í•œ ì´ìœ ëŠ” ì•„ë‹ˆì—ˆìŠµë‹ˆë‹¤. ì œê°€ ì ì‘í•˜ê¸¸ ì›í–ˆê¸°ì— ê·¸ëŸ¬í•œ ì›ë§Œí•œ ê´€ê³„ê°€ ì´ë¤„ì¡ŒìŠµë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ë„ ì¶•êµ¬ì˜ ê·¸ ë¶€ë¶„ì€ ë³€í•˜ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤. - ë‹¹ì‹ ì´ ìƒˆë¡œìš´ í´ëŸ½ í˜¹ì€ ìƒˆë¡œìš´ êµ­ê°€ë¡œ ì´ì í• ë•Œ, ë¬´ì—‡ë³´ë‹¤ë„ ì–¸ì–´ë¥¼ ë¨¼ì € ì´í•´í•´ì•¼í•˜ë©°, ê·¸ë¦¬ê³ ë‚˜ì„œ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ì‹œê°„ì„ ë³´ë‚¸ë‹¤ë©´ ë‹¹ì‹ ì€ ì–¼ë§ˆì§€ë‚˜ì§€ì•Šì•„ ì„œë¡œë¥¼ ì´í•´í•˜ê²Œ ë  ê²ë‹ˆë‹¤.</p>
<p>ê·¸ë˜ì„œ ì²¼ì‹œì—ì„œ ì €ëŠ” ê·¸ë“¤ ëª¨ë‘ì™€ í•¨ê»˜ ë ˆìŠ¤í† ë‘ì´ë‚˜ ì½˜ì„œíŠ¸ì—ì„œ ì‹œê°„ì„ ë³´ëƒˆê³ , ê³¨í”„ë„ ì¹˜ê³¤í–ˆìŠµë‹ˆë‹¤. ì•„ì£¼ ë§ì´ìš”. ì €ëŠ” ì‚¬ì‹¤ìƒ ì²¼ì‹œì—ì„œì˜ ì´ì•¼ê¸°ê°€ ëë‚œ í›„ì—ë„ ì´ì™€ ê°™ì´ ì§€ëƒˆìŠµë‹ˆë‹¤. ì´íƒˆë¦¬ì•„ì—ì„œ ê·¸ëŸ¬í–ˆë˜ê²ƒ ì²˜ëŸ¼, ì‰ê¸€ëœë“œì—ì„œì˜ ìƒí™œì„ í†µí•´ ë§ì€ ê±¸ ë°°ì› ìŠµë‹ˆë‹¤. ê·¸ê³³ì—ì„œì˜ ëŒ€ë¶€ë¶„ì˜ ê²½í—˜ë“¤ì€ ê¸ì •ì ì´ì—ˆì§€ë§Œ, í•œê°€ì§€ ì‚¬ê±´ì€ ë¶„ëª…íˆ ê·¸ë ‡ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
<hr>
<p>ì €ëŠ” ì²¼ì‹œë¡œ ì´ì í•˜ê³ ë‚˜ì„œ 1ë…„ í›„ ì„ ìˆ˜ê²¸ ê°ë…ì´ ë˜ì—ˆìŠµë‹ˆë‹¤. 1996ë…„ ê¸€ë Œ í˜¸ë“¤ì´ ì‰ê¸€ëœë“œ êµ­ê°€ëŒ€í‘œ ê°ë…ìœ¼ë¡œ ë¶€ì„í•˜ë©° ì²¼ì‹œë¥¼ ë– ë‚¬ì„ë•Œì˜€ì£ . ì €ëŠ” ì”í”Œë‘ì½” ì¡¸ë¼, ì”ë£¨ì¹´ ë¹„ì•Œë¦¬, ë¡œë² ë¥´í†  ë”” ë§ˆí…Œì˜¤, í”„ë‘í¬ ë¥´ëµˆí”„ë¥¼ ì˜ì…í–ˆìŠµë‹ˆë‹¤. 1997ë…„ FAì»µì—ì„œ ìš°ìŠ¹ì„ ì°¨ì§€í–ˆê³ , 1998ë…„ 2ì›” í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ì—ì„œ 2ìœ„ì— ì˜¬ë¼ìˆì—ˆìœ¼ë©° ìœ ëŸ¬í”¼ì–¸ ì»µ ìœ„ë„ˆìŠ¤ ì»µ 8ê°•ì— ì§„ì¶œí•œ ìƒíƒœì˜€ìŠµë‹ˆë‹¤. ì €ëŠ” PSV ì•„ì¸íŠ¸ í˜¸ë²¤ì˜ ì•¼í”„ ìŠ¤íƒê³¼ ë ˆì¸ì €ìŠ¤ì˜ ë¸Œë¦¬ì•ˆ ë¼ìš°ë“œë£¨í”„ì™€ í˜‘ìƒì¤‘ì— ìˆì—ˆì£ .</p>
<p>ê²½ì§ˆë˜ê¸° ì „ë‚ , ì €ëŠ” ì œ ì½”ì¹˜ ì¤‘ í•œëª…ì´ì—ˆë˜ ê·¸ìœˆ ìœŒë¦¬ì—„ìŠ¤ì™€ 2ëª…ì˜ ì²¼ì‹œ ì„ ìˆ˜ í”Œë‘ì½” ì¡¸ë¼, ì¼€ë¹ˆ íˆì¹˜ì½•ê³¼ ê³¨í”„ë¥¼ ì¹˜ê³ ìˆì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” ë¼ìš°ë“œë£¨í”„ì™€ ì ‘ì´‰í•˜ê¸° ìœ„í•´ ë…¸ë ¥í–ˆìœ¼ë‚˜ ê²°êµ­ì—” ì„±ì‚¬ë˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì €ì˜ ê°€ì¥ ê°€ê¹Œì› ë˜ ì¹œêµ¬ì´ì ì €ë¥¼ ê°€ì¥ ë§ì´ ë„ì™”ë˜ ê·¸ìœˆì€ ë¬´ìŠ¨ì¼ì´ ì¼ì–´ë‚ ì§€ ì •í™•íˆ ì•Œê³ ìˆì—ˆìœ¼ë©° ê·¸ë“¤ì´ ì €ë¥¼ í•´ê³ í•  ìƒê°ì´ì—ˆë‹¤ëŠ”ê²ƒ ë˜í•œ ì•Œê³ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŠ” ì €ë¥¼ ë–¨ì–´ëœ¨ë ¤ë†“ê¸° ìœ„í•´ ì €ì™€ ê³¨í”„ë¥¼ ì¹˜ê³ ìˆì—ˆê³ , ì œê°€ ë¼ìš°ë“œë£¨í”„ê°€ ìˆëŠ” ê³³ì—ëŠ” ê°€ì§€ ì•Šì•˜ë‹¤ëŠ”ê²ƒì„ í™•ì‹¤íˆ í–ˆìŠµë‹ˆë‹¤.</p>
<p>ê²½ì§ˆì„ ë‹¹í•˜ëŠ” ê²ƒì€ ë”ì°í•œ ê²½í—˜ì´ì—ˆê³  ê·¸ë“¤ì´ ê·¸ë ‡ê²Œ í•œê²ƒì— ëŒ€í•œ ì´ìœ ëŠ” ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¸ë“¤ì€ ë‚˜ì˜ ê³„ì•½ ìš”êµ¬ ì‚¬í•­ì´ ì§€ë‚˜ì³¤ë‹¤ê³  í–ˆì§€ë§Œ ê·¸ê±´ ë§ë„ì•ˆë˜ëŠ” ì†Œë¦¬ì…ë‹ˆë‹¤. ê·¸ë“¤ì€ ì €ì™€ì˜ ì–´ë– í•œ í˜‘ìƒë„ í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì–´ì°Œëë“  ê·¸ë“¤ì€ ì €ë¥¼ í•´ê³  í•  ê³„íšì´ì—ˆë˜ ê±°ì£ . í•˜ì§€ë§Œ ìµœì•…ì˜ ì¼ì€ ê·¸ìœˆì´ ì €ì—ê²Œ í–ˆë˜ ì§“ì…ë‹ˆë‹¤. - ì €ëŠ” ëª¨ë“  ì‹œê°„ì„ í•¨ê»˜í•œ ëˆ„êµ°ê°€ì—ê²Œ ê·¸ì™€ê°™ì´ í–‰ë™í•œë‹¤ëŠ” ê²ƒì„ ì´í•´í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ê·¸ëŠ” êµ¬ì²´ì ì¸ ì‚¬í•­ì— ëŒ€í•´ì„œëŠ” ì–´ë– í•œê²ƒë„ ì´ì•¼ê¸°í•  í•„ìš”ê°€ ì—†ì—ˆê³ , ë¬´ì–¸ê°€ê°€ ì¼ì–´ë‚  ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ì¡°ì‹¬í•˜ë¼ê³ ë§Œ ì´ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì´ ì¼ì€ ì €ì˜ ì»¤ë¦¬ì–´ì™€ ì‚¶ì„ í†µí‹€ì–´ ëˆ„êµ°ê°€ê°€ ì €ì—ê²Œ í–ˆë˜ ì¼ ì¤‘ ìµœì•…ì˜ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì€ ëˆ„êµ°ê°€ê°€ ì €ì—ê²Œ ì¤„ ìˆ˜ ìˆëŠ” ê°€ì¥ í° ì‹¤ë§ì´ì—ˆìœ¼ë©° ì €ëŠ” ê·¸ê²ƒì— ëŒ€í•´ì„œëŠ” ê·¸ë¥¼ ì ˆëŒ€ ìš©ì„œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì •ë§ì´ì§€ ê·¸ëŸ´ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ ë‹¤ë¥¸ ëª¨ë“  ê²ƒë“¤ì€ ë‹¤ ìŠì—ˆìŠµë‹ˆë‹¤. ê²½ì§ˆ ë‹¹í•œê²ƒì— ëŒ€í•´ ì•„ì§ê¹Œì§€ í™”ê°€ ë‚˜ëƒêµ¬ìš”? ì•„ë‹™ë‹ˆë‹¤. ì €ëŠ” ì´ë¯¸ ì˜¤ë˜ì „ì— ê·¸ê²ƒì„ ë°›ì•„ë“¤ì˜€ê³ , ì´ê²¨ëƒˆìŠµë‹ˆë‹¤. ì‰ê¸€ëœë“œë¡œ ì˜¨ê²ƒì´ ê¸°ì˜ëƒêµ¬ìš”? ë¬¼ë¡ ì´ì£ .</p>
<p>ê·¸ê²ƒì€ ì €ë¥¼ ë” ë‚˜ì€ ì‚¬ëŒìœ¼ë¡œ ë§Œë“¤ì—ˆê³ , ë‰´ìºìŠ¬ ê°ë…ìœ¼ë¡œ ìˆì—ˆì„ë•Œë„ ì €ëŠ” ê°™ì€ ê²ƒì„ ì´ì•¼ê¸° í•˜ê³¤ í–ˆìŠµë‹ˆë‹¤. ì œê°€ ì´ê³³ì— ì™”ì„ë•Œ ì‰ê¸€ëœë“œì—ì„œì˜ ì‚¶ì€ ì €ì˜ ê²½í—˜ì„ í’ë¶€í•˜ê²Œ í•˜ê³  ì¶•êµ¬ì— ëŒ€í•œ ì €ì˜ ìƒê°ì„ í–¥ìƒì‹œí‚¨ë‹¤ë¼ê³  ëŠê¼ˆìŠµë‹ˆë‹¤. ì—¬ì „íˆ ì €ëŠ” ê·¸ì™€ ê°™ì´ ëŠë‚ë‹ˆë‹¤.<br><br></p>
<div class="figure center" style="width:;"><img class="fig-img" src="/assets/images/tr_ruud_gullit_picture_6.png" alt="1997ë…„ ì›¸ë¸”ë¦¬ì—ì„œ ì—´ë¦° FAì»µ ê²°ìŠ¹ì—ì„œ ì²¼ì‹œëŠ” ë¯¸ë“¤ì¦ˆë¸ŒëŸ¬ë¥¼ ìƒëŒ€ë¡œ 2ëŒ€0ìœ¼ë¡œ ìŠ¹ë¦¬í–ˆë‹¤."><span class="caption">1997ë…„ ì›¸ë¸”ë¦¬ì—ì„œ ì—´ë¦° FAì»µ ê²°ìŠ¹ì—ì„œ ì²¼ì‹œëŠ” ë¯¸ë“¤ì¦ˆë¸ŒëŸ¬ë¥¼ ìƒëŒ€ë¡œ 2ëŒ€0ìœ¼ë¡œ ìŠ¹ë¦¬í–ˆë‹¤.</span></div>

<p>ì œê°€ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ìˆœê°„ì€ FAì»µì—ì„œ ìš°ìŠ¹í–ˆì„ë•Œì…ë‹ˆë‹¤. AC ë°€ë€ ìµœì´ˆë¡œ ìœ ë¡œí”¼ì–¸ ì»µì—ì„œ ìš°ìŠ¹í–ˆì„ë•Œë„ ë¯¿ì„ ìˆ˜ ì—†ì—ˆì§€ë§Œ ì†”ì§íˆ ë§í•˜ë©´ ê·¸ë•Œì˜ ìˆœê°„ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ìŠì„ ìˆ˜ ì—†ì£ . íŠ¸ë¡œí”¼ë¥¼ ë“¤ì–´ì˜¬ë¦°ë‹¤ëŠ” ì¸¡ë©´ì—ì„œ ì €ëŠ” ì²¼ì‹œë¼ëŠ” ìƒˆë¡œìš´ í´ëŸ½ì˜ ìƒˆë¡œìš´ ê°ë…ì´ì—ˆìŠµë‹ˆë‹¤. ìš°ìŠ¹í•  ê±°ë¼ê³ ëŠ” ìƒê°ì§€ ëª»í–ˆì§€ë§Œ ê°‘ì‘ìŠ¤ë ˆ ì¼ì–´ë‚¬ê³ , ê·¸ê²ƒì€ ë†€ë¼ìš´ ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì²¼ì‹œì˜ ì‹œì‘ì— ì œê°€ ìˆì—ˆë‹¤ëŠ”ê²ƒì´ ë˜í•œ í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ê°€ ì´ë£¨ì–´ë‚˜ê°ˆ ì¼ë“¤ì„ ë³´ì•˜ë‹¤ëŠ” ê²ƒì´ ë§¤ìš° ìë‘ìŠ¤ëŸ½ìŠµë‹ˆë‹¤. ì²¼ì‹œì™€ í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ ëª¨ë‘ ì—„ì²­ë‚œ ë°œì „ì„ ì´ë£¨ì—ˆê³ , ê·¸ë“¤ì€ ì´ì œ ì™„ì „íˆ ë‹¬ë¼ì¡ŒìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ë“¤ì€ ì–´ë”˜ì„ ê°€ ì‹œì‘í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì œê°€ ì™”ì„ë•Œ ê·¸ê²ƒì€ ì‰ê¸€ëœë“œ ì¶•êµ¬ë¥¼ ìœ„í•œ ìƒˆë¡œìš´ ë°©í–¥ì˜ ì¼ë¶€ì˜€ê³ , ì½”ë¡œë‚˜ ë°”ì´ëŸ¬ìŠ¤ íŒ¬ë”ë¯¹ìœ¼ë¡œ ì¸í•´ ì˜¤ëŠ˜ë‚ ë„ ê·¸ë•Œì™€ ë¹„ìŠ·í•œ ìƒí™©ì¼ì§€ ëª¨ë¦…ë‹ˆë‹¤. ì´ê²ƒì€ ì‚¬ëŒë“¤ì˜ ì£¼ì˜ë¥¼ ì´‰êµ¬í•˜ëŠ” ì¼ì´ ë˜ì–´ì•¼ë§Œ í•˜ê³  ëª¨ë“  í´ëŸ½ë“¤ì€ ê·¸ë“¤ ìŠ¤ìŠ¤ë¡œë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ”ê²ƒì— ìƒê°í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>
<p>ì œê°€ ë³´ì•˜ì„ë•Œ ì˜êµ­ ì¶•êµ¬ì˜ ë¬¸ì œëŠ” ë„ˆë¬´ë‚˜ ë§ì€ ëˆì„ ë²„ëŠ” ì„ ìˆ˜ë“¤ì´ ìˆê³ , ê·¸ë ‡ê²Œ í• ë§Œí¼ ì¢‹ì€ ì„ ìˆ˜ê°€ ì—†ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ìœ„ëŒ€í•œ ìŠ¤íƒ€ ì„ ìˆ˜ê°€ í° ëˆì„ ë²ˆë‹¤ë©´ ê·¸ê²ƒì€ ê´œì°®ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ëŠ” ê·¸ê²ƒì— ê°€ê¹Œì´ ê°€ì§€ ëª»í•˜ëŠ” ì„ ìˆ˜ë“¤ì„ ë³´ê³ ìˆìŠµë‹ˆë‹¤.</p>
<p>ìë³¸ì€ í”„ë¦¬ë¯¸ì–´ ë¦¬ê·¸ë¥¼ ì¢‹ì€ ë°©í–¥ìœ¼ë¡œ ë°”ê¾¸ì—ˆì§€ë§Œ, ê²½ìŸì— ìˆì–´ ì´ì™€ ê°™ì€ ì¼ì‹œì ì¸ ë¬¸ì œë“¤ì´ ë‹¤ì‹œ ë°œìƒí•œë‹¤ë©´ ê·¸ë“¤ì´ ì§€ê¸ˆê³¼ ê°™ì€ í´ëŸ½ ìš´ì˜ê³¼ ì§€ì¶œì„ ì§€ì†í•  ê²½ìš°ì—  ëŒ€ë‹¤ìˆ˜ì˜ í´ëŸ½ë“¤ì´ íŒŒì‚°í•  ê²ƒì…ë‹ˆë‹¤. ê·¸ë“¤ì€ ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ì•¼í•˜ë©° ê·¸ë“¤ì˜ ëª¨ë¸ì„ ë‹¤ì‹œ í•œë²ˆ ë³€í™”ì‹œì¼œì•¼í• ì§€ ëª¨ë¦…ë‹ˆë‹¤.<br><br><br><br></p>
<span class="highlight-text yellow">ë²ˆì—­ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ì—­ ë° ì˜ì—­ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜
<p>ì›ë¬¸ ë§í¬: <a href="https://www.bbc.com/sport/football/52904670">Chelsea: Ruud Gullit looks back fondly on his Premier League arrival, 25 years on</a></p>
]]></content>
      <categories>
        <category>í•´ì¶•ê¸°ì‚¬ë²ˆì—­</category>
      </categories>
      <tags>
        <tag>gullit</tag>
        <tag>êµ´ë¦¬íŠ¸</tag>
        <tag>ì²¼ì‹œ êµ´ë¦¬íŠ¸</tag>
      </tags>
  </entry>
  <entry>
    <title>UTF-8(Unicode Transformation Format - 8bit) ìš”ì•½ ì •ë¦¬</title>
    <url>/2023/01/30/unicode-encoding-utf8/</url>
    <content><![CDATA[<p><escape><span id="more"></span></escape></p>
<p>ìœ ë‹ˆì½”ë“œëŠ” ì „ ì„¸ê³„ì˜ ëª¨ë“  ë¬¸ìë¥¼ ì»´í“¨í„°ì—ì„œ ì¼ê´€ë˜ê²Œ í‘œí˜„í•˜ê³  ë‹¤ë£° ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ ì‚°ì—… í‘œì¤€ì´ë©°, í˜„ì¡´í•˜ëŠ” ë¬¸ì ì¸ì½”ë”© ë°©ë²•ë“¤ì„ ëª¨ë‘ ìœ ë‹ˆì½”ë“œë¡œ êµì²´í•˜ë ¤ëŠ” ê²ƒì— ëª©ì ì´ ìˆìŠµë‹ˆë‹¤.</p>
<p>ìœ ë‹ˆì½”ë“œ ì˜ì—­ ëª©ë¡ì€ ì•„ë˜ ë§í¬ë¥¼ ì°¸ì¡°</p>
<ul>
<li><a href="https://ko.wikipedia.org/wiki/%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C_%EC%98%81%EC%97%AD">https://ko.wikipedia.org/wiki/ìœ ë‹ˆì½”ë“œ_ì˜ì—­</a></li>
</ul>
<p>ìœ ë‹ˆì½”ë“œ ì¸ì½”ë”© ë°©ì‹ ì¤‘ í•˜ë‚˜ê°€ UTF-8ì´ë©°, ê°€ë³€ ê¸¸ì´ ë¬¸ì ì¸ì½”ë”© ë°©ì‹ìœ¼ë¡œ 1ë°”ì´íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¸ì½”ë”©í•©ë‹ˆë‹¤. (í•œ ê¸€ìê°€ 1~4ë°”ì´íŠ¸ ì¤‘ í•˜ë‚˜ë¡œ ì¸ì½”ë”©ë¨)</p>
<p><strong>ì¸ì½”ë”© ê·œì¹™</strong></p>
<ul>
<li>UTF-8 2-byte Characters<ul>
<li>ì²« ë²ˆì§¸ byte = 0xc0 ~ 0xdf</li>
<li>ë‘ ë²ˆì§¸ byte = 0x80 ~ 0xbf</li>
</ul>
</li>
<li>UTF-8 3-byte Characters<ul>
<li>ì²« ë²ˆì§¸ byte = 0xe0 ~ 0xef</li>
<li>ë‘ ë²ˆì§¸ byte = 0x80 ~ 0xbf</li>
<li>ì„¸ ë²ˆì§¸ byte = 0x80 ~ 0xbf</li>
</ul>
</li>
<li>UTF-8 4-byte Characters<ul>
<li>ì²« ë²ˆì§¸ byte = 0xf0 ~ 0xf7</li>
<li>ë‘ ë²ˆì§¸ byte = 0x80 ~ 0xbf</li>
<li>ì„¸ ë²ˆì§¸ byte = 0x80 ~ 0xbf</li>
<li>ë„¤ ë²ˆì§¸ byte = 0x80 ~ 0xbf</li>
</ul>
</li>
</ul>
<br>

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://design215.com/toolbox/ascii-utf8.php">https://design215.com/toolbox/ascii-utf8.php</a></li>
<li><a href="https://design215.com/toolbox/utf8-3byte-characters.php">https://design215.com/toolbox/utf8-3byte-characters.php</a></li>
<li><a href="https://design215.com/toolbox/utf8-4byte-characters.php">https://design215.com/toolbox/utf8-4byte-characters.php</a></li>
</ul>
]]></content>
      <categories>
        <category>ì¸ì½”ë”©</category>
      </categories>
      <tags>
        <tag>UTF8</tag>
        <tag>Unicode</tag>
      </tags>
  </entry>
  <entry>
    <title>ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ Go ì½”ë“œë¥¼ êµ¬ì¡°í™”í•´ì•¼ í•˜ëŠ”ê°€?</title>
    <url>/2022/09/06/translate-standard-package-layout-in-go/</url>
    <content><![CDATA[<p>ìµœê·¼ íšŒì‚¬ì—ì„œ Go ì–¸ì–´ë¥¼ í™œìš©í•˜ì—¬ ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ê¸°íšŒê°€ ìƒê²¼ëŠ”ë° ì¶”í›„ ì½”ë“œì˜ ìœ ì§€ ê´€ë¦¬ë¥¼ ê³ ë ¤í•´ë³¼ ë•Œ Go ì–¸ì–´ì˜ ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°ë¥¼ ì–´ë–¤ ì‹ìœ¼ë¡œ í•´ì•¼ í•˜ëŠ”ê°€ì— ëŒ€í•´ ê³ ë¯¼ì´ ìƒê²¼ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<p>êµ¬ê¸€ë§ ì¤‘ì— Go ì–¸ì–´ì˜ ì½”ë“œ êµ¬ì¡°í™”ì— ê´€í•œ ì¢‹ì€ ê¸€ì„ ë°œê²¬í•˜ì—¬ ì‹¤ì œ í”„ë¡œì íŠ¸ì—ë„ ë°˜ì˜í•´ë³¼ ê²¸ í•´ì„œ ë²ˆì—­í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì—­ì‹œë‚˜ ì €ì™€ ê°™ì€ ê³ ë¯¼ì„ ì•ì„œ í•´ì£¼ì‹  ì„ êµ¬ìë‹˜ë“¤ì´ ê³„ì‹œë”ë¼ê³ ìš”ğŸ˜.</p>
<p>ì›ë¬¸ì˜ ì¼ë¶€ ë‚´ìš©ì€ ë²ˆì—­ì—ì„œ ì œì™¸í–ˆìœ¼ë‹ˆ ì›ë¬¸ì„ ì°¸ê³ í•˜ì‹¤ ë¶„ë“¤ì€ <a href="https://www.gobeyond.dev/standard-package-layout/">í•´ë‹¹ ë§í¬</a>ë¥¼ í™•ì¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<br>

<!-- toc -->

<br>

<h1 id="í‘œì¤€-íŒ¨í‚¤ì§€-ë ˆì´ì•„ì›ƒ"><a href="#í‘œì¤€-íŒ¨í‚¤ì§€-ë ˆì´ì•„ì›ƒ" class="headerlink" title="í‘œì¤€ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ"></a>í‘œì¤€ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ</h1><p>Vendoring. Generics. ì´ê²ƒë“¤ì€ Go ì»¤ë®¤ë‹ˆí‹° ë‚´ì—ì„œ í° ì´ìŠˆë“¤ë¡œ ë³´ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì¢€ ì²˜ëŸ¼ ì–¸ê¸‰ë˜ì§€ ì•ŠëŠ” ë˜ ë‹¤ë¥¸ ì´ìŠˆê°€ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤ - ë°”ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Vendoring. Generics. These are seen as big issues in the Go community but thereâ€™s another issue thatâ€™s rarely mentioned â€” application package layout.</p>
</blockquote>
<p>ì œê°€ ì§€ê¸ˆê¹Œì§€ ì‘ì—…í•´ì™”ë˜ ëª¨ë“  Go ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ â€œë‚´ ì½”ë“œë¥¼ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ êµ¬ì¡°í™”í•´ì•¼í•˜ëŠ”ê°€?â€ë¼ëŠ” ì§ˆë¬¸ì— ëŒ€í•œ ê°ê¸° ë‹¤ë¥¸ ëŒ€ë‹µì„ ê°€ì§€ê³  ìˆëŠ”ê²ƒ ì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤. ëª‡ëª‡ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ì— ëª¨ë“  ê²ƒì„ ë°€ì–´ ë„£ê¸°ë„í•˜ê³  ë˜ ë‹¤ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ íƒ€ì…ì´ë‚˜ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ê·¸ë£¹í™”í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ íŒ€ ì „ë°˜ì— ê±¸ì³ ì ìš©í•  ë§Œí•œ ì¢‹ì€ ì „ëµì´ ì—†ë‹¤ë©´, ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ì–‘í•œ íŒ¨í‚¤ì§€ë“¤ì— ê³³ê³³ì— ì½”ë“œê°€ í©ë¿Œë ¤ì§€ê²Œ ë˜ëŠ” ê²ƒì„ ë³´ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” Go ì–´í”Œë¦¬ì¼€ì´ì…˜ ë””ìì¸ì— ì ìš©í•  ìˆ˜ ìˆëŠ” ë”ë‚˜ì€ í‘œì¤€ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Every Go application Iâ€™ve ever worked on appears to have a different answer to the question, how should I organize my code? Some applications push everything into one package while others group by type or module. Without a good strategy applied across your team, youâ€™ll find code scattered across various packages of your application. We need a better standard for Go application design.</p>
</blockquote>
<p>ì €ëŠ” ë” ë‚˜ì€ ì ‘ê·¼ ë°©ì‹ì„ ì œì•ˆí•˜ê³ ì í•©ë‹ˆë‹¤. ëª‡ê°€ì§€ ë‹¨ìˆœí•œ ê·œì¹™ë“¤ì„ ë”°ë¦„ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ì½”ë“œë¥¼ ë¶„ë¦¬ì‹œí‚¤ê³  í…ŒìŠ¤íŠ¸ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“¤ë©° í”„ë¡œì íŠ¸ì— ì¼ê´€ëœ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.</p>
<blockquote>
<p>I suggest a better approach. By following a few simple rules we can decouple our code, make it easier to test, and bring a consistent structure to our project.</p>
</blockquote>
<br>

<h2 id="1-ê¸°ë³¸-íŒ¨í‚¤ì§€ëŠ”-ë„ë©”ì¸-íƒ€ì…ì„-ìœ„í•œ-íŒ¨í‚¤ì§€ë‹¤"><a href="#1-ê¸°ë³¸-íŒ¨í‚¤ì§€ëŠ”-ë„ë©”ì¸-íƒ€ì…ì„-ìœ„í•œ-íŒ¨í‚¤ì§€ë‹¤" class="headerlink" title="#1. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ ìœ„í•œ íŒ¨í‚¤ì§€ë‹¤"></a>#1. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ ìœ„í•œ íŒ¨í‚¤ì§€ë‹¤</h2><p>ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë°ì´í„°ì™€ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ë¥¼ ê¸°ìˆ í•˜ëŠ” ë…¼ë¦¬ì ì´ê³  ê³ ìˆ˜ì¤€(ì‚¬ëŒì´ ì´í•´í•˜ê¸° ì‰½ê²Œ ì‘ì„±ëœ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ì˜ë¯¸í•¨)ì¸ ì–¸ì–´ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ eì»¤ë¨¸ìŠ¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œ ì¤‘ì´ë¼ë©´ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì€ ê³ ê°, ê³„ì •, ì‹ ìš©ì¹´ë“œ ê²°ì œ, ì¬ê³  ê´€ë¦¬ì™€ ê°™ì€ ê²ƒë“¤ì„ í¬í•¨í•˜ê³  ìˆì„ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ í˜ì´ìŠ¤ë¶ì„ ê°œë°œí•˜ê³  ìˆë‹¤ë©´ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì€ ì‚¬ìš©ì, ì¢‹ì•„ìš”, &amp; relationships(?)ì´ ë ê²ƒ ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë„ë©”ì¸ì€ ì—¬ëŸ¬ë¶„ì˜ ê·¼ë³¸ì ì¸ ê¸°ìˆ ê³¼ëŠ” ë…ë¦½ì ì¸ ê°œë…ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Your application has a logical, high-level language that describes how data and processes interact. This is your domain. If you have an e-commerce application your domain involves things like customers, accounts, charging credit cards, and handling inventory. If youâ€™re Facebook then your domain is users, likes, &amp; relationships. Itâ€™s the stuff that doesnâ€™t depend on your underlying technology.</p>
</blockquote>
<p>ì €ëŠ” ë„ë©”ì¸ íƒ€ì…ì„ í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸(root) íŒ¨í‚¤ì§€ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤. ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” User êµ¬ì¡°ì²´ë‚˜ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì§€ê³  ì˜¤ê±°ë‚˜ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” UserService ì¸í„°í˜ì´ìŠ¤ì™€ ê°™ì€ ë‹¨ìˆœí•œ ë°ì´í„° íƒ€ì…ë“¤ë§Œì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>I place my domain types in my root package. This package only contains simple data types like a User struct for holding user data or a UserService interface for fetching or saving user data.</p>
</blockquote>
<p>ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ë³´ì¼ ìˆ˜ ìˆì„ê²ë‹ˆë‹¤:</p>
<blockquote>
<p>It may look something like:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> myapp</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> {</span><br><span class="line">	ID      <span class="keyword">int</span></span><br><span class="line">	Name    <span class="keyword">string</span></span><br><span class="line">	Address Address</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserService <span class="keyword">interface</span> {</span><br><span class="line">	User(id <span class="keyword">int</span>) (*User, error)</span><br><span class="line">	Users() ([]*User, error)</span><br><span class="line">	CreateUser(u *User) error</span><br><span class="line">	DeleteUser(id <span class="keyword">int</span>) error</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ê²ƒì€ ì—¬ëŸ¬ë¶„ì˜ ê¸°ë³¸ íŒ¨í‚¤ì§€ë¥¼ ë§¤ìš° ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ë˜í•œ ì—¬ëŸ¬ë¶„ì€ ë‹¤ë¥¸ ë„ë©”ì¸ íƒ€ì…ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°ì—ë§Œ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” íƒ€ì…ë“¤ì„ í¬í•¨í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ë¶„ì´ UserServiceë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í´ë§(polling)í•˜ëŠ” íŠ¹ì • íƒ€ì…ì„ í¬í•¨ì‹œì¼œì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤. ê·¸ê²ƒì€ ì„¸ë¶€ì ì¸ êµ¬í˜„ ì‚¬í•­ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>This makes your root package extremely simple. You may also include types that perform actions but only if they solely depend on other domain types. For example, you could have a type that polls your UserService periodically. However, it should not call out to external services or save to a database. That is an implementation detail.</p>
</blockquote>
<p><em>ê¸°ë³¸ íŒ¨í‚¤ì§€ëŠ” ì—¬ëŸ¬ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì¡´ì¬í•˜ëŠ” ì–´ë– í•œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ë„ ì˜ì¡´ì ì´ì–´ì„  ì•ˆë©ë‹ˆë‹¤!</em></p>
<blockquote>
<p><em>The root package should not depend on any other package in your application!</em></p>
</blockquote>
<br>

<h2 id="2-ì˜ì¡´ì„±ì—-ë”°ë¼-í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼-ê·¸ë£¹í™”í•˜ë¼"><a href="#2-ì˜ì¡´ì„±ì—-ë”°ë¼-í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼-ê·¸ë£¹í™”í•˜ë¼" class="headerlink" title="#2. ì˜ì¡´ì„±ì— ë”°ë¼ í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ê·¸ë£¹í™”í•˜ë¼"></a>#2. ì˜ì¡´ì„±ì— ë”°ë¼ í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ê·¸ë£¹í™”í•˜ë¼</h2><p>ë§Œì•½ ê¸°ë³¸ íŒ¨í‚¤ì§€ê°€ ì™¸ë¶€ ì˜ì¡´ì„±ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì´ëŸ¬í•œ ì˜ì¡´ì„±ë“¤ì„ í•˜ìœ„íŒ¨í‚¤ì§€ì— ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì—ì„œëŠ” í•˜ìœ„íŒ¨í‚¤ì§€ê°€ ë„ë©”ì¸ê³¼ êµ¬í˜„(implementation)ì‚¬ì´ì˜ ì–´ëŒ‘í„°ë¡œì„œ ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>If your root package is not allowed to have external dependencies then we must push those dependencies to subpackages. In this approach to package layout, subpackages exist as an adapter between your domain and your implementation.</p>
</blockquote>
<p>ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ë¶„ì˜ UserServiceê°€ PostgreSQLì„ ì§€ì›í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ ì—¬ëŸ¬ë¶„ì€ postgres.UserServiceì— ëŒ€í•œ ì„¸ë¶€ êµ¬í˜„ì„ ì œê³µí•˜ëŠ” postgres í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>For example, your UserService might be backed by PostgreSQL. You can introduce a postgres subpackage in your application that provides a postgres.UserService implementation:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> postgres</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"database/sql"</span></span><br><span class="line"></span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp"</span></span><br><span class="line">	_ <span class="string">"github.com/lib/pq"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// UserService represents a PostgreSQL implementation of myapp.UserService.</span></span><br><span class="line"><span class="keyword">type</span> UserService <span class="keyword">struct</span> {</span><br><span class="line">	DB *sql.DB</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// User returns a user for a given id.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *UserService)</span> <span class="title">User</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*myapp.User, error)</span></span> {</span><br><span class="line">	<span class="keyword">var</span> u myapp.User</span><br><span class="line">	row := db.QueryRow(<span class="string">`SELECT id, name FROM users WHERE id = $1`</span>, id)</span><br><span class="line">	<span class="keyword">if</span> row.Scan(&amp;u.ID, &amp;u.Name); err != <span class="literal">nil</span> {</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> &amp;u, <span class="literal">nil</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// implement remaining myapp.UserService interface...</span></span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ê²ƒì€ PostgreSQL ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•˜ê²Œë˜ëŠ”ë° ì´ëŸ¬í•œ ì˜ì¡´ì„±ì˜ ë¶„ë¦¬ëŠ” í…ŒìŠ¤íŠ¸ ê³¼ì •ì„ ë‹¨ìˆœí™”ì‹œì¼œì£¼ê³  ì¶”í›„ ë˜ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê¸° ìœ„í•œ ì‰¬ìš´ ë°©ì‹ì„ ì œê³µí•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ BoltDBì™€ ê°™ì€ ë˜ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì„¸ë¶€ êµ¬í˜„ì„ ì§€ì›í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤ë©´ ì´ê²ƒì€ í”ŒëŸ¬ê·¸í˜• êµ¬ì¡°ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>This isolates our PostgreSQL dependency which simplifies testing and provides an easy way to migrate to another database in the future. It can be used as a pluggable architecture if you decide to support other database implementations such as BoltDB.</p>
</blockquote>
<p>ì´ê²ƒì€ ë˜í•œ êµ¬í˜„ì„ ê³„ì¸µí™”í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì•„ë§ˆë„ ì—¬ëŸ¬ë¶„ì€ PostgreSQL ì•ì— LRU ìºì‹œë¥¼ ë‘ì–´ ë°ì´í„°ë¥¼ ë©”ëª¨ìƒì— ë³´ê´€í•˜ê¸°ë¥¼ ì›í•  ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ PostgreSQL ì„¸ë¶€ êµ¬í˜„ì„ ë˜í•‘(wrapping)í•  ìˆ˜ ìˆëŠ” UserServiceë¥¼ êµ¬í˜„í•˜ëŠ” UserCacheë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>It also gives you a way to layer implementations. Perhaps you want to hold an in-memory, LRU cache in front of PostgreSQL. You can add a UserCache that implements UserService which can wrap your PostgreSQL implementation:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> myapp</span><br><span class="line"></span><br><span class="line"><span class="comment">// UserCache wraps a UserService to provide an in-memory cache.</span></span><br><span class="line"><span class="keyword">type</span> UserCache <span class="keyword">struct</span> {</span><br><span class="line">		cache   <span class="keyword">map</span>[<span class="keyword">int</span>]*User</span><br><span class="line">		service UserService</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// NewUserCache returns a new read-through cache for service.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewUserCache</span><span class="params">(service UserService)</span> *<span class="title">UserCache</span></span> {</span><br><span class="line">		<span class="keyword">return</span> &amp;UserCache{</span><br><span class="line">				cache: <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]*User),</span><br><span class="line">				service: service,</span><br><span class="line">		}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// User returns a user for a given id.</span></span><br><span class="line"><span class="comment">// Returns the cached instance if available.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *UserCache)</span> <span class="title">User</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*User, error)</span></span> {</span><br><span class="line">	<span class="comment">// Check the local cache first.</span></span><br><span class="line">		<span class="keyword">if</span> u := c.cache[id]; u != <span class="literal">nil</span> {</span><br><span class="line">				<span class="keyword">return</span> u, <span class="literal">nil</span></span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Otherwise fetch from the underlying service.</span></span><br><span class="line">		u, err := c.service.User(id)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">		} <span class="keyword">else</span> <span class="keyword">if</span> u != <span class="literal">nil</span> {</span><br><span class="line">			c.cache[id] = u</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">return</span> u, err</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>Golangì˜ ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì—ì„œë„ ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. io.ReaderëŠ” ë°”ì´íŠ¸ë¥¼ ì½ì–´ë“¤ì´ê¸° ìœ„í•œ ë„ë©”ì¸ íƒ€ì…ì´ê³  ê·¸ê²ƒì˜ ì„¸ë¶€ êµ¬í˜„ë“¤ì€ ì˜ì¡´ì„±ì— ì˜í•´ ê·¸ë£¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤ - tar.Reader, gzip.Reader, multipart.Reader. ì´ê²ƒë“¤ ë˜í•œ ê³„ì¸µí™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. os.Fileì€ bufio.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆê³  ì´ bufio.ReaderëŠ” gzip.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆìœ¼ë©° gzip.ReaderëŠ” tar.Readerì— ì˜í•´ ë˜í•‘ë˜ì–´ìˆëŠ” ì´ëŸ¬í•œ ëª¨ìŠµë“¤ì€ í”íˆ ë³´ì´ëŠ” ê³„ì¸µ êµ¬ì¡°ë“¤ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>We see this approach in the standard library too. The io.Reader is a domain type for reading bytes and its implementations are grouped by dependency â€” tar.Reader, gzip.Reader, multipart.Reader. These can be layered as well. Itâ€™s common to see an os.File wrapped by a bufio.Reader which is wrapped by a gzip.Reader which is wrapped by a tar.Reader.</p>
</blockquote>
<br>

<h3 id="ì˜ì¡´ì„±-ê°„ì˜-ì˜ì¡´ì„±"><a href="#ì˜ì¡´ì„±-ê°„ì˜-ì˜ì¡´ì„±" class="headerlink" title="ì˜ì¡´ì„± ê°„ì˜ ì˜ì¡´ì„±"></a>ì˜ì¡´ì„± ê°„ì˜ ì˜ì¡´ì„±</h3><p>ì—¬ëŸ¬ë¶„ì˜ ì˜ì¡´ì„±ì€ í™€ë¡œ ê³ ë¦½ëœ ì±„ë¡œ ì‚´ì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. User ë°ì´í„°ëŠ” PostgreSQLì— ì €ì¥ì„ í•˜ê³  ì¬ë¬´ì™€ ê´€ë ¨ëœ íŠ¸ëœì­ì…˜ ë°ì´í„°ëŠ” Stripeì™€ ê°™ì€ 3rd party ì„œë¹„ìŠ¤ì— ì €ì¥í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” Stripeê°€ ë…¼ë¦¬ì ì¸ ë„ë©”ì¸ íƒ€ì…ê³¼ í•¨ê»˜ ë¬¶ì´ê²Œ ë©ë‹ˆë‹¤ - ì´ê²ƒì„ TranscationServiceë¼ê³  ë¶€ë¥´ê¸°ë¡œ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Your dependencies donâ€™t live in isolation. You may store User data in PostgreSQL but your financial transaction data exists in a third party service like Stripe. In this case we wrap our Stripe dependency with a logical domain type â€” letâ€™s call it TransactionService.</p>
</blockquote>
<p>UserServiceì— TransactionServiceë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ìš°ë¦¬ëŠ” ì´ ë‘ê°€ì§€ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>By adding our TransactionService to our UserService we decouple our two dependencies:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> UserService <span class="keyword">struct</span> {</span><br><span class="line">	DB                 *sql.DB</span><br><span class="line">	TransactionService myapp.TransactionService</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ì œ ìš°ë¦¬ì˜ ì˜ì¡´ì„±ë“¤ì€ ì˜¤ì§ ê³µí†µëœ ë„ë©”ì¸ ì–¸ì–´ë¥¼ í†µí•´ì„œë§Œ ì†Œí†µí•˜ê²Œ ë©ë‹ˆë‹¤. ì´ê²ƒì€ ìš°ë¦¬ê°€ ë‹¤ë¥¸ ì˜ì¡´ì„±ë“¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  PostgreSQLì„ MySQLë¡œ Stripeë¥¼ ë˜ ë‹¤ë¥¸ ì§€ë¶ˆ í”„ë¡œì„¸ì„œë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Now our dependencies communicate solely through our common domain language. This means that we could swap out PostgreSQL for MySQL or switch Stripe for another payment processor without affecting other dependencies.</p>
</blockquote>
<br>

<h3 id="ì´ëŸ¬í•œ-ì ‘ê·¼-ë°©ì‹ì„-3rd-party-ì˜ì¡´ì„±ì—ë§Œ-êµ­í•œ-ì‹œí‚¤ì§€ë§ˆë¼"><a href="#ì´ëŸ¬í•œ-ì ‘ê·¼-ë°©ì‹ì„-3rd-party-ì˜ì¡´ì„±ì—ë§Œ-êµ­í•œ-ì‹œí‚¤ì§€ë§ˆë¼" class="headerlink" title="ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ 3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ˆë¼"></a>ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì„ 3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ˆë¼</h3><p>3rd party ì˜ì¡´ì„±ì—ë§Œ êµ­í•œ ì‹œí‚¤ì§€ë§ë¼ëŠ” ë§ì´ ì´ìƒí•˜ê²Œ ë“¤ë¦´ ìˆ˜ ìˆì§€ë§Œ ì´ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ Golangì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê³ ë¦½ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, net/http íŒ¨í‚¤ì§€ëŠ” ë‹¨ì§€ ë˜ ë‹¤ë¥¸ ì˜ì¡´ì„±ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì¡´ì¬í•˜ëŠ” http ë¼ëŠ” í•˜ìœ„íŒ¨í‚¤ì§€ì— ì´ net/http íŒ¨í‚¤ì§€ë¥¼  ì¶”ê°€í•¨ìœ¼ë¡œì¨ ê³ ë¦½ëœ í™˜ê²½ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>This may sound odd but I also isolate my standard library dependencies with this same method. For instance, the net/http package is just another dependency. We can isolate it as well by including an http subpackage in our application.</p>
</blockquote>
<p>í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ ì´ë¦„ì´ ê·¸ê²ƒì´ ê°ì‹¸ê³  ìˆëŠ” ì˜ì¡´ì„±ê³¼ ë™ì¼í•œ ì´ë¦„ì„ ê°–ëŠ”ë‹¤ëŠ” ê²ƒì´ ì´ìƒí•  ìˆ˜ ìˆì§€ë§Œ ì´ê²ƒì€ ì˜ë„ëœ ê²ƒì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ë§Œë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ë¥¸ ì–´ë– í•œ ëª¨ë“ˆë“¤ì—ì„œë„ net/http íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì´ ì—†ë‹¤ë©´ íŒ¨í‚¤ì§€ ì´ë¦„ ì¶©ëŒì´ ë°œìƒí•  ì¼ì€ ì—†ìŠµë‹ˆë‹¤. ì´ë¦„ì„ ì¤‘ë³µì‹œí‚´ìœ¼ë¡œ ì–»ì„ ìˆ˜ ìˆëŠ” ì´ì ì€ ì´ë¥¼ í†µí•´ ì—¬ëŸ¬ë¶„ì´ HTTPì™€ ê´€ë ¨ëœ ëª¨ë“  ì½”ë“œë“¤ì€ ìƒˆë¡­ê²Œ ë§Œë“  http íŒ¨í‚¤ì§€ì— í¬í•¨ë˜ë„ë¡ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>It might seem odd to have a package with the same name as the dependency it wraps, however, this is intentional. There are no package name conflicts in your application unless you allow net/http to be used in other parts of your application. The benefit to duplicating the name is that it requires you to isolate all HTTP code to your http package.</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> http</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">		<span class="string">"net/http"</span></span><br><span class="line">		</span><br><span class="line">		<span class="string">"github.com/benbjohnson/myapp"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Handler <span class="keyword">struct</span> {</span><br><span class="line">		UserService myapp.UserService</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *Handler)</span> <span class="title">ServeHTTP</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> {</span><br><span class="line">		<span class="comment">// handle request</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ì œ ìš°ë¦¬ê°€ ë§Œë“  http.HandlerëŠ” ë„ë©”ì¸ê³¼ HTTP í”„ë¡œí† ì½œ ê°„ ì–´ëŒ‘í„°ë¡œì„œì˜ ì—­í• ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Now your http.Handler acts as an adapter between your domain and the HTTP protocol.</p>
</blockquote>
<br>

<h2 id="3-ê³µìœ ëœ-mock-í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼-ì‚¬ìš©í•˜ë¼"><a href="#3-ê³µìœ ëœ-mock-í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼-ì‚¬ìš©í•˜ë¼" class="headerlink" title="#3. ê³µìœ ëœ mock í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë¼"></a>#3. ê³µìœ ëœ mock í•˜ìœ„íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë¼</h2><p>ìš°ë¦¬ì˜ ì˜ì¡´ì„±ë“¤ì€ ë„ë©”ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë‹¤ë¥¸ ì˜ì¡´ì„±ë“¤ê³¼ ë¶„ë¦¬ë˜ì–´ ìˆê¸°ë–„ë¬¸ì— ìš°ë¦¬ëŠ” mock êµ¬í˜„ì„ ì£¼ì…í•˜ê¸° ìœ„í•´ ì´ëŸ¬í•œ ì—°ê²° ì§€ì ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Because our dependencies are isolated from other dependencies by our domain interfaces, we can use these connection points to inject mock implementations.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì—ê²Œ mockë¥¼ ìƒì„±í•´ì£¼ëŠ” GoMockê³¼ ê°™ì€ mocking ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ëª‡ê°€ì§€ ìˆì§€ë§Œ ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ ê·¸ê²ƒë“¤ì„ ì§ì ‘ ì‘ì„±í•˜ëŠ”ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ mocking ë„êµ¬ë“¤ì€ ë„ˆë¬´ ë³µì¡í•˜ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>There are several mocking libraries such as GoMock that will generate mocks for you but I personally prefer to just write them myself. I find many of the mocking tools to be overly complicated.</p>
</blockquote>
<p>ì œê°€ ì‚¬ìš©í•˜ëŠ” mocksëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, UserServiceë¥¼ ìœ„í•œ mockì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>The mocks I use are very simple. For example, a mock for the UserService looks like:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> mock</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"github.com/benbjohnson/myapp"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// UserService represents a mock implementation of myapp.UserService.</span></span><br><span class="line"><span class="keyword">type</span> UserService <span class="keyword">struct</span> {</span><br><span class="line">		UserFn      <span class="function"><span class="keyword">func</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*myapp.User, error)</span></span></span><br><span class="line">		UserInvoked <span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line">		UsersFn     <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="params">([]*myapp.User, error)</span></span></span><br><span class="line">		UsersInvoked <span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// additional function implementations...</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// User invokes the mock implementation and marks the function as invoked.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *UserService)</span> <span class="title">User</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*myapp.User, error)</span></span> {</span><br><span class="line">		s.UserInvoked = <span class="literal">true</span></span><br><span class="line">		<span class="keyword">return</span> s.UserFn(id)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// additional functions: Users(), CreateUser(), DeleteUser()</span></span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì´ mockì€ ì¸ìë“¤ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê±°ë‚˜ ê¸°ëŒ€ëœ ë°ì´í„°ê°€ ë°˜í™˜ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ì‹¤íŒ¨í•˜ëŠ” ì¼€ì´ìŠ¤ë¥¼ ì£¼ì…í•´ë³´ê¸° ìœ„í•´ myapp.UserService ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸°ë§Œ í•œë‹¤ë©´ ì–´ëŠ ê³³ì´ë“  í•¨ìˆ˜ë“¤ì„ ì£¼ì…í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>This mock lets me inject functions into anything that uses the myapp.UserService interface to validate arguments, return expected data, or inject failures.</p>
</blockquote>
<p>ì˜ˆë¥¼ ë“¤ì–´ ìœ„ì—ì„œ ë§Œë“¤ì–´ ë³¸ http.Handlerë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ì›í•œë‹¤ê³  í•´ë´…ì‹œë‹¤:</p>
<blockquote>
<p>Letâ€™s say we want to test our http.Handler that we built above:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> http_test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"testing"</span></span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">	<span class="string">"net/http/httptest"</span></span><br><span class="line"></span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp/mock"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestHandler</span><span class="params">(t *testing.T)</span></span> {</span><br><span class="line">	<span class="comment">// Inject our mock into our handler.</span></span><br><span class="line">	<span class="keyword">var</span> us mock.UserService</span><br><span class="line">	<span class="keyword">var</span> h Handler</span><br><span class="line">	h.UserService = &amp;us</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Mock our User() call.</span></span><br><span class="line">	us.UserFn = <span class="function"><span class="keyword">func</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="params">(*myapp.User, error)</span></span> {</span><br><span class="line">		<span class="keyword">if</span> id != <span class="number">100</span> {</span><br><span class="line">			t.Fatalf(<span class="string">"unexpected id: %d"</span>, id)</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">return</span> &amp;myapp.User{ID: <span class="number">100</span>, Name: <span class="string">"susy"</span>}, <span class="literal">nil</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Invoke the handler.</span></span><br><span class="line">	w := httptest.NewRecorder()</span><br><span class="line">	r, _ := http.NewRequest(<span class="string">"GET"</span>, <span class="string">"/users/100"</span>, <span class="literal">nil</span>)</span><br><span class="line">	h.ServeHTTP(w, r)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// Validate mock.</span></span><br><span class="line">	<span class="keyword">if</span> !us.UserInvoked {</span><br><span class="line">		t.Fatal(<span class="string">"expected User() to be invoked"</span>)</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>mockëŠ” ìœ ë‹› í…ŒìŠ¤íŠ¸ì™€ HTTP í”„ë¡œí† ì½œì˜ ì²˜ë¦¬ë¶€ë¶„ì´ ì™„ì „íˆ ë¶„ë¦¬ë  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Our mock lets us completely isolate our unit test to only the handling of the HTTP protocol.</p>
</blockquote>
<br>

<h2 id="4-ë©”ì¸-íŒ¨í‚¤ì§€ëŠ”-ì˜ì¡´ì„±ë“¤ì„-í•˜ë‚˜ë¡œ-ì—®ëŠ”ë‹¤"><a href="#4-ë©”ì¸-íŒ¨í‚¤ì§€ëŠ”-ì˜ì¡´ì„±ë“¤ì„-í•˜ë‚˜ë¡œ-ì—®ëŠ”ë‹¤" class="headerlink" title="#4. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì˜ì¡´ì„±ë“¤ì„ í•˜ë‚˜ë¡œ ì—®ëŠ”ë‹¤"></a>#4. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì˜ì¡´ì„±ë“¤ì„ í•˜ë‚˜ë¡œ ì—®ëŠ”ë‹¤</h2><p>ì´ëŸ¬í•œ ëª¨ë“  ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë“¤ì´ ê³ ë¦½ëœ ì±„ë¡œ ë– ë‹¤ë‹ˆê²Œ ëœë‹¤ë©´ ì´ë“¤ì„ ì–´ë–»ê²Œ í•˜ë‚˜ë¡œ ê²°í•©í•  ìˆ˜ ìˆì„ì§€ ê¶ê¸ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ ë©”ì¸ íŒ¨í‚¤ì§€ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>With all these dependency packages floating around in isolation, you may wonder how they all come together. Thatâ€™s the job of the main package.</p>
</blockquote>
<br>

<h3 id="ë©”ì¸-íŒ¨í‚¤ì§€-ë ˆì´ì•„ì›ƒ"><a href="#ë©”ì¸-íŒ¨í‚¤ì§€-ë ˆì´ì•„ì›ƒ" class="headerlink" title="ë©”ì¸ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ"></a>ë©”ì¸ íŒ¨í‚¤ì§€ ë ˆì´ì•„ì›ƒ</h3><p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ 2ê°œ ì´ìƒì˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ë„ ìˆëŠ”ë° ì´ë¥¼ ìœ„í•´ ë©”ì¸ íŒ¨í‚¤ì§€ë¥¼ cmd íŒ¨í‚¤ì§€ì˜ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ ë‘ëŠ” Go ì–¸ì–´ì˜ ê´€ìŠµ(convention)ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìš°ë¦¬ í”„ë¡œì íŠ¸ê°€ myapp ì´ë¼ëŠ” ì„œë²„ ë°”ì´ë„ˆë¦¬ë¿ë§Œ ì•„ë‹ˆë¼ í„°ë¯¸ë„ì„ í†µí•´ ì„œë²„ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” myappctl ì´ë¼ëŠ” í´ë¼ì´ì–¸íŠ¸ ë°”ì´ë„ˆë¦¬ë„ ê°–ê³ ìˆë‹¤ê³  í•´ë´…ì‹œë‹¤. ìš°ë¦¬ì˜ ë©”ì¸ íŒ¨í‚¤ì§€ë¥¼ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤:</p>
<blockquote>
<p>An application may produce multiple binaries so weâ€™ll use the Go convention of placing our main package as a subdirectory of the cmd package. For example, our project may have a myapp server binary but also a myappctl client binary for managing the server from the terminal. Weâ€™ll layout our main packages like this:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">myapp/</span><br><span class="line">    cmd/</span><br><span class="line">        myapp/</span><br><span class="line">            main.go</span><br><span class="line">        myappctl/</span><br><span class="line">            main.go</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ì»´íŒŒì¼-íƒ€ì„ì—-ì˜ì¡´ì„±-ì£¼ì…"><a href="#ì»´íŒŒì¼-íƒ€ì„ì—-ì˜ì¡´ì„±-ì£¼ì…" class="headerlink" title="ì»´íŒŒì¼ íƒ€ì„ì— ì˜ì¡´ì„± ì£¼ì…"></a>ì»´íŒŒì¼ íƒ€ì„ì— ì˜ì¡´ì„± ì£¼ì…</h3><p>â€œì˜ì¡´ì„± ì£¼ì…â€ì´ë¼ëŠ” ìš©ì–´ëŠ” ë‚˜ìœ í‰íŒì„ ë°›ì•„ì™”ìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì¥í™©í•œ Spring XML íŒŒì¼ì— ëŒ€í•œ ìƒê°ì„ ë¶ˆëŸ¬ì¼ìœ¼ í‚µë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ ìš©ì–´ì˜ ì‹¤ì œ ì˜ë¯¸ëŠ” ìš°ë¦¬ëŠ” ê°ì²´ì—ê²Œ ìŠ¤ìŠ¤ë¡œ ë¹Œë“œí•˜ê±°ë‚˜ ì˜ì¡´ì„±ì„ ì§ì ‘ ì°¾ì•„ê°€ëŠ” ê²ƒì„ ìš”êµ¬í•˜ëŠ” ëŒ€ì‹ ì— ê°ì²´ì—ê²Œ ì˜ì¡´ì„±ì„ ì§ì ‘ ì „ë‹¬í•´ì¤„ ê²ƒì´ë‹¤ë¼ëŠ” ê²ƒì´ ì „ë¶€ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The term â€œdependency injectionâ€ has gotten a bad rap. It conjures up thoughts of verbose Spring XML files. However, all the term really means is that weâ€™re going to pass dependencies to our objects instead of requiring that the object build or find the dependency itself.</p>
</blockquote>
<p>ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ì–´ë–¤ ì˜ì¡´ì„±ì„ ì–´ë–¤ ê°ì²´ì—ê²Œ ì£¼ì…í•  ê²ƒì¸ì§€ë¥¼ ì„ íƒí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” ë‹¨ìˆœíˆ ì´ëŸ¬í•œ ì¡°ê°ë“¤ì„ ì´ì–´ ë¶™ì´ëŠ” ì—­í• ë§Œì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œì˜ ê·œëª¨ê°€ ì‘ê³  ì‚¬ì†Œí•œ ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤:</p>
<blockquote>
<p>The main package is what gets to choose which dependencies to inject into which objects. Because the main package simply wires up the pieces, it tends to be fairly small and trivial code:</p>
</blockquote>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">go</li></ul></figcaption><div class="tabs-content"><figure class="highlight go" style="display: block;"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"log"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">	</span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp"</span></span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp/postgres"</span></span><br><span class="line">	<span class="string">"github.com/benbjohnson/myapp/http"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> {</span><br><span class="line">	<span class="comment">// Connect to database.</span></span><br><span class="line">	db, err := postgres.Open(os.Getenv(<span class="string">"DB"</span>))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> {</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">defer</span> db.Close()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Create services.</span></span><br><span class="line">	us := &amp;postgres.UserService{DB: db}</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Attach to HTTP handler.</span></span><br><span class="line">	<span class="keyword">var</span> h http.Handler</span><br><span class="line">	h.UserService = us</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// start http server...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>

<p>ì—¬ëŸ¬ë¶„ì˜ ë©”ì¸ íŒ¨í‚¤ì§€ ë˜í•œ ì–´ëŒ‘í„°ì˜ ì—­í• ì„ í•œë‹¤ëŠ” ê²ƒë„ ì¤‘ìš”í•œ ì ì…ë‹ˆë‹¤. ë©”ì¸ íŒ¨í‚¤ì§€ëŠ” í„°ë¯¸ë„ê³¼ ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ì„ ì—°ê²°í•´ì¤ë‹ˆë‹¤.</p>
<blockquote>
<p>Itâ€™s also important to note that your main package is also an adapter. It connects the terminal to your domain.</p>
</blockquote>
<br>

<h2 id="ê²°ë¡ "><a href="#ê²°ë¡ " class="headerlink" title="ê²°ë¡ "></a>ê²°ë¡ </h2><p>ì–´í”Œë¦¬ì¼€ì´ì…˜ ë””ìì¸ì€ ë§¤ìš° ì–´ë ¤ìš´ ë¬¸ì œì…ë‹ˆë‹¤. ë„ˆë¬´ë‚˜ ë§ì€ ë””ìì¸ ê²°ì •ë“¤ì´ ì¡´ì¬í•˜ê³  ì—¬ëŸ¬ë¶„ì—ê²Œ ê°€ì´ë“œí•´ì¤„ ê²¬ê³ í•œ ì´ë¡ ë“¤ì˜ ë¶€ì¬ëŠ” ë¬¸ì œë¥¼ ë”ìš± ì‹¬ê°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” Go ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í˜„ì¬ ì‚¬ìš©ë˜ëŠ” ëª‡ê°€ì§€ ì ‘ê·¼ ë°©ì‹ì„ ì‚´í´ë³´ì•˜ê³  ê·¸ê²ƒë“¤ì˜ ë§ì€ ê²°í•¨ë“¤ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Application design is a hard problem. There are so many design decisions to make and without a set of solid principles to guide you the problem is made even worse. Weâ€™ve looked at several current approaches to Go application design and weâ€™ve seen many of their flaws.</p>
</blockquote>
<p>ì €ëŠ” ì˜ì¡´ì„±ì˜ ê´€ì ì„ í†µí•´ ë””ìì¸ì— ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì´ ì½”ë“œ êµ¬ì„±ì„ ë” ë‹¨ìˆœí•˜ê³  ì‰½ê²Œ ì¶”ë¡ í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ ì¤€ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ë¨¼ì € ìš°ë¦¬ëŠ” ë„ë©”ì¸ ì–¸ì–´ë¥¼ ë””ìì¸ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ ì˜ì¡´ì„±ë“¤ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ mocksë¥¼ ë„ì…í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ë©”ì¸ íŒ¨í‚¤ì§€ ì•ˆì—ì„œ ì´ ëª¨ë“  ê²ƒë“¤ì„ í•˜ë‚˜ë¡œ ì—®ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>I believe approaching design from the standpoint of dependencies makes code organization simpler and easier to reason about. First we design our domain language. Then we isolate our dependencies. Next we introduce mocks to isolate our tests. Finally, we tie everything together within our main package.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì´ ë””ìì¸í•  ë‹¤ìŒ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì´ëŸ¬í•œ ì´ë¡ ë“¤ì„ ê³ ë ¤í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. ì§ˆë¬¸ì´ ìˆìœ¼ì‹œê±°ë‚˜ ë””ìì¸ì— ëŒ€í•œ í† ë¡ ì„ ì›í•˜ì‹ ë‹¤ë©´ @benbjohnson íŠ¸ìœ„í„°ë¥¼ í†µí•´ ì—°ë½ì£¼ì‹œê±°ë‚˜ Gopher ìŠ¬ë™ì—ì„œ benbjohnsonì„ ì°¾ì•„ì£¼ì„¸ìš”.</p>
<blockquote>
<p>Consider these principles in the next application you design. If you have any questions or want to discuss design, contact me at @benbjohnson on Twitter or find me as benbjohnson on the Gopher slack.</p>
</blockquote>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.gobeyond.dev/standard-package-layout/">https://www.gobeyond.dev/standard-package-layout/</a></li>
</ul>
]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>go</tag>
        <tag>golang</tag>
        <tag>go layout</tag>
        <tag>organize go code</tag>
        <tag>package layout</tag>
      </tags>
  </entry>
  <entry>
    <title>ê¸°ë³¸ì ì¸ Go í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒ</title>
    <url>/2024/07/28/my-golang-layout/</url>
    <content><![CDATA[<p>ì œê°€ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ì ì¸ Go í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒì— ëŒ€í•´ ê°„ëµíˆ ì†Œê°œí•˜ê¸° ìœ„í•´ í•´ë‹¹ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<br>

<!-- toc -->

<br>


<h1 id="í”„ë¡œì íŠ¸-ë ˆì´ì•„ì›ƒì´-í•„ìš”í•œ-ì´ìœ ëŠ”"><a href="#í”„ë¡œì íŠ¸-ë ˆì´ì•„ì›ƒì´-í•„ìš”í•œ-ì´ìœ ëŠ”" class="headerlink" title="í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒì´ í•„ìš”í•œ ì´ìœ ëŠ”?"></a>í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒì´ í•„ìš”í•œ ì´ìœ ëŠ”?</h1><p>ìµœì´ˆ í”„ë¡œì íŠ¸ ì„¤ê³„ìê°€ ì•„ë‹Œ ë˜ ë‹¤ë¥¸ ëˆ„êµ°ê°€ê°€ ìœ ì§€ë³´ìˆ˜ë¥¼ ë‹´ë‹¹í•˜ê²Œë˜ëŠ” ê²½ìš°(ëŒ€ë¶€ë¶„ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ íšŒì‚¬ì˜ ìƒí™©ì¼ ê²ƒìœ¼ë¡œ ìƒê°ë¨) í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒì´ ëª…í™•í•˜ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” ì „ì²´ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ê¸°ê°€ ì–´ë ¤ìš¸ ë¿ë§Œì•„ë‹ˆë¼ ì˜ë„ì¹˜ ì•Šì€ ë°©í–¥ìœ¼ë¡œ ì†ŒìŠ¤ ì½”ë“œê°€ ì¶”ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<br>

<h1 id="Go-ì½”ë“œë¥¼-ì–´ë–»ê²Œ-ì‘ì„±í•´ì•¼í•˜ëŠ”ê°€"><a href="#Go-ì½”ë“œë¥¼-ì–´ë–»ê²Œ-ì‘ì„±í•´ì•¼í•˜ëŠ”ê°€" class="headerlink" title="Go ì½”ë“œë¥¼ ì–´ë–»ê²Œ ì‘ì„±í•´ì•¼í•˜ëŠ”ê°€?"></a>Go ì½”ë“œë¥¼ ì–´ë–»ê²Œ ì‘ì„±í•´ì•¼í•˜ëŠ”ê°€?</h1><p>ë¨¼ì € Golang ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ì œê³µí•˜ê³  ìˆëŠ” Go ì½”ë“œ ì‘ì„± ê°€ì´ë“œë¥¼ í†µí•´ íŒ¨í‚¤ì§€(package)ì™€ ëª¨ë“ˆ(module)ì— ëŒ€í•œ ê°œë…ì„ ë¨¼ì € ì¡ì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. (<a href="https://go.dev/doc/code">í•´ë‹¹ ë§í¬</a>ë¥¼ í†µí•´ ì›ë¬¸ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</p>
<h2 id="Code-organization"><a href="#Code-organization" class="headerlink" title="Code organization"></a>Code organization</h2><p>Go í”„ë¡œê·¸ë¨ì€ íŒ¨í‚¤ì§€ë“¤ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ *íŒ¨í‚¤ì§€(package)*ë€ í•¨ê»˜ ì»´íŒŒì¼ë˜ëŠ” ë™ì¼ ë””ë ‰í† ë¦¬ ë‚´ì˜ ì†ŒìŠ¤ íŒŒì¼ë“¤ì˜ ì§‘í•©ì…ë‹ˆë‹¤. íŒ¨í‚¤ì§€ ë‚´ í•˜ë‚˜ì˜ ì†ŒìŠ¤ íŒŒì¼ ì•ˆì— ì •ì˜ëœ í•¨ìˆ˜, íƒ€ì…, ë³€ìˆ˜ ê·¸ë¦¬ê³  ìƒìˆ˜ë“¤ì€ ë™ì¼í•œ íŒ¨í‚¤ì§€ ë‚´ì— ìˆëŠ” ë‹¤ë¥¸ ëª¨ë“  ì†ŒìŠ¤ íŒŒì¼ë“¤ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Go programs are organized into packages. A package is a collection of source files in the same directory that are compiled together. Functions, types, variables, and constants defined in one source file are visible to all other source files within the same package.</p>
</blockquote>
<p>í•˜ë‚˜ì˜ ì €ì¥ì†ŒëŠ” í•œ ê°œ ì´ìƒì˜ ëª¨ë“ˆë“¤ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ *ëª¨ë“ˆ(module)*ì´ë€ í•¨ê»˜ ë°°í¬ë˜ëŠ” ì—°ê´€ëœ Go íŒ¨í‚¤ì§€ë“¤ì˜ ì§‘í•©ì…ë‹ˆë‹¤. Go ì €ì¥ì†ŒëŠ” ì¼ë°˜ì ìœ¼ë¡œ í•˜ë‚˜ì˜ ëª¨ë“ˆë§Œì„ í¬í•¨í•˜ë©° ì´ ëª¨ë“ˆì€ ì €ì¥ì†Œì˜ root ê²½ë¡œì— ì¡´ì¬í•©ë‹ˆë‹¤. ì €ì¥ì†Œì˜ root ê²½ë¡œì— go.mod ë¼ëŠ” ì´ë¦„ì˜ íŒŒì¼ì—ì„œëŠ” ëª¨ë“ˆ ê²½ë¡œë¥¼ ì„ ì–¸í•´ì£¼ëŠ”ë° ì´ ê²½ë¡œëŠ” ëª¨ë“ˆ ë‚´ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  íŒ¨í‚¤ì§€ë“¤ì˜ ì„í¬íŠ¸ ê²½ë¡œì˜ ì ‘ë‘ì‚¬(prefix)ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ëª¨ë“ˆì€ go.mod íŒŒì¼ì´ í¬í•¨ëœ ë””ë ‰í† ë¦¬ì— ì¡´ì¬í•˜ëŠ” íŒ¨í‚¤ì§€ë“¤ë¿ë§Œì•„ë‹ˆë¼ ê·¸ ë””ë ‰í† ë¦¬ë“¤ì˜ í•˜ìœ„ ë””ë ‰í† ë¦¬ì— ì¡´ì¬í•˜ëŠ” íŒ¨í‚¤ì§€ë“¤ê¹Œì§€ í¬í•¨í•©ë‹ˆë‹¤.(ë§Œì•½ go.mod íŒŒì¼ì´ ë‘ ê°œ ì´ìƒ ì¡´ì¬í•˜ëŠ” ê²½ìš°ë¼ë©´ ë˜ ë‹¤ë¥¸ go.mod íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ” ë‹¤ìŒ í•˜ìœ„ ë””ë ‰í† ë¦¬ ì „ê¹Œì§€ë¥¼ í¬í•¨í•¨)</p>
<blockquote>
<p>A repository contains one or more modules. A module is a collection of related Go packages that are released together. A Go repository typically contains only one module, located at the root of the repository. A file named go.mod there declares the module path: the import path prefix for all packages within the module. The module contains the packages in the directory containing its go.mod file as well as subdirectories of that directory, up to the next subdirectory containing another go.mod file (if any).</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¹Œë“œí•˜ê¸° ì „ì— ì´ê²ƒì„ ì›ê²© ì €ì¥ì†Œì— ë°°í¬í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ëª¨ë“ˆì€ ì›ê²© ì €ì¥ì†Œì—ì„œ ê´€ë¦¬ë˜ì§€ ì•Šë”ë¼ë„ ë¡œì»¬ì—ì„œ ì •ì˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¯¸ë˜ì˜ ë°°í¬ ê°€ëŠ¥ì„±ì„ ì—´ì–´ë‘ê³  ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì¡°ì§í™”í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ìŠµê´€ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Note that you donâ€™t need to publish your code to a remote repository before you can build it. A module can be defined locally without belonging to a repository. However, itâ€™s a good habit to organize your code as if you will publish it someday.</p>
</blockquote>
<p>ê° ëª¨ë“ˆì˜ ê²½ë¡œ ì •ë³´ëŠ” í•´ë‹¹ ëª¨ë“ˆì— í¬í•¨ëœ íŒ¨í‚¤ì§€ë“¤ì˜ ì„í¬íŠ¸ ê²½ë¡œì˜ ì ‘ë‘ì‚¬(prefix)ë¥¼ ì œê³µí•  ë¿ë§Œ ì•„ë‹ˆë¼, go ëª…ë ¹ì–´ê°€ í•´ë‹¹ ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œí•˜ê¸° ìœ„í•´ ë°”ë¼ë´ì•¼í•  ìœ„ì¹˜ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, golang.org/x/tools ë¼ëŠ” ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œ í•˜ê¸°ìœ„í•´ì„œëŠ” go ëª…ë ¹ì–´ê°€ <a href="https://golang.org/x/tools%EA%B0%80">https://golang.org/x/toolsê°€</a> ê°€ë¦¬í‚¤ëŠ” ì €ì¥ì†Œë¥¼ ì°¸ê³ í•  ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Each moduleâ€™s path not only serves as an import path prefix for its packages, but also indicates where the go command should look to download it. For example, in order to download the module golang.org/x/tools, the go command would consult the repository indicated by <a href="https://golang.org/x/tools">https://golang.org/x/tools</a> (described more here).</p>
</blockquote>
<p>ì„í¬íŠ¸ ê²½ë¡œëŠ” íŒ¨í‚¤ì§€ë¥¼ ì„í¬íŠ¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. íŒ¨í‚¤ì§€ì˜ ì„í¬íŠ¸ ê²½ë¡œëŠ” í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ ëª¨ë“ˆ ê²½ë¡œì™€ ëª¨ë“ˆ ë‚´ì— ì¡´ì¬í•˜ëŠ” ì—°ê²°ëœ í•˜ìœ„ ë””ë ‰í† ë¦¬ ê²½ë¡œì…ë‹ˆë‹¤. ì—ë¥¼ ë“¤ì–´, github.com/google/go-cmp ëª¨ë“ˆì€ cmp/ ë””ë ‰í† ë¦¬ ì•ˆì˜ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ê·¸ íŒ¨í‚¤ì§€ì˜ ì„í¬íŠ¸ ê²½ë¡œëŠ” github.com/google/go-cmp/cmp ì…ë‹ˆë‹¤. ìŠ¤íƒ ë‹¤ë“œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ì˜ íŒ¨í‚¤ì§€ë“¤ì€ ëª¨ë“ˆ ê²½ë¡œ ì ‘ë‘ì‚¬ë¥¼ ê°€ì§€ê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>An import path is a string used to import a package. A packageâ€™s import path is its module path joined with its subdirectory within the module. For example, the module github.com/google/go-cmp contains a package in the directory cmp/. That packageâ€™s import path is github.com/google/go-cmp/cmp. Packages in the standard library do not have a module path prefix.</p>
</blockquote>
<h2 id="Your-first-program"><a href="#Your-first-program" class="headerlink" title="Your first program"></a>Your first program</h2><p>ë‹¨ìˆœí•œ í”„ë¡œê·¸ë¨ì„ ì»´íŒŒì¼í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë¨¼ì € ëª¨ë“ˆ ê²½ë¡œ(example/user/helloë¼ëŠ” ê²½ë¡œë¥¼ ì‚¬ìš©í•  ì˜ˆì •)ë¥¼ ì„ íƒí•˜ê³ , ê·¸ ê²½ë¡œë¥¼ ì„ ì–¸í•˜ê³  ìˆëŠ” go.mod íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.  </p>
<blockquote>
<p>To compile and run a simple program, first choose a module path (weâ€™ll use example/user/hello) and create a go.mod file that declares it:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ mkdir hello # Alternatively, clone it <span class="keyword">if</span> it already exists in version control.</span><br><span class="line">$ cd hello</span><br><span class="line">$ <span class="keyword">go</span> mod init example/user/hello</span><br><span class="line"><span class="keyword">go</span>: creating <span class="built_in">new</span> <span class="keyword">go</span>.mod: module example/user/hello</span><br><span class="line">$ cat <span class="keyword">go</span>.mod</span><br><span class="line">module example/user/hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.16</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>

<p>Go ì†ŒìŠ¤ íŒŒì¼ì˜ ì²«ë²ˆì§¸ ë¬¸ì¥ìœ¼ë¡œëŠ” íŒ¨í‚¤ì§€ ì´ë¦„ì´ ì‘ì„±ë¼ì•¼í•©ë‹ˆë‹¤. ì‹¤í–‰ ê°€ëŠ¥í•œ ëª…ë ¹ì–´ëŠ” í•­ìƒ main íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The first statement in a Go source file must be package name. Executable commands must always use package main.</p>
</blockquote>
<p>ë‹¤ìŒìœ¼ë¡œ í•´ë‹¹ ë””ë ‰í† ë¦¬ ë‚´ì— ì•„ë˜ Go ì½”ë“œë¥¼ í¬í•¨í•˜ëŠ” hello.go íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Next, create a file named hello.go inside that directory containing the following Go code:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello, world.&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ì´ì œ ì—¬ëŸ¬ë¶„ì€ go toolì„ ì‚¬ìš©í•´ì„œ í”„ë¡œê·¸ë¨ì„ ë¹Œë“œí•˜ê³  ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Now you can build and install that program with the go tool:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> install example/user/hello</span><br></pre></td></tr></table></figure>

<p>ì´ ëª…ë ¹ì–´ëŠ” hello ëª…ë ¹ì–´ë¥¼ ë¹Œë“œí•˜ê³ , ì‹¤í–‰ê°€ëŠ¥í•œ ë°”ì´ë„ˆë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ ê·¸ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ $HOME/go/bin/hello ê²½ë¡œì— ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>This command builds the hello command, producing an executable binary. It then installs that binary as $HOME/go/bin/hello.</p>
</blockquote>
<p>ì„¤ì¹˜ ê²½ë¡œëŠ” GOPATHì™€ GOBIN í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ GOBIN í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ì´ë˜ì—ˆë‹¤ë©´, ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ê·¸ ê²½ë¡œì— ì„¤ì¹˜ë ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ GOPATHê°€ ì„¤ì •ë˜ì—ˆë‹¤ë©´, ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ GOPATH ë¦¬ìŠ¤íŠ¸ì˜ ì²«ë²ˆì§¸ ë””ë ‰í† ë¦¬ì˜ bin ì´ë¼ëŠ” í•˜ìœ„ ë””ë ‰í† ë¦¬ì— ì„¤ì¹˜ë  ê²ƒ ì…ë‹ˆë‹¤. ë‘ í™˜ê²½ ë³€ìˆ˜ ëª¨ë‘ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°ë¼ë©´, ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ê¸°ë³¸ GOPATH ê²½ë¡œ($HOME/go)ì— ì„¤ì¹˜ë  ê²ƒ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>The install directory is controlled by the GOPATH and GOBIN environment variables. If GOBIN is set, binaries are installed to that directory. If GOPATH is set, binaries are installed to the bin subdirectory of the first directory in the GOPATH list. Otherwise, binaries are installed to the bin subdirectory of the default GOPATH ($HOME/go).</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì€ ì¶”í›„ì— ì‚¬ìš©ë  go ì»¤ë§¨ë“œê°€ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” í™˜ê²½ ë³€ìˆ˜ì˜ ê¸°ë³¸ ê°’ì„ go env ëª…ë ¹ì–´ë¥¼ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>You can use the go env command to portably set the default value for an environment variable for future go commands:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> env -w GOBIN=/somewhere/<span class="keyword">else</span>/bin</span><br></pre></td></tr></table></figure>

<p>go env -wë¥¼ í†µí•´ ì´ì „ì— ì„¤ì •í•œ ê°’ì„ í•´ì œí•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” go env -uë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>To unset a variable previously set by go env -w, use go env -u:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> env -u GOBIN</span><br></pre></td></tr></table></figure>

<p>go installê³¼ ê°™ì€ ëª…ë ¹ì–´ëŠ” í˜„ì¬ ì‘ì—… ê²½ë¡œë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ëª¨ë“ˆì˜ ì»¨í…ìŠ¤íŠ¸ ë‚´ì— ì ìš©ë©ë‹ˆë‹¤. ë§Œì•½ ì‘ì—… ê²½ë¡œê°€ example/user/hello ëª¨ë“ˆ ë‚´ë¶€ê°€ ì•„ë‹ˆë¼ë©´, go insall ëª…ë ¹ì–´ëŠ” ì‹¤íŒ¨í•  ê²ƒ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Commands like go install apply within the context of the module containing the current working directory. If the working directory is not within the example/user/hello module, go install may fail.</p>
</blockquote>
<p>í¸ë¦¬ì„±ì„ ìœ„í•´ go ëª…ë ¹ì–´ëŠ” ì‘ì—… ê²½ë¡œì— ìƒëŒ€ì ì¸ ê²½ë¡œë¥¼ í—ˆìš©í•˜ê³ , ë‹¤ë¥¸ ê²½ë¡œê°€ ì£¼ì–¸ì§„ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ í˜„ì¬ ì‘ì—… ê²½ë¡œì˜ íŒ¨í‚¤ì§€ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ í˜„ì¬ ìš°ë¦¬ì˜ ì‘ì—… ê²½ë¡œì—ì„œëŠ”, ì•„ë˜ ëª…ë ¹ì–´ë“¤ì´ ëª¨ë‘ ë™ì¼í•œ ê²°ê³¼ë¥¼ ê°–ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>For convenience, go commands accept paths relative to the working directory, and default to the package in the current working directory if no other path is given. So in our working directory, the following commands are all equivalent:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> install example/user/hello</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> install .</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> install</span><br></pre></td></tr></table></figure>

<p>ë‹¤ìŒìœ¼ë¡œ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ê¸° ìœ„í•´ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•´ë´…ì‹œë‹¤. ë°”ì´ë„ˆë¦¬ë¥¼ ì‰½ê²Œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ PATH í™˜ê²½ ë³€ìˆ˜ì— ì„¤ì¹˜ ê²½ë¡œë¥¼ ì¶”ê°€í•  ê²ƒ ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Next, letâ€™s run the program to ensure it works. For added convenience, weâ€™ll add the install directory to our PATH to make running binaries easy:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"># Windows users should consult /wiki/SettingGOPATH</span><br><span class="line"># <span class="keyword">for</span> setting %PATH%.</span><br><span class="line">$ export PATH=$PATH:$(dirname $(<span class="keyword">go</span> list -f <span class="string">&#x27;&#123;&#123;.Target&#125;&#125;&#x27;</span> .))</span><br><span class="line">$ hello</span><br><span class="line">Hello, world.</span><br><span class="line">$</span><br></pre></td></tr></table></figure>

<h2 id="Importing-packages-from-your-module"><a href="#Importing-packages-from-your-module" class="headerlink" title="Importing packages from your module"></a>Importing packages from your module</h2><p>morestrings íŒ¨í‚¤ì§€ë¥¼ ì‘ì„±í•˜ê³  ê·¸ íŒ¨í‚¤ì§€ë¥¼ hello í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©í•˜ë„ë¡ í•´ë´…ì‹œë‹¤. ë¨¼ì € í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ ì €ì¥í•  $HOME/hello/morestrings ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ ì•„ë˜ ë‚´ìš©ì„ í¬í•¨í•˜ëŠ” reverse.go ë¼ëŠ” íŒŒì¼ì„ ê·¸ ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ ìƒì„±í•´ì¤ì‹œë‹¤.</p>
<blockquote>
<p>Letâ€™s write a morestrings package and use it from the hello program. First, create a directory for the package named $HOME/hello/morestrings, and then a file named reverse.go in that directory with the following contents:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Package morestrings implements additional functions to manipulate UTF-8</span></span><br><span class="line"><span class="comment">// encoded strings, beyond what is provided in the standard &quot;strings&quot; package.</span></span><br><span class="line"><span class="keyword">package</span> morestrings</span><br><span class="line"></span><br><span class="line"><span class="comment">// ReverseRunes returns its argument string reversed rune-wise left to right.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReverseRunes</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    r := []<span class="keyword">rune</span>(s)</span><br><span class="line">    <span class="keyword">for</span> i, j := <span class="number">0</span>, <span class="built_in">len</span>(r)<span class="number">-1</span>; i &lt; <span class="built_in">len</span>(r)/<span class="number">2</span>; i, j = i+<span class="number">1</span>, j<span class="number">-1</span> &#123;</span><br><span class="line">        r[i], r[j] = r[j], r[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>(r)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ReverseRunes() í•¨ìˆ˜ëŠ” ëŒ€ë¬¸ìë¡œ ì‹œì‘í•˜ê¸° ë•Œë¬¸ì— morestring íŒ¨í‚¤ì§€ë¥¼ ì„í¬íŠ¸í•œ ë˜ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë“¤ì—ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Because our ReverseRunes function begins with an upper-case letter, it is exported, and can be used in other packages that import our morestrings package.</p>
</blockquote>
<p>go buildë¡œ morestrings íŒ¨í‚¤ì§€ë¥¼ ì»´íŒŒì¼ í•´ë´…ì‹œë‹¤.</p>
<blockquote>
<p>Letâ€™s test that the package compiles with go build:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ cd $HOME/hello/morestrings</span><br><span class="line">$ <span class="keyword">go</span> build</span><br></pre></td></tr></table></figure>

<p>ìœ„ ëª…ë ¹ì–´ë¡œëŠ” ì–´ë– í•œ ê²°ê³¼ íŒŒì¼ì´ ìƒì„±ë˜ì§€ëŠ” ì•Šì„ ê²ƒì…ë‹ˆë‹¤. ëŒ€ì‹ ì— ê·¸ê²ƒì€ ë¡œì»¬ ë¹Œë“œ ìºì‹œì— ì»´íŒŒì¼ëœ íŒ¨í‚¤ì§€ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>This wonâ€™t produce an output file. Instead it saves the compiled package in the local build cache.</p>
</blockquote>
<p>morestrings íŒ¨í‚¤ì§€ ë¹Œë“œ ì´í›„ì—, hello í”„ë¡œê·¸ë¨ì—ì„œ ì´ê²ƒì„ ì‚¬ìš©í•´ë´…ì‹œë‹¤. ì´ë¥¼ ìœ„í•´ $HOME/hello/hello.go ì½”ë“œì—ì„œ morestrings íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ë´…ì‹œë‹¤.</p>
<blockquote>
<p>After confirming that the morestrings package builds, letâ€™s use it from the hello program. To do so, modify your original $HOME/hello/hello.go to use the morestrings package:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;example/user/hello/morestrings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(morestrings.ReverseRunes(<span class="string">&quot;!oG ,olleH&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>hello í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•˜ê³ </p>
<blockquote>
<p>Install the hello program:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> install example/user/hello</span><br></pre></td></tr></table></figure>

<p>ìƒˆë¡œìš´ ë²„ì „ì˜ hello í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•´ë³´ë©´ ì—¬ëŸ¬ë¶„ì€ ë’¤ì§‘íŒ ë©”ì‹œì§€ë¥¼ ë³¼ ìˆ˜ ìˆì„ê²ë‹ˆë‹¤.</p>
<blockquote>
<p>Running the new version of the program, you should see a new, reversed message:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ hello</span><br><span class="line">Hello, Go!</span><br></pre></td></tr></table></figure>

<h2 id="Importing-packages-from-remote-modules"><a href="#Importing-packages-from-remote-modules" class="headerlink" title="Importing packages from remote modules"></a>Importing packages from remote modules</h2><p>ì„í¬íŠ¸ ê²½ë¡œëŠ” ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì¸ Git ì´ë‚˜ Mercurialì„ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì–´ë–»ê²Œ ë°›ì•„ì˜¤ëŠ”ì§€ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. go toolì€ ì›ê²© ì €ì¥ì†Œì— ìˆëŠ” íŒ¨í‚¤ì§€ë“¤ì„ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì´ëŸ¬í•œ íŠ¹ì„±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>An import path can describe how to obtain the package source code using a revision control system such as Git or Mercurial. The go tool uses this property to automatically fetch packages from remote repositories. For instance, to use github.com/google/go-cmp/cmp in your program:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;example/user/hello/morestrings&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/google/go-cmp/cmp&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(morestrings.ReverseRunes(<span class="string">&quot;!oG ,olleH&quot;</span>))</span><br><span class="line">    fmt.Println(cmp.Diff(<span class="string">&quot;Hello World&quot;</span>, <span class="string">&quot;Hello Go&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ì´ì œ ì—¬ëŸ¬ë¶„ì€ ì™¸ë¶€ ëª¨ë“ˆì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ê°€ì§€ê²Œ ë˜ì—ˆê³ , ê·¸ëŸ¬í•œ ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ê·¸ê²ƒì˜ ë²„ì „ ì •ë³´ë¥¼ go.mode íŒŒì¼ ë‚´ì— ê¸°ë¡í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. go mod tidy ëª…ë ¹ì–´ëŠ” ì„í¬íŠ¸ íŒ¨í‚¤ì§€ë“¤ì— ëŒ€í•œ ëˆ„ë½ëœ ëª¨ë“ˆ ìš”êµ¬ì‚¬í•­ë“¤ì„ ì¶”ê°€í•´ì£¼ê³  ë”ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“ˆë“¤ì— ëŒ€í•œ ìš”êµ¬ì‚¬í•­ë“¤ì„ ì œê±°í•´ì¤ë‹ˆë‹¤. </p>
<blockquote>
<p>Now that you have a dependency on an external module, you need to download that module and record its version in your go.mod file. The go mod tidy command adds missing module requirements for imported packages and removes requirements on modules that arenâ€™t used anymore.</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> mod tidy</span><br><span class="line"><span class="keyword">go</span>: finding module <span class="keyword">for</span> <span class="keyword">package</span> github.com/google/<span class="keyword">go</span>-cmp/cmp</span><br><span class="line"><span class="keyword">go</span>: found github.com/google/<span class="keyword">go</span>-cmp/cmp in github.com/google/<span class="keyword">go</span>-cmp v0<span class="number">.5</span><span class="number">.4</span></span><br><span class="line">$ <span class="keyword">go</span> install example/user/hello</span><br><span class="line">$ hello</span><br><span class="line">Hello, Go!</span><br><span class="line">  <span class="keyword">string</span>(</span><br><span class="line">-     <span class="string">&quot;Hello World&quot;</span>,</span><br><span class="line">+     <span class="string">&quot;Hello Go&quot;</span>,</span><br><span class="line">  )</span><br><span class="line">$ cat <span class="keyword">go</span>.mod</span><br><span class="line">module example/user/hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.16</span></span><br><span class="line"></span><br><span class="line">require github.com/google/<span class="keyword">go</span>-cmp v0<span class="number">.5</span><span class="number">.4</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>

<p>ëª¨ë“ˆ ì˜ì¡´ì„±ì€ GOPATH í™˜ê²½ ë³€ìˆ˜ê°€ ê°€ë¦¬í‚¤ëŠ” ê²½ë¡œì˜ í•˜ìœ„ ê²½ë¡œì¸ pkg/modì— ìë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ë©ë‹ˆë‹¤. ë‹¤ìš´ë¡œë“œëœ ëª¨ë“ˆì˜ ë²„ì „ ì •ë³´ë“¤ì€ í•´ë‹¹ ë²„ì „ì„ í•„ìš”ë¡œ í•˜ëŠ” ë‹¤ë¥¸ ëª¨ë“  ëª¨ë“ˆë“¤ì—ê²Œ ê³µìœ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ go ëª…ë ¹ì–´ëŠ” ì´ëŸ¬í•œ íŒŒì¼ê³¼ ë””ë ‰í† ë¦¬ë¥¼ read-onlyë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ë‹¤ìš´ë¡œë“œ ë°›ì€ ëª¨ë“  ëª¨ë“ˆë“¤ì„ ì‚­ì œí•˜ê¸° ìœ„í•´ì„œëŠ” go clean ëª…ë ¹ì–´ì— -modcache í”Œë˜ê·¸ë¥¼ ì „ë‹¬í•´ì£¼ë©´ ë©ë‹ˆë‹¤. </p>
<blockquote>
<p>Module dependencies are automatically downloaded to the pkg/mod subdirectory of the directory indicated by the GOPATH environment variable. The downloaded contents for a given version of a module are shared among all other modules that require that version, so the go command marks those files and directories as read-only. To remove all downloaded modules, you can pass the -modcache flag to go clean:</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">go</span> clean -modcache</span><br></pre></td></tr></table></figure>

<br>

<h1 id="ë‚´ê°€-ì‚¬ìš©í•˜ëŠ”-Go-í”„ë¡œì íŠ¸-ë ˆì´ì•„ì›ƒ"><a href="#ë‚´ê°€-ì‚¬ìš©í•˜ëŠ”-Go-í”„ë¡œì íŠ¸-ë ˆì´ì•„ì›ƒ" class="headerlink" title="ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” Go í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒ"></a>ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” Go í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒ</h1><p>ë‹¤ì–‘í•œ í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒë“¤ì„ ë¹„êµí•´ë³¸ ëì— <a href="https://www.ardanlabs.com/blog/2017/02/package-oriented-design.html">Package Oriented Design</a>ë¼ëŠ” í¬ìŠ¤íŒ…ì„ ì°¸ì¡°í•˜ì—¬ í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•´ë³´ê¸°ë¡œ ê²°ì •í–ˆê³ , ì‹¤ì œ í˜„ì—…ì—ì„œ ê°œë°œ ì¤‘ì¸ ì„œë¹„ìŠ¤ë¥¼ ì´ êµ¬ì¡°ì— ë§ì¶°ì„œ êµ¬í˜„í•´ë‚˜ê°”ìŠµë‹ˆë‹¤.</p>
<h2 id="bin"><a href="#bin" class="headerlink" title="bin/"></a>bin/</h2><ul>
<li>ì‹¤í–‰ê°€ëŠ¥í•œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ ìƒì„±ë˜ëŠ” ê²½ë¡œ</li>
<li>ë°”ì´ë„ˆë¦¬ ì‹¤í–‰ì„ ìœ„í•´ í•„ìš”í•œ ì„¤ì • ê°’ì´ ì €ì¥ë˜ëŠ” config íŒŒì¼ë„ í¬í•¨ë¨</li>
</ul>
<h2 id="cmd"><a href="#cmd" class="headerlink" title="cmd/"></a>cmd/</h2><ul>
<li>main íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•˜ëŠ” go íŒŒì¼ì´ ì €ì¥ë˜ëŠ” ê²½ë¡œ</li>
</ul>
<h2 id="internal"><a href="#internal" class="headerlink" title="internal/"></a>internal/</h2><ul>
<li>main íŒ¨í‚¤ì§€ì—ì„œ ì„í¬íŠ¸í•˜ëŠ” íŒ¨í‚¤ì§€ë“¤ì˜ ì§‘í•©ì´ë©°, ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ ë³„ë¡œ íŒ¨í‚¤ì§€ë“¤ì„ êµ¬ë¶„í•¨(ex. internal/gateway) </li>
</ul>
<p>ë™ì¼ í”„ë¡œì íŠ¸ ë‚´ì— ì¡´ì¬í•˜ëŠ” 2ê°œ ì´ìƒì˜ í”„ë¡œê·¸ë¨ë“¤ì—ì„œ ì„í¬íŠ¸ë  í•„ìš”ì„±ì´ ìˆëŠ” íŒ¨í‚¤ì§€ë“¤ì´ internal/ í´ë” ë‚´ì— ì†í•´ìˆìŠµë‹ˆë‹¤. internal/ ì´ë¼ëŠ” ëª…ì¹­ì˜ ì‚¬ìš©ì´ ê°€ì ¸ë‹¤ ì£¼ëŠ” í•œê°€ì§€ ì´ì ì€ í”„ë¡œì íŠ¸ê°€ ì»´íŒŒì¼ëŸ¬ë¡œë¶€í„° ì¶”ê°€ì ì¸ ë³´í˜¸ ë ˆë²¨ì„ ì–»ì–´ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. internal/ í´ë” ë‚´ì— ì¡´ì¬í•˜ëŠ” íŒ¨í‚¤ì§€ë“¤ì„ í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ì™¸ë¶€ì— ìˆëŠ” íŒ¨í‚¤ì§€ì—ì„œ ì„í¬íŠ¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì´ëŸ¬í•œ íŒ¨í‚¤ì§€ë“¤ì€ ì˜¤ë¡œì§€ í•´ë‹¹ í”„ë¡œì íŠ¸ ë‚´ì— ê·€ì†ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Packages that need to be imported by multiple programs within the project belong inside the internal/ folder. One benefit of using the name internal/ is that the project gets an extra level of protection from the compiler. No package outside of this project can import packages from inside of internal/. These packages are therefore internal to this project only.</p>
</blockquote>
<h2 id="internal-platform"><a href="#internal-platform" class="headerlink" title="internal/platform/"></a>internal/platform/</h2><ul>
<li>internalì— í¬í•¨ëœ íŒ¨í‚¤ì§€ë“¤ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” íŒ¨í‚¤ì§€ë“¤ì˜ ì§‘í•©</li>
</ul>
<p>ê¸°ë°˜ì´ë˜ëŠ” ê·¸ëŸ¬ë‚˜ í”„ë¡œì íŠ¸ì— íŠ¹ì •ë˜ëŠ” íŒ¨í‚¤ì§€ë“¤ì´ internal/platform í´ë” ë‚´ì— ì†í•´ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŒ¨í‚¤ì§€ë“¤ì€ ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ì¸ì¦ ë˜ëŠ” marshalingê³¼ ê°™ì€ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•˜ê³¤ í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>Packages that are foundational but specific to the project belong in the internal/platform/ folder. These would be packages that provide support for things like databases, authentication or even marshaling.</p>
</blockquote>
<br>

<h1 id="í”„ë¡œì íŠ¸-ì˜ˆì‹œ"><a href="#í”„ë¡œì íŠ¸-ì˜ˆì‹œ" class="headerlink" title="í”„ë¡œì íŠ¸ ì˜ˆì‹œ"></a>í”„ë¡œì íŠ¸ ì˜ˆì‹œ</h1><p>í˜„ì¬ í† ì´ í”„ë¡œì íŠ¸ë¡œ ì§„í–‰ì¤‘ì¸ go ì„œë¹„ìŠ¤ì—ì„œë„ ìœ„ í”„ë¡œì íŠ¸ ë ˆì´ì•„ì›ƒì„ ì‚¬ìš© ì¤‘ì— ìˆìŠµë‹ˆë‹¤. <a href="https://github.com/chelseafandev/wavynote/tree/main">í•´ë‹¹ ë§í¬</a>ë¥¼ í†µí•´ í™•ì¸ ê°€ëŠ¥í•˜ì‹­ë‹ˆë‹¤.</p>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://go.dev/doc/code">https://go.dev/doc/code</a></li>
<li><a href="https://www.ardanlabs.com/blog/2017/02/package-oriented-design.html">https://www.ardanlabs.com/blog/2017/02/package-oriented-design.html</a></li>
</ul>
]]></content>
      <categories>
        <category>Go</category>
      </categories>
      <tags>
        <tag>go project layout</tag>
        <tag>golang layout</tag>
        <tag>how to write go code</tag>
      </tags>
  </entry>
  <entry>
    <title>boost strandë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ </title>
    <url>/2023/09/12/what-is-strand/</url>
    <content><![CDATA[<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” boostì—ì„œ ì œê³µí•˜ëŠ” strandì— ëŒ€í•´ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<span id="more"></span>

<p>strandì— ëŒ€í•œ ì„¤ëª…ì€ <a href="https://www.crazygaze.com/blog/2016/03/17/how-strands-work-and-why-you-should-use-them/">How strands work and why you should use them</a> ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë‹ˆ ì°¸ê³ ë¶€íƒë“œë¦¬ë©°, ê¸€ í•˜ë‹¨ì—ëŠ” strand ë™ì‘ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ ì˜ˆì œ ì½”ë“œë¥¼ ì²¨ë¶€í•˜ì˜€ìœ¼ë‹ˆ ì§ì ‘ í…ŒìŠ¤íŠ¸ í•´ë³´ì‹œë©° strandì˜ ì‚¬ìš©ë²•ê³¼ í•„ìš”ì„±ì— ëŒ€í•´ ë‹¤ì‹œ í•œë²ˆ ì •ë¦¬í•˜ëŠ” ì‹œê°„ì„ ê°–ìœ¼ë©´ ì¢‹ì„ê²ƒê°™ë„¤ìš”ğŸ˜</p>
<br>

<!-- toc -->

<br>

<h2 id="How-strands-work-and-why-you-should-use-them"><a href="#How-strands-work-and-why-you-should-use-them" class="headerlink" title="How strands work and why you should use them"></a>How strands work and why you should use them</h2><p>ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ Boost Asioë¥¼ ì‚¬ìš©í•´ë³¸ì ì´ ìˆë‹¤ë©´, í‹€ë¦¼ì—†ì´ <a href="https://www.boost.org/doc/libs/1_83_0/doc/html/boost_asio/overview/core/strands.html">strands</a> ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•´ë´¤ê±°ë‚˜ ìµœì†Œí•œ ë§ˆì£¼ì¹˜ê¸°ë¼ë„ í•´ë´¤ì„ ê²ƒì…ë‹ˆë‹¤.</p>
<blockquote>
<p>If you ever used Boost Asio, certainly you used or at least looked at <a href="https://www.boost.org/doc/libs/1_83_0/doc/html/boost_asio/overview/core/strands.html">strands</a>.</p>
</blockquote>
<p>strands ì‚¬ìš©ì„ í†µí•´ ì–»ì„ ìˆ˜ ìˆëŠ” ì£¼ìš”í•œ ì´ì ì€ ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë‹¨ìˆœí™”í•´ì¤€ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ìˆœí™”ëŠ” strandë¥¼ í†µí•´ ì‹¤í–‰ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ëŒ€í•´ì„œëŠ” ëª…ì‹œì ì¸ ë™ê¸°í™”ê°€ í•„ìš”í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— ê°€ëŠ¥í•©ë‹ˆë‹¤. strandëŠ” 2ê°œì˜ í•¸ë“¤ëŸ¬ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ì§€ì•ŠìŒì„ ë³´ì¥í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>The main benefit of using strands is to simplify your code, since handlers that go through a strand donâ€™t need explicit synchronization. A strand guarantees that no two handlers execute concurrently.</p>
</blockquote>
<p>ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ ë‹¨ì§€ í•˜ë‚˜ì˜ I/O ì“°ë ˆë“œ(boost ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸¡ë©´ì—ì„œ ì„¤ëª…í•˜ìë©´ io_context::run()ì„ í˜¸ì¶œí•˜ëŠ” ì“°ë ˆë“œê°€ ì˜¤ì§ í•˜ë‚˜ì¸ ê²½ìš°ë¥¼ ì˜ë¯¸í•¨)ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ë™ê¸°í™”ë¥¼ ê±±ì •í•  í•„ìš”ê°€ ì „í˜€ ì—†ìŠµë‹ˆë‹¤. ê·¸ê²ƒì´ ì´ë¯¸ ì•”ë¬µì ì¸ strandì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì—¬ëŸ¬ë¶„ì´ ë” ë§ì€ I/O ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ìˆœê°„ì´ ì˜¨ë‹¤ë©´ I/O ì“°ë ˆë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ëŒ€í•´ ëª…ì‹œì ì¸ ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•˜ê±°ë‚˜ strandsë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p>
<blockquote>
<p>If you use just one I/O thread (or in Boost terms, just one thread calling io_context::run), then you donâ€™t need synchronization anyway. That is already an implicit strand. But the moment you want to ramp up and have more I/O threads, you need to either deal with explicit synchronization for your handlers, or use strands.</p>
</blockquote>
<p>ì—¬ëŸ¬ë¶„ì´ ì •ì˜í•œ í•¸ë“¤ëŸ¬ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë™ê¸°í™”í•˜ëŠ” ê²ƒì€ ëª…ë°±íˆ ê°€ëŠ¥í•œ ì¼ì´ì§€ë§Œ ì´ê²ƒì€ ë¶ˆí•„ìš”í•˜ê²Œ ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œì— ë³µì¡ì„±ì„ ë¶€ì—¬í•˜ì—¬ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì˜ ëª…ì‹œì  ë™ê¸°í™”ê°€ ê°–ëŠ” ë˜ ë‹¤ë¥¸ ì˜í–¥ë„ ì¤‘ í•˜ë‚˜ëŠ” ì—¬ëŸ¬ë¶„ì´ ì •ë§ ì‹ ì¤‘í•˜ê²Œ ê³ ë ¤í•˜ì§€ ì•ŠëŠ” ì´ìƒ ë¶ˆí•„ìš”í•œ ë¸”ë¡ êµ¬ê°„ì˜ ë°œìƒì´ ë¶ˆê°€í”¼í•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>Explicitly synchronizing your handlers is certainly possible, but you will be unnecessarily introducing complexity to your code which will certainly lead to bugs. One other effect of explicit handler synchronization is that unless you think really hard, youâ€™ll very likely introduce unnecessary blocking.</p>
</blockquote>
<p>strandsëŠ” ì—¬ëŸ¬ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œì™€ í•¸ë“¤ëŸ¬ì˜ ì‹¤í–‰ ì‚¬ì´ì— ë˜ ë‹¤ë¥¸ ê³„ì¸µì„ í•˜ë‚˜ ë‘ ìœ¼ë¡œì¨ ë™ì‘í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ í•¸ë“¤ëŸ¬ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” worker ì“°ë ˆë“œë“¤ì„ ê°–ëŠ” ëŒ€ì‹ ì—, ì´ëŸ¬í•œ í•¸ë“¤ëŸ¬ë“¤ì´ strand ë‚´ì˜ íì— ì €ì¥ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³ ë‚˜ì„œ strandëŠ” ëª¨ë“  ì¡°ê±´ì´ ì¶©ì¡±ë˜ì—ˆì„ ë•Œì—ë§Œ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ì œì–´ ê¶Œí•œì„ ê°–ê²Œë©ë‹ˆë‹¤.</p>
<blockquote>
<p>Strands work by introducing another layer between your application code and the handler execution. Instead of having the worker threads directly execute your handlers, those handlers are queued in a strand. The strand then has control over when executing the handlers so that all guarantees can be met.</p>
</blockquote>
<p>ì´ê²ƒì— ëŒ€í•´ ìƒê°í•´ë³¼ ìˆ˜ ìˆëŠ” í•œê°€ì§€ ë°©ë²•ì€ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>One way you can think about is like this:</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-1.png" alt=""></div>

<h3 id="Possible-scenario"><a href="#Possible-scenario" class="headerlink" title="Possible scenario"></a>Possible scenario</h3><p>I/O ì“°ë ˆë“œì™€ í•¸ë“¤ëŸ¬ì— ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ <a href="https://github.com/Celtoys/Remotery">Remotry</a>ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>To visually demonstrate what happens with the I/O threads and handlers, Iâ€™ve used <a href="https://github.com/Celtoys/Remotery">Remotery</a>.</p>
</blockquote>
<p>ì‚¬ìš©ë˜ëŠ” ì½”ë“œëŠ” 4ê°œì˜ worker ì“°ë ˆë“œì™€ 8ê°œì˜ connectionì„ ì—ë®¬ë ˆì´íŠ¸í•©ë‹ˆë‹¤. 5ms ~ 15ms ì‚¬ì´ì˜ ì„ì˜ì˜ ì‘ì—…ëŸ‰ì„ ê°–ëŠ” í•¸ë“¤ëŸ¬(ì¼ì¢…ì˜ ì‘ì—… í•­ëª©)ëŠ” worker íì— ë†“ì´ê²Œë©ë‹ˆë‹¤. ì‹¤ì œë¡œ ì—¬ëŸ¬ë¶„ì´ ì´ëŸ¬í•œ ì»¤ë„¥ì…˜ë³„ ì“°ë ˆë“œë¹„ìœ¨ ë˜ëŠ” í•¸ë“¤ëŸ¬ ì‘ì—…ëŸ‰ì„ ê°–ì§€ì•Šë”ë¼ë„ í•´ë‹¹ ìˆ˜ì¹˜ë“¤ì€ ë¬¸ì œë¥¼ ë³´ì—¬ì£¼ê¸°ì— ìš©ì´í•©ë‹ˆë‹¤. ë˜í•œ ì €ëŠ” Boost Asio ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ê³ , í•´ë‹¹ ê¸€ì˜ ì£¼ì œë¥¼ ë…¼ì˜í•´ë‚˜ê°€ê¸° ìœ„í•´ ìì²´ì ìœ¼ë¡œ strandë¥¼ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>The code used emulates 4 worker threads, and 8 connections. Handlers (aka work items) with a random workload of [5ms,15ms] for a random connection are placed in the worker queue. In practice, you would not have this threads/connections ratio or handler workload, but it makes it easier to demonstrate the problem. Also, Iâ€™m not using Boost Asio at all. Itâ€™s a custom strand implementation to explore the topic.</p>
</blockquote>
<p>ì•„ë˜ ê·¸ë¦¼ì€ worker ì“°ë ˆë“œë“¤ì˜ ìƒíƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤:</p>
<blockquote>
<p>So, a view into the worker threads:</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-2.png" alt=""></div>

<p><code>Conn N</code>ì€ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤(ë˜ëŠ” worker ì“°ë ˆë“œ ìƒì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì–´ë– í•œ ê°ì²´). ê°ê°ì˜ ì»¤ë„¥ì…˜ ê°ì²´ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìƒ‰ìƒì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤. ë³´ì‹œë‹¤ì‹œí”¼ ê²‰ë³´ê¸°ì—ëŠ” ê´œì°®ì•„ ë³´ì…ë‹ˆë‹¤. ì´ì œ ê°ê°ì˜ Conn ê°ì²´ì˜ ì‹¤ì§ì ì¸ ìƒíƒœë¥¼ ì‹œë¶„í•  ë‹¨ìœ„ë¡œ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Conn N are our connection objects (or any object doing work in our worker threads for that matter). Each has a distinct colour. All good on the surface as you can see. Now lets look at what each Conn object is actually doing with its time slice.</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-3.png" alt=""></div>

<p>worker íì™€ ì“°ë ˆë“œëŠ” í•¸ë“¤ëŸ¬ê°€ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì„ ì¸ì§€í•˜ì§€ ëª»í•˜ê¸°ë•Œë¬¸ì—ì„œ worker ì“°ë ˆë“œëŠ” ì²˜ë¦¬í•  ì»¤ë„¥ì…˜ ê°ì²´ê°€ ë“¤ì–´ì˜¤ëŠ” ìˆœê°„ ê¸°êº¼ì´ íì—ì„œ êº¼ë‚´ë ¤ í•  ê²ƒì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ ì“°ë ˆë“œì—ì„œ ë˜ ë‹¤ë¥¸ worker ì“°ë ˆë“œì—ì„œ ì´ë¯¸ ì‚¬ìš©ë˜ê³  ìˆëŠ” ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ì‹¤í–‰í•˜ë ¤ê³  í•  ë•Œ, ê·¸ê²ƒì€ block ìƒíƒœì— ë†“ì´ê²Œë  ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ì˜ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ì „ì²´ ì‹œê°„ì˜ ì•½ 19% ì •ë„ê°€ block ìƒíƒœ ë˜ëŠ” ë˜ ë‹¤ë¥¸ ì˜¤ë²„ í—¤ë“œë¡œ ì¸í•´ ë‚­ë¹„ë˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, ì‹¤ì§ˆì ìœ¼ë¡œ worker ì“°ë ˆë“œê°€ ì‘ì—…ì— í• ë‹¹í•˜ëŠ” ì‹œê°„ì´ ì „ì²´ì˜ ì•½ 81% ë¿ì´ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤:</p>
<blockquote>
<p>What is happening is the worker queue and worker threads are oblivious to what its handlers do (as expected), so the worker threads will happily dequeue work as it comes. One thread tries to execute work for a given Conn object which is already being used in another worker thread, so it has to block. In this scenario, ~19% of total time is wasted with blocking or other overhead. In other words, only ~81% of the worker threadâ€™s time is spent doing actual work:</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-4.png" alt=""></div>

<p>ì˜¤ë²„ í—¤ë“œëŠ” worker ì“°ë ˆë“œ ì „ì²´ ì‹œê°„ì—ì„œ ì‹¤ì œ ì‘ì—… ì‹œê°„ì„ ëº€ ê°’ìœ¼ë¡œ ì¸¡ì •ë©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— í•¸ë“¤ëŸ¬ ë‚´ì˜ ëª…ì‹œì ì¸ ë™ê¸°í™” ê·¸ë¦¬ê³  worker í/ì“°ë ˆë“œ ë‚´ë¶€ì ìœ¼ë¡œ ìˆ˜í–‰ëœ ëª¨ë“  ë™ê¸°í™” ì‘ì—…ë“¤ì´ ì´ ì˜¤ë²„ í—¤ë“œì— í¬í•¨ë©ë‹ˆë‹¤.</p>
<blockquote>
<p>NOTE: The overhead was measured by subtracting actual work time from the total worker threadâ€™s time. So it accounts for explicit synchronization in the handlers and any work/synchronization done internally by the worker queue/threads.</p>
</blockquote>
<p>ì´ì œ ì»¤ë„¥ì…˜ ê°ì²´ì˜ ì‘ì—…ì„ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ strandsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì˜ ìƒíƒœ ê°’ì„ ì‚´í´ë´…ì‹œë‹¤.</p>
<blockquote>
<p>Lets see how it looks like if we use strands to serialize work for our Conn objects:</p>
</blockquote>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-5.png" alt=""></div>

<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-6.png" alt=""></div>

<p>ë‚´ë¶€ ì‘ì—… ë˜ëŠ” ë™ê¸°í™”ì— ë‚­ë¹„ë˜ëŠ” ì‹œê°„ì´ ë§¤ìš° ì‘ë‹¤ëŠ”ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Very little time is wasted with internal work or synchronization.</p>
</blockquote>
<br>

<h3 id="Cache-locality"><a href="#Cache-locality" class="headerlink" title="Cache locality"></a>Cache locality</h3><p>strandsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì–»ì„ ìˆ˜ ìˆëŠ” ë˜ í•˜ë‚˜ì˜ ì‘ì€ ì´ì ì€ ë” ë‚˜ì€ CPU ìºì‹œ í™œìš©ì…ë‹ˆë‹¤. worker ì“°ë ˆë“œëŠ” ë˜ ë‹¤ë¥¸ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ ê°€ì§€ê³  ì˜¤ê¸° ì „ì— í˜„ì¬ ì£¼ì–´ì§„ ì»¤ë„¥ì…˜ ê°ì²´ì˜ í•¸ë“¤ëŸ¬ë¥¼ ë” ë§ì´ ì‹¤í–‰í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>
<blockquote>
<p>Another possible small benefit with this scenario is better CPU cache utilization. Worker threads will tend to execute a few handlers for a given Conn object before grabbing another Conn object.</p>
</blockquote>
<p>Zoomed out, without strands</p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-7.png" alt=""></div>

<p>Zoomed out, with strands<br>(ê°ê°ì˜ ì“°ë ˆë“œì— ë”°ë¼ ë™ì¼í•œ ë²ˆí˜¸ì˜ ì»¤ë„¥ì…˜ ê°ì²´ì˜ ì‘ì—… ìˆ˜í–‰ì´ ë°€ì§‘ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ)</p>
<div class="figure " style="width:;"><img class="fig-img" src="/assets/images/what-is-strand-figure-8.png" alt=""></div>

<br>

<h2 id="ì˜ˆì œ-ì½”ë“œ"><a href="#ì˜ˆì œ-ì½”ë“œ" class="headerlink" title="ì˜ˆì œ ì½”ë“œ"></a>ì˜ˆì œ ì½”ë“œ</h2><p>ì‹¤ì œ ì˜ˆì œ ì½”ë“œë¥¼ í†µí•´ì„œ strandì˜ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì œëŠ” Nê°œ(1, 2, 4, 8, 16)ì˜ ì“°ë ˆë“œì—ì„œ ê°ê° ì „ì—­ ë³€ìˆ˜ì¸ sumì— 2ì”© ë”í•˜ëŠ” ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë©°, sumì˜ ëˆ„ì  í•©ì´ 1ì–µì´ ì¶œë ¥ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³ ì í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.<br>ì“°ë ˆë“œê°€ 1ê°œ(N=1)ì¸ ìƒí™©ì—ì„œ sumì´ 1ì–µì´ ë˜ê¸°ìœ„í•´ì„œëŠ” 2ì”© ë”í•˜ëŠ” ì—°ì‚°ì´ ì´ 50000000ë²ˆ ë°˜ë³µë¼ì•¼í•˜ë©° ì“°ë ˆë“œë¥¼ 16ê°œ(N=16)ê¹Œì§€ ëŠ˜ë¦°ë‹¤ë©´ í•´ë‹¹ ì—°ì‚°ì€ 3125000ë²ˆ ë°˜ë³µë˜ë©´ ë©ë‹ˆë‹¤.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread/detail/thread_group.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">thread_func</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">thread_func</span>(<span class="keyword">int</span> idx, boost::asio::io_context&amp; ctx) : <span class="built_in">idx_</span>(idx), <span class="built_in">ctx_</span>(ctx)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        std::ostringstream oss;</span><br><span class="line">        oss &lt;&lt; std::this_thread::<span class="built_in">get_id</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;io_context::run #%d thread [%s]\n&quot;</span>, idx_, oss.<span class="built_in">str</span>().<span class="built_in">c_str</span>());</span><br><span class="line">        ctx_.<span class="built_in">run</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> idx_;</span><br><span class="line">    boost::asio::io_context&amp; ctx_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_sum_to_100_million_without_strand</span><span class="params">(<span class="keyword">int</span> thread_count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    boost::asio::io_context ctx;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> loop_count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (thread_count)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        loop_count = <span class="number">50000000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        loop_count = <span class="number">25000000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        loop_count = <span class="number">12500000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">        loop_count = <span class="number">6250000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">        loop_count = <span class="number">3125000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// no strand</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; thread_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        boost::asio::<span class="built_in">post</span>(ctx, [&amp;]()&#123;</span><br><span class="line">            std::ostringstream oss;</span><br><span class="line">            oss &lt;&lt; std::this_thread::<span class="built_in">get_id</span>();</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;hello boost::asio::post in io_context [%s]\n&quot;</span>, oss.<span class="built_in">str</span>().<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; loop_count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    boost::thread_group tg;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; thread_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        tg.<span class="built_in">create_thread</span>(<span class="built_in">thread_func</span>(i+<span class="number">1</span>, ctx));</span><br><span class="line">    &#125;</span><br><span class="line">    tg.<span class="built_in">join_all</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[make_sum_to_100_million_without_strand, %d thread] sum : %d\n&quot;</span>, thread_count, sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> thread_count = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">make_sum_to_100_million_without_strand</span>(thread_count)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ì‹¤í–‰ê²°ê³¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[make_sum_to_100_million_without_strand, 2 thread] sum : 50614948</span><br></pre></td></tr></table></figure>
<p>(ìœ„ ì˜ˆì‹œì˜ ê²½ìš°ì—ëŠ” 2ê°œì˜ ì“°ë ˆë“œì—ì„œ)í•¸ë“¤ëŸ¬ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” 1ì–µì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ì§€ ì•ŠìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ì ‘ê·¼í•˜ëŠ” ë³€ìˆ˜ì— ëŒ€í•œ ëª…ì‹œì ì¸ ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë‹¹ì—°í•œ ê²°ê³¼ì…ë‹ˆë‹¤.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread/detail/thread_group.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">thread_func</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">thread_func</span>(<span class="keyword">int</span> idx, boost::asio::io_context&amp; ctx) : <span class="built_in">idx_</span>(idx), <span class="built_in">ctx_</span>(ctx)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        std::ostringstream oss;</span><br><span class="line">        oss &lt;&lt; std::this_thread::<span class="built_in">get_id</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;io_context::run #%d thread [%s]\n&quot;</span>, idx_, oss.<span class="built_in">str</span>().<span class="built_in">c_str</span>());</span><br><span class="line">        ctx_.<span class="built_in">run</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> idx_;</span><br><span class="line">    boost::asio::io_context&amp; ctx_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_sum_to_100_million_with_strand</span><span class="params">(<span class="keyword">int</span> thread_count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    boost::asio::io_context ctx;</span><br><span class="line">    boost::asio::<span class="function">io_context::strand <span class="title">strand</span><span class="params">(ctx)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> loop_count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (thread_count)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        loop_count = <span class="number">50000000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        loop_count = <span class="number">25000000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        loop_count = <span class="number">12500000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">        loop_count = <span class="number">6250000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">        loop_count = <span class="number">3125000</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// strand</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; thread_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        boost::asio::<span class="built_in">post</span>(strand.<span class="built_in">wrap</span>([&amp;]()&#123;</span><br><span class="line">            std::ostringstream oss;</span><br><span class="line">            oss &lt;&lt; std::this_thread::<span class="built_in">get_id</span>();</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;hello boost::asio::post in io_context [%s]\n&quot;</span>, oss.<span class="built_in">str</span>().<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; loop_count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                sum += <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    boost::thread_group tg;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; thread_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        tg.<span class="built_in">create_thread</span>(<span class="built_in">thread_func</span>(i+<span class="number">1</span>, ctx));</span><br><span class="line">    &#125;</span><br><span class="line">    tg.<span class="built_in">join_all</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[make_sum_to_100_million_with_strand, %d thread] sum : %d\n&quot;</span>, thread_count, sum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> thread_count = <span class="number">16</span>;</span><br><span class="line">    <span class="built_in">make_sum_to_100_million_with_strand</span>(thread_count);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ì‹¤í–‰ê²°ê³¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[make_sum_to_100_million_with_strand, 16 thread] sum : 100000000</span><br></pre></td></tr></table></figure>
<p>(ìœ„ ì˜ˆì‹œì˜ ê²½ìš°ì—ëŠ” 16ê°œì˜ ì“°ë ˆë“œì—ì„œ) boost strandë¥¼ ì‚¬ìš©í•˜ì—¬ í•¸ë“¤ëŸ¬ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰(ì „ì—­ ë³€ìˆ˜ì¸ sumì— ì ‘ê·¼í•˜ëŠ” í•¸ë“¤ëŸ¬ê°€ ë™ì‹œì— ì‹¤í–‰ë˜ì§€ ì•ŠìŒì„ ë³´ì¥)í•˜ì˜€ê¸°ë•Œë¬¸ì— 1ì–µì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<br>

<h2 id="ë§ˆì¹˜ë©°"><a href="#ë§ˆì¹˜ë©°" class="headerlink" title="ë§ˆì¹˜ë©°"></a>ë§ˆì¹˜ë©°</h2><ul>
<li>I/O threadê°€ 1ê°œì¸ ê²½ìš°(ì¦‰, io_context::run() í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì“°ë ˆë“œê°€ 1ê°œì¸ ê²½ìš°)ì—ëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ ì“°ë ˆë“œì—ì„œë§Œ í•¸ë“¤ëŸ¬ê°€ í˜¸ì¶œë˜ë¯€ë¡œ ë™ê¸°í™”ë¼ëŠ”ê²Œ í•„ìš”ì—†ìŒ.</li>
<li>2ê°œ ì´ìƒì˜ I/O thread(ì¦‰, io_context::run() í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì“°ë ˆë“œê°€ 2ê°œ ì´ìƒì¸ ê²½ìš°)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” í•¸ë“¤ëŸ¬ë¥¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ ëª…ì‹œì ì¸ Lockì´ í•„ìš”í•¨.</li>
<li>ì´ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ê²Œ boost::asio::strand! í•¸ë“¤ëŸ¬ ë‚´ë¶€ì—ì„œ ë™ê¸°í™”ë¥¼ ìœ„í•œ ì‘ì—…ì„ ë”°ë¡œ í•´ì¤„í•„ìš”ê°€ ì—†ë‹¤!</li>
</ul>
<br>
<br>

<span class="highlight-text yellow">í•´ë‹¹ ê²Œì‹œê¸€ì—ì„œ ë°œìƒí•œ ì˜¤íƒˆìë‚˜ ì˜ëª»ëœ ë‚´ìš©ì— ëŒ€í•œ ì •ì • ëŒ“ê¸€ ê²©í•˜ê²Œ í™˜ì˜í•©ë‹ˆë‹¤</span>ğŸ˜

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://www.crazygaze.com/blog/2016/03/17/how-strands-work-and-why-you-should-use-them/">https://www.crazygaze.com/blog/2016/03/17/how-strands-work-and-why-you-should-use-them/</a></li>
</ul>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>strands</tag>
        <tag>boost strand</tag>
        <tag>synchronization</tag>
        <tag>handler sync</tag>
      </tags>
  </entry>
  <entry>
    <title>ìì£¼ ì‚¬ìš©í•˜ì§„ ì•ŠëŠ”ë° í•„ìš”í•  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ê²€ìƒ‰í•´ì„œ ì°¾ì•„ë´ì•¼í•˜ëŠ” git ëª…ë ¹ì–´</title>
    <url>/2024/10/27/tip-for-git-command/</url>
    <content><![CDATA[<p><escape><span id="more"></span></escape></p>
<!-- toc -->
<br>

<h3 id="1-ë‹¤ë¥¸-ë¸Œëœì¹˜ì—-ìˆëŠ”-ì»¤ë°‹-ë‚´ìš©ì„-ê°€ì ¸ì˜¤ê¸°"><a href="#1-ë‹¤ë¥¸-ë¸Œëœì¹˜ì—-ìˆëŠ”-ì»¤ë°‹-ë‚´ìš©ì„-ê°€ì ¸ì˜¤ê¸°" class="headerlink" title="1. ë‹¤ë¥¸ ë¸Œëœì¹˜ì— ìˆëŠ” ì»¤ë°‹ ë‚´ìš©ì„ ê°€ì ¸ì˜¤ê¸°"></a>1. ë‹¤ë¥¸ ë¸Œëœì¹˜ì— ìˆëŠ” ì»¤ë°‹ ë‚´ìš©ì„ ê°€ì ¸ì˜¤ê¸°</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git checkout &#123;ì»¤ë°‹ ë‚´ìš©ì„ ì¶”ê°€í•  ë¸Œëœì¹˜&#125;</span><br><span class="line">$ git cherry-pick &#123;ì»¤ë°‹ë²ˆí˜¸&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="2-Git-ì›ê²©-ì €ì¥ì†Œ-ì£¼ì†Œ-ë³€ê²½"><a href="#2-Git-ì›ê²©-ì €ì¥ì†Œ-ì£¼ì†Œ-ë³€ê²½" class="headerlink" title="2. Git ì›ê²© ì €ì¥ì†Œ ì£¼ì†Œ ë³€ê²½"></a>2. Git ì›ê²© ì €ì¥ì†Œ ì£¼ì†Œ ë³€ê²½</h3><ul>
<li><p>ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ í˜„ì¬ remote ì£¼ì†Œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git remote -v</span><br></pre></td></tr></table></figure></li>
<li><p>ì›ê²© ì €ì¥ì†Œ ì£¼ì†Œë¥¼ ë³€ê²½í•˜ëŠ” ì»¤ë§¨ë“œëŠ” ì•„ë˜ì™€ ê°™ìŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git remote set-url origin &#123;ë³€ê²½í• repoì£¼ì†Œ&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<br>

<h3 id="3-ì½”ë“œ-ìˆ˜ì •-ë‚´ì—­-í™•ì¸í•˜ê¸°"><a href="#3-ì½”ë“œ-ìˆ˜ì •-ë‚´ì—­-í™•ì¸í•˜ê¸°" class="headerlink" title="3. ì½”ë“œ ìˆ˜ì • ë‚´ì—­ í™•ì¸í•˜ê¸°"></a>3. ì½”ë“œ ìˆ˜ì • ë‚´ì—­ í™•ì¸í•˜ê¸°</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git blame &#123;íŒŒì¼ëª…&#125;</span><br><span class="line">$ git blame -L ì‹œì‘ë¼ì¸ë²ˆí˜¸,ì¢…ë£Œë¼ì¸ë²ˆí˜¸ &#123;íŒŒì¼ëª…&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ íŠ¹ì • ì»¤ë°‹ì˜ ì„¸ë¶€ ë³€ê²½ ì‚¬í•­ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git show &#123;ì»¤ë°‹ë²ˆí˜¸&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<br>

<h3 id="4-commitì—†ì´-ë³€ê²½-ì‚¬í•­-ì„ì‹œ-ì €ì¥í•˜ê¸°"><a href="#4-commitì—†ì´-ë³€ê²½-ì‚¬í•­-ì„ì‹œ-ì €ì¥í•˜ê¸°" class="headerlink" title="4. commitì—†ì´ ë³€ê²½ ì‚¬í•­ ì„ì‹œ ì €ì¥í•˜ê¸°"></a>4. commitì—†ì´ ë³€ê²½ ì‚¬í•­ ì„ì‹œ ì €ì¥í•˜ê¸°</h3><ul>
<li><p>ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ í˜„ì¬ ë¸Œëœì¹˜ì˜ ë³€ê²½ ì‚¬í•­ì„ ì„ì‹œ ì €ì¥í•  ìˆ˜ ìˆìŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git stash</span><br></pre></td></tr></table></figure></li>
<li><p>ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ í˜„ì¬ stash ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: WIP on feature/add_wkloggerimpl: 917106b1 Merge branch &#x27;fix/edlpinterface_segfault&#x27; into &#x27;dist&#x27;</span><br></pre></td></tr></table></figure></li>
<li><p>ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ ì„ì‹œ ì €ì¥ëœ ë³€ê²½ ì‚¬í•­ì„ ë¸Œëœì¹˜ì— ë‹¤ì‹œ ë°˜ì˜í•  ìˆ˜ ìˆìŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git stash pop stash@&#123;0&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<br>

<p><strong>Reference</strong></p>
<ul>
<li><a href="https://git-scm.com/docs">https://git-scm.com/docs</a></li>
</ul>
]]></content>
      <categories>
        <category>ìœ ìš©í•œ íŒ</category>
      </categories>
      <tags>
        <tag>git command</tag>
        <tag>git stash</tag>
        <tag>git cherry-pick</tag>
        <tag>git blame</tag>
        <tag>git remote</tag>
      </tags>
  </entry>
</search>
